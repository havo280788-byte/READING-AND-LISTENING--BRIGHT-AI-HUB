var WT=Object.defineProperty;var XT=(n,e,t)=>e in n?WT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Zn=(n,e,t)=>XT(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var lO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Og={exports:{}},yh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function QT(){if(H2)return yh;H2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return yh.Fragment=e,yh.jsx=t,yh.jsxs=t,yh}var z2;function ZT(){return z2||(z2=1,Og.exports=QT()),Og.exports}var T=ZT(),Fg={exports:{}},on={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function eN(){if(G2)return on;G2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function x(ne){return ne===null||typeof ne!="object"?null:(ne=S&&ne[S]||ne["@@iterator"],typeof ne=="function"?ne:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,B={};function q(ne,U,J){this.props=ne,this.context=U,this.refs=B,this.updater=J||D}q.prototype.isReactComponent={},q.prototype.setState=function(ne,U){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,U,"setState")},q.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function X(){}X.prototype=q.prototype;function Z(ne,U,J){this.props=ne,this.context=U,this.refs=B,this.updater=J||D}var W=Z.prototype=new X;W.constructor=Z,O(W,q.prototype),W.isPureReactComponent=!0;var ye=Array.isArray;function de(){}var G={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function L(ne,U,J){var ie=J.ref;return{$$typeof:n,type:ne,key:U,ref:ie!==void 0?ie:null,props:J}}function j(ne,U){return L(ne.type,U,ne.props)}function I(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===n}function k(ne){var U={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(J){return U[J]})}var F=/\/+/g;function ce(ne,U){return typeof ne=="object"&&ne!==null&&ne.key!=null?k(""+ne.key):U.toString(36)}function Te(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(de,de):(ne.status="pending",ne.then(function(U){ne.status==="pending"&&(ne.status="fulfilled",ne.value=U)},function(U){ne.status==="pending"&&(ne.status="rejected",ne.reason=U)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function le(ne,U,J,ie,fe){var me=typeof ne;(me==="undefined"||me==="boolean")&&(ne=null);var Ee=!1;if(ne===null)Ee=!0;else switch(me){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(ne.$$typeof){case n:case e:Ee=!0;break;case p:return Ee=ne._init,le(Ee(ne._payload),U,J,ie,fe)}}if(Ee)return fe=fe(ne),Ee=ie===""?"."+ce(ne,0):ie,ye(fe)?(J="",Ee!=null&&(J=Ee.replace(F,"$&/")+"/"),le(fe,U,J,"",function($e){return $e})):fe!=null&&(I(fe)&&(fe=j(fe,J+(fe.key==null||ne&&ne.key===fe.key?"":(""+fe.key).replace(F,"$&/")+"/")+Ee)),U.push(fe)),1;Ee=0;var Pe=ie===""?".":ie+":";if(ye(ne))for(var Me=0;Me<ne.length;Me++)ie=ne[Me],me=Pe+ce(ie,Me),Ee+=le(ie,U,J,me,fe);else if(Me=x(ne),typeof Me=="function")for(ne=Me.call(ne),Me=0;!(ie=ne.next()).done;)ie=ie.value,me=Pe+ce(ie,Me++),Ee+=le(ie,U,J,me,fe);else if(me==="object"){if(typeof ne.then=="function")return le(Te(ne),U,J,ie,fe);throw U=String(ne),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function ue(ne,U,J){if(ne==null)return ne;var ie=[],fe=0;return le(ne,ie,"","",function(me){return U.call(J,me,fe++)}),ie}function ve(ne){if(ne._status===-1){var U=ne._result;U=U(),U.then(function(J){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=J)},function(J){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=J)}),ne._status===-1&&(ne._status=0,ne._result=U)}if(ne._status===1)return ne._result.default;throw ne._result}var we=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},We={map:ue,forEach:function(ne,U,J){ue(ne,function(){U.apply(this,arguments)},J)},count:function(ne){var U=0;return ue(ne,function(){U++}),U},toArray:function(ne){return ue(ne,function(U){return U})||[]},only:function(ne){if(!I(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return on.Activity=b,on.Children=We,on.Component=q,on.Fragment=t,on.Profiler=r,on.PureComponent=Z,on.StrictMode=i,on.Suspense=h,on.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,on.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return G.H.useMemoCache(ne)}},on.cache=function(ne){return function(){return ne.apply(null,arguments)}},on.cacheSignal=function(){return null},on.cloneElement=function(ne,U,J){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var ie=O({},ne.props),fe=ne.key;if(U!=null)for(me in U.key!==void 0&&(fe=""+U.key),U)!V.call(U,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&U.ref===void 0||(ie[me]=U[me]);var me=arguments.length-2;if(me===1)ie.children=J;else if(1<me){for(var Ee=Array(me),Pe=0;Pe<me;Pe++)Ee[Pe]=arguments[Pe+2];ie.children=Ee}return L(ne.type,fe,ie)},on.createContext=function(ne){return ne={$$typeof:l,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:o,_context:ne},ne},on.createElement=function(ne,U,J){var ie,fe={},me=null;if(U!=null)for(ie in U.key!==void 0&&(me=""+U.key),U)V.call(U,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(fe[ie]=U[ie]);var Ee=arguments.length-2;if(Ee===1)fe.children=J;else if(1<Ee){for(var Pe=Array(Ee),Me=0;Me<Ee;Me++)Pe[Me]=arguments[Me+2];fe.children=Pe}if(ne&&ne.defaultProps)for(ie in Ee=ne.defaultProps,Ee)fe[ie]===void 0&&(fe[ie]=Ee[ie]);return L(ne,me,fe)},on.createRef=function(){return{current:null}},on.forwardRef=function(ne){return{$$typeof:c,render:ne}},on.isValidElement=I,on.lazy=function(ne){return{$$typeof:p,_payload:{_status:-1,_result:ne},_init:ve}},on.memo=function(ne,U){return{$$typeof:f,type:ne,compare:U===void 0?null:U}},on.startTransition=function(ne){var U=G.T,J={};G.T=J;try{var ie=ne(),fe=G.S;fe!==null&&fe(J,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(de,we)}catch(me){we(me)}finally{U!==null&&J.types!==null&&(U.types=J.types),G.T=U}},on.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},on.use=function(ne){return G.H.use(ne)},on.useActionState=function(ne,U,J){return G.H.useActionState(ne,U,J)},on.useCallback=function(ne,U){return G.H.useCallback(ne,U)},on.useContext=function(ne){return G.H.useContext(ne)},on.useDebugValue=function(){},on.useDeferredValue=function(ne,U){return G.H.useDeferredValue(ne,U)},on.useEffect=function(ne,U){return G.H.useEffect(ne,U)},on.useEffectEvent=function(ne){return G.H.useEffectEvent(ne)},on.useId=function(){return G.H.useId()},on.useImperativeHandle=function(ne,U,J){return G.H.useImperativeHandle(ne,U,J)},on.useInsertionEffect=function(ne,U){return G.H.useInsertionEffect(ne,U)},on.useLayoutEffect=function(ne,U){return G.H.useLayoutEffect(ne,U)},on.useMemo=function(ne,U){return G.H.useMemo(ne,U)},on.useOptimistic=function(ne,U){return G.H.useOptimistic(ne,U)},on.useReducer=function(ne,U,J){return G.H.useReducer(ne,U,J)},on.useRef=function(ne){return G.H.useRef(ne)},on.useState=function(ne){return G.H.useState(ne)},on.useSyncExternalStore=function(ne,U,J){return G.H.useSyncExternalStore(ne,U,J)},on.useTransition=function(){return G.H.useTransition()},on.version="19.2.4",on}var j2;function C1(){return j2||(j2=1,Fg.exports=eN()),Fg.exports}var Nt=C1();const tN=N1(Nt);var Vg={exports:{}},vh={},Bg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function nN(){return $2||($2=1,(function(n){function e(le,ue){var ve=le.length;le.push(ue);e:for(;0<ve;){var we=ve-1>>>1,We=le[we];if(0<r(We,ue))le[we]=ue,le[ve]=We,ve=we;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var ue=le[0],ve=le.pop();if(ve!==ue){le[0]=ve;e:for(var we=0,We=le.length,ne=We>>>1;we<ne;){var U=2*(we+1)-1,J=le[U],ie=U+1,fe=le[ie];if(0>r(J,ve))ie<We&&0>r(fe,J)?(le[we]=fe,le[ie]=ve,we=ie):(le[we]=J,le[U]=ve,we=U);else if(ie<We&&0>r(fe,ve))le[we]=fe,le[ie]=ve,we=ie;else break e}}return ue}function r(le,ue){var ve=le.sortIndex-ue.sortIndex;return ve!==0?ve:le.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],p=1,b=null,S=3,x=!1,D=!1,O=!1,B=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function W(le){for(var ue=t(f);ue!==null;){if(ue.callback===null)i(f);else if(ue.startTime<=le)i(f),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=t(f)}}function ye(le){if(O=!1,W(le),!D)if(t(h)!==null)D=!0,de||(de=!0,k());else{var ue=t(f);ue!==null&&Te(ye,ue.startTime-le)}}var de=!1,G=-1,V=5,L=-1;function j(){return B?!0:!(n.unstable_now()-L<V)}function I(){if(B=!1,de){var le=n.unstable_now();L=le;var ue=!0;try{e:{D=!1,O&&(O=!1,X(G),G=-1),x=!0;var ve=S;try{t:{for(W(le),b=t(h);b!==null&&!(b.expirationTime>le&&j());){var we=b.callback;if(typeof we=="function"){b.callback=null,S=b.priorityLevel;var We=we(b.expirationTime<=le);if(le=n.unstable_now(),typeof We=="function"){b.callback=We,W(le),ue=!0;break t}b===t(h)&&i(h),W(le)}else i(h);b=t(h)}if(b!==null)ue=!0;else{var ne=t(f);ne!==null&&Te(ye,ne.startTime-le),ue=!1}}break e}finally{b=null,S=ve,x=!1}ue=void 0}}finally{ue?k():de=!1}}}var k;if(typeof Z=="function")k=function(){Z(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ce=F.port2;F.port1.onmessage=I,k=function(){ce.postMessage(null)}}else k=function(){q(I,0)};function Te(le,ue){G=q(function(){le(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(le){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var ve=S;S=ue;try{return le()}finally{S=ve}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(le,ue){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ve=S;S=le;try{return ue()}finally{S=ve}},n.unstable_scheduleCallback=function(le,ue,ve){var we=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?we+ve:we):ve=we,le){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=ve+We,le={id:p++,callback:ue,priorityLevel:le,startTime:ve,expirationTime:We,sortIndex:-1},ve>we?(le.sortIndex=ve,e(f,le),t(h)===null&&le===t(f)&&(O?(X(G),G=-1):O=!0,Te(ye,ve-we))):(le.sortIndex=We,e(h,le),D||x||(D=!0,de||(de=!0,k()))),le},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(le){var ue=S;return function(){var ve=S;S=ue;try{return le.apply(this,arguments)}finally{S=ve}}}})(qg)),qg}var Y2;function iN(){return Y2||(Y2=1,Bg.exports=nN()),Bg.exports}var Hg={exports:{}},ys={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function rN(){if(K2)return ys;K2=1;var n=C1();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,f,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:h,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ys.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},ys.flushSync=function(h){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=p,i.d.f()}},ys.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},ys.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},ys.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,b=c(p,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:x}):p==="script"&&i.d.X(h,{crossOrigin:b,integrity:S,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ys.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},ys.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,b=c(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ys.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},ys.requestFormReset=function(h){i.d.r(h)},ys.unstable_batchedUpdates=function(h,f){return h(f)},ys.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},ys.useFormStatus=function(){return l.H.useHostTransitionStatus()},ys.version="19.2.4",ys}var J2;function sN(){if(J2)return Hg.exports;J2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hg.exports=rN(),Hg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2;function oN(){if(W2)return vh;W2=1;var n=iN(),e=C1(),t=sN();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,d=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(d=_.return,d!==null){u=d;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return h(_),s;if(E===d)return h(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==d.return)u=_,d=E;else{for(var M=!1,K=_.child;K;){if(K===u){M=!0,u=_,d=E;break}if(K===d){M=!0,d=_,u=E;break}K=K.sibling}if(!M){for(K=E.child;K;){if(K===u){M=!0,u=E,d=_;break}if(K===d){M=!0,d=E,u=_;break}K=K.sibling}if(!M)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=I&&s[I]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function ce(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case q:return"Profiler";case B:return"StrictMode";case ye:return"Suspense";case de:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case D:return"Portal";case Z:return s.displayName||"Context";case X:return(s._context.displayName||"Context")+".Consumer";case W:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return a=s.displayName||null,a!==null?a:ce(s.type)||"Memo";case V:a=s._payload,s=s._init;try{return ce(s(a))}catch{}}return null}var Te=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},we=[],We=-1;function ne(s){return{current:s}}function U(s){0>We||(s.current=we[We],we[We]=null,We--)}function J(s,a){We++,we[We]=s.current,s.current=a}var ie=ne(null),fe=ne(null),me=ne(null),Ee=ne(null);function Pe(s,a){switch(J(me,a),J(fe,s),J(ie,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?f2(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=f2(a),s=h2(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}U(ie),J(ie,s)}function Me(){U(ie),U(fe),U(me)}function $e(s){s.memoizedState!==null&&J(Ee,s);var a=ie.current,u=h2(a,s.type);a!==u&&(J(fe,s),J(ie,u))}function it(s){fe.current===s&&(U(ie),U(fe)),Ee.current===s&&(U(Ee),dh._currentValue=ve)}var lt,ut;function pt(s){if(lt===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);lt=a&&a[1]||"",ut=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+s+ut}var re=!1;function ke(s,a){if(!s||re)return"";re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(ze){var Be=ze}Reflect.construct(s,[],Ze)}else{try{Ze.call()}catch(ze){Be=ze}s.call(Ze.prototype)}}else{try{throw Error()}catch(ze){Be=ze}(Ze=s())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(ze){if(ze&&Be&&typeof ze.stack=="string")return[ze.stack,Be.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=d.DetermineComponentFrameRoot(),M=E[0],K=E[1];if(M&&K){var ge=M.split(`
`),Oe=K.split(`
`);for(_=d=0;d<ge.length&&!ge[d].includes("DetermineComponentFrameRoot");)d++;for(;_<Oe.length&&!Oe[_].includes("DetermineComponentFrameRoot");)_++;if(d===ge.length||_===Oe.length)for(d=ge.length-1,_=Oe.length-1;1<=d&&0<=_&&ge[d]!==Oe[_];)_--;for(;1<=d&&0<=_;d--,_--)if(ge[d]!==Oe[_]){if(d!==1||_!==1)do if(d--,_--,0>_||ge[d]!==Oe[_]){var Ke=`
`+ge[d].replace(" at new "," at ");return s.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",s.displayName)),Ke}while(1<=d&&0<=_);break}}}finally{re=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?pt(u):""}function st(s,a){switch(s.tag){case 26:case 27:case 5:return pt(s.type);case 16:return pt("Lazy");case 13:return s.child!==a&&a!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return ke(s.type,!1);case 11:return ke(s.type.render,!1);case 1:return ke(s.type,!0);case 31:return pt("Activity");default:return""}}function he(s){try{var a="",u=null;do a+=st(s,u),u=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _e=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,qe=n.unstable_cancelCallback,He=n.unstable_shouldYield,pe=n.unstable_requestPaint,Ve=n.unstable_now,Ct=n.unstable_getCurrentPriorityLevel,ft=n.unstable_ImmediatePriority,xt=n.unstable_UserBlockingPriority,Lt=n.unstable_NormalPriority,mt=n.unstable_LowPriority,$t=n.unstable_IdlePriority,bt=n.log,ti=n.unstable_setDisableYieldValue,Wt=null,Ot=null;function Yt(s){if(typeof bt=="function"&&ti(s),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Wt,s)}catch{}}var tn=Math.clz32?Math.clz32:Gt,Pt=Math.log,Mn=Math.LN2;function Gt(s){return s>>>=0,s===0?32:31-(Pt(s)/Mn|0)|0}var jt=256,kn=262144,Mt=4194304;function It(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function cn(s,a,u){var d=s.pendingLanes;if(d===0)return 0;var _=0,E=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var K=d&134217727;return K!==0?(d=K&~E,d!==0?_=It(d):(M&=K,M!==0?_=It(M):u||(u=K&~s,u!==0&&(_=It(u))))):(K=d&~E,K!==0?_=It(K):M!==0?_=It(M):u||(u=d&~s,u!==0&&(_=It(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function gr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function rr(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Os(){var s=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),s}function Ki(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function kt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function oo(s,a,u,d,_,E){var M=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var K=s.entanglements,ge=s.expirationTimes,Oe=s.hiddenUpdates;for(u=M&~u;0<u;){var Ke=31-tn(u),Ze=1<<Ke;K[Ke]=0,ge[Ke]=-1;var Be=Oe[Ke];if(Be!==null)for(Oe[Ke]=null,Ke=0;Ke<Be.length;Ke++){var ze=Be[Ke];ze!==null&&(ze.lane&=-536870913)}u&=~Ze}d!==0&&Yr(s,d,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(M&~a))}function Yr(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-tn(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|u&261930}function Rr(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var d=31-tn(u),_=1<<d;_&a|s[d]&a&&(s[d]|=a),u&=~_}}function Lr(s,a){var u=a&-a;return u=(u&42)!==0?1:jn(u),(u&(s.suspendedLanes|a))!==0?0:u}function jn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ni(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Oi(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:k2(s.type))}function yr(s,a){var u=ue.p;try{return ue.p=s,a()}finally{ue.p=u}}var sr=Math.random().toString(36).slice(2),Un="__reactFiber$"+sr,Kn="__reactProps$"+sr,Fi="__reactContainer$"+sr,Mr="__reactEvents$"+sr,cs="__reactListeners$"+sr,Eo="__reactHandles$"+sr,As="__reactResources$"+sr,Dr="__reactMarker$"+sr;function ao(s){delete s[Un],delete s[Kn],delete s[Mr],delete s[cs],delete s[Eo]}function Kr(s){var a=s[Un];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Fi]||u[Un]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=_2(s);s!==null;){if(u=s[Un])return u;s=_2(s)}return a}s=u,u=s.parentNode}return null}function vr(s){if(s=s[Un]||s[Fi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Jr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function fs(s){var a=s[As];return a||(a=s[As]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function gi(s){s[Dr]=!0}var Ea=new Set,Pr={};function hs(s,a){Ts(s,a),Ts(s+"Capture",a)}function Ts(s,a){for(Pr[s]=a,s=0;s<a.length;s++)Ea.add(a[s])}var Yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Aa={},Ta={};function tl(s){return _e.call(Ta,s)?!0:_e.call(Aa,s)?!1:Yo.test(s)?Ta[s]=!0:(Aa[s]=!0,!1)}function Wr(s,a,u){if(tl(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function or(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function Si(s,a,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+d)}}function pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function lo(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ds(s,a,u){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,E=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(M){u=""+M,E.call(this,M)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function bn(s){if(!s._valueTracker){var a=lo(s)?"checked":"value";s._valueTracker=ds(s,a,""+s[a])}}function Ao(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return s&&(d=lo(s)?s.checked?"true":"false":s.value),s=d,s!==u?(a.setValue(s),!0):!1}function Ri(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ci=/[\n"\\]/g;function Ei(s){return s.replace(ci,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ko(s,a,u,d,_,E,M,K){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),a!=null?M==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+pn(a)):s.value!==""+pn(a)&&(s.value=""+pn(a)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),a!=null?nl(s,M,pn(a)):u!=null?nl(s,M,pn(u)):d!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?s.name=""+pn(K):s.removeAttribute("name")}function Vl(s,a,u,d,_,E,M,K){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){bn(s);return}u=u!=null?""+pn(u):"",a=a!=null?""+pn(a):u,K||a===s.value||(s.value=a),s.defaultValue=a}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=K?s.checked:!!d,s.defaultChecked=!!d,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),bn(s)}function nl(s,a,u){a==="number"&&Ri(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function _r(s,a,u,d){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&d&&(s[u].defaultSelected=!0)}else{for(u=""+pn(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,d&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function il(s,a,u){if(a!=null&&(a=""+pn(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+pn(u):""}function uo(s,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(Te(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=pn(a),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d),bn(s)}function Ji(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var To=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(s,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,u):typeof u!="number"||u===0||To.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function sl(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var _ in a)d=a[_],a.hasOwnProperty(_)&&u[_]!==d&&rl(s,_,d)}else for(var E in a)a.hasOwnProperty(E)&&rl(s,E,a[E])}function Na(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),co=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(s){return co.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ns(){}var fo=null;function Ur(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var No=null,Ft=null;function Jo(s){var a=vr(s);if(a&&(s=a.stateNode)){var u=s[Kn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ko(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ei(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==s&&d.form===s.form){var _=d[Kn]||null;if(!_)throw Error(i(90));Ko(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===s.form&&Ao(d)}break e;case"textarea":il(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&_r(s,!!u.multiple,a,!1)}}}var Ia=!1;function Co(s,a,u){if(Ia)return s(a,u);Ia=!0;try{var d=s(a);return d}finally{if(Ia=!1,(No!==null||Ft!==null)&&(Cd(),No&&(a=No,s=Ft,Ft=No=null,Jo(a),s)))for(a=0;a<s.length;a++)Jo(s[a])}}function Wi(s,a){var u=s.stateNode;if(u===null)return null;var d=u[Kn]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wo=!1;if(Vi)try{var On={};Object.defineProperty(On,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Wo=!1}var Xr=null,Xo=null,Cs=null;function ol(){if(Cs)return Cs;var s,a=Xo,u=a.length,d,_="value"in Xr?Xr.value:Xr.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var M=u-s;for(d=1;d<=M&&a[u-d]===_[E-d];d++);return Cs=_.slice(s,1<d?1-d:void 0)}function Qr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ho(){return!0}function Zr(){return!1}function Li(s){function a(u,d,_,E,M){this._reactName=u,this._targetInst=_,this.type=d,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(u=s[K],this[K]=u?u(E):E[K]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ho:Zr,this.isPropagationStopped=Zr,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),a}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ar=Li(Fs),Vs=b({},Fs,{view:0,detail:0}),Io=Li(Vs),Bs,qs,ps,Qo=b({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ps&&(ps&&s.type==="mousemove"?(Bs=s.screenX-ps.screenX,qs=s.screenY-ps.screenY):qs=Bs=0,ps=s),Bs)},movementY:function(s){return"movementY"in s?s.movementY:qs}}),Ra=Li(Qo),es=b({},Qo,{dataTransfer:0}),Hs=Li(es),al=b({},Vs,{relatedTarget:0}),Is=Li(al),La=b({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),A=Li(La),H=b({},Fs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),oe=Li(H),be=b({},Fs,{data:0}),Ne=Li(be),Ye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Et(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=vt[s])?!!a[s]:!1}function Bt(){return Et}var Ut=b({},Vs,{key:function(s){if(s.key){var a=Ye[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Qr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?tt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bt,charCode:function(s){return s.type==="keypress"?Qr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Qr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mn=Li(Ut),ii=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=Li(ii),v=b({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bt}),C=Li(v),P=b({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Li(P),Ie=b({},Qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Li(Ie),ot=b({},Fs,{newState:0,oldState:0}),Qt=Li(ot),ri=[9,13,27,32],hn=Vi&&"CompositionEvent"in window,Fn=null;Vi&&"documentMode"in document&&(Fn=document.documentMode);var lr=Vi&&"TextEvent"in window&&!Fn,br=Vi&&(!hn||Fn&&8<Fn&&11>=Fn),Jn=" ",wr=!1;function Rs(s,a){switch(s){case"keyup":return ri.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ro(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function ts(s,a){switch(s){case"compositionend":return Ro(a);case"keypress":return a.which!==32?null:(wr=!0,Jn);case"textInput":return s=a.data,s===Jn&&wr?null:s;default:return null}}function Zo(s,a){if(Lo)return s==="compositionend"||!hn&&Rs(s,a)?(s=ol(),Cs=Xo=Xr=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return br&&a.locale!=="ko"?null:a.data;default:return null}}var Bl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Bl[s.type]:a==="textarea"}function Ls(s,a,u,d){No?Ft?Ft.push(d):Ft=[d]:No=d,a=kd(a,"onChange"),0<a.length&&(u=new ar("onChange","change",null,u,d),s.push({event:u,listeners:a}))}var po=null,ea=null;function Mu(s){s2(s,0)}function mo(s){var a=Jr(s);if(Ao(a))return s}function Ma(s,a){if(s==="change")return a}var ms=!1;if(Vi){var ns;if(Vi){var Mo="oninput"in document;if(!Mo){var Do=document.createElement("div");Do.setAttribute("oninput","return;"),Mo=typeof Do.oninput=="function"}ns=Mo}else ns=!1;ms=ns&&(!document.documentMode||9<document.documentMode)}function ta(){po&&(po.detachEvent("onpropertychange",ql),ea=po=null)}function ql(s){if(s.propertyName==="value"&&mo(ea)){var a=[];Ls(a,ea,s,Ur(s)),Co(Mu,a)}}function Hl(s,a,u){s==="focusin"?(ta(),po=a,ea=u,po.attachEvent("onpropertychange",ql)):s==="focusout"&&ta()}function Mi(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mo(ea)}function gc(s,a){if(s==="click")return mo(a)}function Po(s,a){if(s==="input"||s==="change")return mo(a)}function ko(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var xr=typeof Object.is=="function"?Object.is:ko;function na(s,a){if(xr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var _=u[d];if(!_e.call(a,_)||!xr(s[_],a[_]))return!1}return!0}function zl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Gl(s,a){var u=zl(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=a&&d>=a)return{node:u,offset:a-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=zl(u)}}function ia(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ia(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function ra(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Ri(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Ri(s.document)}return a}function Uo(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var ll=Vi&&"documentMode"in document&&11>=document.documentMode,Ms=null,sa=null,Or=null,zs=!1;function Dn(s,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;zs||Ms==null||Ms!==Ri(d)||(d=Ms,"selectionStart"in d&&Uo(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Or&&na(Or,d)||(Or=d,d=kd(sa,"onSelect"),0<d.length&&(a=new ar("onSelect","select",null,a,u),s.push({event:a,listeners:d}),a.target=Ms)))}function An(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var si={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionrun:An("Transition","TransitionRun"),transitionstart:An("Transition","TransitionStart"),transitioncancel:An("Transition","TransitionCancel"),transitionend:An("Transition","TransitionEnd")},Di={},Oo={};Vi&&(Oo=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function go(s){if(Di[s])return Di[s];if(!si[s])return s;var a=si[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Oo)return Di[s]=a[u];return s}var ul=go("animationend"),Du=go("animationiteration"),Uf=go("animationstart"),rd=go("transitionrun"),sd=go("transitionstart"),od=go("transitioncancel"),Of=go("transitionend"),Ff=new Map,cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cl.push("scrollEnd");function Gs(s,a){Ff.set(s,a),hs(a,[s])}var Pu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ds=[],fl=0,yc=0;function ku(){for(var s=fl,a=yc=fl=0;a<s;){var u=Ds[a];Ds[a++]=null;var d=Ds[a];Ds[a++]=null;var _=Ds[a];Ds[a++]=null;var E=Ds[a];if(Ds[a++]=null,d!==null&&_!==null){var M=d.pending;M===null?_.next=_:(_.next=M.next,M.next=_),d.pending=_}E!==0&&Ou(u,_,E)}}function Uu(s,a,u,d){Ds[fl++]=s,Ds[fl++]=a,Ds[fl++]=u,Ds[fl++]=d,yc|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function vc(s,a,u,d){return Uu(s,a,u,d),Fr(s)}function oa(s,a){return Uu(s,null,null,a),Fr(s)}function Ou(s,a,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,d=E.alternate,d!==null&&(d.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-tn(u),s=E.hiddenUpdates,d=s[_],d===null?s[_]=[a]:d.push(a),a.lane=u|536870912),E):null}function Fr(s){if(50<oh)throw oh=0,ag=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Sr={};function _c(s,a,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(s,a,u,d){return new _c(s,a,u,d)}function bc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function js(s,a){var u=s.alternate;return u===null?(u=Vr(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Fu(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function jl(s,a,u,d,_,E){var M=0;if(d=s,typeof s=="function")bc(s)&&(M=1);else if(typeof s=="string")M=FT(s,u,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=Vr(31,u,a,_),s.elementType=L,s.lanes=E,s;case O:return Da(u.children,_,E,a);case B:M=8,_|=24;break;case q:return s=Vr(12,u,a,_|2),s.elementType=q,s.lanes=E,s;case ye:return s=Vr(13,u,a,_),s.elementType=ye,s.lanes=E,s;case de:return s=Vr(19,u,a,_),s.elementType=de,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:M=10;break e;case X:M=9;break e;case W:M=11;break e;case G:M=14;break e;case V:M=16,d=null;break e}M=29,u=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=Vr(M,u,a,_),a.elementType=s,a.type=d,a.lanes=E,a}function Da(s,a,u,d){return s=Vr(7,s,d,a),s.lanes=u,s}function Vu(s,a,u){return s=Vr(6,s,null,a),s.lanes=u,s}function wc(s){var a=Vr(18,null,null,0);return a.stateNode=s,a}function $l(s,a,u){return a=Vr(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var xc=new WeakMap;function $s(s,a){if(typeof s=="object"&&s!==null){var u=xc.get(s);return u!==void 0?u:(a={value:s,source:a,stack:he(a)},xc.set(s,a),a)}return{value:s,source:a,stack:he(a)}}var Yl=[],hl=0,Sc=null,Bu=0,Ys=[],Ks=0,Pa=null,Js=1,Ws="";function Ps(s,a){Yl[hl++]=Bu,Yl[hl++]=Sc,Sc=s,Bu=a}function ad(s,a,u){Ys[Ks++]=Js,Ys[Ks++]=Ws,Ys[Ks++]=Pa,Pa=s;var d=Js;s=Ws;var _=32-tn(d)-1;d&=~(1<<_),u+=1;var E=32-tn(a)+_;if(30<E){var M=_-_%5;E=(d&(1<<M)-1).toString(32),d>>=M,_-=M,Js=1<<32-tn(a)+_|u<<_|d,Ws=E+s}else Js=1<<E|u<<_|d,Ws=s}function Vf(s){s.return!==null&&(Ps(s,1),ad(s,1,0))}function Ec(s){for(;s===Sc;)Sc=Yl[--hl],Yl[hl]=null,Bu=Yl[--hl],Yl[hl]=null;for(;s===Pa;)Pa=Ys[--Ks],Ys[Ks]=null,Ws=Ys[--Ks],Ys[Ks]=null,Js=Ys[--Ks],Ys[Ks]=null}function ld(s,a){Ys[Ks++]=Js,Ys[Ks++]=Ws,Ys[Ks++]=Pa,Js=a.id,Ws=a.overflow,Pa=s}var Er=null,fi=null,yn=!1,is=null,Ai=!1,yo=Error(i(519));function ka(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl($s(a,s)),yo}function Bf(s){var a=s.stateNode,u=s.type,d=s.memoizedProps;switch(a[Un]=s,a[Kn]=d,u){case"dialog":_n("cancel",a),_n("close",a);break;case"iframe":case"object":case"embed":_n("load",a);break;case"video":case"audio":for(u=0;u<lh.length;u++)_n(lh[u],a);break;case"source":_n("error",a);break;case"img":case"image":case"link":_n("error",a),_n("load",a);break;case"details":_n("toggle",a);break;case"input":_n("invalid",a),Vl(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":_n("invalid",a);break;case"textarea":_n("invalid",a),uo(a,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||u2(a.textContent,u)?(d.popover!=null&&(_n("beforetoggle",a),_n("toggle",a)),d.onScroll!=null&&_n("scroll",a),d.onScrollEnd!=null&&_n("scrollend",a),d.onClick!=null&&(a.onclick=Ns),a=!0):a=!1,a||ka(s,!0)}function aa(s){for(Er=s.return;Er;)switch(Er.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Er=Er.return}}function Ar(s){if(s!==Er)return!1;if(!yn)return aa(s),yn=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||xg(s.type,s.memoizedProps)),u=!u),u&&fi&&ka(s),aa(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));fi=v2(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));fi=v2(s)}else a===27?(a=fi,lu(s.type)?(s=Ng,Ng=null,fi=s):fi=a):fi=Er?qo(s.stateNode.nextSibling):null;return!0}function dl(){fi=Er=null,yn=!1}function qf(){var s=is;return s!==null&&(no===null?no=s:no.push.apply(no,s),is=null),s}function Kl(s){is===null?is=[s]:is.push(s)}var Ac=ne(null),Ua=null,Fo=null;function Oa(s,a,u){J(Ac,a._currentValue),a._currentValue=u}function Xs(s){s._currentValue=Ac.current,U(Ac)}function Jl(s,a,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===u)break;s=s.return}}function pl(s,a,u,d){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var M=_.child;E=E.firstContext;e:for(;E!==null;){var K=E;E=_;for(var ge=0;ge<a.length;ge++)if(K.context===a[ge]){E.lanes|=u,K=E.alternate,K!==null&&(K.lanes|=u),Jl(E.return,u,s),d||(M=null);break e}E=K.next}}else if(_.tag===18){if(M=_.return,M===null)throw Error(i(341));M.lanes|=u,E=M.alternate,E!==null&&(E.lanes|=u),Jl(M,u,s),M=null}else M=_.child;if(M!==null)M.return=_;else for(M=_;M!==null;){if(M===s){M=null;break}if(_=M.sibling,_!==null){_.return=M.return,M=_;break}M=M.return}_=M}}function Fa(s,a,u,d){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var M=_.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var K=_.type;xr(_.pendingProps.value,M.value)||(s!==null?s.push(K):s=[K])}}else if(_===Ee.current){if(M=_.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(dh):s=[dh])}_=_.return}s!==null&&pl(a,s,u,d),a.flags|=262144}function Tc(s){for(s=s.firstContext;s!==null;){if(!xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Va(s){Ua=s,Fo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Tr(s){return ud(Ua,s)}function Nc(s,a){return Ua===null&&Va(s),ud(s,a)}function ud(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Fo===null){if(s===null)throw Error(i(308));Fo=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Fo=Fo.next=a;return u}var Tm=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Nm=n.unstable_scheduleCallback,Cm=n.unstable_NormalPriority,Pi={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wl(){return{controller:new Tm,data:new Map,refCount:0}}function qu(s){s.refCount--,s.refCount===0&&Nm(Cm,function(){s.controller.abort()})}var Hu=null,Cc=0,g=0,w=null;function N(s,a){if(Hu===null){var u=Hu=[];Cc=0,g=dg(),w={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Cc++,a.then(R,R),a}function R(){if(--Cc===0&&Hu!==null){w!==null&&(w.status="fulfilled");var s=Hu;Hu=null,g=0,w=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function z(s,a){var u=[],d={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(d.status="rejected",d.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),d}var $=le.S;le.S=function(s,a){Dv=Ve(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&N(s,a),$!==null&&$(s,a)};var Y=ne(null);function Q(){var s=Y.current;return s!==null?s:di.pooledCache}function te(s,a){a===null?J(Y,Y.current):J(Y,a.pool)}function ae(){var s=Q();return s===null?null:{parent:Pi._currentValue,pool:s}}var xe=Error(i(460)),De=Error(i(474)),se=Error(i(542)),Ae={then:function(){}};function Re(s){return s=s.status,s==="fulfilled"||s==="rejected"}function je(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Ns,Ns),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,rt(s),s;default:if(typeof a.status=="string")a.then(Ns,Ns);else{if(s=di,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=d}},function(d){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,rt(s),s}throw Ge=a,xe}}function Le(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ge=u,xe):u}}var Ge=null;function Je(){if(Ge===null)throw Error(i(459));var s=Ge;return Ge=null,s}function rt(s){if(s===xe||s===se)throw Error(i(483))}var et=null,At=0;function gt(s){var a=At;return At+=1,et===null&&(et=[]),je(et,s,a)}function Zt(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function wt(s,a){throw a.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function gn(s){function a(Ce,Se){if(s){var Ue=Ce.deletions;Ue===null?(Ce.deletions=[Se],Ce.flags|=16):Ue.push(Se)}}function u(Ce,Se){if(!s)return null;for(;Se!==null;)a(Ce,Se),Se=Se.sibling;return null}function d(Ce){for(var Se=new Map;Ce!==null;)Ce.key!==null?Se.set(Ce.key,Ce):Se.set(Ce.index,Ce),Ce=Ce.sibling;return Se}function _(Ce,Se){return Ce=js(Ce,Se),Ce.index=0,Ce.sibling=null,Ce}function E(Ce,Se,Ue){return Ce.index=Ue,s?(Ue=Ce.alternate,Ue!==null?(Ue=Ue.index,Ue<Se?(Ce.flags|=67108866,Se):Ue):(Ce.flags|=67108866,Se)):(Ce.flags|=1048576,Se)}function M(Ce){return s&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function K(Ce,Se,Ue,Xe){return Se===null||Se.tag!==6?(Se=Vu(Ue,Ce.mode,Xe),Se.return=Ce,Se):(Se=_(Se,Ue),Se.return=Ce,Se)}function ge(Ce,Se,Ue,Xe){var Ht=Ue.type;return Ht===O?Ke(Ce,Se,Ue.props.children,Xe,Ue.key):Se!==null&&(Se.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===V&&Le(Ht)===Se.type)?(Se=_(Se,Ue.props),Zt(Se,Ue),Se.return=Ce,Se):(Se=jl(Ue.type,Ue.key,Ue.props,null,Ce.mode,Xe),Zt(Se,Ue),Se.return=Ce,Se)}function Oe(Ce,Se,Ue,Xe){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ue.containerInfo||Se.stateNode.implementation!==Ue.implementation?(Se=$l(Ue,Ce.mode,Xe),Se.return=Ce,Se):(Se=_(Se,Ue.children||[]),Se.return=Ce,Se)}function Ke(Ce,Se,Ue,Xe,Ht){return Se===null||Se.tag!==7?(Se=Da(Ue,Ce.mode,Xe,Ht),Se.return=Ce,Se):(Se=_(Se,Ue),Se.return=Ce,Se)}function Ze(Ce,Se,Ue){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=Vu(""+Se,Ce.mode,Ue),Se.return=Ce,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case x:return Ue=jl(Se.type,Se.key,Se.props,null,Ce.mode,Ue),Zt(Ue,Se),Ue.return=Ce,Ue;case D:return Se=$l(Se,Ce.mode,Ue),Se.return=Ce,Se;case V:return Se=Le(Se),Ze(Ce,Se,Ue)}if(Te(Se)||k(Se))return Se=Da(Se,Ce.mode,Ue,null),Se.return=Ce,Se;if(typeof Se.then=="function")return Ze(Ce,gt(Se),Ue);if(Se.$$typeof===Z)return Ze(Ce,Nc(Ce,Se),Ue);wt(Ce,Se)}return null}function Be(Ce,Se,Ue,Xe){var Ht=Se!==null?Se.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ht!==null?null:K(Ce,Se,""+Ue,Xe);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case x:return Ue.key===Ht?ge(Ce,Se,Ue,Xe):null;case D:return Ue.key===Ht?Oe(Ce,Se,Ue,Xe):null;case V:return Ue=Le(Ue),Be(Ce,Se,Ue,Xe)}if(Te(Ue)||k(Ue))return Ht!==null?null:Ke(Ce,Se,Ue,Xe,null);if(typeof Ue.then=="function")return Be(Ce,Se,gt(Ue),Xe);if(Ue.$$typeof===Z)return Be(Ce,Se,Nc(Ce,Ue),Xe);wt(Ce,Ue)}return null}function ze(Ce,Se,Ue,Xe,Ht){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Ce=Ce.get(Ue)||null,K(Se,Ce,""+Xe,Ht);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case x:return Ce=Ce.get(Xe.key===null?Ue:Xe.key)||null,ge(Se,Ce,Xe,Ht);case D:return Ce=Ce.get(Xe.key===null?Ue:Xe.key)||null,Oe(Se,Ce,Xe,Ht);case V:return Xe=Le(Xe),ze(Ce,Se,Ue,Xe,Ht)}if(Te(Xe)||k(Xe))return Ce=Ce.get(Ue)||null,Ke(Se,Ce,Xe,Ht,null);if(typeof Xe.then=="function")return ze(Ce,Se,Ue,gt(Xe),Ht);if(Xe.$$typeof===Z)return ze(Ce,Se,Ue,Nc(Se,Xe),Ht);wt(Se,Xe)}return null}function St(Ce,Se,Ue,Xe){for(var Ht=null,Vn=null,Rt=Se,fn=Se=0,xn=null;Rt!==null&&fn<Ue.length;fn++){Rt.index>fn?(xn=Rt,Rt=null):xn=Rt.sibling;var Bn=Be(Ce,Rt,Ue[fn],Xe);if(Bn===null){Rt===null&&(Rt=xn);break}s&&Rt&&Bn.alternate===null&&a(Ce,Rt),Se=E(Bn,Se,fn),Vn===null?Ht=Bn:Vn.sibling=Bn,Vn=Bn,Rt=xn}if(fn===Ue.length)return u(Ce,Rt),yn&&Ps(Ce,fn),Ht;if(Rt===null){for(;fn<Ue.length;fn++)Rt=Ze(Ce,Ue[fn],Xe),Rt!==null&&(Se=E(Rt,Se,fn),Vn===null?Ht=Rt:Vn.sibling=Rt,Vn=Rt);return yn&&Ps(Ce,fn),Ht}for(Rt=d(Rt);fn<Ue.length;fn++)xn=ze(Rt,Ce,fn,Ue[fn],Xe),xn!==null&&(s&&xn.alternate!==null&&Rt.delete(xn.key===null?fn:xn.key),Se=E(xn,Se,fn),Vn===null?Ht=xn:Vn.sibling=xn,Vn=xn);return s&&Rt.forEach(function(du){return a(Ce,du)}),yn&&Ps(Ce,fn),Ht}function Jt(Ce,Se,Ue,Xe){if(Ue==null)throw Error(i(151));for(var Ht=null,Vn=null,Rt=Se,fn=Se=0,xn=null,Bn=Ue.next();Rt!==null&&!Bn.done;fn++,Bn=Ue.next()){Rt.index>fn?(xn=Rt,Rt=null):xn=Rt.sibling;var du=Be(Ce,Rt,Bn.value,Xe);if(du===null){Rt===null&&(Rt=xn);break}s&&Rt&&du.alternate===null&&a(Ce,Rt),Se=E(du,Se,fn),Vn===null?Ht=du:Vn.sibling=du,Vn=du,Rt=xn}if(Bn.done)return u(Ce,Rt),yn&&Ps(Ce,fn),Ht;if(Rt===null){for(;!Bn.done;fn++,Bn=Ue.next())Bn=Ze(Ce,Bn.value,Xe),Bn!==null&&(Se=E(Bn,Se,fn),Vn===null?Ht=Bn:Vn.sibling=Bn,Vn=Bn);return yn&&Ps(Ce,fn),Ht}for(Rt=d(Rt);!Bn.done;fn++,Bn=Ue.next())Bn=ze(Rt,Ce,fn,Bn.value,Xe),Bn!==null&&(s&&Bn.alternate!==null&&Rt.delete(Bn.key===null?fn:Bn.key),Se=E(Bn,Se,fn),Vn===null?Ht=Bn:Vn.sibling=Bn,Vn=Bn);return s&&Rt.forEach(function(JT){return a(Ce,JT)}),yn&&Ps(Ce,fn),Ht}function ui(Ce,Se,Ue,Xe){if(typeof Ue=="object"&&Ue!==null&&Ue.type===O&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case x:e:{for(var Ht=Ue.key;Se!==null;){if(Se.key===Ht){if(Ht=Ue.type,Ht===O){if(Se.tag===7){u(Ce,Se.sibling),Xe=_(Se,Ue.props.children),Xe.return=Ce,Ce=Xe;break e}}else if(Se.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===V&&Le(Ht)===Se.type){u(Ce,Se.sibling),Xe=_(Se,Ue.props),Zt(Xe,Ue),Xe.return=Ce,Ce=Xe;break e}u(Ce,Se);break}else a(Ce,Se);Se=Se.sibling}Ue.type===O?(Xe=Da(Ue.props.children,Ce.mode,Xe,Ue.key),Xe.return=Ce,Ce=Xe):(Xe=jl(Ue.type,Ue.key,Ue.props,null,Ce.mode,Xe),Zt(Xe,Ue),Xe.return=Ce,Ce=Xe)}return M(Ce);case D:e:{for(Ht=Ue.key;Se!==null;){if(Se.key===Ht)if(Se.tag===4&&Se.stateNode.containerInfo===Ue.containerInfo&&Se.stateNode.implementation===Ue.implementation){u(Ce,Se.sibling),Xe=_(Se,Ue.children||[]),Xe.return=Ce,Ce=Xe;break e}else{u(Ce,Se);break}else a(Ce,Se);Se=Se.sibling}Xe=$l(Ue,Ce.mode,Xe),Xe.return=Ce,Ce=Xe}return M(Ce);case V:return Ue=Le(Ue),ui(Ce,Se,Ue,Xe)}if(Te(Ue))return St(Ce,Se,Ue,Xe);if(k(Ue)){if(Ht=k(Ue),typeof Ht!="function")throw Error(i(150));return Ue=Ht.call(Ue),Jt(Ce,Se,Ue,Xe)}if(typeof Ue.then=="function")return ui(Ce,Se,gt(Ue),Xe);if(Ue.$$typeof===Z)return ui(Ce,Se,Nc(Ce,Ue),Xe);wt(Ce,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Se!==null&&Se.tag===6?(u(Ce,Se.sibling),Xe=_(Se,Ue),Xe.return=Ce,Ce=Xe):(u(Ce,Se),Xe=Vu(Ue,Ce.mode,Xe),Xe.return=Ce,Ce=Xe),M(Ce)):u(Ce,Se)}return function(Ce,Se,Ue,Xe){try{At=0;var Ht=ui(Ce,Se,Ue,Xe);return et=null,Ht}catch(Rt){if(Rt===xe||Rt===se)throw Rt;var Vn=Vr(29,Rt,null,Ce.mode);return Vn.lanes=Xe,Vn.return=Ce,Vn}finally{}}}var hi=gn(!0),sn=gn(!1),yt=!1;function ct(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Kt(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function un(s,a,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Gn&2)!==0){var _=d.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),d.pending=a,a=Fr(s),Ou(s,null,u),a}return Uu(s,d,a,u),Fr(s)}function Hn(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,Rr(s,u)}}function Xi(s,a){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=M:E=E.next=M,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Nr=!1;function oi(){if(Nr){var s=w;if(s!==null)throw s}}function Bi(s,a,u,d){Nr=!1;var _=s.updateQueue;yt=!1;var E=_.firstBaseUpdate,M=_.lastBaseUpdate,K=_.shared.pending;if(K!==null){_.shared.pending=null;var ge=K,Oe=ge.next;ge.next=null,M===null?E=Oe:M.next=Oe,M=ge;var Ke=s.alternate;Ke!==null&&(Ke=Ke.updateQueue,K=Ke.lastBaseUpdate,K!==M&&(K===null?Ke.firstBaseUpdate=Oe:K.next=Oe,Ke.lastBaseUpdate=ge))}if(E!==null){var Ze=_.baseState;M=0,Ke=Oe=ge=null,K=E;do{var Be=K.lane&-536870913,ze=Be!==K.lane;if(ze?(wn&Be)===Be:(d&Be)===Be){Be!==0&&Be===g&&(Nr=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var St=s,Jt=K;Be=a;var ui=u;switch(Jt.tag){case 1:if(St=Jt.payload,typeof St=="function"){Ze=St.call(ui,Ze,Be);break e}Ze=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Jt.payload,Be=typeof St=="function"?St.call(ui,Ze,Be):St,Be==null)break e;Ze=b({},Ze,Be);break e;case 2:yt=!0}}Be=K.callback,Be!==null&&(s.flags|=64,ze&&(s.flags|=8192),ze=_.callbacks,ze===null?_.callbacks=[Be]:ze.push(Be))}else ze={lane:Be,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ke===null?(Oe=Ke=ze,ge=Ze):Ke=Ke.next=ze,M|=Be;if(K=K.next,K===null){if(K=_.shared.pending,K===null)break;ze=K,K=ze.next,ze.next=null,_.lastBaseUpdate=ze,_.shared.pending=null}}while(!0);Ke===null&&(ge=Ze),_.baseState=ge,_.firstBaseUpdate=Oe,_.lastBaseUpdate=Ke,E===null&&(_.shared.lanes=0),iu|=M,s.lanes=M,s.memoizedState=Ze}}function Br(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function qi(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Br(u[s],a)}var dn=ne(null),Nn=ne(0);function vi(s,a){s=El,J(Nn,s),J(dn,a),El=s|a.baseLanes}function Pn(){J(Nn,El),J(dn,dn.current)}function Qi(){El=Nn.current,U(dn),U(Nn)}var _i=ne(null),Cn=null;function ki(s){var a=s.alternate;J(Tn,Tn.current&1),J(_i,s),Cn===null&&(a===null||dn.current!==null||a.memoizedState!==null)&&(Cn=s)}function zn(s){J(Tn,Tn.current),J(_i,s),Cn===null&&(Cn=s)}function Hi(s){s.tag===22?(J(Tn,Tn.current),J(_i,s),Cn===null&&(Cn=s)):zi()}function zi(){J(Tn,Tn.current),J(_i,_i.current)}function Wn(s){U(_i),Cn===s&&(Cn=null),U(Tn)}var Tn=ne(0);function qr(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Ag(u)||Tg(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ti=0,Vt=null,qt=null,In=null,gs=!1,Qs=!1,rs=!1,Gi=0,Ba=0,qa=null,Ic=0;function ai(){throw Error(i(321))}function Hf(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!xr(s[u],a[u]))return!1;return!0}function zf(s,a,u,d,_,E){return Ti=E,Vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,le.H=s===null||s.memoizedState===null?Gy:Um,rs=!1,E=u(d,_),rs=!1,Qs&&(E=la(a,u,d,_)),Rc(s),E}function Rc(s){le.H=Xf;var a=qt!==null&&qt.next!==null;if(Ti=0,In=qt=Vt=null,gs=!1,Ba=0,qa=null,a)throw Error(i(300));s===null||cr||(s=s.dependencies,s!==null&&Tc(s)&&(cr=!0))}function la(s,a,u,d){Vt=s;var _=0;do{if(Qs&&(qa=null),Ba=0,Qs=!1,25<=_)throw Error(i(301));if(_+=1,In=qt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}le.H=jy,E=a(u,d)}while(Qs);return E}function Im(){var s=le.H,a=s.useState()[0];return a=typeof a.then=="function"?Ha(a):a,s=s.useState()[0],(qt!==null?qt.memoizedState:null)!==s&&(Vt.flags|=1024),a}function Gf(){var s=Gi!==0;return Gi=0,s}function jf(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Lc(s){if(gs){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}gs=!1}Ti=0,In=qt=Vt=null,Qs=!1,Ba=Gi=0,qa=null}function ur(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Vt.memoizedState=In=s:In=In.next=s,In}function Ni(){if(qt===null){var s=Vt.alternate;s=s!==null?s.memoizedState:null}else s=qt.next;var a=In===null?Vt.memoizedState:In.next;if(a!==null)In=a,qt=s;else{if(s===null)throw Vt.alternate===null?Error(i(467)):Error(i(310));qt=s,s={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},In===null?Vt.memoizedState=In=s:In=In.next=s}return In}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ha(s){var a=Ba;return Ba+=1,qa===null&&(qa=[]),s=je(qa,s,a),a=Vt,(In===null?a.memoizedState:In.next)===null&&(a=a.alternate,le.H=a===null||a.memoizedState===null?Gy:Um),s}function Xl(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ha(s);if(s.$$typeof===Z)return Tr(s)}throw Error(i(438,String(s)))}function ml(s){var a=null,u=Vt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Vt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=zu(),Vt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),d=0;d<s;d++)u[d]=j;return a.index++,u}function Vo(s,a){return typeof a=="function"?a(s):a}function Mc(s){var a=Ni();return Ql(a,qt,s)}function Ql(s,a,u){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var _=s.baseQueue,E=d.pending;if(E!==null){if(_!==null){var M=_.next;_.next=E.next,E.next=M}a.baseQueue=_=E,d.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var K=M=null,ge=null,Oe=a,Ke=!1;do{var Ze=Oe.lane&-536870913;if(Ze!==Oe.lane?(wn&Ze)===Ze:(Ti&Ze)===Ze){var Be=Oe.revertLane;if(Be===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),Ze===g&&(Ke=!0);else if((Ti&Be)===Be){Oe=Oe.next,Be===g&&(Ke=!0);continue}else Ze={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ge===null?(K=ge=Ze,M=E):ge=ge.next=Ze,Vt.lanes|=Be,iu|=Be;Ze=Oe.action,rs&&u(E,Ze),E=Oe.hasEagerState?Oe.eagerState:u(E,Ze)}else Be={lane:Ze,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ge===null?(K=ge=Be,M=E):ge=ge.next=Be,Vt.lanes|=Ze,iu|=Ze;Oe=Oe.next}while(Oe!==null&&Oe!==a);if(ge===null?M=E:ge.next=K,!xr(E,s.memoizedState)&&(cr=!0,Ke&&(u=w,u!==null)))throw u;s.memoizedState=E,s.baseState=M,s.baseQueue=ge,d.lastRenderedState=E}return _===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Dc(s){var a=Ni(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var d=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var M=_=_.next;do E=s(E,M.action),M=M.next;while(M!==_);xr(E,a.memoizedState)||(cr=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,d]}function Pc(s,a,u){var d=Vt,_=Ni(),E=yn;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var M=!xr((qt||_).memoizedState,u);if(M&&(_.memoizedState=u,cr=!0),_=_.queue,Rm(Yf.bind(null,d,_,s),[s]),_.getSnapshot!==a||M||In!==null&&In.memoizedState.tag&1){if(d.flags|=2048,yl(9,{destroy:void 0},$f.bind(null,d,_,u,a),null),di===null)throw Error(i(349));E||(Ti&127)!==0||ua(d,a,u)}return u}function ua(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Vt.updateQueue,a===null?(a=zu(),Vt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function $f(s,a,u,d){a.value=u,a.getSnapshot=d,cd(a)&&Kf(s)}function Yf(s,a,u){return u(function(){cd(a)&&Kf(s)})}function cd(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!xr(s,u)}catch{return!0}}function Kf(s){var a=oa(s,2);a!==null&&io(a,s,2)}function za(s){var a=ur();if(typeof s=="function"){var u=s;if(s=u(),rs){Yt(!0);try{u()}finally{Yt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:s},a}function fd(s,a,u,d){return s.baseState=u,Ql(s,qt,typeof d=="function"?d:Vo)}function hd(s,a,u,d,_){if(gd(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){E.listeners.push(M)}};le.T!==null?u(!0):E.isTransition=!1,d(E),u=a.pending,u===null?(E.next=a.pending=E,dd(a,E)):(E.next=u.next,a.pending=u.next=E)}}function dd(s,a){var u=a.action,d=a.payload,_=s.state;if(a.isTransition){var E=le.T,M={};le.T=M;try{var K=u(_,d),ge=le.S;ge!==null&&ge(M,K),Jf(s,a,K)}catch(Oe){gl(s,a,Oe)}finally{E!==null&&M.types!==null&&(E.types=M.types),le.T=E}}else try{E=u(_,d),Jf(s,a,E)}catch(Oe){gl(s,a,Oe)}}function Jf(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){pd(s,a,d)},function(d){return gl(s,a,d)}):pd(s,a,u)}function pd(s,a,u){a.status="fulfilled",a.value=u,kc(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,dd(s,u)))}function gl(s,a,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,kc(a),a=a.next;while(a!==d)}s.action=null}function kc(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Gu(s,a){return a}function Bo(s,a){if(yn){var u=di.formState;if(u!==null){e:{var d=Vt;if(yn){if(fi){t:{for(var _=fi,E=Ai;_.nodeType!==8;){if(!E){_=null;break t}if(_=qo(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){fi=qo(_.nextSibling),d=_.data==="F!";break e}}ka(d)}d=!1}d&&(a=u[0])}}return u=ur(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gu,lastRenderedState:a},u.queue=d,u=qy.bind(null,Vt,d),d.dispatch=u,d=za(!1),E=km.bind(null,Vt,!1,d.queue),d=ur(),_={state:a,dispatch:null,action:s,pending:null},d.queue=_,u=hd.bind(null,Vt,_,E,u),_.dispatch=u,d.memoizedState=s,[a,u,!1]}function ca(s){var a=Ni();return fa(a,qt,s)}function fa(s,a,u){if(a=Ql(s,a,Gu)[0],s=Mc(Vo)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Ha(a)}catch(M){throw M===xe?se:M}else d=a;a=Ni();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&(Vt.flags|=2048,yl(9,{destroy:void 0},Uc.bind(null,_,u),null)),[d,E,s]}function Uc(s,a){s.action=a}function Oc(s){var a=Ni(),u=qt;if(u!==null)return fa(a,u,s);Ni(),a=a.memoizedState,u=Ni();var d=u.queue.dispatch;return u.memoizedState=s,[a,d,!1]}function yl(s,a,u,d){return s={tag:s,create:u,deps:d,inst:a,next:null},a=Vt.updateQueue,a===null&&(a=zu(),Vt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,a.lastEffect=s),s}function md(){return Ni().memoizedState}function Zl(s,a,u,d){var _=ur();Vt.flags|=s,_.memoizedState=yl(1|a,{destroy:void 0},u,d===void 0?null:d)}function eu(s,a,u,d){var _=Ni();d=d===void 0?null:d;var E=_.memoizedState.inst;qt!==null&&d!==null&&Hf(d,qt.memoizedState.deps)?_.memoizedState=yl(a,E,u,d):(Vt.flags|=s,_.memoizedState=yl(1|a,E,u,d))}function Ny(s,a){Zl(8390656,8,s,a)}function Rm(s,a){eu(2048,8,s,a)}function zA(s){Vt.flags|=4;var a=Vt.updateQueue;if(a===null)a=zu(),Vt.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function Cy(s){var a=Ni().memoizedState;return zA({ref:a,nextImpl:s}),function(){if((Gn&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Iy(s,a){return eu(4,2,s,a)}function Ry(s,a){return eu(4,4,s,a)}function Ly(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function My(s,a,u){u=u!=null?u.concat([s]):null,eu(4,4,Ly.bind(null,a,s),u)}function Lm(){}function Dy(s,a){var u=Ni();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Hf(a,d[1])?d[0]:(u.memoizedState=[s,a],s)}function Py(s,a){var u=Ni();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Hf(a,d[1]))return d[0];if(d=s(),rs){Yt(!0);try{s()}finally{Yt(!1)}}return u.memoizedState=[d,a],d}function Mm(s,a,u){return u===void 0||(Ti&1073741824)!==0&&(wn&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=kv(),Vt.lanes|=s,iu|=s,u)}function ky(s,a,u,d){return xr(u,a)?u:dn.current!==null?(s=Mm(s,u,d),xr(s,a)||(cr=!0),s):(Ti&42)===0||(Ti&1073741824)!==0&&(wn&261930)===0?(cr=!0,s.memoizedState=u):(s=kv(),Vt.lanes|=s,iu|=s,a)}function Uy(s,a,u,d,_){var E=ue.p;ue.p=E!==0&&8>E?E:8;var M=le.T,K={};le.T=K,km(s,!1,a,u);try{var ge=_(),Oe=le.S;if(Oe!==null&&Oe(K,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ke=z(ge,d);Wf(s,a,Ke,bo(s))}else Wf(s,a,d,bo(s))}catch(Ze){Wf(s,a,{then:function(){},status:"rejected",reason:Ze},bo())}finally{ue.p=E,M!==null&&K.types!==null&&(M.types=K.types),le.T=M}}function GA(){}function Dm(s,a,u,d){if(s.tag!==5)throw Error(i(476));var _=Oy(s).queue;Uy(s,_,a,ve,u===null?GA:function(){return Fy(s),u(d)})}function Oy(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:ve},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Fy(s){var a=Oy(s);a.next===null&&(a=s.alternate.memoizedState),Wf(s,a.next.queue,{},bo())}function Pm(){return Tr(dh)}function Vy(){return Ni().memoizedState}function By(){return Ni().memoizedState}function jA(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=bo();s=Kt(u);var d=un(a,s,u);d!==null&&(io(d,a,u),Hn(d,a,u)),a={cache:Wl()},s.payload=a;return}a=a.return}}function $A(s,a,u){var d=bo();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},gd(s)?Hy(a,u):(u=vc(s,a,u,d),u!==null&&(io(u,s,d),zy(u,a,d)))}function qy(s,a,u){var d=bo();Wf(s,a,u,d)}function Wf(s,a,u,d){var _={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(gd(s))Hy(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var M=a.lastRenderedState,K=E(M,u);if(_.hasEagerState=!0,_.eagerState=K,xr(K,M))return Uu(s,a,_,0),di===null&&ku(),!1}catch{}finally{}if(u=vc(s,a,_,d),u!==null)return io(u,s,d),zy(u,a,d),!0}return!1}function km(s,a,u,d){if(d={lane:2,revertLane:dg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},gd(s)){if(a)throw Error(i(479))}else a=vc(s,u,d,2),a!==null&&io(a,s,2)}function gd(s){var a=s.alternate;return s===Vt||a!==null&&a===Vt}function Hy(s,a){Qs=gs=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function zy(s,a,u){if((u&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,Rr(s,u)}}var Xf={readContext:Tr,use:Xl,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai,useHostTransitionStatus:ai,useFormState:ai,useActionState:ai,useOptimistic:ai,useMemoCache:ai,useCacheRefresh:ai};Xf.useEffectEvent=ai;var Gy={readContext:Tr,use:Xl,useCallback:function(s,a){return ur().memoizedState=[s,a===void 0?null:a],s},useContext:Tr,useEffect:Ny,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Zl(4194308,4,Ly.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Zl(4194308,4,s,a)},useInsertionEffect:function(s,a){Zl(4,2,s,a)},useMemo:function(s,a){var u=ur();a=a===void 0?null:a;var d=s();if(rs){Yt(!0);try{s()}finally{Yt(!1)}}return u.memoizedState=[d,a],d},useReducer:function(s,a,u){var d=ur();if(u!==void 0){var _=u(a);if(rs){Yt(!0);try{u(a)}finally{Yt(!1)}}}else _=a;return d.memoizedState=d.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},d.queue=s,s=s.dispatch=$A.bind(null,Vt,s),[d.memoizedState,s]},useRef:function(s){var a=ur();return s={current:s},a.memoizedState=s},useState:function(s){s=za(s);var a=s.queue,u=qy.bind(null,Vt,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:Lm,useDeferredValue:function(s,a){var u=ur();return Mm(u,s,a)},useTransition:function(){var s=za(!1);return s=Uy.bind(null,Vt,s.queue,!0,!1),ur().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var d=Vt,_=ur();if(yn){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),di===null)throw Error(i(349));(wn&127)!==0||ua(d,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,Ny(Yf.bind(null,d,E,s),[s]),d.flags|=2048,yl(9,{destroy:void 0},$f.bind(null,d,E,u,a),null),u},useId:function(){var s=ur(),a=di.identifierPrefix;if(yn){var u=Ws,d=Js;u=(d&~(1<<32-tn(d)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Gi++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Ic++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Pm,useFormState:Bo,useActionState:Bo,useOptimistic:function(s){var a=ur();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=km.bind(null,Vt,!0,u),u.dispatch=a,[s,a]},useMemoCache:ml,useCacheRefresh:function(){return ur().memoizedState=jA.bind(null,Vt)},useEffectEvent:function(s){var a=ur(),u={impl:s};return a.memoizedState=u,function(){if((Gn&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Um={readContext:Tr,use:Xl,useCallback:Dy,useContext:Tr,useEffect:Rm,useImperativeHandle:My,useInsertionEffect:Iy,useLayoutEffect:Ry,useMemo:Py,useReducer:Mc,useRef:md,useState:function(){return Mc(Vo)},useDebugValue:Lm,useDeferredValue:function(s,a){var u=Ni();return ky(u,qt.memoizedState,s,a)},useTransition:function(){var s=Mc(Vo)[0],a=Ni().memoizedState;return[typeof s=="boolean"?s:Ha(s),a]},useSyncExternalStore:Pc,useId:Vy,useHostTransitionStatus:Pm,useFormState:ca,useActionState:ca,useOptimistic:function(s,a){var u=Ni();return fd(u,qt,s,a)},useMemoCache:ml,useCacheRefresh:By};Um.useEffectEvent=Cy;var jy={readContext:Tr,use:Xl,useCallback:Dy,useContext:Tr,useEffect:Rm,useImperativeHandle:My,useInsertionEffect:Iy,useLayoutEffect:Ry,useMemo:Py,useReducer:Dc,useRef:md,useState:function(){return Dc(Vo)},useDebugValue:Lm,useDeferredValue:function(s,a){var u=Ni();return qt===null?Mm(u,s,a):ky(u,qt.memoizedState,s,a)},useTransition:function(){var s=Dc(Vo)[0],a=Ni().memoizedState;return[typeof s=="boolean"?s:Ha(s),a]},useSyncExternalStore:Pc,useId:Vy,useHostTransitionStatus:Pm,useFormState:Oc,useActionState:Oc,useOptimistic:function(s,a){var u=Ni();return qt!==null?fd(u,qt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:ml,useCacheRefresh:By};jy.useEffectEvent=Cy;function Om(s,a,u,d){a=s.memoizedState,u=u(d,a),u=u==null?a:b({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Fm={enqueueSetState:function(s,a,u){s=s._reactInternals;var d=bo(),_=Kt(d);_.payload=a,u!=null&&(_.callback=u),a=un(s,_,d),a!==null&&(io(a,s,d),Hn(a,s,d))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var d=bo(),_=Kt(d);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=un(s,_,d),a!==null&&(io(a,s,d),Hn(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=bo(),d=Kt(u);d.tag=2,a!=null&&(d.callback=a),a=un(s,d,u),a!==null&&(io(a,s,u),Hn(a,s,u))}};function $y(s,a,u,d,_,E,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,E,M):a.prototype&&a.prototype.isPureReactComponent?!na(u,d)||!na(_,E):!0}function Yy(s,a,u,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==s&&Fm.enqueueReplaceState(a,a.state,null)}function ju(s,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(s=s.defaultProps){u===a&&(u=b({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function Ky(s){Pu(s)}function Jy(s){console.error(s)}function Wy(s){Pu(s)}function yd(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Xy(s,a,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Vm(s,a,u){return u=Kt(u),u.tag=3,u.payload={element:null},u.callback=function(){yd(s,a)},u}function Qy(s){return s=Kt(s),s.tag=3,s}function Zy(s,a,u,d){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=d.value;s.payload=function(){return _(E)},s.callback=function(){Xy(a,u,d)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){Xy(a,u,d),typeof _!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var K=d.stack;this.componentDidCatch(d.value,{componentStack:K!==null?K:""})})}function YA(s,a,u,d,_){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Fa(a,u,_,!0),u=_i.current,u!==null){switch(u.tag){case 31:case 13:return Cn===null?Id():u.alternate===null&&ji===0&&(ji=3),u.flags&=-257,u.flags|=65536,u.lanes=_,d===Ae?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),cg(s,d,_)),!1;case 22:return u.flags|=65536,d===Ae?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),cg(s,d,_)),!1}throw Error(i(435,u.tag))}return cg(s,d,_),Id(),!1}if(yn)return a=_i.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,d!==yo&&(s=Error(i(422),{cause:d}),Kl($s(s,u)))):(d!==yo&&(a=Error(i(423),{cause:d}),Kl($s(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,d=$s(d,u),_=Vm(s.stateNode,d,_),Xi(s,_),ji!==4&&(ji=2)),!1;var E=Error(i(520),{cause:d});if(E=$s(E,u),sh===null?sh=[E]:sh.push(E),ji!==4&&(ji=2),a===null)return!0;d=$s(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=Vm(u.stateNode,d,s),Xi(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ru===null||!ru.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=Qy(_),Zy(_,s,u,d),Xi(u,_),!1}u=u.return}while(u!==null);return!1}var Bm=Error(i(461)),cr=!1;function ss(s,a,u,d){a.child=s===null?sn(a,null,u,d):hi(a,s.child,u,d)}function ev(s,a,u,d,_){u=u.render;var E=a.ref;if("ref"in d){var M={};for(var K in d)K!=="ref"&&(M[K]=d[K])}else M=d;return Va(a),d=zf(s,a,u,M,E,_),K=Gf(),s!==null&&!cr?(jf(s,a,_),vl(s,a,_)):(yn&&K&&Vf(a),a.flags|=1,ss(s,a,d,_),a.child)}function tv(s,a,u,d,_){if(s===null){var E=u.type;return typeof E=="function"&&!bc(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,nv(s,a,E,d,_)):(s=jl(u.type,null,d,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Km(s,_)){var M=E.memoizedProps;if(u=u.compare,u=u!==null?u:na,u(M,d)&&s.ref===a.ref)return vl(s,a,_)}return a.flags|=1,s=js(E,d),s.ref=a.ref,s.return=a,a.child=s}function nv(s,a,u,d,_){if(s!==null){var E=s.memoizedProps;if(na(E,d)&&s.ref===a.ref)if(cr=!1,a.pendingProps=d=E,Km(s,_))(s.flags&131072)!==0&&(cr=!0);else return a.lanes=s.lanes,vl(s,a,_)}return qm(s,a,u,d,_)}function iv(s,a,u,d){var _=d.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(d=a.child=s.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~E}else d=0,a.child=null;return rv(s,a,E,u,d)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&te(a,E!==null?E.cachePool:null),E!==null?vi(a,E):Pn(),Hi(a);else return d=a.lanes=536870912,rv(s,a,E!==null?E.baseLanes|u:u,u,d)}else E!==null?(te(a,E.cachePool),vi(a,E),zi(),a.memoizedState=null):(s!==null&&te(a,null),Pn(),zi());return ss(s,a,_,u),a.child}function Qf(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function rv(s,a,u,d,_){var E=Q();return E=E===null?null:{parent:Pi._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&te(a,null),Pn(),Hi(a),s!==null&&Fa(s,a,d,!0),a.childLanes=_,null}function vd(s,a){return a=bd({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function sv(s,a,u){return hi(a,s.child,null,u),s=vd(a,a.pendingProps),s.flags|=2,Wn(a),a.memoizedState=null,s}function KA(s,a,u){var d=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(yn){if(d.mode==="hidden")return s=vd(a,d),a.lanes=536870912,Qf(null,s);if(zn(a),(s=fi)?(s=y2(s,Ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Pa!==null?{id:Js,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},u=wc(s),u.return=a,a.child=u,Er=a,fi=null)):s=null,s===null)throw ka(a);return a.lanes=536870912,null}return vd(a,d)}var E=s.memoizedState;if(E!==null){var M=E.dehydrated;if(zn(a),_)if(a.flags&256)a.flags&=-257,a=sv(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(cr||Fa(s,a,u,!1),_=(u&s.childLanes)!==0,cr||_){if(d=di,d!==null&&(M=Lr(d,u),M!==0&&M!==E.retryLane))throw E.retryLane=M,oa(s,M),io(d,s,M),Bm;Id(),a=sv(s,a,u)}else s=E.treeContext,fi=qo(M.nextSibling),Er=a,yn=!0,is=null,Ai=!1,s!==null&&ld(a,s),a=vd(a,d),a.flags|=4096;return a}return s=js(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function _d(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function qm(s,a,u,d,_){return Va(a),u=zf(s,a,u,d,void 0,_),d=Gf(),s!==null&&!cr?(jf(s,a,_),vl(s,a,_)):(yn&&d&&Vf(a),a.flags|=1,ss(s,a,u,_),a.child)}function ov(s,a,u,d,_,E){return Va(a),a.updateQueue=null,u=la(a,d,u,_),Rc(s),d=Gf(),s!==null&&!cr?(jf(s,a,E),vl(s,a,E)):(yn&&d&&Vf(a),a.flags|=1,ss(s,a,u,E),a.child)}function av(s,a,u,d,_){if(Va(a),a.stateNode===null){var E=Sr,M=u.contextType;typeof M=="object"&&M!==null&&(E=Tr(M)),E=new u(d,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Fm,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=d,E.state=a.memoizedState,E.refs={},ct(a),M=u.contextType,E.context=typeof M=="object"&&M!==null?Tr(M):Sr,E.state=a.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(Om(a,u,M,d),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(M=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),M!==E.state&&Fm.enqueueReplaceState(E,E.state,null),Bi(a,d,E,_),oi(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){E=a.stateNode;var K=a.memoizedProps,ge=ju(u,K);E.props=ge;var Oe=E.context,Ke=u.contextType;M=Sr,typeof Ke=="object"&&Ke!==null&&(M=Tr(Ke));var Ze=u.getDerivedStateFromProps;Ke=typeof Ze=="function"||typeof E.getSnapshotBeforeUpdate=="function",K=a.pendingProps!==K,Ke||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(K||Oe!==M)&&Yy(a,E,d,M),yt=!1;var Be=a.memoizedState;E.state=Be,Bi(a,d,E,_),oi(),Oe=a.memoizedState,K||Be!==Oe||yt?(typeof Ze=="function"&&(Om(a,u,Ze,d),Oe=a.memoizedState),(ge=yt||$y(a,u,ge,d,Be,Oe,M))?(Ke||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Oe),E.props=d,E.state=Oe,E.context=M,d=ge):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{E=a.stateNode,yi(s,a),M=a.memoizedProps,Ke=ju(u,M),E.props=Ke,Ze=a.pendingProps,Be=E.context,Oe=u.contextType,ge=Sr,typeof Oe=="object"&&Oe!==null&&(ge=Tr(Oe)),K=u.getDerivedStateFromProps,(Oe=typeof K=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M!==Ze||Be!==ge)&&Yy(a,E,d,ge),yt=!1,Be=a.memoizedState,E.state=Be,Bi(a,d,E,_),oi();var ze=a.memoizedState;M!==Ze||Be!==ze||yt||s!==null&&s.dependencies!==null&&Tc(s.dependencies)?(typeof K=="function"&&(Om(a,u,K,d),ze=a.memoizedState),(Ke=yt||$y(a,u,Ke,d,Be,ze,ge)||s!==null&&s.dependencies!==null&&Tc(s.dependencies))?(Oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,ze,ge),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,ze,ge)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||M===s.memoizedProps&&Be===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Be===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ze),E.props=d,E.state=ze,E.context=ge,d=Ke):(typeof E.componentDidUpdate!="function"||M===s.memoizedProps&&Be===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Be===s.memoizedState||(a.flags|=1024),d=!1)}return E=d,_d(s,a),d=(a.flags&128)!==0,E||d?(E=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&d?(a.child=hi(a,s.child,null,_),a.child=hi(a,null,u,_)):ss(s,a,u,_),a.memoizedState=E.state,s=a.child):s=vl(s,a,_),s}function lv(s,a,u,d){return dl(),a.flags|=256,ss(s,a,u,d),a.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zm(s){return{baseLanes:s,cachePool:ae()}}function Gm(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=_o),s}function uv(s,a,u){var d=a.pendingProps,_=!1,E=(a.flags&128)!==0,M;if((M=E)||(M=s!==null&&s.memoizedState===null?!1:(Tn.current&2)!==0),M&&(_=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,s===null){if(yn){if(_?ki(a):zi(),(s=fi)?(s=y2(s,Ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Pa!==null?{id:Js,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},u=wc(s),u.return=a,a.child=u,Er=a,fi=null)):s=null,s===null)throw ka(a);return Tg(s)?a.lanes=32:a.lanes=536870912,null}var K=d.children;return d=d.fallback,_?(zi(),_=a.mode,K=bd({mode:"hidden",children:K},_),d=Da(d,_,u,null),K.return=a,d.return=a,K.sibling=d,a.child=K,d=a.child,d.memoizedState=zm(u),d.childLanes=Gm(s,M,u),a.memoizedState=Hm,Qf(null,d)):(ki(a),jm(a,K))}var ge=s.memoizedState;if(ge!==null&&(K=ge.dehydrated,K!==null)){if(E)a.flags&256?(ki(a),a.flags&=-257,a=$m(s,a,u)):a.memoizedState!==null?(zi(),a.child=s.child,a.flags|=128,a=null):(zi(),K=d.fallback,_=a.mode,d=bd({mode:"visible",children:d.children},_),K=Da(K,_,u,null),K.flags|=2,d.return=a,K.return=a,d.sibling=K,a.child=d,hi(a,s.child,null,u),d=a.child,d.memoizedState=zm(u),d.childLanes=Gm(s,M,u),a.memoizedState=Hm,a=Qf(null,d));else if(ki(a),Tg(K)){if(M=K.nextSibling&&K.nextSibling.dataset,M)var Oe=M.dgst;M=Oe,d=Error(i(419)),d.stack="",d.digest=M,Kl({value:d,source:null,stack:null}),a=$m(s,a,u)}else if(cr||Fa(s,a,u,!1),M=(u&s.childLanes)!==0,cr||M){if(M=di,M!==null&&(d=Lr(M,u),d!==0&&d!==ge.retryLane))throw ge.retryLane=d,oa(s,d),io(M,s,d),Bm;Ag(K)||Id(),a=$m(s,a,u)}else Ag(K)?(a.flags|=192,a.child=s.child,a=null):(s=ge.treeContext,fi=qo(K.nextSibling),Er=a,yn=!0,is=null,Ai=!1,s!==null&&ld(a,s),a=jm(a,d.children),a.flags|=4096);return a}return _?(zi(),K=d.fallback,_=a.mode,ge=s.child,Oe=ge.sibling,d=js(ge,{mode:"hidden",children:d.children}),d.subtreeFlags=ge.subtreeFlags&65011712,Oe!==null?K=js(Oe,K):(K=Da(K,_,u,null),K.flags|=2),K.return=a,d.return=a,d.sibling=K,a.child=d,Qf(null,d),d=a.child,K=s.child.memoizedState,K===null?K=zm(u):(_=K.cachePool,_!==null?(ge=Pi._currentValue,_=_.parent!==ge?{parent:ge,pool:ge}:_):_=ae(),K={baseLanes:K.baseLanes|u,cachePool:_}),d.memoizedState=K,d.childLanes=Gm(s,M,u),a.memoizedState=Hm,Qf(s.child,d)):(ki(a),u=s.child,s=u.sibling,u=js(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,s!==null&&(M=a.deletions,M===null?(a.deletions=[s],a.flags|=16):M.push(s)),a.child=u,a.memoizedState=null,u)}function jm(s,a){return a=bd({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function bd(s,a){return s=Vr(22,s,null,a),s.lanes=0,s}function $m(s,a,u){return hi(a,s.child,null,u),s=jm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function cv(s,a,u){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Jl(s.return,a,u)}function Ym(s,a,u,d,_,E){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:_,treeForkCount:E}:(M.isBackwards=a,M.rendering=null,M.renderingStartTime=0,M.last=d,M.tail=u,M.tailMode=_,M.treeForkCount=E)}function fv(s,a,u){var d=a.pendingProps,_=d.revealOrder,E=d.tail;d=d.children;var M=Tn.current,K=(M&2)!==0;if(K?(M=M&1|2,a.flags|=128):M&=1,J(Tn,M),ss(s,a,d,u),d=yn?Bu:0,!K&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cv(s,u,a);else if(s.tag===19)cv(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&qr(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Ym(a,!1,_,u,E,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&qr(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Ym(a,!0,u,null,E,d);break;case"together":Ym(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function vl(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),iu|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Fa(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=js(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=js(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Km(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Tc(s)))}function JA(s,a,u){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),Oa(a,Pi,s.memoizedState.cache),dl();break;case 27:case 5:$e(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:Oa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,zn(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(ki(a),a.flags|=128,null):(u&a.child.childLanes)!==0?uv(s,a,u):(ki(a),s=vl(s,a,u),s!==null?s.sibling:null);ki(a);break;case 19:var _=(s.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Fa(s,a,u,!1),d=(u&a.childLanes)!==0),_){if(d)return fv(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),J(Tn,Tn.current),d)break;return null;case 22:return a.lanes=0,iv(s,a,u,a.pendingProps);case 24:Oa(a,Pi,s.memoizedState.cache)}return vl(s,a,u)}function hv(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)cr=!0;else{if(!Km(s,u)&&(a.flags&128)===0)return cr=!1,JA(s,a,u);cr=(s.flags&131072)!==0}else cr=!1,yn&&(a.flags&1048576)!==0&&ad(a,Bu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=Le(a.elementType),a.type=s,typeof s=="function")bc(s)?(d=ju(s,d),a.tag=1,a=av(null,a,s,d,u)):(a.tag=0,a=qm(null,a,s,d,u));else{if(s!=null){var _=s.$$typeof;if(_===W){a.tag=11,a=ev(null,a,s,d,u);break e}else if(_===G){a.tag=14,a=tv(null,a,s,d,u);break e}}throw a=ce(s)||s,Error(i(306,a,""))}}return a;case 0:return qm(s,a,a.type,a.pendingProps,u);case 1:return d=a.type,_=ju(d,a.pendingProps),av(s,a,d,_,u);case 3:e:{if(Pe(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var E=a.memoizedState;_=E.element,yi(s,a),Bi(a,d,null,u);var M=a.memoizedState;if(d=M.cache,Oa(a,Pi,d),d!==E.cache&&pl(a,[Pi],u,!0),oi(),d=M.element,E.isDehydrated)if(E={element:d,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=lv(s,a,d,u);break e}else if(d!==_){_=$s(Error(i(424)),a),Kl(_),a=lv(s,a,d,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(fi=qo(s.firstChild),Er=a,yn=!0,is=null,Ai=!0,u=sn(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(dl(),d===_){a=vl(s,a,u);break e}ss(s,a,d,u)}a=a.child}return a;case 26:return _d(s,a),s===null?(u=S2(a.type,null,a.pendingProps,null))?a.memoizedState=u:yn||(u=a.type,s=a.pendingProps,d=Ud(me.current).createElement(u),d[Un]=a,d[Kn]=s,os(d,u,s),gi(d),a.stateNode=d):a.memoizedState=S2(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return $e(a),s===null&&yn&&(d=a.stateNode=b2(a.type,a.pendingProps,me.current),Er=a,Ai=!0,_=fi,lu(a.type)?(Ng=_,fi=qo(d.firstChild)):fi=_),ss(s,a,a.pendingProps.children,u),_d(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&yn&&((_=d=fi)&&(d=AT(d,a.type,a.pendingProps,Ai),d!==null?(a.stateNode=d,Er=a,fi=qo(d.firstChild),Ai=!1,_=!0):_=!1),_||ka(a)),$e(a),_=a.type,E=a.pendingProps,M=s!==null?s.memoizedProps:null,d=E.children,xg(_,E)?d=null:M!==null&&xg(_,M)&&(a.flags|=32),a.memoizedState!==null&&(_=zf(s,a,Im,null,null,u),dh._currentValue=_),_d(s,a),ss(s,a,d,u),a.child;case 6:return s===null&&yn&&((s=u=fi)&&(u=TT(u,a.pendingProps,Ai),u!==null?(a.stateNode=u,Er=a,fi=null,s=!0):s=!1),s||ka(a)),null;case 13:return uv(s,a,u);case 4:return Pe(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=hi(a,null,d,u):ss(s,a,d,u),a.child;case 11:return ev(s,a,a.type,a.pendingProps,u);case 7:return ss(s,a,a.pendingProps,u),a.child;case 8:return ss(s,a,a.pendingProps.children,u),a.child;case 12:return ss(s,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Oa(a,a.type,d.value),ss(s,a,d.children,u),a.child;case 9:return _=a.type._context,d=a.pendingProps.children,Va(a),_=Tr(_),d=d(_),a.flags|=1,ss(s,a,d,u),a.child;case 14:return tv(s,a,a.type,a.pendingProps,u);case 15:return nv(s,a,a.type,a.pendingProps,u);case 19:return fv(s,a,u);case 31:return KA(s,a,u);case 22:return iv(s,a,u,a.pendingProps);case 24:return Va(a),d=Tr(Pi),s===null?(_=Q(),_===null&&(_=di,E=Wl(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:d,cache:_},ct(a),Oa(a,Pi,_)):((s.lanes&u)!==0&&(yi(s,a),Bi(a,null,null,u),oi()),_=s.memoizedState,E=a.memoizedState,_.parent!==d?(_={parent:d,cache:d},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),Oa(a,Pi,d)):(d=E.cache,Oa(a,Pi,d),d!==_.cache&&pl(a,[Pi],u,!0))),ss(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function _l(s){s.flags|=4}function Jm(s,a,u,d,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Vv())s.flags|=8192;else throw Ge=Ae,De}else s.flags&=-16777217}function dv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!C2(a))if(Vv())s.flags|=8192;else throw Ge=Ae,De}function wd(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Os():536870912,s.lanes|=a,qc|=a)}function Zf(s,a){if(!yn)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function bi(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=d,s.childLanes=u,a}function WA(s,a,u){var d=a.pendingProps;switch(Ec(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(a),null;case 1:return bi(a),null;case 3:return u=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Xs(Pi),Me(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ar(a)?_l(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qf())),bi(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(_l(a),E!==null?(bi(a),dv(a,E)):(bi(a),Jm(a,_,null,d,u))):E?E!==s.memoizedState?(_l(a),bi(a),dv(a,E)):(bi(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&_l(a),bi(a),Jm(a,_,s,d,u)),null;case 27:if(it(a),u=me.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&_l(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return bi(a),null}s=ie.current,Ar(a)?Bf(a):(s=b2(_,d,u),a.stateNode=s,_l(a))}return bi(a),null;case 5:if(it(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&_l(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return bi(a),null}if(E=ie.current,Ar(a))Bf(a);else{var M=Ud(me.current);switch(E){case 1:E=M.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=M.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=M.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=M.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=M.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof d.is=="string"?M.createElement("select",{is:d.is}):M.createElement("select"),d.multiple?E.multiple=!0:d.size&&(E.size=d.size);break;default:E=typeof d.is=="string"?M.createElement(_,{is:d.is}):M.createElement(_)}}E[Un]=a,E[Kn]=d;e:for(M=a.child;M!==null;){if(M.tag===5||M.tag===6)E.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===a)break e;for(;M.sibling===null;){if(M.return===null||M.return===a)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}a.stateNode=E;e:switch(os(E,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&_l(a)}}return bi(a),Jm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&_l(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=me.current,Ar(a)){if(s=a.stateNode,u=a.memoizedProps,d=null,_=Er,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}s[Un]=a,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||u2(s.nodeValue,u)),s||ka(a,!0)}else s=Ud(s).createTextNode(d),s[Un]=a,a.stateNode=s}return bi(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(d=Ar(a),u!==null){if(s===null){if(!d)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Un]=a}else dl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bi(a),s=!1}else u=qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Wn(a),a):(Wn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return bi(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Ar(a),d!==null&&d.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Un]=a}else dl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bi(a),_=!1}else _=qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Wn(a),a):(Wn(a),null)}return Wn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=d!==null,s=s!==null&&s.memoizedState!==null,u&&(d=a.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==_&&(d.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),wd(a,a.updateQueue),bi(a),null);case 4:return Me(),s===null&&yg(a.stateNode.containerInfo),bi(a),null;case 10:return Xs(a.type),bi(a),null;case 19:if(U(Tn),d=a.memoizedState,d===null)return bi(a),null;if(_=(a.flags&128)!==0,E=d.rendering,E===null)if(_)Zf(d,!1);else{if(ji!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=qr(s),E!==null){for(a.flags|=128,Zf(d,!1),s=E.updateQueue,a.updateQueue=s,wd(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)Fu(u,s),u=u.sibling;return J(Tn,Tn.current&1|2),yn&&Ps(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&Ve()>Td&&(a.flags|=128,_=!0,Zf(d,!1),a.lanes=4194304)}else{if(!_)if(s=qr(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,wd(a,s),Zf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!E.alternate&&!yn)return bi(a),null}else 2*Ve()-d.renderingStartTime>Td&&u!==536870912&&(a.flags|=128,_=!0,Zf(d,!1),a.lanes=4194304);d.isBackwards?(E.sibling=a.child,a.child=E):(s=d.last,s!==null?s.sibling=E:a.child=E,d.last=E)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ve(),s.sibling=null,u=Tn.current,J(Tn,_?u&1|2:u&1),yn&&Ps(a,d.treeForkCount),s):(bi(a),null);case 22:case 23:return Wn(a),Qi(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(bi(a),a.subtreeFlags&6&&(a.flags|=8192)):bi(a),u=a.updateQueue,u!==null&&wd(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),s!==null&&U(Y),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Xs(Pi),bi(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function XA(s,a){switch(Ec(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Xs(Pi),Me(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return it(a),null;case 31:if(a.memoizedState!==null){if(Wn(a),a.alternate===null)throw Error(i(340));dl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Wn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));dl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return U(Tn),null;case 4:return Me(),null;case 10:return Xs(a.type),null;case 22:case 23:return Wn(a),Qi(),s!==null&&U(Y),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Xs(Pi),null;case 25:return null;default:return null}}function pv(s,a){switch(Ec(a),a.tag){case 3:Xs(Pi),Me();break;case 26:case 27:case 5:it(a);break;case 4:Me();break;case 31:a.memoizedState!==null&&Wn(a);break;case 13:Wn(a);break;case 19:U(Tn);break;case 10:Xs(a.type);break;case 22:case 23:Wn(a),Qi(),s!==null&&U(Y);break;case 24:Xs(Pi)}}function eh(s,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var _=d.next;u=_;do{if((u.tag&s)===s){d=void 0;var E=u.create,M=u.inst;d=E(),M.destroy=d}u=u.next}while(u!==_)}}catch(K){Qn(a,a.return,K)}}function tu(s,a,u){try{var d=a.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var E=_.next;d=E;do{if((d.tag&s)===s){var M=d.inst,K=M.destroy;if(K!==void 0){M.destroy=void 0,_=a;var ge=u,Oe=K;try{Oe()}catch(Ke){Qn(_,ge,Ke)}}}d=d.next}while(d!==E)}}catch(Ke){Qn(a,a.return,Ke)}}function mv(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{qi(a,u)}catch(d){Qn(s,s.return,d)}}}function gv(s,a,u){u.props=ju(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){Qn(s,a,d)}}function th(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(_){Qn(s,a,_)}}function Ga(s,a){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(_){Qn(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){Qn(s,a,_)}else u.current=null}function yv(s){var a=s.type,u=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(_){Qn(s,s.return,_)}}function Wm(s,a,u){try{var d=s.stateNode;_T(d,s.type,u,a),d[Kn]=a}catch(_){Qn(s,s.return,_)}}function vv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&lu(s.type)||s.tag===4}function Xm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&lu(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qm(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ns));else if(d!==4&&(d===27&&lu(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Qm(s,a,u),s=s.sibling;s!==null;)Qm(s,a,u),s=s.sibling}function xd(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(d!==4&&(d===27&&lu(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(xd(s,a,u),s=s.sibling;s!==null;)xd(s,a,u),s=s.sibling}function _v(s){var a=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);os(a,d,u),a[Un]=s,a[Kn]=u}catch(E){Qn(s,s.return,E)}}var bl=!1,fr=!1,Zm=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Hr=null;function QA(s,a){if(s=s.containerInfo,bg=zd,s=ra(s),Uo(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var _=d.anchorOffset,E=d.focusNode;d=d.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var M=0,K=-1,ge=-1,Oe=0,Ke=0,Ze=s,Be=null;t:for(;;){for(var ze;Ze!==u||_!==0&&Ze.nodeType!==3||(K=M+_),Ze!==E||d!==0&&Ze.nodeType!==3||(ge=M+d),Ze.nodeType===3&&(M+=Ze.nodeValue.length),(ze=Ze.firstChild)!==null;)Be=Ze,Ze=ze;for(;;){if(Ze===s)break t;if(Be===u&&++Oe===_&&(K=M),Be===E&&++Ke===d&&(ge=M),(ze=Ze.nextSibling)!==null)break;Ze=Be,Be=Ze.parentNode}Ze=ze}u=K===-1||ge===-1?null:{start:K,end:ge}}else u=null}u=u||{start:0,end:0}}else u=null;for(wg={focusedElem:s,selectionRange:u},zd=!1,Hr=a;Hr!==null;)if(a=Hr,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Hr=s;else for(;Hr!==null;){switch(a=Hr,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,d=u.stateNode;try{var St=ju(u.type,_);s=d.getSnapshotBeforeUpdate(St,E),d.__reactInternalSnapshotBeforeUpdate=s}catch(Jt){Qn(u,u.return,Jt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Eg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Eg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Hr=s;break}Hr=a.return}}function wv(s,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:xl(s,u),d&4&&eh(5,u);break;case 1:if(xl(s,u),d&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(M){Qn(u,u.return,M)}else{var _=ju(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(M){Qn(u,u.return,M)}}d&64&&mv(u),d&512&&th(u,u.return);break;case 3:if(xl(s,u),d&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{qi(s,a)}catch(M){Qn(u,u.return,M)}}break;case 27:a===null&&d&4&&_v(u);case 26:case 5:xl(s,u),a===null&&d&4&&yv(u),d&512&&th(u,u.return);break;case 12:xl(s,u);break;case 31:xl(s,u),d&4&&Ev(s,u);break;case 13:xl(s,u),d&4&&Av(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=aT.bind(null,u),NT(s,u))));break;case 22:if(d=u.memoizedState!==null||bl,!d){a=a!==null&&a.memoizedState!==null||fr,_=bl;var E=fr;bl=d,(fr=a)&&!E?Sl(s,u,(u.subtreeFlags&8772)!==0):xl(s,u),bl=_,fr=E}break;case 30:break;default:xl(s,u)}}function xv(s){var a=s.alternate;a!==null&&(s.alternate=null,xv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ao(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ci=null,Zs=!1;function wl(s,a,u){for(u=u.child;u!==null;)Sv(s,a,u),u=u.sibling}function Sv(s,a,u){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Wt,u)}catch{}switch(u.tag){case 26:fr||Ga(u,a),wl(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:fr||Ga(u,a);var d=Ci,_=Zs;lu(u.type)&&(Ci=u.stateNode,Zs=!1),wl(s,a,u),ch(u.stateNode),Ci=d,Zs=_;break;case 5:fr||Ga(u,a);case 6:if(d=Ci,_=Zs,Ci=null,wl(s,a,u),Ci=d,Zs=_,Ci!==null)if(Zs)try{(Ci.nodeType===9?Ci.body:Ci.nodeName==="HTML"?Ci.ownerDocument.body:Ci).removeChild(u.stateNode)}catch(E){Qn(u,a,E)}else try{Ci.removeChild(u.stateNode)}catch(E){Qn(u,a,E)}break;case 18:Ci!==null&&(Zs?(s=Ci,m2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Jc(s)):m2(Ci,u.stateNode));break;case 4:d=Ci,_=Zs,Ci=u.stateNode.containerInfo,Zs=!0,wl(s,a,u),Ci=d,Zs=_;break;case 0:case 11:case 14:case 15:tu(2,u,a),fr||tu(4,u,a),wl(s,a,u);break;case 1:fr||(Ga(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&gv(u,a,d)),wl(s,a,u);break;case 21:wl(s,a,u);break;case 22:fr=(d=fr)||u.memoizedState!==null,wl(s,a,u),fr=d;break;default:wl(s,a,u)}}function Ev(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Jc(s)}catch(u){Qn(a,a.return,u)}}}function Av(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jc(s)}catch(u){Qn(a,a.return,u)}}function ZA(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new bv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new bv),a;default:throw Error(i(435,s.tag))}}function Sd(s,a){var u=ZA(s);a.forEach(function(d){if(!u.has(d)){u.add(d);var _=lT.bind(null,s,d);d.then(_,_)}})}function eo(s,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var _=u[d],E=s,M=a,K=M;e:for(;K!==null;){switch(K.tag){case 27:if(lu(K.type)){Ci=K.stateNode,Zs=!1;break e}break;case 5:Ci=K.stateNode,Zs=!1;break e;case 3:case 4:Ci=K.stateNode.containerInfo,Zs=!0;break e}K=K.return}if(Ci===null)throw Error(i(160));Sv(E,M,_),Ci=null,Zs=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Tv(a,s),a=a.sibling}var ha=null;function Tv(s,a){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:eo(a,s),to(s),d&4&&(tu(3,s,s.return),eh(3,s),tu(5,s,s.return));break;case 1:eo(a,s),to(s),d&512&&(fr||u===null||Ga(u,u.return)),d&64&&bl&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var _=ha;if(eo(a,s),to(s),d&512&&(fr||u===null||Ga(u,u.return)),d&4){var E=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){e:{d=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":E=_.getElementsByTagName("title")[0],(!E||E[Dr]||E[Un]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(d),_.head.insertBefore(E,_.querySelector("head > title"))),os(E,d,u),E[Un]=s,gi(E),d=E;break e;case"link":var M=T2("link","href",_).get(d+(u.href||""));if(M){for(var K=0;K<M.length;K++)if(E=M[K],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(K,1);break t}}E=_.createElement(d),os(E,d,u),_.head.appendChild(E);break;case"meta":if(M=T2("meta","content",_).get(d+(u.content||""))){for(K=0;K<M.length;K++)if(E=M[K],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(K,1);break t}}E=_.createElement(d),os(E,d,u),_.head.appendChild(E);break;default:throw Error(i(468,d))}E[Un]=s,gi(E),d=E}s.stateNode=d}else N2(_,s.type,s.stateNode);else s.stateNode=A2(_,d,s.memoizedProps);else E!==d?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,d===null?N2(_,s.type,s.stateNode):A2(_,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Wm(s,s.memoizedProps,u.memoizedProps)}break;case 27:eo(a,s),to(s),d&512&&(fr||u===null||Ga(u,u.return)),u!==null&&d&4&&Wm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(eo(a,s),to(s),d&512&&(fr||u===null||Ga(u,u.return)),s.flags&32){_=s.stateNode;try{Ji(_,"")}catch(St){Qn(s,s.return,St)}}d&4&&s.stateNode!=null&&(_=s.memoizedProps,Wm(s,_,u!==null?u.memoizedProps:_)),d&1024&&(Zm=!0);break;case 6:if(eo(a,s),to(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(St){Qn(s,s.return,St)}}break;case 3:if(Vd=null,_=ha,ha=Od(a.containerInfo),eo(a,s),ha=_,to(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Jc(a.containerInfo)}catch(St){Qn(s,s.return,St)}Zm&&(Zm=!1,Nv(s));break;case 4:d=ha,ha=Od(s.stateNode.containerInfo),eo(a,s),to(s),ha=d;break;case 12:eo(a,s),to(s);break;case 31:eo(a,s),to(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Sd(s,d)));break;case 13:eo(a,s),to(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ad=Ve()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Sd(s,d)));break;case 22:_=s.memoizedState!==null;var ge=u!==null&&u.memoizedState!==null,Oe=bl,Ke=fr;if(bl=Oe||_,fr=Ke||ge,eo(a,s),fr=Ke,bl=Oe,to(s),d&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||ge||bl||fr||$u(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){ge=u=a;try{if(E=ge.stateNode,_)M=E.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{K=ge.stateNode;var Ze=ge.memoizedProps.style,Be=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;K.style.display=Be==null||typeof Be=="boolean"?"":(""+Be).trim()}}catch(St){Qn(ge,ge.return,St)}}}else if(a.tag===6){if(u===null){ge=a;try{ge.stateNode.nodeValue=_?"":ge.memoizedProps}catch(St){Qn(ge,ge.return,St)}}}else if(a.tag===18){if(u===null){ge=a;try{var ze=ge.stateNode;_?g2(ze,!0):g2(ge.stateNode,!1)}catch(St){Qn(ge,ge.return,St)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Sd(s,u))));break;case 19:eo(a,s),to(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Sd(s,d)));break;case 30:break;case 21:break;default:eo(a,s),to(s)}}function to(s){var a=s.flags;if(a&2){try{for(var u,d=s.return;d!==null;){if(vv(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Xm(s);xd(s,E,_);break;case 5:var M=u.stateNode;u.flags&32&&(Ji(M,""),u.flags&=-33);var K=Xm(s);xd(s,K,M);break;case 3:case 4:var ge=u.stateNode.containerInfo,Oe=Xm(s);Qm(s,Oe,ge);break;default:throw Error(i(161))}}catch(Ke){Qn(s,s.return,Ke)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function xl(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)wv(s,a.alternate,a),a=a.sibling}function $u(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:tu(4,a,a.return),$u(a);break;case 1:Ga(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&gv(a,a.return,u),$u(a);break;case 27:ch(a.stateNode);case 26:case 5:Ga(a,a.return),$u(a);break;case 22:a.memoizedState===null&&$u(a);break;case 30:$u(a);break;default:$u(a)}s=s.sibling}}function Sl(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,_=s,E=a,M=E.flags;switch(E.tag){case 0:case 11:case 15:Sl(_,E,u),eh(4,E);break;case 1:if(Sl(_,E,u),d=E,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Oe){Qn(d,d.return,Oe)}if(d=E,_=d.updateQueue,_!==null){var K=d.stateNode;try{var ge=_.shared.hiddenCallbacks;if(ge!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ge.length;_++)Br(ge[_],K)}catch(Oe){Qn(d,d.return,Oe)}}u&&M&64&&mv(E),th(E,E.return);break;case 27:_v(E);case 26:case 5:Sl(_,E,u),u&&d===null&&M&4&&yv(E),th(E,E.return);break;case 12:Sl(_,E,u);break;case 31:Sl(_,E,u),u&&M&4&&Ev(_,E);break;case 13:Sl(_,E,u),u&&M&4&&Av(_,E);break;case 22:E.memoizedState===null&&Sl(_,E,u),th(E,E.return);break;case 30:break;default:Sl(_,E,u)}a=a.sibling}}function eg(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&qu(u))}function tg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&qu(s))}function da(s,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Cv(s,a,u,d),a=a.sibling}function Cv(s,a,u,d){var _=a.flags;switch(a.tag){case 0:case 11:case 15:da(s,a,u,d),_&2048&&eh(9,a);break;case 1:da(s,a,u,d);break;case 3:da(s,a,u,d),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&qu(s)));break;case 12:if(_&2048){da(s,a,u,d),s=a.stateNode;try{var E=a.memoizedProps,M=E.id,K=E.onPostCommit;typeof K=="function"&&K(M,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ge){Qn(a,a.return,ge)}}else da(s,a,u,d);break;case 31:da(s,a,u,d);break;case 13:da(s,a,u,d);break;case 23:break;case 22:E=a.stateNode,M=a.alternate,a.memoizedState!==null?E._visibility&2?da(s,a,u,d):nh(s,a):E._visibility&2?da(s,a,u,d):(E._visibility|=2,Fc(s,a,u,d,(a.subtreeFlags&10256)!==0||!1)),_&2048&&eg(M,a);break;case 24:da(s,a,u,d),_&2048&&tg(a.alternate,a);break;default:da(s,a,u,d)}}function Fc(s,a,u,d,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,M=a,K=u,ge=d,Oe=M.flags;switch(M.tag){case 0:case 11:case 15:Fc(E,M,K,ge,_),eh(8,M);break;case 23:break;case 22:var Ke=M.stateNode;M.memoizedState!==null?Ke._visibility&2?Fc(E,M,K,ge,_):nh(E,M):(Ke._visibility|=2,Fc(E,M,K,ge,_)),_&&Oe&2048&&eg(M.alternate,M);break;case 24:Fc(E,M,K,ge,_),_&&Oe&2048&&tg(M.alternate,M);break;default:Fc(E,M,K,ge,_)}a=a.sibling}}function nh(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,d=a,_=d.flags;switch(d.tag){case 22:nh(u,d),_&2048&&eg(d.alternate,d);break;case 24:nh(u,d),_&2048&&tg(d.alternate,d);break;default:nh(u,d)}a=a.sibling}}var ih=8192;function Vc(s,a,u){if(s.subtreeFlags&ih)for(s=s.child;s!==null;)Iv(s,a,u),s=s.sibling}function Iv(s,a,u){switch(s.tag){case 26:Vc(s,a,u),s.flags&ih&&s.memoizedState!==null&&VT(u,ha,s.memoizedState,s.memoizedProps);break;case 5:Vc(s,a,u);break;case 3:case 4:var d=ha;ha=Od(s.stateNode.containerInfo),Vc(s,a,u),ha=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=ih,ih=16777216,Vc(s,a,u),ih=d):Vc(s,a,u));break;default:Vc(s,a,u)}}function Rv(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function rh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Hr=d,Mv(d,s)}Rv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lv(s),s=s.sibling}function Lv(s){switch(s.tag){case 0:case 11:case 15:rh(s),s.flags&2048&&tu(9,s,s.return);break;case 3:rh(s);break;case 12:rh(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Ed(s)):rh(s);break;default:rh(s)}}function Ed(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Hr=d,Mv(d,s)}Rv(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:tu(8,a,a.return),Ed(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Ed(a));break;default:Ed(a)}s=s.sibling}}function Mv(s,a){for(;Hr!==null;){var u=Hr;switch(u.tag){case 0:case 11:case 15:tu(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:qu(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Hr=d;else e:for(u=s;Hr!==null;){d=Hr;var _=d.sibling,E=d.return;if(xv(d),d===u){Hr=null;break e}if(_!==null){_.return=E,Hr=_;break e}Hr=E}}}var eT={getCacheForType:function(s){var a=Tr(Pi),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Tr(Pi).controller.signal}},tT=typeof WeakMap=="function"?WeakMap:Map,Gn=0,di=null,vn=null,wn=0,Xn=0,vo=null,nu=!1,Bc=!1,ng=!1,El=0,ji=0,iu=0,Yu=0,ig=0,_o=0,qc=0,sh=null,no=null,rg=!1,Ad=0,Dv=0,Td=1/0,Nd=null,ru=null,Cr=0,su=null,Hc=null,Al=0,sg=0,og=null,Pv=null,oh=0,ag=null;function bo(){return(Gn&2)!==0&&wn!==0?wn&-wn:le.T!==null?dg():Oi()}function kv(){if(_o===0)if((wn&536870912)===0||yn){var s=kn;kn<<=1,(kn&3932160)===0&&(kn=262144),_o=s}else _o=536870912;return s=_i.current,s!==null&&(s.flags|=32),_o}function io(s,a,u){(s===di&&(Xn===2||Xn===9)||s.cancelPendingCommit!==null)&&(zc(s,0),ou(s,wn,_o,!1)),kt(s,u),((Gn&2)===0||s!==di)&&(s===di&&((Gn&2)===0&&(Yu|=u),ji===4&&ou(s,wn,_o,!1)),ja(s))}function Uv(s,a,u){if((Gn&6)!==0)throw Error(i(327));var d=!u&&(a&127)===0&&(a&s.expiredLanes)===0||gr(s,a),_=d?rT(s,a):ug(s,a,!0),E=d;do{if(_===0){Bc&&!d&&ou(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!nT(u)){_=ug(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var K=s;_=sh;var ge=K.current.memoizedState.isDehydrated;if(ge&&(zc(K,M).flags|=256),M=ug(K,M,!1),M!==2){if(ng&&!ge){K.errorRecoveryDisabledLanes|=E,Yu|=E,_=4;break e}E=no,no=_,E!==null&&(no===null?no=E:no.push.apply(no,E))}_=M}if(E=!1,_!==2)continue}}if(_===1){zc(s,0),ou(s,a,0,!0);break}e:{switch(d=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ou(d,a,_o,!nu);break e;case 2:no=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=Ad+300-Ve(),10<_)){if(ou(d,a,_o,!nu),cn(d,0,!0)!==0)break e;Al=a,d.timeoutHandle=d2(Ov.bind(null,d,u,no,Nd,rg,a,_o,Yu,qc,nu,E,"Throttled",-0,0),_);break e}Ov(d,u,no,Nd,rg,a,_o,Yu,qc,nu,E,null,-0,0)}}break}while(!0);ja(s)}function Ov(s,a,u,d,_,E,M,K,ge,Oe,Ke,Ze,Be,ze){if(s.timeoutHandle=-1,Ze=a.subtreeFlags,Ze&8192||(Ze&16785408)===16785408){Ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ns},Iv(a,E,Ze);var St=(E&62914560)===E?Ad-Ve():(E&4194048)===E?Dv-Ve():0;if(St=BT(Ze,St),St!==null){Al=E,s.cancelPendingCommit=St(jv.bind(null,s,a,E,u,d,_,M,K,ge,Ke,Ze,null,Be,ze)),ou(s,E,M,!Oe);return}}jv(s,a,E,u,d,_,M,K,ge)}function nT(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var _=u[d],E=_.getSnapshot;_=_.value;try{if(!xr(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ou(s,a,u,d){a&=~ig,a&=~Yu,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var _=a;0<_;){var E=31-tn(_),M=1<<E;d[E]=-1,_&=~M}u!==0&&Yr(s,u,a)}function Cd(){return(Gn&6)===0?(ah(0),!1):!0}function lg(){if(vn!==null){if(Xn===0)var s=vn.return;else s=vn,Fo=Ua=null,Lc(s),et=null,At=0,s=vn;for(;s!==null;)pv(s.alternate,s),s=s.return;vn=null}}function zc(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,xT(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Al=0,lg(),di=s,vn=u=js(s.current,null),wn=a,Xn=0,vo=null,nu=!1,Bc=gr(s,a),ng=!1,qc=_o=ig=Yu=iu=ji=0,no=sh=null,rg=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var _=31-tn(d),E=1<<_;a|=s[_],d&=~E}return El=a,ku(),u}function Fv(s,a){Vt=null,le.H=Xf,a===xe||a===se?(a=Je(),Xn=3):a===De?(a=Je(),Xn=4):Xn=a===Bm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,vo=a,vn===null&&(ji=1,yd(s,$s(a,s.current)))}function Vv(){var s=_i.current;return s===null?!0:(wn&4194048)===wn?Cn===null:(wn&62914560)===wn||(wn&536870912)!==0?s===Cn:!1}function Bv(){var s=le.H;return le.H=Xf,s===null?Xf:s}function qv(){var s=le.A;return le.A=eT,s}function Id(){ji=4,nu||(wn&4194048)!==wn&&_i.current!==null||(Bc=!0),(iu&134217727)===0&&(Yu&134217727)===0||di===null||ou(di,wn,_o,!1)}function ug(s,a,u){var d=Gn;Gn|=2;var _=Bv(),E=qv();(di!==s||wn!==a)&&(Nd=null,zc(s,a)),a=!1;var M=ji;e:do try{if(Xn!==0&&vn!==null){var K=vn,ge=vo;switch(Xn){case 8:lg(),M=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(a=!0);var Oe=Xn;if(Xn=0,vo=null,Gc(s,K,ge,Oe),u&&Bc){M=0;break e}break;default:Oe=Xn,Xn=0,vo=null,Gc(s,K,ge,Oe)}}iT(),M=ji;break}catch(Ke){Fv(s,Ke)}while(!0);return a&&s.shellSuspendCounter++,Fo=Ua=null,Gn=d,le.H=_,le.A=E,vn===null&&(di=null,wn=0,ku()),M}function iT(){for(;vn!==null;)Hv(vn)}function rT(s,a){var u=Gn;Gn|=2;var d=Bv(),_=qv();di!==s||wn!==a?(Nd=null,Td=Ve()+500,zc(s,a)):Bc=gr(s,a);e:do try{if(Xn!==0&&vn!==null){a=vn;var E=vo;t:switch(Xn){case 1:Xn=0,vo=null,Gc(s,a,E,1);break;case 2:case 9:if(Re(E)){Xn=0,vo=null,zv(a);break}a=function(){Xn!==2&&Xn!==9||di!==s||(Xn=7),ja(s)},E.then(a,a);break e;case 3:Xn=7;break e;case 4:Xn=5;break e;case 7:Re(E)?(Xn=0,vo=null,zv(a)):(Xn=0,vo=null,Gc(s,a,E,7));break;case 5:var M=null;switch(vn.tag){case 26:M=vn.memoizedState;case 5:case 27:var K=vn;if(M?C2(M):K.stateNode.complete){Xn=0,vo=null;var ge=K.sibling;if(ge!==null)vn=ge;else{var Oe=K.return;Oe!==null?(vn=Oe,Rd(Oe)):vn=null}break t}}Xn=0,vo=null,Gc(s,a,E,5);break;case 6:Xn=0,vo=null,Gc(s,a,E,6);break;case 8:lg(),ji=6;break e;default:throw Error(i(462))}}sT();break}catch(Ke){Fv(s,Ke)}while(!0);return Fo=Ua=null,le.H=d,le.A=_,Gn=u,vn!==null?0:(di=null,wn=0,ku(),ji)}function sT(){for(;vn!==null&&!He();)Hv(vn)}function Hv(s){var a=hv(s.alternate,s,El);s.memoizedProps=s.pendingProps,a===null?Rd(s):vn=a}function zv(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=ov(u,a,a.pendingProps,a.type,void 0,wn);break;case 11:a=ov(u,a,a.pendingProps,a.type.render,a.ref,wn);break;case 5:Lc(a);default:pv(u,a),a=vn=Fu(a,El),a=hv(u,a,El)}s.memoizedProps=s.pendingProps,a===null?Rd(s):vn=a}function Gc(s,a,u,d){Fo=Ua=null,Lc(a),et=null,At=0;var _=a.return;try{if(YA(s,_,a,u,wn)){ji=1,yd(s,$s(u,s.current)),vn=null;return}}catch(E){if(_!==null)throw vn=_,E;ji=1,yd(s,$s(u,s.current)),vn=null;return}a.flags&32768?(yn||d===1?s=!0:Bc||(wn&536870912)!==0?s=!1:(nu=s=!0,(d===2||d===9||d===3||d===6)&&(d=_i.current,d!==null&&d.tag===13&&(d.flags|=16384))),Gv(a,s)):Rd(a)}function Rd(s){var a=s;do{if((a.flags&32768)!==0){Gv(a,nu);return}s=a.return;var u=WA(a.alternate,a,El);if(u!==null){vn=u;return}if(a=a.sibling,a!==null){vn=a;return}vn=a=s}while(a!==null);ji===0&&(ji=5)}function Gv(s,a){do{var u=XA(s.alternate,s);if(u!==null){u.flags&=32767,vn=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){vn=s;return}vn=s=u}while(s!==null);ji=6,vn=null}function jv(s,a,u,d,_,E,M,K,ge){s.cancelPendingCommit=null;do Ld();while(Cr!==0);if((Gn&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=yc,oo(s,u,E,M,K,ge),s===di&&(vn=di=null,wn=0),Hc=a,su=s,Al=u,sg=E,og=_,Pv=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,uT(Lt,function(){return Wv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=le.T,le.T=null,_=ue.p,ue.p=2,M=Gn,Gn|=4;try{QA(s,a,u)}finally{Gn=M,ue.p=_,le.T=d}}Cr=1,$v(),Yv(),Kv()}}function $v(){if(Cr===1){Cr=0;var s=su,a=Hc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=le.T,le.T=null;var d=ue.p;ue.p=2;var _=Gn;Gn|=4;try{Tv(a,s);var E=wg,M=ra(s.containerInfo),K=E.focusedElem,ge=E.selectionRange;if(M!==K&&K&&K.ownerDocument&&ia(K.ownerDocument.documentElement,K)){if(ge!==null&&Uo(K)){var Oe=ge.start,Ke=ge.end;if(Ke===void 0&&(Ke=Oe),"selectionStart"in K)K.selectionStart=Oe,K.selectionEnd=Math.min(Ke,K.value.length);else{var Ze=K.ownerDocument||document,Be=Ze&&Ze.defaultView||window;if(Be.getSelection){var ze=Be.getSelection(),St=K.textContent.length,Jt=Math.min(ge.start,St),ui=ge.end===void 0?Jt:Math.min(ge.end,St);!ze.extend&&Jt>ui&&(M=ui,ui=Jt,Jt=M);var Ce=Gl(K,Jt),Se=Gl(K,ui);if(Ce&&Se&&(ze.rangeCount!==1||ze.anchorNode!==Ce.node||ze.anchorOffset!==Ce.offset||ze.focusNode!==Se.node||ze.focusOffset!==Se.offset)){var Ue=Ze.createRange();Ue.setStart(Ce.node,Ce.offset),ze.removeAllRanges(),Jt>ui?(ze.addRange(Ue),ze.extend(Se.node,Se.offset)):(Ue.setEnd(Se.node,Se.offset),ze.addRange(Ue))}}}}for(Ze=[],ze=K;ze=ze.parentNode;)ze.nodeType===1&&Ze.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ze.length;K++){var Xe=Ze[K];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}zd=!!bg,wg=bg=null}finally{Gn=_,ue.p=d,le.T=u}}s.current=a,Cr=2}}function Yv(){if(Cr===2){Cr=0;var s=su,a=Hc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=le.T,le.T=null;var d=ue.p;ue.p=2;var _=Gn;Gn|=4;try{wv(s,a.alternate,a)}finally{Gn=_,ue.p=d,le.T=u}}Cr=3}}function Kv(){if(Cr===4||Cr===3){Cr=0,pe();var s=su,a=Hc,u=Al,d=Pv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Cr=5:(Cr=0,Hc=su=null,Jv(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(ru=null),ni(u),a=a.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Wt,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=le.T,_=ue.p,ue.p=2,le.T=null;try{for(var E=s.onRecoverableError,M=0;M<d.length;M++){var K=d[M];E(K.value,{componentStack:K.stack})}}finally{le.T=a,ue.p=_}}(Al&3)!==0&&Ld(),ja(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===ag?oh++:(oh=0,ag=s):oh=0,ah(0)}}function Jv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,qu(a)))}function Ld(){return $v(),Yv(),Kv(),Wv()}function Wv(){if(Cr!==5)return!1;var s=su,a=sg;sg=0;var u=ni(Al),d=le.T,_=ue.p;try{ue.p=32>u?32:u,le.T=null,u=og,og=null;var E=su,M=Al;if(Cr=0,Hc=su=null,Al=0,(Gn&6)!==0)throw Error(i(331));var K=Gn;if(Gn|=4,Lv(E.current),Cv(E,E.current,M,u),Gn=K,ah(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Wt,E)}catch{}return!0}finally{ue.p=_,le.T=d,Jv(s,a)}}function Xv(s,a,u){a=$s(u,a),a=Vm(s.stateNode,a,2),s=un(s,a,2),s!==null&&(kt(s,2),ja(s))}function Qn(s,a,u){if(s.tag===3)Xv(s,s,u);else for(;a!==null;){if(a.tag===3){Xv(a,s,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ru===null||!ru.has(d))){s=$s(u,s),u=Qy(2),d=un(a,u,2),d!==null&&(Zy(u,d,a,s),kt(d,2),ja(d));break}}a=a.return}}function cg(s,a,u){var d=s.pingCache;if(d===null){d=s.pingCache=new tT;var _=new Set;d.set(a,_)}else _=d.get(a),_===void 0&&(_=new Set,d.set(a,_));_.has(u)||(ng=!0,_.add(u),s=oT.bind(null,s,a,u),a.then(s,s))}function oT(s,a,u){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,di===s&&(wn&u)===u&&(ji===4||ji===3&&(wn&62914560)===wn&&300>Ve()-Ad?(Gn&2)===0&&zc(s,0):ig|=u,qc===wn&&(qc=0)),ja(s)}function Qv(s,a){a===0&&(a=Os()),s=oa(s,a),s!==null&&(kt(s,a),ja(s))}function aT(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Qv(s,u)}function lT(s,a){var u=0;switch(s.tag){case 31:case 13:var d=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),Qv(s,u)}function uT(s,a){return at(s,a)}var Md=null,jc=null,fg=!1,Dd=!1,hg=!1,au=0;function ja(s){s!==jc&&s.next===null&&(jc===null?Md=jc=s:jc=jc.next=s),Dd=!0,fg||(fg=!0,fT())}function ah(s,a){if(!hg&&Dd){hg=!0;do for(var u=!1,d=Md;d!==null;){if(s!==0){var _=d.pendingLanes;if(_===0)var E=0;else{var M=d.suspendedLanes,K=d.pingedLanes;E=(1<<31-tn(42|s)+1)-1,E&=_&~(M&~K),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,n2(d,E))}else E=wn,E=cn(d,d===di?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(E&3)===0||gr(d,E)||(u=!0,n2(d,E));d=d.next}while(u);hg=!1}}function cT(){Zv()}function Zv(){Dd=fg=!1;var s=0;au!==0&&wT()&&(s=au);for(var a=Ve(),u=null,d=Md;d!==null;){var _=d.next,E=e2(d,a);E===0?(d.next=null,u===null?Md=_:u.next=_,_===null&&(jc=u)):(u=d,(s!==0||(E&3)!==0)&&(Dd=!0)),d=_}Cr!==0&&Cr!==5||ah(s),au!==0&&(au=0)}function e2(s,a){for(var u=s.suspendedLanes,d=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var M=31-tn(E),K=1<<M,ge=_[M];ge===-1?((K&u)===0||(K&d)!==0)&&(_[M]=rr(K,a)):ge<=a&&(s.expiredLanes|=K),E&=~K}if(a=di,u=wn,u=cn(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===a&&(Xn===2||Xn===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&qe(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||gr(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(d!==null&&qe(d),ni(u)){case 2:case 8:u=xt;break;case 32:u=Lt;break;case 268435456:u=$t;break;default:u=Lt}return d=t2.bind(null,s),u=at(u,d),s.callbackPriority=a,s.callbackNode=u,a}return d!==null&&d!==null&&qe(d),s.callbackPriority=2,s.callbackNode=null,2}function t2(s,a){if(Cr!==0&&Cr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Ld()&&s.callbackNode!==u)return null;var d=wn;return d=cn(s,s===di?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(Uv(s,d,a),e2(s,Ve()),s.callbackNode!=null&&s.callbackNode===u?t2.bind(null,s):null)}function n2(s,a){if(Ld())return null;Uv(s,a,!0)}function fT(){ST(function(){(Gn&6)!==0?at(ft,cT):Zv()})}function dg(){if(au===0){var s=g;s===0&&(s=jt,jt<<=1,(jt&261888)===0&&(jt=256)),au=s}return au}function i2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:kr(""+s)}function r2(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function hT(s,a,u,d,_){if(a==="submit"&&u&&u.stateNode===_){var E=i2((_[Kn]||null).action),M=d.submitter;M&&(a=(a=M[Kn]||null)?i2(a.formAction):M.getAttribute("formAction"),a!==null&&(E=a,M=null));var K=new ar("action","action",null,d,_);s.push({event:K,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(au!==0){var ge=M?r2(_,M):new FormData(_);Dm(u,{pending:!0,data:ge,method:_.method,action:E},null,ge)}}else typeof E=="function"&&(K.preventDefault(),ge=M?r2(_,M):new FormData(_),Dm(u,{pending:!0,data:ge,method:_.method,action:E},E,ge))},currentTarget:_}]})}}for(var pg=0;pg<cl.length;pg++){var mg=cl[pg],dT=mg.toLowerCase(),pT=mg[0].toUpperCase()+mg.slice(1);Gs(dT,"on"+pT)}Gs(ul,"onAnimationEnd"),Gs(Du,"onAnimationIteration"),Gs(Uf,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(rd,"onTransitionRun"),Gs(sd,"onTransitionStart"),Gs(od,"onTransitionCancel"),Gs(Of,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lh));function s2(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],_=d.event;d=d.listeners;e:{var E=void 0;if(a)for(var M=d.length-1;0<=M;M--){var K=d[M],ge=K.instance,Oe=K.currentTarget;if(K=K.listener,ge!==E&&_.isPropagationStopped())break e;E=K,_.currentTarget=Oe;try{E(_)}catch(Ke){Pu(Ke)}_.currentTarget=null,E=ge}else for(M=0;M<d.length;M++){if(K=d[M],ge=K.instance,Oe=K.currentTarget,K=K.listener,ge!==E&&_.isPropagationStopped())break e;E=K,_.currentTarget=Oe;try{E(_)}catch(Ke){Pu(Ke)}_.currentTarget=null,E=ge}}}}function _n(s,a){var u=a[Mr];u===void 0&&(u=a[Mr]=new Set);var d=s+"__bubble";u.has(d)||(o2(a,s,2,!1),u.add(d))}function gg(s,a,u){var d=0;a&&(d|=4),o2(u,s,d,a)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function yg(s){if(!s[Pd]){s[Pd]=!0,Ea.forEach(function(u){u!=="selectionchange"&&(mT.has(u)||gg(u,!1,s),gg(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Pd]||(a[Pd]=!0,gg("selectionchange",!1,a))}}function o2(s,a,u,d){switch(k2(a)){case 2:var _=zT;break;case 8:_=GT;break;default:_=Mg}u=_.bind(null,a,u,s),_=void 0,!Wo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),d?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function vg(s,a,u,d,_){var E=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var K=d.stateNode.containerInfo;if(K===_)break;if(M===4)for(M=d.return;M!==null;){var ge=M.tag;if((ge===3||ge===4)&&M.stateNode.containerInfo===_)return;M=M.return}for(;K!==null;){if(M=Kr(K),M===null)return;if(ge=M.tag,ge===5||ge===6||ge===26||ge===27){d=E=M;continue e}K=K.parentNode}}d=d.return}Co(function(){var Oe=E,Ke=Ur(u),Ze=[];e:{var Be=Ff.get(s);if(Be!==void 0){var ze=ar,St=s;switch(s){case"keypress":if(Qr(u)===0)break e;case"keydown":case"keyup":ze=mn;break;case"focusin":St="focus",ze=Is;break;case"focusout":St="blur",ze=Is;break;case"beforeblur":case"afterblur":ze=Is;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=Hs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=C;break;case ul:case Du:case Uf:ze=A;break;case Of:ze=ee;break;case"scroll":case"scrollend":ze=Io;break;case"wheel":ze=Fe;break;case"copy":case"cut":case"paste":ze=oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=$n;break;case"toggle":case"beforetoggle":ze=Qt}var Jt=(a&4)!==0,ui=!Jt&&(s==="scroll"||s==="scrollend"),Ce=Jt?Be!==null?Be+"Capture":null:Be;Jt=[];for(var Se=Oe,Ue;Se!==null;){var Xe=Se;if(Ue=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Ue===null||Ce===null||(Xe=Wi(Se,Ce),Xe!=null&&Jt.push(uh(Se,Xe,Ue))),ui)break;Se=Se.return}0<Jt.length&&(Be=new ze(Be,St,null,u,Ke),Ze.push({event:Be,listeners:Jt}))}}if((a&7)===0){e:{if(Be=s==="mouseover"||s==="pointerover",ze=s==="mouseout"||s==="pointerout",Be&&u!==fo&&(St=u.relatedTarget||u.fromElement)&&(Kr(St)||St[Fi]))break e;if((ze||Be)&&(Be=Ke.window===Ke?Ke:(Be=Ke.ownerDocument)?Be.defaultView||Be.parentWindow:window,ze?(St=u.relatedTarget||u.toElement,ze=Oe,St=St?Kr(St):null,St!==null&&(ui=o(St),Jt=St.tag,St!==ui||Jt!==5&&Jt!==27&&Jt!==6)&&(St=null)):(ze=null,St=Oe),ze!==St)){if(Jt=Ra,Xe="onMouseLeave",Ce="onMouseEnter",Se="mouse",(s==="pointerout"||s==="pointerover")&&(Jt=$n,Xe="onPointerLeave",Ce="onPointerEnter",Se="pointer"),ui=ze==null?Be:Jr(ze),Ue=St==null?Be:Jr(St),Be=new Jt(Xe,Se+"leave",ze,u,Ke),Be.target=ui,Be.relatedTarget=Ue,Xe=null,Kr(Ke)===Oe&&(Jt=new Jt(Ce,Se+"enter",St,u,Ke),Jt.target=Ue,Jt.relatedTarget=ui,Xe=Jt),ui=Xe,ze&&St)t:{for(Jt=gT,Ce=ze,Se=St,Ue=0,Xe=Ce;Xe;Xe=Jt(Xe))Ue++;Xe=0;for(var Ht=Se;Ht;Ht=Jt(Ht))Xe++;for(;0<Ue-Xe;)Ce=Jt(Ce),Ue--;for(;0<Xe-Ue;)Se=Jt(Se),Xe--;for(;Ue--;){if(Ce===Se||Se!==null&&Ce===Se.alternate){Jt=Ce;break t}Ce=Jt(Ce),Se=Jt(Se)}Jt=null}else Jt=null;ze!==null&&a2(Ze,Be,ze,Jt,!1),St!==null&&ui!==null&&a2(Ze,ui,St,Jt,!0)}}e:{if(Be=Oe?Jr(Oe):window,ze=Be.nodeName&&Be.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Be.type==="file")var Vn=Ma;else if(Lu(Be))if(ms)Vn=Po;else{Vn=Mi;var Rt=Hl}else ze=Be.nodeName,!ze||ze.toLowerCase()!=="input"||Be.type!=="checkbox"&&Be.type!=="radio"?Oe&&Na(Oe.elementType)&&(Vn=Ma):Vn=gc;if(Vn&&(Vn=Vn(s,Oe))){Ls(Ze,Vn,u,Ke);break e}Rt&&Rt(s,Be,Oe),s==="focusout"&&Oe&&Be.type==="number"&&Oe.memoizedProps.value!=null&&nl(Be,"number",Be.value)}switch(Rt=Oe?Jr(Oe):window,s){case"focusin":(Lu(Rt)||Rt.contentEditable==="true")&&(Ms=Rt,sa=Oe,Or=null);break;case"focusout":Or=sa=Ms=null;break;case"mousedown":zs=!0;break;case"contextmenu":case"mouseup":case"dragend":zs=!1,Dn(Ze,u,Ke);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":Dn(Ze,u,Ke)}var fn;if(hn)e:{switch(s){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Lo?Rs(s,u)&&(xn="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(xn="onCompositionStart");xn&&(br&&u.locale!=="ko"&&(Lo||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Lo&&(fn=ol()):(Xr=Ke,Xo="value"in Xr?Xr.value:Xr.textContent,Lo=!0)),Rt=kd(Oe,xn),0<Rt.length&&(xn=new Ne(xn,s,null,u,Ke),Ze.push({event:xn,listeners:Rt}),fn?xn.data=fn:(fn=Ro(u),fn!==null&&(xn.data=fn)))),(fn=lr?ts(s,u):Zo(s,u))&&(xn=kd(Oe,"onBeforeInput"),0<xn.length&&(Rt=new Ne("onBeforeInput","beforeinput",null,u,Ke),Ze.push({event:Rt,listeners:xn}),Rt.data=fn)),hT(Ze,s,Oe,u,Ke)}s2(Ze,a)})}function uh(s,a,u){return{instance:s,listener:a,currentTarget:u}}function kd(s,a){for(var u=a+"Capture",d=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Wi(s,u),_!=null&&d.unshift(uh(s,_,E)),_=Wi(s,a),_!=null&&d.push(uh(s,_,E))),s.tag===3)return d;s=s.return}return[]}function gT(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function a2(s,a,u,d,_){for(var E=a._reactName,M=[];u!==null&&u!==d;){var K=u,ge=K.alternate,Oe=K.stateNode;if(K=K.tag,ge!==null&&ge===d)break;K!==5&&K!==26&&K!==27||Oe===null||(ge=Oe,_?(Oe=Wi(u,E),Oe!=null&&M.unshift(uh(u,Oe,ge))):_||(Oe=Wi(u,E),Oe!=null&&M.push(uh(u,Oe,ge)))),u=u.return}M.length!==0&&s.push({event:a,listeners:M})}var yT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function l2(s){return(typeof s=="string"?s:""+s).replace(yT,`
`).replace(vT,"")}function u2(s,a){return a=l2(a),l2(s)===a}function li(s,a,u,d,_,E){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ji(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ji(s,""+d);break;case"className":or(s,"class",d);break;case"tabIndex":or(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":or(s,u,d);break;case"style":sl(s,d,E);break;case"data":if(a!=="object"){or(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=kr(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&li(s,a,"name",_.name,_,null),li(s,a,"formEncType",_.formEncType,_,null),li(s,a,"formMethod",_.formMethod,_,null),li(s,a,"formTarget",_.formTarget,_,null)):(li(s,a,"encType",_.encType,_,null),li(s,a,"method",_.method,_,null),li(s,a,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=kr(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=Ns);break;case"onScroll":d!=null&&_n("scroll",s);break;case"onScrollEnd":d!=null&&_n("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=kr(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":_n("beforetoggle",s),_n("toggle",s),Wr(s,"popover",d);break;case"xlinkActuate":Si(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Si(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Si(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Si(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Si(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Si(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Si(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Si(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Si(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Wr(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Ca.get(u)||u,Wr(s,u,d))}}function _g(s,a,u,d,_,E){switch(u){case"style":sl(s,d,E);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof d=="string"?Ji(s,d):(typeof d=="number"||typeof d=="bigint")&&Ji(s,""+d);break;case"onScroll":d!=null&&_n("scroll",s);break;case"onScrollEnd":d!=null&&_n("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[Kn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof d=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,d,_);break e}u in s?s[u]=d:d===!0?s.setAttribute(u,""):Wr(s,u,d)}}}function os(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",s),_n("load",s);var d=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var M=u[E];if(M!=null)switch(E){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:li(s,a,E,M,u,null)}}_&&li(s,a,"srcSet",u.srcSet,u,null),d&&li(s,a,"src",u.src,u,null);return;case"input":_n("invalid",s);var K=E=M=_=null,ge=null,Oe=null;for(d in u)if(u.hasOwnProperty(d)){var Ke=u[d];if(Ke!=null)switch(d){case"name":_=Ke;break;case"type":M=Ke;break;case"checked":ge=Ke;break;case"defaultChecked":Oe=Ke;break;case"value":E=Ke;break;case"defaultValue":K=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,a));break;default:li(s,a,d,Ke,u,null)}}Vl(s,E,K,ge,Oe,M,_,!1);return;case"select":_n("invalid",s),d=M=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(K=u[_],K!=null))switch(_){case"value":E=K;break;case"defaultValue":M=K;break;case"multiple":d=K;default:li(s,a,_,K,u,null)}a=E,u=M,s.multiple=!!d,a!=null?_r(s,!!d,a,!1):u!=null&&_r(s,!!d,u,!0);return;case"textarea":_n("invalid",s),E=_=d=null;for(M in u)if(u.hasOwnProperty(M)&&(K=u[M],K!=null))switch(M){case"value":d=K;break;case"defaultValue":_=K;break;case"children":E=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(91));break;default:li(s,a,M,K,u,null)}uo(s,d,_,E);return;case"option":for(ge in u)if(u.hasOwnProperty(ge)&&(d=u[ge],d!=null))switch(ge){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:li(s,a,ge,d,u,null)}return;case"dialog":_n("beforetoggle",s),_n("toggle",s),_n("cancel",s),_n("close",s);break;case"iframe":case"object":_n("load",s);break;case"video":case"audio":for(d=0;d<lh.length;d++)_n(lh[d],s);break;case"image":_n("error",s),_n("load",s);break;case"details":_n("toggle",s);break;case"embed":case"source":case"link":_n("error",s),_n("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in u)if(u.hasOwnProperty(Oe)&&(d=u[Oe],d!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:li(s,a,Oe,d,u,null)}return;default:if(Na(a)){for(Ke in u)u.hasOwnProperty(Ke)&&(d=u[Ke],d!==void 0&&_g(s,a,Ke,d,u,void 0));return}}for(K in u)u.hasOwnProperty(K)&&(d=u[K],d!=null&&li(s,a,K,d,u,null))}function _T(s,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,M=null,K=null,ge=null,Oe=null,Ke=null;for(ze in u){var Ze=u[ze];if(u.hasOwnProperty(ze)&&Ze!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":ge=Ze;default:d.hasOwnProperty(ze)||li(s,a,ze,null,d,Ze)}}for(var Be in d){var ze=d[Be];if(Ze=u[Be],d.hasOwnProperty(Be)&&(ze!=null||Ze!=null))switch(Be){case"type":E=ze;break;case"name":_=ze;break;case"checked":Oe=ze;break;case"defaultChecked":Ke=ze;break;case"value":M=ze;break;case"defaultValue":K=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(i(137,a));break;default:ze!==Ze&&li(s,a,Be,ze,d,Ze)}}Ko(s,M,K,ge,Oe,Ke,E,_);return;case"select":ze=M=K=Be=null;for(E in u)if(ge=u[E],u.hasOwnProperty(E)&&ge!=null)switch(E){case"value":break;case"multiple":ze=ge;default:d.hasOwnProperty(E)||li(s,a,E,null,d,ge)}for(_ in d)if(E=d[_],ge=u[_],d.hasOwnProperty(_)&&(E!=null||ge!=null))switch(_){case"value":Be=E;break;case"defaultValue":K=E;break;case"multiple":M=E;default:E!==ge&&li(s,a,_,E,d,ge)}a=K,u=M,d=ze,Be!=null?_r(s,!!u,Be,!1):!!d!=!!u&&(a!=null?_r(s,!!u,a,!0):_r(s,!!u,u?[]:"",!1));return;case"textarea":ze=Be=null;for(K in u)if(_=u[K],u.hasOwnProperty(K)&&_!=null&&!d.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:li(s,a,K,null,d,_)}for(M in d)if(_=d[M],E=u[M],d.hasOwnProperty(M)&&(_!=null||E!=null))switch(M){case"value":Be=_;break;case"defaultValue":ze=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&li(s,a,M,_,d,E)}il(s,Be,ze);return;case"option":for(var St in u)if(Be=u[St],u.hasOwnProperty(St)&&Be!=null&&!d.hasOwnProperty(St))switch(St){case"selected":s.selected=!1;break;default:li(s,a,St,null,d,Be)}for(ge in d)if(Be=d[ge],ze=u[ge],d.hasOwnProperty(ge)&&Be!==ze&&(Be!=null||ze!=null))switch(ge){case"selected":s.selected=Be&&typeof Be!="function"&&typeof Be!="symbol";break;default:li(s,a,ge,Be,d,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in u)Be=u[Jt],u.hasOwnProperty(Jt)&&Be!=null&&!d.hasOwnProperty(Jt)&&li(s,a,Jt,null,d,Be);for(Oe in d)if(Be=d[Oe],ze=u[Oe],d.hasOwnProperty(Oe)&&Be!==ze&&(Be!=null||ze!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(i(137,a));break;default:li(s,a,Oe,Be,d,ze)}return;default:if(Na(a)){for(var ui in u)Be=u[ui],u.hasOwnProperty(ui)&&Be!==void 0&&!d.hasOwnProperty(ui)&&_g(s,a,ui,void 0,d,Be);for(Ke in d)Be=d[Ke],ze=u[Ke],!d.hasOwnProperty(Ke)||Be===ze||Be===void 0&&ze===void 0||_g(s,a,Ke,Be,d,ze);return}}for(var Ce in u)Be=u[Ce],u.hasOwnProperty(Ce)&&Be!=null&&!d.hasOwnProperty(Ce)&&li(s,a,Ce,null,d,Be);for(Ze in d)Be=d[Ze],ze=u[Ze],!d.hasOwnProperty(Ze)||Be===ze||Be==null&&ze==null||li(s,a,Ze,Be,d,ze)}function c2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bT(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var _=u[d],E=_.transferSize,M=_.initiatorType,K=_.duration;if(E&&K&&c2(M)){for(M=0,K=_.responseEnd,d+=1;d<u.length;d++){var ge=u[d],Oe=ge.startTime;if(Oe>K)break;var Ke=ge.transferSize,Ze=ge.initiatorType;Ke&&c2(Ze)&&(ge=ge.responseEnd,M+=Ke*(ge<K?1:(K-Oe)/(ge-Oe)))}if(--d,a+=8*(E+M)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var bg=null,wg=null;function Ud(s){return s.nodeType===9?s:s.ownerDocument}function f2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h2(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function xg(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Sg=null;function wT(){var s=window.event;return s&&s.type==="popstate"?s===Sg?!1:(Sg=s,!0):(Sg=null,!1)}var d2=typeof setTimeout=="function"?setTimeout:void 0,xT=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,ST=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(s){return p2.resolve(null).then(s).catch(ET)}:d2;function ET(s){setTimeout(function(){throw s})}function lu(s){return s==="head"}function m2(s,a){var u=a,d=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(d===0){s.removeChild(_),Jc(a);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")ch(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,ch(u);for(var E=u.firstChild;E;){var M=E.nextSibling,K=E.nodeName;E[Dr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=M}}else u==="body"&&ch(s.ownerDocument.body);u=_}while(u);Jc(a)}function g2(s,a){var u=s;s=0;do{var d=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=d}while(u)}function Eg(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Eg(u),ao(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function AT(s,a,u,d){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Dr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=qo(s.nextSibling),s===null)break}return null}function TT(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=qo(s.nextSibling),s===null))return null;return s}function y2(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=qo(s.nextSibling),s===null))return null;return s}function Ag(s){return s.data==="$?"||s.data==="$~"}function Tg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function NT(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function qo(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Ng=null;function v2(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return qo(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function _2(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function b2(s,a,u){switch(a=Ud(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ch(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ao(s)}var Ho=new Map,w2=new Set;function Od(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Tl=ue.d;ue.d={f:CT,r:IT,D:RT,C:LT,L:MT,m:DT,X:kT,S:PT,M:UT};function CT(){var s=Tl.f(),a=Cd();return s||a}function IT(s){var a=vr(s);a!==null&&a.tag===5&&a.type==="form"?Fy(a):Tl.r(s)}var $c=typeof document>"u"?null:document;function x2(s,a,u){var d=$c;if(d&&typeof a=="string"&&a){var _=Ei(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),w2.has(_)||(w2.add(_),s={rel:s,crossOrigin:u,href:a},d.querySelector(_)===null&&(a=d.createElement("link"),os(a,"link",s),gi(a),d.head.appendChild(a)))}}function RT(s){Tl.D(s),x2("dns-prefetch",s,null)}function LT(s,a){Tl.C(s,a),x2("preconnect",s,a)}function MT(s,a,u){Tl.L(s,a,u);var d=$c;if(d&&s&&a){var _='link[rel="preload"][as="'+Ei(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+Ei(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+Ei(u.imageSizes)+'"]')):_+='[href="'+Ei(s)+'"]';var E=_;switch(a){case"style":E=Yc(s);break;case"script":E=Kc(s)}Ho.has(E)||(s=b({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),Ho.set(E,s),d.querySelector(_)!==null||a==="style"&&d.querySelector(fh(E))||a==="script"&&d.querySelector(hh(E))||(a=d.createElement("link"),os(a,"link",s),gi(a),d.head.appendChild(a)))}}function DT(s,a){Tl.m(s,a);var u=$c;if(u&&s){var d=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+Ei(d)+'"][href="'+Ei(s)+'"]',E=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Kc(s)}if(!Ho.has(E)&&(s=b({rel:"modulepreload",href:s},a),Ho.set(E,s),u.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(hh(E)))return}d=u.createElement("link"),os(d,"link",s),gi(d),u.head.appendChild(d)}}}function PT(s,a,u){Tl.S(s,a,u);var d=$c;if(d&&s){var _=fs(d).hoistableStyles,E=Yc(s);a=a||"default";var M=_.get(E);if(!M){var K={loading:0,preload:null};if(M=d.querySelector(fh(E)))K.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},u),(u=Ho.get(E))&&Cg(s,u);var ge=M=d.createElement("link");gi(ge),os(ge,"link",s),ge._p=new Promise(function(Oe,Ke){ge.onload=Oe,ge.onerror=Ke}),ge.addEventListener("load",function(){K.loading|=1}),ge.addEventListener("error",function(){K.loading|=2}),K.loading|=4,Fd(M,a,d)}M={type:"stylesheet",instance:M,count:1,state:K},_.set(E,M)}}}function kT(s,a){Tl.X(s,a);var u=$c;if(u&&s){var d=fs(u).hoistableScripts,_=Kc(s),E=d.get(_);E||(E=u.querySelector(hh(_)),E||(s=b({src:s,async:!0},a),(a=Ho.get(_))&&Ig(s,a),E=u.createElement("script"),gi(E),os(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(_,E))}}function UT(s,a){Tl.M(s,a);var u=$c;if(u&&s){var d=fs(u).hoistableScripts,_=Kc(s),E=d.get(_);E||(E=u.querySelector(hh(_)),E||(s=b({src:s,async:!0,type:"module"},a),(a=Ho.get(_))&&Ig(s,a),E=u.createElement("script"),gi(E),os(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(_,E))}}function S2(s,a,u,d){var _=(_=me.current)?Od(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Yc(u.href),u=fs(_).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Yc(u.href);var E=fs(_).hoistableStyles,M=E.get(s);if(M||(_=_.ownerDocument||_,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,M),(E=_.querySelector(fh(s)))&&!E._p&&(M.instance=E,M.state.loading=5),Ho.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ho.set(s,u),E||OT(_,s,u,M.state))),a&&d===null)throw Error(i(528,""));return M}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Kc(u),u=fs(_).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Yc(s){return'href="'+Ei(s)+'"'}function fh(s){return'link[rel="stylesheet"]['+s+"]"}function E2(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function OT(s,a,u,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),os(a,"link",u),gi(a),s.head.appendChild(a))}function Kc(s){return'[src="'+Ei(s)+'"]'}function hh(s){return"script[async]"+s}function A2(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Ei(u.href)+'"]');if(d)return a.instance=d,gi(d),d;var _=b({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),gi(d),os(d,"style",_),Fd(d,u.precedence,s),a.instance=d;case"stylesheet":_=Yc(u.href);var E=s.querySelector(fh(_));if(E)return a.state.loading|=4,a.instance=E,gi(E),E;d=E2(u),(_=Ho.get(_))&&Cg(d,_),E=(s.ownerDocument||s).createElement("link"),gi(E);var M=E;return M._p=new Promise(function(K,ge){M.onload=K,M.onerror=ge}),os(E,"link",d),a.state.loading|=4,Fd(E,u.precedence,s),a.instance=E;case"script":return E=Kc(u.src),(_=s.querySelector(hh(E)))?(a.instance=_,gi(_),_):(d=u,(_=Ho.get(E))&&(d=b({},u),Ig(d,_)),s=s.ownerDocument||s,_=s.createElement("script"),gi(_),os(_,"link",d),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Fd(d,u.precedence,s));return a.instance}function Fd(s,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,E=_,M=0;M<d.length;M++){var K=d[M];if(K.dataset.precedence===a)E=K;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Cg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Ig(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Vd=null;function T2(s,a,u){if(Vd===null){var d=new Map,_=Vd=new Map;_.set(u,d)}else _=Vd,d=_.get(u),d||(d=new Map,_.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[Dr]||E[Un]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var M=E.getAttribute(a)||"";M=s+M;var K=d.get(M);K?K.push(E):d.set(M,[E])}}return d}function N2(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function FT(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function C2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function VT(s,a,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Yc(d.href),E=a.querySelector(fh(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Bd.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,gi(E);return}E=a.ownerDocument||a,d=E2(d),(_=Ho.get(_))&&Cg(d,_),E=E.createElement("link"),gi(E);var M=E;M._p=new Promise(function(K,ge){M.onload=K,M.onerror=ge}),os(E,"link",d),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Bd.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var Rg=0;function BT(s,a){return s.stylesheets&&s.count===0&&Hd(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var d=setTimeout(function(){if(s.stylesheets&&Hd(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&Rg===0&&(Rg=62500*bT());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Hd(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>Rg?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function Bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var qd=null;function Hd(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,qd=new Map,a.forEach(qT,s),qd=null,Bd.call(s))}function qT(s,a){if(!(a.state.loading&4)){var u=qd.get(s);if(u)var d=u.get(null);else{u=new Map,qd.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var M=_[E];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),d=M)}d&&u.set(null,d)}_=a.instance,M=_.getAttribute("data-precedence"),E=u.get(M)||d,E===d&&u.set(null,_),u.set(M,_),this.count++,d=Bd.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var dh={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function HT(s,a,u,d,_,E,M,K,ge){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.hiddenUpdates=Ki(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function I2(s,a,u,d,_,E,M,K,ge,Oe,Ke,Ze){return s=new HT(s,a,u,M,ge,Oe,Ke,Ze,K),a=1,E===!0&&(a|=24),E=Vr(3,null,null,a),s.current=E,E.stateNode=s,a=Wl(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:d,isDehydrated:u,cache:a},ct(E),s}function R2(s){return s?(s=Sr,s):Sr}function L2(s,a,u,d,_,E){_=R2(_),d.context===null?d.context=_:d.pendingContext=_,d=Kt(a),d.payload={element:u},E=E===void 0?null:E,E!==null&&(d.callback=E),u=un(s,d,a),u!==null&&(io(u,s,a),Hn(u,s,a))}function M2(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Lg(s,a){M2(s,a),(s=s.alternate)&&M2(s,a)}function D2(s){if(s.tag===13||s.tag===31){var a=oa(s,67108864);a!==null&&io(a,s,67108864),Lg(s,67108864)}}function P2(s){if(s.tag===13||s.tag===31){var a=bo();a=jn(a);var u=oa(s,a);u!==null&&io(u,s,a),Lg(s,a)}}var zd=!0;function zT(s,a,u,d){var _=le.T;le.T=null;var E=ue.p;try{ue.p=2,Mg(s,a,u,d)}finally{ue.p=E,le.T=_}}function GT(s,a,u,d){var _=le.T;le.T=null;var E=ue.p;try{ue.p=8,Mg(s,a,u,d)}finally{ue.p=E,le.T=_}}function Mg(s,a,u,d){if(zd){var _=Dg(d);if(_===null)vg(s,a,d,Gd,u),U2(s,d);else if($T(_,s,a,u,d))d.stopPropagation();else if(U2(s,d),a&4&&-1<jT.indexOf(s)){for(;_!==null;){var E=vr(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var M=It(E.pendingLanes);if(M!==0){var K=E;for(K.pendingLanes|=2,K.entangledLanes|=2;M;){var ge=1<<31-tn(M);K.entanglements[1]|=ge,M&=~ge}ja(E),(Gn&6)===0&&(Td=Ve()+500,ah(0))}}break;case 31:case 13:K=oa(E,2),K!==null&&io(K,E,2),Cd(),Lg(E,2)}if(E=Dg(d),E===null&&vg(s,a,d,Gd,u),E===_)break;_=E}_!==null&&d.stopPropagation()}else vg(s,a,d,null,u)}}function Dg(s){return s=Ur(s),Pg(s)}var Gd=null;function Pg(s){if(Gd=null,s=Kr(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Gd=s,null}function k2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ct()){case ft:return 2;case xt:return 8;case Lt:case mt:return 32;case $t:return 268435456;default:return 32}default:return 32}}var kg=!1,uu=null,cu=null,fu=null,ph=new Map,mh=new Map,hu=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U2(s,a){switch(s){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":ph.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(a.pointerId)}}function gh(s,a,u,d,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:E,targetContainers:[_]},a!==null&&(a=vr(a),a!==null&&D2(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function $T(s,a,u,d,_){switch(a){case"focusin":return uu=gh(uu,s,a,u,d,_),!0;case"dragenter":return cu=gh(cu,s,a,u,d,_),!0;case"mouseover":return fu=gh(fu,s,a,u,d,_),!0;case"pointerover":var E=_.pointerId;return ph.set(E,gh(ph.get(E)||null,s,a,u,d,_)),!0;case"gotpointercapture":return E=_.pointerId,mh.set(E,gh(mh.get(E)||null,s,a,u,d,_)),!0}return!1}function O2(s){var a=Kr(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,yr(s.priority,function(){P2(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,yr(s.priority,function(){P2(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Dg(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);fo=d,u.target.dispatchEvent(d),fo=null}else return a=vr(u),a!==null&&D2(a),s.blockedOn=u,!1;a.shift()}return!0}function F2(s,a,u){jd(s)&&u.delete(a)}function YT(){kg=!1,uu!==null&&jd(uu)&&(uu=null),cu!==null&&jd(cu)&&(cu=null),fu!==null&&jd(fu)&&(fu=null),ph.forEach(F2),mh.forEach(F2)}function $d(s,a){s.blockedOn===a&&(s.blockedOn=null,kg||(kg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YT)))}var Yd=null;function V2(s){Yd!==s&&(Yd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yd===s&&(Yd=null);for(var a=0;a<s.length;a+=3){var u=s[a],d=s[a+1],_=s[a+2];if(typeof d!="function"){if(Pg(d||u)===null)continue;break}var E=vr(u);E!==null&&(s.splice(a,3),a-=3,Dm(E,{pending:!0,data:_,method:u.method,action:d},d,_))}}))}function Jc(s){function a(ge){return $d(ge,s)}uu!==null&&$d(uu,s),cu!==null&&$d(cu,s),fu!==null&&$d(fu,s),ph.forEach(a),mh.forEach(a);for(var u=0;u<hu.length;u++){var d=hu[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<hu.length&&(u=hu[0],u.blockedOn===null);)O2(u),u.blockedOn===null&&hu.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var _=u[d],E=u[d+1],M=_[Kn]||null;if(typeof E=="function")M||V2(u);else if(M){var K=null;if(E&&E.hasAttribute("formAction")){if(_=E,M=E[Kn]||null)K=M.formAction;else if(Pg(_)!==null)continue}else K=M.action;typeof K=="function"?u[d+1]=K:(u.splice(d,3),d-=3),V2(u)}}}function B2(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(M){return _=M})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Ug(s){this._internalRoot=s}Kd.prototype.render=Ug.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=bo();L2(u,d,s,a,null,null)},Kd.prototype.unmount=Ug.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;L2(s.current,2,null,s,null,null),Cd(),a[Fi]=null}};function Kd(s){this._internalRoot=s}Kd.prototype.unstable_scheduleHydration=function(s){if(s){var a=Oi();s={blockedOn:null,target:s,priority:a};for(var u=0;u<hu.length&&a!==0&&a<hu[u].priority;u++);hu.splice(u,0,s),u===0&&O2(s)}};var q2=e.version;if(q2!=="19.2.4")throw Error(i(527,q2,"19.2.4"));ue.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var KT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Wt=Jd.inject(KT),Ot=Jd}catch{}}return vh.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,d="",_=Ky,E=Jy,M=Wy;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError)),a=I2(s,1,!1,null,null,u,d,null,_,E,M,B2),s[Fi]=a.current,yg(s),new Ug(a)},vh.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var d=!1,_="",E=Ky,M=Jy,K=Wy,ge=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(K=u.onRecoverableError),u.formState!==void 0&&(ge=u.formState)),a=I2(s,1,!0,a,u??null,d,_,ge,E,M,K,B2),a.context=R2(null),u=a.current,d=bo(),d=jn(d),_=Kt(d),_.callback=null,un(u,_,d),u=d,a.current.lanes=u,kt(a,u),ja(a),s[Fi]=a.current,yg(s),new Kd(a)},vh.version="19.2.4",vh}var X2;function aN(){if(X2)return Vg.exports;X2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vg.exports=oN(),Vg.exports}var lN=aN();const uN=N1(lN);var Il=(n=>(n.DASHBOARD="dashboard",n.SPEAKING="speaking",n.WRITING="writing",n.SETTINGS="settings",n))(Il||{});const L0=[{id:"gemini-3-pro-preview",name:"3 Pro",desc:"Cht lng cao nht",icon:"fa-crosshairs",color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",badge:"MC NH"},{id:"gemini-3-flash",name:"3 Flash",desc:"Nhanh & Mnh m",icon:"fa-bolt",color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20"},{id:"gemini-2.5-flash",name:"2.5 Flash",desc:"n nh & An ton",icon:"fa-lock",color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20"}],Yi=({children:n,className:e="",title:t})=>T.jsxs("div",{className:`bg-white/5 rounded-[2rem] shadow-2xl border border-white/10 overflow-hidden transition-all duration-300 hover:shadow-xl backdrop-blur-xl ${e}`,children:[t&&T.jsx("div",{className:"px-8 py-6 border-b border-white/10 bg-white/5",children:T.jsx("h3",{className:"font-bold text-xl text-white tracking-tight",children:t})}),T.jsx("div",{className:"p-8",children:n})]}),Zi=({children:n,variant:e="primary",isLoading:t,className:i="",...r})=>{const o="px-8 py-3.5 rounded-2xl text-lg font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 shadow-sm",l={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30 hover:shadow-blue-500/40 hover:-translate-y-0.5",secondary:"bg-white/10 text-slate-300 border-2 border-white/10 hover:bg-white/20 hover:border-white/20",outline:"border-2 border-blue-500 text-blue-400 hover:bg-blue-500/10",danger:"bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20"};return T.jsx("button",{className:`${o} ${l[e]} ${i}`,disabled:t||r.disabled,...r,children:t?T.jsxs(T.Fragment,{children:[T.jsx("i",{className:"fas fa-circle-notch fa-spin"})," Processing..."]}):n})},ox=({score:n})=>{const e=t=>t>=8?"text-green-400 border-green-500/50 bg-green-500/10":t>=6?"text-blue-400 border-blue-500/50 bg-blue-500/10":t>=4?"text-yellow-400 border-yellow-500/50 bg-yellow-500/10":"text-red-400 border-red-500/50 bg-red-500/10";return T.jsx("div",{className:`w-32 h-32 rounded-full border-[6px] flex items-center justify-center ${e(n)} shadow-inner transition-all duration-500 transform hover:scale-105`,children:T.jsx("span",{className:"text-5xl font-extrabold tracking-tighter",children:n.toFixed(1)})})},Cp=({breakdown:n,max:e=10})=>T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-6",children:Object.entries(n).map(([t,i])=>{const r=i;return T.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10 shadow-sm hover:shadow-md transition-shadow",children:[T.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-400 mb-3 uppercase tracking-wide",children:[T.jsx("span",{children:t}),T.jsxs("span",{className:"text-white text-base",children:[r,"/",e]})]}),T.jsx("div",{className:"h-4 w-full bg-black/40 rounded-full overflow-hidden p-[2px]",children:T.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out shadow-sm ${r>=e*.8?"bg-gradient-to-r from-green-400 to-green-500":r>=e*.5?"bg-gradient-to-r from-blue-400 to-blue-500":"bg-gradient-to-r from-yellow-400 to-yellow-500"}`,style:{width:`${r/e*100}%`}})})]},t)})}),cN=n=>{switch(n.toLowerCase()){case"fluency and coherence":return"fa-water";case"lexical resource":return"fa-book";case"grammatical range and accuracy":return"fa-spell-check";case"grammatical accuracy":return"fa-spell-check";case"pronunciation":return"fa-volume-up";case"content":return"fa-lightbulb";case"language":return"fa-language";case"fluency":return"fa-water";case"articulation":return"fa-microphone";case"intonation":return"fa-music";case"confidence":return"fa-user-check";case"task response":return"fa-tasks";case"coherence and cohesion":return"fa-link";case"coherence":return"fa-link";case"vocabulary":return"fa-book";case"grammar":return"fa-spell-check";default:return"fa-star"}},fN=n=>{switch(n.toLowerCase()){case"fluency and coherence":return{bg:"bg-teal-500/10",text:"text-teal-400",border:"border-teal-500/20",gradient:"from-teal-400 to-teal-500"};case"lexical resource":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20",gradient:"from-emerald-400 to-emerald-500"};case"grammatical range and accuracy":return{bg:"bg-violet-500/10",text:"text-violet-400",border:"border-violet-500/20",gradient:"from-violet-400 to-violet-500"};case"grammatical accuracy":return{bg:"bg-violet-500/10",text:"text-violet-400",border:"border-violet-500/20",gradient:"from-violet-400 to-violet-500"};case"pronunciation":return{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/20",gradient:"from-orange-400 to-orange-500"};case"content":return{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/20",gradient:"from-purple-400 to-purple-500"};case"language":return{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/20",gradient:"from-blue-400 to-blue-500"};case"fluency":return{bg:"bg-teal-500/10",text:"text-teal-400",border:"border-teal-500/20",gradient:"from-teal-400 to-teal-500"};case"articulation":return{bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20",gradient:"from-red-400 to-red-500"};case"intonation":return{bg:"bg-pink-500/10",text:"text-pink-400",border:"border-pink-500/20",gradient:"from-pink-400 to-pink-500"};case"confidence":return{bg:"bg-amber-500/10",text:"text-amber-400",border:"border-amber-500/20",gradient:"from-amber-400 to-amber-500"};case"task response":return{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/20",gradient:"from-indigo-400 to-indigo-500"};case"coherence and cohesion":return{bg:"bg-cyan-500/10",text:"text-cyan-400",border:"border-cyan-500/20",gradient:"from-cyan-400 to-cyan-500"};case"coherence":return{bg:"bg-cyan-500/10",text:"text-cyan-400",border:"border-cyan-500/20",gradient:"from-cyan-400 to-cyan-500"};case"vocabulary":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20",gradient:"from-emerald-400 to-emerald-500"};case"grammar":return{bg:"bg-violet-500/10",text:"text-violet-400",border:"border-violet-500/20",gradient:"from-violet-400 to-violet-500"};default:return{bg:"bg-slate-500/10",text:"text-slate-400",border:"border-slate-500/20",gradient:"from-slate-400 to-slate-500"}}},Ip=({rubricFeedback:n})=>T.jsxs("div",{className:"space-y-6",children:[T.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white shadow-lg",children:T.jsx("i",{className:"fas fa-clipboard-check"})}),"Detailed Rubric Assessment"]}),T.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map((e,t)=>{const i=fN(e.criterion),r=e.score/e.maxScore*100;return T.jsxs("div",{className:`${i.bg} rounded-2xl border ${i.border} p-6 transition-all duration-300 hover:shadow-lg hover:-translate-y-1`,children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl bg-white/5 border border-white/10 shadow-sm flex items-center justify-center ${i.text}`,children:T.jsx("i",{className:`fas ${cN(e.criterion)} text-xl`})}),T.jsxs("div",{children:[T.jsx("h5",{className:"font-bold text-white text-lg",children:e.criterion}),T.jsx("p",{className:"text-sm text-slate-400",children:"Assessment Criterion"})]})]}),T.jsx("div",{className:"text-right",children:T.jsxs("div",{className:`text-3xl font-extrabold ${i.text}`,children:[e.score,T.jsxs("span",{className:"text-lg text-slate-500 font-normal",children:["/",e.maxScore]})]})})]}),T.jsx("div",{className:"h-3 w-full bg-black/40 rounded-full overflow-hidden mb-4 shadow-inner",children:T.jsx("div",{className:`h-full rounded-full bg-gradient-to-r ${i.gradient} transition-all duration-1000 ease-out`,style:{width:`${r}%`}})}),T.jsx("div",{className:"bg-white/5 rounded-xl p-4 mb-4 border border-white/5 shadow-inner",children:T.jsx("p",{className:"text-slate-200 leading-relaxed",children:e.feedback})}),e.suggestions&&e.suggestions.length>0&&T.jsxs("div",{className:"space-y-2",children:[T.jsxs("p",{className:`text-sm font-bold ${i.text} uppercase tracking-wide flex items-center gap-2`,children:[T.jsx("i",{className:"fas fa-magic"})," Improvement Suggestions"]}),T.jsx("ul",{className:"space-y-2",children:e.suggestions.map((o,l)=>T.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm bg-white/5 border border-white/5 rounded-lg p-3 shadow-inner",children:[T.jsx("span",{className:`w-5 h-5 rounded-full ${i.bg} ${i.text} flex items-center justify-center text-[10px] font-bold shrink-0 mt-0.5 border ${i.border}`,children:l+1}),T.jsx("span",{children:o})]},l))})]})]},t)})})]}),Rp=({errors:n})=>{if(!n||n.length===0)return null;const e=t=>{switch(t){case"grammar":return{icon:"fa-spell-check",bg:"bg-red-500/10",text:"text-red-400",label:"Grammar"};case"vocabulary":return{icon:"fa-book",bg:"bg-blue-500/10",text:"text-blue-400",label:"Vocabulary"};case"pronunciation":return{icon:"fa-volume-up",bg:"bg-orange-500/10",text:"text-orange-400",label:"Pronunciation"};case"coherence":return{icon:"fa-link",bg:"bg-purple-500/10",text:"text-purple-400",label:"Coherence"};default:return{icon:"fa-exclamation-circle",bg:"bg-slate-500/10",text:"text-slate-400",label:"Other"}}};return T.jsxs("div",{className:"space-y-4",children:[T.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center text-white shadow-lg",children:T.jsx("i",{className:"fas fa-exclamation-triangle"})}),"Errors to Correct"]}),T.jsx("div",{className:"space-y-4",children:n.map((t,i)=>{const r=e(t.type);return T.jsx("div",{className:"bg-white/5 rounded-2xl border border-white/10 p-5 shadow-sm hover:shadow-md transition-shadow",children:T.jsxs("div",{className:"flex items-start gap-4",children:[T.jsx("div",{className:`w-10 h-10 rounded-xl ${r.bg} ${r.text} flex items-center justify-center shrink-0 border border-white/5`,children:T.jsx("i",{className:`fas ${r.icon}`})}),T.jsxs("div",{className:"flex-1 space-y-3",children:[T.jsx("div",{className:"flex items-center gap-2",children:T.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${r.bg} ${r.text} border border-white/5`,children:r.label})}),T.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[T.jsx("span",{className:"line-through text-red-500 bg-red-500/10 px-3 py-1.5 rounded-lg font-medium border border-red-500/20",children:t.original}),T.jsx("i",{className:"fas fa-arrow-right text-slate-500"}),T.jsx("span",{className:"text-green-400 bg-green-500/10 px-3 py-1.5 rounded-lg font-medium border border-green-500/20",children:t.correction})]}),T.jsxs("p",{className:"text-slate-300 text-sm bg-black/20 rounded-lg p-3 border border-white/5",children:[T.jsx("i",{className:"fas fa-info-circle text-blue-400 mr-2"}),t.explanation]})]})]})},i)})})]})},hN=({stats:n})=>T.jsxs("div",{className:"space-y-8 animate-fade-in",children:[T.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-indigo-900/80 via-blue-900/40 to-slate-900/80 border border-white/10 p-8 md:p-12 shadow-2xl backdrop-blur-3xl",children:[T.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-blue-500/10 blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-1/4 h-1/2 bg-purple-500/10 blur-[80px] rounded-full translate-y-1/2 -translate-x-1/2"}),T.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8",children:[T.jsxs("div",{className:"flex-1 space-y-4 text-center md:text-left",children:[T.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white tracking-tight",children:"Welcome back! "}),T.jsx("p",{className:"text-blue-200/80 text-lg md:text-xl font-medium max-w-xl leading-relaxed",children:"Continue your journey to master English. Every lesson is a step closer to your goal!"}),T.jsx("div",{className:"pt-6 flex flex-wrap justify-center md:justify-start gap-4",children:T.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 px-8 py-4 rounded-3xl shadow-xl hover:bg-white/15 transition-all group",children:T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-blue-300 font-bold uppercase text-xs tracking-widest mb-1",children:"Lessons Completed"}),T.jsxs("div",{className:"flex items-baseline gap-2",children:[T.jsx("span",{className:"text-5xl font-black text-white group-hover:scale-105 transition-transform inline-block",children:n.lessonsCompleted}),T.jsx("span",{className:"text-blue-400 font-bold text-lg leading-none",children:"lessons"})]})]})})})]}),T.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80 flex items-center justify-center",children:[T.jsx("div",{className:"absolute inset-0 border-2 border-blue-500/20 rounded-full animate-[spin_10s_linear_infinite]"}),T.jsx("div",{className:"absolute inset-4 border border-purple-500/20 rounded-full animate-[spin_15s_linear_infinite_reverse]"}),T.jsxs("div",{className:"relative z-10 w-48 h-48 md:w-56 md:h-56 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-[3rem] shadow-2xl shadow-blue-500/40 flex items-center justify-center transform hover:scale-105 transition-all duration-500",children:[T.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-[3rem] backdrop-blur-sm border border-white/20"}),T.jsx("i",{className:"fas fa-rocket text-7xl md:text-8xl text-white drop-shadow-2xl relative z-10 animate-bounce-slow"})]}),T.jsx("div",{className:"absolute top-0 right-4 w-12 h-12 bg-yellow-400/20 backdrop-blur-md rounded-2xl flex items-center justify-center text-yellow-400 border border-yellow-400/30 animate-float-delayed",children:T.jsx("i",{className:"fas fa-star text-xl"})}),T.jsx("div",{className:"absolute bottom-8 left-0 w-14 h-14 bg-indigo-500/20 backdrop-blur-md rounded-2xl flex items-center justify-center text-indigo-400 border border-indigo-500/30 animate-float",children:T.jsx("i",{className:"fas fa-graduation-cap text-2xl"})})]})]})]}),T.jsx("div",{className:"max-w-6xl mx-auto w-full",children:T.jsx(Yi,{title:"Daily Tips",className:"bg-white/5 border-white/10 backdrop-blur-xl shadow-2xl rounded-[2.5rem]",children:T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-8 pb-4",children:[T.jsxs("div",{className:"flex flex-col items-center text-center p-8 bg-white/5 rounded-[2rem] border border-white/5 hover:border-blue-500/30 transition-all group",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-green-500/10 text-green-400 flex items-center justify-center mb-4 text-3xl border border-green-500/20 group-hover:scale-110 transition-transform",children:T.jsx("i",{className:"fas fa-microphone-lines"})}),T.jsx("h4",{className:"font-bold text-white mb-2 text-xl",children:"Self-Correction"}),T.jsx("p",{className:"text-base text-slate-400 leading-relaxed max-w-xs",children:"Record your speech and listen back. You'll catch 50% more of your own errors."})]}),T.jsxs("div",{className:"flex flex-col items-center text-center p-8 bg-white/5 rounded-[2rem] border border-white/5 hover:border-purple-500/30 transition-all group",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-purple-500/10 text-purple-400 flex items-center justify-center mb-4 text-3xl border border-purple-500/20 group-hover:scale-110 transition-transform",children:T.jsx("i",{className:"fas fa-book-open"})}),T.jsx("h4",{className:"font-bold text-white mb-2 text-xl",children:"Vocabulary"}),T.jsx("p",{className:"text-base text-slate-400 leading-relaxed max-w-xs",children:'Learn 5 new "high-value" words daily. Try using them in a sentence immediately.'})]}),T.jsxs("div",{className:"flex flex-col items-center text-center p-8 bg-white/5 rounded-[2rem] border border-white/5 hover:border-yellow-500/30 transition-all group",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-yellow-500/10 text-yellow-400 flex items-center justify-center mb-4 text-3xl border border-yellow-500/20 group-hover:scale-110 transition-transform",children:T.jsx("i",{className:"fas fa-clock"})}),T.jsx("h4",{className:"font-bold text-white mb-2 text-xl",children:"Consistency"}),T.jsx("p",{className:"text-base text-slate-400 leading-relaxed max-w-xs",children:"15 minutes every morning is better than 2 hours once a week. Stay disciplined!"})]})]})})})]}),dN=()=>{};var Q2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],l=n[t++],c=n[t++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,c=l?n[r+1]:0,h=r+2<n.length,f=h?n[r+2]:0,p=o>>2,b=(o&3)<<4|c>>4;let S=(c&15)<<2|f>>6,x=f&63;h||(x=64,l||(S=64)),i.push(t[p],t[b],t[S],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ax(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const b=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||f==null||b==null)throw new mN;const S=o<<2|c>>4;if(i.push(S),f!==64){const x=c<<4&240|f>>2;if(i.push(x),b!==64){const D=f<<6&192|b;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gN=function(n){const e=ax(n);return lx.encodeByteArray(e,!0)},Lp=function(n){return gN(n).replace(/\./g,"")},yN=function(n){try{return lx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=()=>vN().__FIREBASE_DEFAULTS__,bN=()=>{if(typeof process>"u"||typeof Q2>"u")return;const n=Q2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yN(n[1]);return e&&JSON.parse(e)},I1=()=>{try{return dN()||_N()||bN()||wN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xN=n=>{var e,t;return(t=(e=I1())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},SN=n=>{const e=xN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ux=()=>{var n;return(n=I1())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AN(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lp(JSON.stringify(t)),Lp(JSON.stringify(l)),""].join(".")}const Rh={};function NN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rh))Rh[e]?n.emulator.push(e):n.prod.push(e);return n}function CN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Z2=!1;function IN(n,e){if(typeof window>"u"||typeof document>"u"||!R1(window.location.host)||Rh[n]===e||Rh[n]||Z2)return;Rh[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",o=NN().prod.length>0;function l(){const S=document.getElementById(i);S&&S.remove()}function c(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function f(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Z2=!0,l()},S}function p(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=CN(i),x=t("text"),D=document.getElementById(x)||document.createElement("span"),O=t("learnmore"),B=document.getElementById(O)||document.createElement("a"),q=t("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;c(Z),p(B,O);const W=f();h(X,q),Z.append(X,D,B,W),document.body.appendChild(Z)}o?(D.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LN(){var e;const n=(e=I1())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MN(){return!LN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DN(){try{return typeof indexedDB=="object"}catch{return!1}}function PN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="FirebaseError";class Tf extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kN,Object.setPrototypeOf(this,Tf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cx.prototype.create)}}class cx{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?UN(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Tf(r,c,i)}}function UN(n,e){return n.replace(ON,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const ON=/\{\$([^}]+)}/g;function Mp(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],l=e[r];if(e5(o)&&e5(l)){if(!Mp(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function e5(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n){return n&&n._delegate?n._delegate:n}class Oh{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new EN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BN(e))try{this.getOrInitializeService({instanceIdentifier:Ku})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ku){return this.instances.has(e)}getOptions(e=Ku){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:VN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ku){return this.component?this.component.multipleInstances?e:Ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VN(n){return n===Ku?void 0:n}function BN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ln||(Ln={}));const HN={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},zN=Ln.INFO,GN={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},jN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=GN[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fx{constructor(e){this.name=e,this._logLevel=zN,this._logHandler=jN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...e),this._logHandler(this,Ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...e),this._logHandler(this,Ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...e),this._logHandler(this,Ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...e),this._logHandler(this,Ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...e),this._logHandler(this,Ln.ERROR,...e)}}const $N=(n,e)=>e.some(t=>n instanceof t);let t5,n5;function YN(){return t5||(t5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KN(){return n5||(n5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hx=new WeakMap,M0=new WeakMap,dx=new WeakMap,zg=new WeakMap,L1=new WeakMap;function JN(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_u(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&hx.set(t,n)}).catch(()=>{}),L1.set(e,n),e}function WN(n){if(M0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});M0.set(n,e)}let D0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return M0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _u(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function XN(n){D0=n(D0)}function QN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Gg(this),e,...t);return dx.set(i,e.sort?e.sort():[e]),_u(i)}:KN().includes(n)?function(...e){return n.apply(Gg(this),e),_u(hx.get(this))}:function(...e){return _u(n.apply(Gg(this),e))}}function ZN(n){return typeof n=="function"?QN(n):(n instanceof IDBTransaction&&WN(n),$N(n,YN())?new Proxy(n,D0):n)}function _u(n){if(n instanceof IDBRequest)return JN(n);if(zg.has(n))return zg.get(n);const e=ZN(n);return e!==n&&(zg.set(n,e),L1.set(e,n)),e}const Gg=n=>L1.get(n);function e4(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,e),c=_u(l);return i&&l.addEventListener("upgradeneeded",h=>{i(_u(l.result),h.oldVersion,h.newVersion,_u(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const t4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],jg=new Map;function i5(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=n4.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||t4.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),r&&h.done]))[0]};return jg.set(e,o),o}XN(n=>({...n,get:(e,t,i)=>i5(e,t)||n.get(e,t,i),has:(e,t)=>!!i5(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r4(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function r4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const P0="@firebase/app",r5="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new fx("@firebase/app"),s4="@firebase/app-compat",o4="@firebase/analytics-compat",a4="@firebase/analytics",l4="@firebase/app-check-compat",u4="@firebase/app-check",c4="@firebase/auth",f4="@firebase/auth-compat",h4="@firebase/database",d4="@firebase/data-connect",p4="@firebase/database-compat",m4="@firebase/functions",g4="@firebase/functions-compat",y4="@firebase/installations",v4="@firebase/installations-compat",_4="@firebase/messaging",b4="@firebase/messaging-compat",w4="@firebase/performance",x4="@firebase/performance-compat",S4="@firebase/remote-config",E4="@firebase/remote-config-compat",A4="@firebase/storage",T4="@firebase/storage-compat",N4="@firebase/firestore",C4="@firebase/ai",I4="@firebase/firestore-compat",R4="firebase",L4="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="[DEFAULT]",M4={[P0]:"fire-core",[s4]:"fire-core-compat",[a4]:"fire-analytics",[o4]:"fire-analytics-compat",[u4]:"fire-app-check",[l4]:"fire-app-check-compat",[c4]:"fire-auth",[f4]:"fire-auth-compat",[h4]:"fire-rtdb",[d4]:"fire-data-connect",[p4]:"fire-rtdb-compat",[m4]:"fire-fn",[g4]:"fire-fn-compat",[y4]:"fire-iid",[v4]:"fire-iid-compat",[_4]:"fire-fcm",[b4]:"fire-fcm-compat",[w4]:"fire-perf",[x4]:"fire-perf-compat",[S4]:"fire-rc",[E4]:"fire-rc-compat",[A4]:"fire-gcs",[T4]:"fire-gcs-compat",[N4]:"fire-fst",[I4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[R4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new Map,D4=new Map,U0=new Map;function s5(n,e){try{n.container.addComponent(e)}catch(t){Dl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pp(n){const e=n.name;if(U0.has(e))return Dl.debug(`There were multiple attempts to register component ${e}.`),!1;U0.set(e,n);for(const t of Dp.values())s5(t,n);for(const t of D4.values())s5(t,n);return!0}function P4(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function k4(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bu=new cx("app","Firebase",U4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Oh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=L4;function px(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:k0,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw bu.create("bad-app-name",{appName:String(r)});if(t||(t=ux()),!t)throw bu.create("no-options");const o=Dp.get(r);if(o){if(Mp(t,o.options)&&Mp(i,o.config))return o;throw bu.create("duplicate-app",{appName:r})}const l=new qN(r);for(const h of U0.values())l.addComponent(h);const c=new O4(t,i,l);return Dp.set(r,c),c}function V4(n=k0){const e=Dp.get(n);if(!e&&n===k0&&ux())return px();if(!e)throw bu.create("no-app",{appName:n});return e}function cf(n,e,t){let i=M4[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dl.warn(l.join(" "));return}Pp(new Oh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="firebase-heartbeat-database",q4=1,Fh="firebase-heartbeat-store";let $g=null;function mx(){return $g||($g=e4(B4,q4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Fh)}catch(t){console.warn(t)}}}}).catch(n=>{throw bu.create("idb-open",{originalErrorMessage:n.message})})),$g}async function H4(n){try{const t=(await mx()).transaction(Fh),i=await t.objectStore(Fh).get(gx(n));return await t.done,i}catch(e){if(e instanceof Tf)Dl.warn(e.message);else{const t=bu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dl.warn(t.message)}}}async function o5(n,e){try{const i=(await mx()).transaction(Fh,"readwrite");await i.objectStore(Fh).put(e,gx(n)),await i.done}catch(t){if(t instanceof Tf)Dl.warn(t.message);else{const i=bu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dl.warn(i.message)}}}function gx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=1024,G4=30;class j4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=a5();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>G4){const l=K4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Dl.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=a5(),{heartbeatsToSend:i,unsentEntries:r}=$4(this._heartbeatsCache.heartbeats),o=Lp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Dl.warn(t),""}}}function a5(){return new Date().toISOString().substring(0,10)}function $4(n,e=z4){const t=[];let i=n.slice();for(const r of n){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),l5(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),l5(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DN()?PN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return o5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return o5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function l5(n){return Lp(JSON.stringify({version:2,heartbeats:n})).length}function K4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(n){Pp(new Oh("platform-logger",e=>new i4(e),"PRIVATE")),Pp(new Oh("heartbeat",e=>new j4(e),"PRIVATE")),cf(P0,r5,n),cf(P0,r5,"esm2020"),cf("fire-js","")}J4("");var W4="firebase",X4="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cf(W4,X4,"app");var u5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wu,yx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(G,V){function L(){}L.prototype=V.prototype,G.F=V.prototype,G.prototype=new L,G.prototype.constructor=G,G.D=function(j,I,k){for(var F=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)F[ce-2]=arguments[ce];return V.prototype[I].apply(j,F)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(G,V,L){L||(L=0);const j=Array(16);if(typeof V=="string")for(var I=0;I<16;++I)j[I]=V.charCodeAt(L++)|V.charCodeAt(L++)<<8|V.charCodeAt(L++)<<16|V.charCodeAt(L++)<<24;else for(I=0;I<16;++I)j[I]=V[L++]|V[L++]<<8|V[L++]<<16|V[L++]<<24;V=G.g[0],L=G.g[1],I=G.g[2];let k=G.g[3],F;F=V+(k^L&(I^k))+j[0]+3614090360&4294967295,V=L+(F<<7&4294967295|F>>>25),F=k+(I^V&(L^I))+j[1]+3905402710&4294967295,k=V+(F<<12&4294967295|F>>>20),F=I+(L^k&(V^L))+j[2]+606105819&4294967295,I=k+(F<<17&4294967295|F>>>15),F=L+(V^I&(k^V))+j[3]+3250441966&4294967295,L=I+(F<<22&4294967295|F>>>10),F=V+(k^L&(I^k))+j[4]+4118548399&4294967295,V=L+(F<<7&4294967295|F>>>25),F=k+(I^V&(L^I))+j[5]+1200080426&4294967295,k=V+(F<<12&4294967295|F>>>20),F=I+(L^k&(V^L))+j[6]+2821735955&4294967295,I=k+(F<<17&4294967295|F>>>15),F=L+(V^I&(k^V))+j[7]+4249261313&4294967295,L=I+(F<<22&4294967295|F>>>10),F=V+(k^L&(I^k))+j[8]+1770035416&4294967295,V=L+(F<<7&4294967295|F>>>25),F=k+(I^V&(L^I))+j[9]+2336552879&4294967295,k=V+(F<<12&4294967295|F>>>20),F=I+(L^k&(V^L))+j[10]+4294925233&4294967295,I=k+(F<<17&4294967295|F>>>15),F=L+(V^I&(k^V))+j[11]+2304563134&4294967295,L=I+(F<<22&4294967295|F>>>10),F=V+(k^L&(I^k))+j[12]+1804603682&4294967295,V=L+(F<<7&4294967295|F>>>25),F=k+(I^V&(L^I))+j[13]+4254626195&4294967295,k=V+(F<<12&4294967295|F>>>20),F=I+(L^k&(V^L))+j[14]+2792965006&4294967295,I=k+(F<<17&4294967295|F>>>15),F=L+(V^I&(k^V))+j[15]+1236535329&4294967295,L=I+(F<<22&4294967295|F>>>10),F=V+(I^k&(L^I))+j[1]+4129170786&4294967295,V=L+(F<<5&4294967295|F>>>27),F=k+(L^I&(V^L))+j[6]+3225465664&4294967295,k=V+(F<<9&4294967295|F>>>23),F=I+(V^L&(k^V))+j[11]+643717713&4294967295,I=k+(F<<14&4294967295|F>>>18),F=L+(k^V&(I^k))+j[0]+3921069994&4294967295,L=I+(F<<20&4294967295|F>>>12),F=V+(I^k&(L^I))+j[5]+3593408605&4294967295,V=L+(F<<5&4294967295|F>>>27),F=k+(L^I&(V^L))+j[10]+38016083&4294967295,k=V+(F<<9&4294967295|F>>>23),F=I+(V^L&(k^V))+j[15]+3634488961&4294967295,I=k+(F<<14&4294967295|F>>>18),F=L+(k^V&(I^k))+j[4]+3889429448&4294967295,L=I+(F<<20&4294967295|F>>>12),F=V+(I^k&(L^I))+j[9]+568446438&4294967295,V=L+(F<<5&4294967295|F>>>27),F=k+(L^I&(V^L))+j[14]+3275163606&4294967295,k=V+(F<<9&4294967295|F>>>23),F=I+(V^L&(k^V))+j[3]+4107603335&4294967295,I=k+(F<<14&4294967295|F>>>18),F=L+(k^V&(I^k))+j[8]+1163531501&4294967295,L=I+(F<<20&4294967295|F>>>12),F=V+(I^k&(L^I))+j[13]+2850285829&4294967295,V=L+(F<<5&4294967295|F>>>27),F=k+(L^I&(V^L))+j[2]+4243563512&4294967295,k=V+(F<<9&4294967295|F>>>23),F=I+(V^L&(k^V))+j[7]+1735328473&4294967295,I=k+(F<<14&4294967295|F>>>18),F=L+(k^V&(I^k))+j[12]+2368359562&4294967295,L=I+(F<<20&4294967295|F>>>12),F=V+(L^I^k)+j[5]+4294588738&4294967295,V=L+(F<<4&4294967295|F>>>28),F=k+(V^L^I)+j[8]+2272392833&4294967295,k=V+(F<<11&4294967295|F>>>21),F=I+(k^V^L)+j[11]+1839030562&4294967295,I=k+(F<<16&4294967295|F>>>16),F=L+(I^k^V)+j[14]+4259657740&4294967295,L=I+(F<<23&4294967295|F>>>9),F=V+(L^I^k)+j[1]+2763975236&4294967295,V=L+(F<<4&4294967295|F>>>28),F=k+(V^L^I)+j[4]+1272893353&4294967295,k=V+(F<<11&4294967295|F>>>21),F=I+(k^V^L)+j[7]+4139469664&4294967295,I=k+(F<<16&4294967295|F>>>16),F=L+(I^k^V)+j[10]+3200236656&4294967295,L=I+(F<<23&4294967295|F>>>9),F=V+(L^I^k)+j[13]+681279174&4294967295,V=L+(F<<4&4294967295|F>>>28),F=k+(V^L^I)+j[0]+3936430074&4294967295,k=V+(F<<11&4294967295|F>>>21),F=I+(k^V^L)+j[3]+3572445317&4294967295,I=k+(F<<16&4294967295|F>>>16),F=L+(I^k^V)+j[6]+76029189&4294967295,L=I+(F<<23&4294967295|F>>>9),F=V+(L^I^k)+j[9]+3654602809&4294967295,V=L+(F<<4&4294967295|F>>>28),F=k+(V^L^I)+j[12]+3873151461&4294967295,k=V+(F<<11&4294967295|F>>>21),F=I+(k^V^L)+j[15]+530742520&4294967295,I=k+(F<<16&4294967295|F>>>16),F=L+(I^k^V)+j[2]+3299628645&4294967295,L=I+(F<<23&4294967295|F>>>9),F=V+(I^(L|~k))+j[0]+4096336452&4294967295,V=L+(F<<6&4294967295|F>>>26),F=k+(L^(V|~I))+j[7]+1126891415&4294967295,k=V+(F<<10&4294967295|F>>>22),F=I+(V^(k|~L))+j[14]+2878612391&4294967295,I=k+(F<<15&4294967295|F>>>17),F=L+(k^(I|~V))+j[5]+4237533241&4294967295,L=I+(F<<21&4294967295|F>>>11),F=V+(I^(L|~k))+j[12]+1700485571&4294967295,V=L+(F<<6&4294967295|F>>>26),F=k+(L^(V|~I))+j[3]+2399980690&4294967295,k=V+(F<<10&4294967295|F>>>22),F=I+(V^(k|~L))+j[10]+4293915773&4294967295,I=k+(F<<15&4294967295|F>>>17),F=L+(k^(I|~V))+j[1]+2240044497&4294967295,L=I+(F<<21&4294967295|F>>>11),F=V+(I^(L|~k))+j[8]+1873313359&4294967295,V=L+(F<<6&4294967295|F>>>26),F=k+(L^(V|~I))+j[15]+4264355552&4294967295,k=V+(F<<10&4294967295|F>>>22),F=I+(V^(k|~L))+j[6]+2734768916&4294967295,I=k+(F<<15&4294967295|F>>>17),F=L+(k^(I|~V))+j[13]+1309151649&4294967295,L=I+(F<<21&4294967295|F>>>11),F=V+(I^(L|~k))+j[4]+4149444226&4294967295,V=L+(F<<6&4294967295|F>>>26),F=k+(L^(V|~I))+j[11]+3174756917&4294967295,k=V+(F<<10&4294967295|F>>>22),F=I+(V^(k|~L))+j[2]+718787259&4294967295,I=k+(F<<15&4294967295|F>>>17),F=L+(k^(I|~V))+j[9]+3951481745&4294967295,G.g[0]=G.g[0]+V&4294967295,G.g[1]=G.g[1]+(I+(F<<21&4294967295|F>>>11))&4294967295,G.g[2]=G.g[2]+I&4294967295,G.g[3]=G.g[3]+k&4294967295}i.prototype.v=function(G,V){V===void 0&&(V=G.length);const L=V-this.blockSize,j=this.C;let I=this.h,k=0;for(;k<V;){if(I==0)for(;k<=L;)r(this,G,k),k+=this.blockSize;if(typeof G=="string"){for(;k<V;)if(j[I++]=G.charCodeAt(k++),I==this.blockSize){r(this,j),I=0;break}}else for(;k<V;)if(j[I++]=G[k++],I==this.blockSize){r(this,j),I=0;break}}this.h=I,this.o+=V},i.prototype.A=function(){var G=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);G[0]=128;for(var V=1;V<G.length-8;++V)G[V]=0;V=this.o*8;for(var L=G.length-8;L<G.length;++L)G[L]=V&255,V/=256;for(this.v(G),G=Array(16),V=0,L=0;L<4;++L)for(let j=0;j<32;j+=8)G[V++]=this.g[L]>>>j&255;return G};function o(G,V){var L=c;return Object.prototype.hasOwnProperty.call(L,G)?L[G]:L[G]=V(G)}function l(G,V){this.h=V;const L=[];let j=!0;for(let I=G.length-1;I>=0;I--){const k=G[I]|0;j&&k==V||(L[I]=k,j=!1)}this.g=L}var c={};function h(G){return-128<=G&&G<128?o(G,function(V){return new l([V|0],V<0?-1:0)}):new l([G|0],G<0?-1:0)}function f(G){if(isNaN(G)||!isFinite(G))return b;if(G<0)return B(f(-G));const V=[];let L=1;for(let j=0;G>=L;j++)V[j]=G/L|0,L*=4294967296;return new l(V,0)}function p(G,V){if(G.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(G.charAt(0)=="-")return B(p(G.substring(1),V));if(G.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=f(Math.pow(V,8));let j=b;for(let k=0;k<G.length;k+=8){var I=Math.min(8,G.length-k);const F=parseInt(G.substring(k,k+I),V);I<8?(I=f(Math.pow(V,I)),j=j.j(I).add(f(F))):(j=j.j(L),j=j.add(f(F)))}return j}var b=h(0),S=h(1),x=h(16777216);n=l.prototype,n.m=function(){if(O(this))return-B(this).m();let G=0,V=1;for(let L=0;L<this.g.length;L++){const j=this.i(L);G+=(j>=0?j:4294967296+j)*V,V*=4294967296}return G},n.toString=function(G){if(G=G||10,G<2||36<G)throw Error("radix out of range: "+G);if(D(this))return"0";if(O(this))return"-"+B(this).toString(G);const V=f(Math.pow(G,6));var L=this;let j="";for(;;){const I=W(L,V).g;L=q(L,I.j(V));let k=((L.g.length>0?L.g[0]:L.h)>>>0).toString(G);if(L=I,D(L))return k+j;for(;k.length<6;)k="0"+k;j=k+j}},n.i=function(G){return G<0?0:G<this.g.length?this.g[G]:this.h};function D(G){if(G.h!=0)return!1;for(let V=0;V<G.g.length;V++)if(G.g[V]!=0)return!1;return!0}function O(G){return G.h==-1}n.l=function(G){return G=q(this,G),O(G)?-1:D(G)?0:1};function B(G){const V=G.g.length,L=[];for(let j=0;j<V;j++)L[j]=~G.g[j];return new l(L,~G.h).add(S)}n.abs=function(){return O(this)?B(this):this},n.add=function(G){const V=Math.max(this.g.length,G.g.length),L=[];let j=0;for(let I=0;I<=V;I++){let k=j+(this.i(I)&65535)+(G.i(I)&65535),F=(k>>>16)+(this.i(I)>>>16)+(G.i(I)>>>16);j=F>>>16,k&=65535,F&=65535,L[I]=F<<16|k}return new l(L,L[L.length-1]&-2147483648?-1:0)};function q(G,V){return G.add(B(V))}n.j=function(G){if(D(this)||D(G))return b;if(O(this))return O(G)?B(this).j(B(G)):B(B(this).j(G));if(O(G))return B(this.j(B(G)));if(this.l(x)<0&&G.l(x)<0)return f(this.m()*G.m());const V=this.g.length+G.g.length,L=[];for(var j=0;j<2*V;j++)L[j]=0;for(j=0;j<this.g.length;j++)for(let I=0;I<G.g.length;I++){const k=this.i(j)>>>16,F=this.i(j)&65535,ce=G.i(I)>>>16,Te=G.i(I)&65535;L[2*j+2*I]+=F*Te,X(L,2*j+2*I),L[2*j+2*I+1]+=k*Te,X(L,2*j+2*I+1),L[2*j+2*I+1]+=F*ce,X(L,2*j+2*I+1),L[2*j+2*I+2]+=k*ce,X(L,2*j+2*I+2)}for(G=0;G<V;G++)L[G]=L[2*G+1]<<16|L[2*G];for(G=V;G<2*V;G++)L[G]=0;return new l(L,0)};function X(G,V){for(;(G[V]&65535)!=G[V];)G[V+1]+=G[V]>>>16,G[V]&=65535,V++}function Z(G,V){this.g=G,this.h=V}function W(G,V){if(D(V))throw Error("division by zero");if(D(G))return new Z(b,b);if(O(G))return V=W(B(G),V),new Z(B(V.g),B(V.h));if(O(V))return V=W(G,B(V)),new Z(B(V.g),V.h);if(G.g.length>30){if(O(G)||O(V))throw Error("slowDivide_ only works with positive integers.");for(var L=S,j=V;j.l(G)<=0;)L=ye(L),j=ye(j);var I=de(L,1),k=de(j,1);for(j=de(j,2),L=de(L,2);!D(j);){var F=k.add(j);F.l(G)<=0&&(I=I.add(L),k=F),j=de(j,1),L=de(L,1)}return V=q(G,I.j(V)),new Z(I,V)}for(I=b;G.l(V)>=0;){for(L=Math.max(1,Math.floor(G.m()/V.m())),j=Math.ceil(Math.log(L)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),k=f(L),F=k.j(V);O(F)||F.l(G)>0;)L-=j,k=f(L),F=k.j(V);D(k)&&(k=S),I=I.add(k),G=q(G,F)}return new Z(I,G)}n.B=function(G){return W(this,G).h},n.and=function(G){const V=Math.max(this.g.length,G.g.length),L=[];for(let j=0;j<V;j++)L[j]=this.i(j)&G.i(j);return new l(L,this.h&G.h)},n.or=function(G){const V=Math.max(this.g.length,G.g.length),L=[];for(let j=0;j<V;j++)L[j]=this.i(j)|G.i(j);return new l(L,this.h|G.h)},n.xor=function(G){const V=Math.max(this.g.length,G.g.length),L=[];for(let j=0;j<V;j++)L[j]=this.i(j)^G.i(j);return new l(L,this.h^G.h)};function ye(G){const V=G.g.length+1,L=[];for(let j=0;j<V;j++)L[j]=G.i(j)<<1|G.i(j-1)>>>31;return new l(L,G.h)}function de(G,V){const L=V>>5;V%=32;const j=G.g.length-L,I=[];for(let k=0;k<j;k++)I[k]=V>0?G.i(k+L)>>>V|G.i(k+L+1)<<32-V:G.i(k+L);return new l(I,G.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,yx=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,wu=l}).apply(typeof u5<"u"?u5:typeof self<"u"?self:typeof window<"u"?window:{});var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vx,Ah,_x,pp,O0,bx,wx,xx;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wd=="object"&&Wd];for(var C=0;C<v.length;++C){var P=v[C];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var i=t(this);function r(v,C){if(C)e:{var P=i;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var Ie=v[ee];if(!(Ie in P))break e;P=P[Ie]}v=v[v.length-1],ee=P[v],C=C(ee),C!=ee&&C!=null&&e(P,v,{configurable:!0,writable:!0,value:C})}}r("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(v){return v||function(C){var P=[],ee;for(ee in C)Object.prototype.hasOwnProperty.call(C,ee)&&P.push([ee,C[ee]]);return P}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(v){var C=typeof v;return C=="object"&&v!=null||C=="function"}function h(v,C,P){return v.call.apply(v.bind,arguments)}function f(v,C,P){return f=h,f.apply(null,arguments)}function p(v,C){var P=Array.prototype.slice.call(arguments,1);return function(){var ee=P.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function b(v,C){function P(){}P.prototype=C.prototype,v.Z=C.prototype,v.prototype=new P,v.prototype.constructor=v,v.Ob=function(ee,Ie,Fe){for(var ot=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)ot[Qt-2]=arguments[Qt];return C.prototype[Ie].apply(ee,ot)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const C=v.length;if(C>0){const P=Array(C);for(let ee=0;ee<C;ee++)P[ee]=v[ee];return P}return[]}function D(v,C){for(let ee=1;ee<arguments.length;ee++){const Ie=arguments[ee];var P=typeof Ie;if(P=P!="object"?P:Ie?Array.isArray(Ie)?"array":P:"null",P=="array"||P=="object"&&typeof Ie.length=="number"){P=v.length||0;const Fe=Ie.length||0;v.length=P+Fe;for(let ot=0;ot<Fe;ot++)v[P+ot]=Ie[ot]}else v.push(Ie)}}class O{constructor(C,P){this.i=C,this.j=P,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function B(v){l.setTimeout(()=>{throw v},0)}function q(){var v=G;let C=null;return v.g&&(C=v.g,v.g=v.g.next,v.g||(v.h=null),C.next=null),C}class X{constructor(){this.h=this.g=null}add(C,P){const ee=Z.get();ee.set(C,P),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var Z=new O(()=>new W,v=>v.reset());class W{constructor(){this.next=this.g=this.h=null}set(C,P){this.h=C,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,de=!1,G=new X,V=()=>{const v=Promise.resolve(void 0);ye=()=>{v.then(L)}};function L(){for(var v;v=q();){try{v.h.call(v.g)}catch(P){B(P)}var C=Z;C.j(v),C.h<100&&(C.h++,v.next=C.g,C.g=v)}de=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(v,C){this.type=v,this.g=this.target=C,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var v=!1,C=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};l.addEventListener("test",P,C),l.removeEventListener("test",P,C)}catch{}return v})();function F(v){return/^[\s\xa0]*$/.test(v)}function ce(v,C){I.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,C)}b(ce,I),ce.prototype.init=function(v,C){const P=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=C,C=v.relatedTarget,C||(P=="mouseover"?C=v.fromElement:P=="mouseout"&&(C=v.toElement)),this.relatedTarget=C,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),le=0;function ue(v,C,P,ee,Ie){this.listener=v,this.proxy=null,this.src=C,this.type=P,this.capture=!!ee,this.ha=Ie,this.key=++le,this.da=this.fa=!1}function ve(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v,C,P){for(const ee in v)C.call(P,v[ee],ee,v)}function We(v,C){for(const P in v)C.call(void 0,v[P],P,v)}function ne(v){const C={};for(const P in v)C[P]=v[P];return C}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(v,C){let P,ee;for(let Ie=1;Ie<arguments.length;Ie++){ee=arguments[Ie];for(P in ee)v[P]=ee[P];for(let Fe=0;Fe<U.length;Fe++)P=U[Fe],Object.prototype.hasOwnProperty.call(ee,P)&&(v[P]=ee[P])}}function ie(v){this.src=v,this.g={},this.h=0}ie.prototype.add=function(v,C,P,ee,Ie){const Fe=v.toString();v=this.g[Fe],v||(v=this.g[Fe]=[],this.h++);const ot=me(v,C,ee,Ie);return ot>-1?(C=v[ot],P||(C.fa=!1)):(C=new ue(C,this.src,Fe,!!ee,Ie),C.fa=P,v.push(C)),C};function fe(v,C){const P=C.type;if(P in v.g){var ee=v.g[P],Ie=Array.prototype.indexOf.call(ee,C,void 0),Fe;(Fe=Ie>=0)&&Array.prototype.splice.call(ee,Ie,1),Fe&&(ve(C),v.g[P].length==0&&(delete v.g[P],v.h--))}}function me(v,C,P,ee){for(let Ie=0;Ie<v.length;++Ie){const Fe=v[Ie];if(!Fe.da&&Fe.listener==C&&Fe.capture==!!P&&Fe.ha==ee)return Ie}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Pe={};function Me(v,C,P,ee,Ie){if(Array.isArray(C)){for(let Fe=0;Fe<C.length;Fe++)Me(v,C[Fe],P,ee,Ie);return null}return P=he(P),v&&v[Te]?v.J(C,P,c(ee)?!!ee.capture:!1,Ie):$e(v,C,P,!1,ee,Ie)}function $e(v,C,P,ee,Ie,Fe){if(!C)throw Error("Invalid event type");const ot=c(Ie)?!!Ie.capture:!!Ie;let Qt=ke(v);if(Qt||(v[Ee]=Qt=new ie(v)),P=Qt.add(C,P,ee,ot,Fe),P.proxy)return P;if(ee=it(),P.proxy=ee,ee.src=v,ee.listener=P,v.addEventListener)k||(Ie=ot),Ie===void 0&&(Ie=!1),v.addEventListener(C.toString(),ee,Ie);else if(v.attachEvent)v.attachEvent(pt(C.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return P}function it(){function v(P){return C.call(v.src,v.listener,P)}const C=re;return v}function lt(v,C,P,ee,Ie){if(Array.isArray(C))for(var Fe=0;Fe<C.length;Fe++)lt(v,C[Fe],P,ee,Ie);else ee=c(ee)?!!ee.capture:!!ee,P=he(P),v&&v[Te]?(v=v.i,Fe=String(C).toString(),Fe in v.g&&(C=v.g[Fe],P=me(C,P,ee,Ie),P>-1&&(ve(C[P]),Array.prototype.splice.call(C,P,1),C.length==0&&(delete v.g[Fe],v.h--)))):v&&(v=ke(v))&&(C=v.g[C.toString()],v=-1,C&&(v=me(C,P,ee,Ie)),(P=v>-1?C[v]:null)&&ut(P))}function ut(v){if(typeof v!="number"&&v&&!v.da){var C=v.src;if(C&&C[Te])fe(C.i,v);else{var P=v.type,ee=v.proxy;C.removeEventListener?C.removeEventListener(P,ee,v.capture):C.detachEvent?C.detachEvent(pt(P),ee):C.addListener&&C.removeListener&&C.removeListener(ee),(P=ke(C))?(fe(P,v),P.h==0&&(P.src=null,C[Ee]=null)):ve(v)}}}function pt(v){return v in Pe?Pe[v]:Pe[v]="on"+v}function re(v,C){if(v.da)v=!0;else{C=new ce(C,this);const P=v.listener,ee=v.ha||v.src;v.fa&&ut(v),v=P.call(ee,C)}return v}function ke(v){return v=v[Ee],v instanceof ie?v:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function he(v){return typeof v=="function"?v:(v[st]||(v[st]=function(C){return v.handleEvent(C)}),v[st])}function _e(){j.call(this),this.i=new ie(this),this.M=this,this.G=null}b(_e,j),_e.prototype[Te]=!0,_e.prototype.removeEventListener=function(v,C,P,ee){lt(this,v,C,P,ee)};function at(v,C){var P,ee=v.G;if(ee)for(P=[];ee;ee=ee.G)P.push(ee);if(v=v.M,ee=C.type||C,typeof C=="string")C=new I(C,v);else if(C instanceof I)C.target=C.target||v;else{var Ie=C;C=new I(ee,v),J(C,Ie)}Ie=!0;let Fe,ot;if(P)for(ot=P.length-1;ot>=0;ot--)Fe=C.g=P[ot],Ie=qe(Fe,ee,!0,C)&&Ie;if(Fe=C.g=v,Ie=qe(Fe,ee,!0,C)&&Ie,Ie=qe(Fe,ee,!1,C)&&Ie,P)for(ot=0;ot<P.length;ot++)Fe=C.g=P[ot],Ie=qe(Fe,ee,!1,C)&&Ie}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var v=this.i;for(const C in v.g){const P=v.g[C];for(let ee=0;ee<P.length;ee++)ve(P[ee]);delete v.g[C],v.h--}}this.G=null},_e.prototype.J=function(v,C,P,ee){return this.i.add(String(v),C,!1,P,ee)},_e.prototype.K=function(v,C,P,ee){return this.i.add(String(v),C,!0,P,ee)};function qe(v,C,P,ee){if(C=v.i.g[String(C)],!C)return!0;C=C.concat();let Ie=!0;for(let Fe=0;Fe<C.length;++Fe){const ot=C[Fe];if(ot&&!ot.da&&ot.capture==P){const Qt=ot.listener,ri=ot.ha||ot.src;ot.fa&&fe(v.i,ot),Ie=Qt.call(ri,ee)!==!1&&Ie}}return Ie&&!ee.defaultPrevented}function He(v,C){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=f(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:l.setTimeout(v,C||0)}function pe(v){v.g=He(()=>{v.g=null,v.i&&(v.i=!1,pe(v))},v.l);const C=v.h;v.h=null,v.m.apply(null,C)}class Ve extends j{constructor(C,P){super(),this.m=C,this.l=P,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ct(v){j.call(this),this.h=v,this.g={}}b(Ct,j);var ft=[];function xt(v){we(v.g,function(C,P){this.g.hasOwnProperty(P)&&ut(C)},v),v.g={}}Ct.prototype.N=function(){Ct.Z.N.call(this),xt(this)},Ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=l.JSON.stringify,mt=l.JSON.parse,$t=class{stringify(v){return l.JSON.stringify(v,void 0)}parse(v){return l.JSON.parse(v,void 0)}};function bt(){}function ti(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ot(){I.call(this,"d")}b(Ot,I);function Yt(){I.call(this,"c")}b(Yt,I);var tn={},Pt=null;function Mn(){return Pt=Pt||new _e}tn.Ia="serverreachability";function Gt(v){I.call(this,tn.Ia,v)}b(Gt,I);function jt(v){const C=Mn();at(C,new Gt(C))}tn.STAT_EVENT="statevent";function kn(v,C){I.call(this,tn.STAT_EVENT,v),this.stat=C}b(kn,I);function Mt(v){const C=Mn();at(C,new kn(C,v))}tn.Ja="timingevent";function It(v,C){I.call(this,tn.Ja,v),this.size=C}b(It,I);function cn(v,C){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){v()},C)}function gr(){this.g=!0}gr.prototype.ua=function(){this.g=!1};function rr(v,C,P,ee,Ie,Fe){v.info(function(){if(v.g)if(Fe){var ot="",Qt=Fe.split("&");for(let hn=0;hn<Qt.length;hn++){var ri=Qt[hn].split("=");if(ri.length>1){const Fn=ri[0];ri=ri[1];const lr=Fn.split("_");ot=lr.length>=2&&lr[1]=="type"?ot+(Fn+"="+ri+"&"):ot+(Fn+"=redacted&")}}}else ot=null;else ot=Fe;return"XMLHTTP REQ ("+ee+") [attempt "+Ie+"]: "+C+`
`+P+`
`+ot})}function Os(v,C,P,ee,Ie,Fe,ot){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Ie+"]: "+C+`
`+P+`
`+Fe+" "+ot})}function Ki(v,C,P,ee){v.info(function(){return"XMLHTTP TEXT ("+C+"): "+oo(v,P)+(ee?" "+ee:"")})}function kt(v,C){v.info(function(){return"TIMEOUT: "+C})}gr.prototype.info=function(){};function oo(v,C){if(!v.g)return C;if(!C)return null;try{const Fe=JSON.parse(C);if(Fe){for(v=0;v<Fe.length;v++)if(Array.isArray(Fe[v])){var P=Fe[v];if(!(P.length<2)){var ee=P[1];if(Array.isArray(ee)&&!(ee.length<1)){var Ie=ee[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(let ot=1;ot<ee.length;ot++)ee[ot]=""}}}}return Lt(Fe)}catch{return C}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lr;function jn(){}b(jn,bt),jn.prototype.g=function(){return new XMLHttpRequest},Lr=new jn;function ni(v){return encodeURIComponent(String(v))}function Oi(v){var C=1;v=v.split(":");const P=[];for(;C>0&&v.length;)P.push(v.shift()),C--;return v.length&&P.push(v.join(":")),P}function yr(v,C,P,ee){this.j=v,this.i=C,this.l=P,this.S=ee||1,this.V=new Ct(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sr}function sr(){this.i=null,this.g="",this.h=!1}var Un={},Kn={};function Fi(v,C,P){v.M=1,v.A=Ao(Si(C)),v.u=P,v.R=!0,Mr(v,null)}function Mr(v,C){v.F=Date.now(),Dr(v),v.B=Si(v.A);var P=v.B,ee=v.S;Array.isArray(ee)||(ee=[String(ee)]),Na(P.i,"t",ee),v.C=0,P=v.j.L,v.h=new sr,v.g=vt(v.j,P?C:null,!v.u),v.P>0&&(v.O=new Ve(f(v.Y,v,v.g),v.P)),C=v.V,P=v.g,ee=v.ba;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(ft[0]=Ie.toString()),Ie=ft);for(let Fe=0;Fe<Ie.length;Fe++){const ot=Me(P,Ie[Fe],ee||C.handleEvent,!1,C.h||C);if(!ot)break;C.g[ot.key]=ot}C=v.J?ne(v.J):{},v.u?(v.v||(v.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,C)):(v.v="GET",v.g.ea(v.B,v.v,null,C)),jt(),rr(v.i,v.v,v.B,v.l,v.S,v.u)}yr.prototype.ba=function(v){v=v.target;const C=this.O;C&&Zr(v)==3?C.j():this.Y(v)},yr.prototype.Y=function(v){try{if(v==this.g)e:{const Qt=Zr(this.g),ri=this.g.ya(),hn=this.g.ca();if(!(Qt<3)&&(Qt!=3||this.g&&(this.h.h||this.g.la()||Li(this.g)))){this.K||Qt!=4||ri==7||(ri==8||hn<=0?jt(3):jt(2)),Kr(this);var C=this.g.ca();this.X=C;var P=cs(this);if(this.o=C==200,Os(this.i,this.v,this.B,this.l,this.S,Qt,C),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,Ie=this.g;if((ee=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ee)){var Fe=ee;break t}}Fe=null}if(v=Fe)Ki(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fs(this,v);else{this.o=!1,this.m=3,Mt(12),Jr(this),vr(this);break e}}if(this.R){v=!0;let Fn;for(;!this.K&&this.C<P.length;)if(Fn=As(this,P),Fn==Kn){Qt==4&&(this.m=4,Mt(14),v=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Un){this.m=4,Mt(15),Ki(this.i,this.l,P,"[Invalid Chunk]"),v=!1;break}else Ki(this.i,this.l,Fn,null),fs(this,Fn);if(Eo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||P.length!=0||this.h.h||(this.m=1,Mt(16),v=!1),this.o=this.o&&v,!v)Ki(this.i,this.l,P,"[Invalid Chunked Response]"),Jr(this),vr(this);else if(P.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),La(ot),ot.P=!0,Mt(11))}}else Ki(this.i,this.l,P,null),fs(this,P);Qt==4&&Jr(this),this.o&&!this.K&&(Qt==4?oe(this.j,this):(this.o=!1,Dr(this)))}else Fs(this.g),C==400&&P.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Jr(this),vr(this)}}}catch{}finally{}};function cs(v){if(!Eo(v))return v.g.la();const C=Li(v.g);if(C==="")return"";let P="";const ee=C.length,Ie=Zr(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Jr(v),vr(v),"";v.h.i=new l.TextDecoder}for(let Fe=0;Fe<ee;Fe++)v.h.h=!0,P+=v.h.i.decode(C[Fe],{stream:!(Ie&&Fe==ee-1)});return C.length=0,v.h.g+=P,v.C=0,v.h.g}function Eo(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function As(v,C){var P=v.C,ee=C.indexOf(`
`,P);return ee==-1?Kn:(P=Number(C.substring(P,ee)),isNaN(P)?Un:(ee+=1,ee+P>C.length?Kn:(C=C.slice(ee,ee+P),v.C=ee+P,C)))}yr.prototype.cancel=function(){this.K=!0,Jr(this)};function Dr(v){v.T=Date.now()+v.H,ao(v,v.H)}function ao(v,C){if(v.D!=null)throw Error("WatchDog timer not null");v.D=cn(f(v.aa,v),C)}function Kr(v){v.D&&(l.clearTimeout(v.D),v.D=null)}yr.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(kt(this.i,this.B),this.M!=2&&(jt(),Mt(17)),Jr(this),this.m=2,vr(this)):ao(this,this.T-v)};function vr(v){v.j.I==0||v.K||oe(v.j,v)}function Jr(v){Kr(v);var C=v.O;C&&typeof C.dispose=="function"&&C.dispose(),v.O=null,xt(v.V),v.g&&(C=v.g,v.g=null,C.abort(),C.dispose())}function fs(v,C){try{var P=v.j;if(P.I!=0&&(P.g==v||Ts(P.h,v))){if(!v.L&&Ts(P.h,v)&&P.I==3){try{var ee=P.Ba.g.parse(C)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Ie=ee;if(Ie[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<v.F)H(P),Bs(P);else break e;Is(P),Mt(18)}}else P.xa=Ie[1],0<P.xa-P.K&&Ie[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=cn(f(P.Va,P),6e3));hs(P.h)<=1&&P.ta&&(P.ta=void 0)}else Ne(P,11)}else if((v.L||P.g==v)&&H(P),!F(C))for(Ie=P.Ba.g.parse(C),C=0;C<Ie.length;C++){let hn=Ie[C];const Fn=hn[0];if(!(Fn<=P.K))if(P.K=Fn,hn=hn[1],P.I==2)if(hn[0]=="c"){P.M=hn[1],P.ba=hn[2];const lr=hn[3];lr!=null&&(P.ka=lr,P.j.info("VER="+P.ka));const br=hn[4];br!=null&&(P.za=br,P.j.info("SVER="+P.za));const Jn=hn[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(ee=1.5*Jn,P.O=ee,P.j.info("backChannelRequestTimeoutMs_="+ee)),ee=P;const wr=v.g;if(wr){const Rs=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var Fe=ee.h;Fe.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(Yo(Fe,Fe.h),Fe.h=null))}if(ee.G){const Ro=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(ee.wa=Ro,bn(ee.J,ee.G,Ro))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-v.F,P.j.info("Handshake RTT: "+P.T+"ms")),ee=P;var ot=v;if(ee.na=tt(ee,ee.L?ee.ba:null,ee.W),ot.L){Aa(ee.h,ot);var Qt=ot,ri=ee.O;ri&&(Qt.H=ri),Qt.D&&(Kr(Qt),Dr(Qt)),ee.g=ot}else al(ee);P.i.length>0&&ps(P)}else hn[0]!="stop"&&hn[0]!="close"||Ne(P,7);else P.I==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Ne(P,7):Io(P):hn[0]!="noop"&&P.l&&P.l.qa(hn),P.A=0)}}jt(4)}catch{}}var gi=class{constructor(v,C){this.g=v,this.map=C}};function Ea(v){this.l=v||10,l.PerformanceNavigationTiming?(v=l.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pr(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function hs(v){return v.h?1:v.g?v.g.size:0}function Ts(v,C){return v.h?v.h==C:v.g?v.g.has(C):!1}function Yo(v,C){v.g?v.g.add(C):v.h=C}function Aa(v,C){v.h&&v.h==C?v.h=null:v.g&&v.g.has(C)&&v.g.delete(C)}Ea.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ta(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let C=v.i;for(const P of v.g.values())C=C.concat(P.G);return C}return x(v.i)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wr(v,C){if(v){v=v.split("&");for(let P=0;P<v.length;P++){const ee=v[P].indexOf("=");let Ie,Fe=null;ee>=0?(Ie=v[P].substring(0,ee),Fe=v[P].substring(ee+1)):Ie=v[P],C(Ie,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function or(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;v instanceof or?(this.l=v.l,pn(this,v.j),this.o=v.o,this.g=v.g,lo(this,v.u),this.h=v.h,ds(this,Ca(v.i)),this.m=v.m):v&&(C=String(v).match(tl))?(this.l=!1,pn(this,C[1]||"",!0),this.o=Ri(C[2]||""),this.g=Ri(C[3]||"",!0),lo(this,C[4]),this.h=Ri(C[5]||"",!0),ds(this,C[6]||"",!0),this.m=Ri(C[7]||"")):(this.l=!1,this.i=new uo(null,this.l))}or.prototype.toString=function(){const v=[];var C=this.j;C&&v.push(ci(C,Ko,!0),":");var P=this.g;return(P||C=="file")&&(v.push("//"),(C=this.o)&&v.push(ci(C,Ko,!0),"@"),v.push(ni(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&v.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(ci(P,P.charAt(0)=="/"?nl:Vl,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",ci(P,il)),v.join("")},or.prototype.resolve=function(v){const C=Si(this);let P=!!v.j;P?pn(C,v.j):P=!!v.o,P?C.o=v.o:P=!!v.g,P?C.g=v.g:P=v.u!=null;var ee=v.h;if(P)lo(C,v.u);else if(P=!!v.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var Ie=C.h.lastIndexOf("/");Ie!=-1&&(ee=C.h.slice(0,Ie+1)+ee)}if(Ie=ee,Ie==".."||Ie==".")ee="";else if(Ie.indexOf("./")!=-1||Ie.indexOf("/.")!=-1){ee=Ie.lastIndexOf("/",0)==0,Ie=Ie.split("/");const Fe=[];for(let ot=0;ot<Ie.length;){const Qt=Ie[ot++];Qt=="."?ee&&ot==Ie.length&&Fe.push(""):Qt==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),ee&&ot==Ie.length&&Fe.push("")):(Fe.push(Qt),ee=!0)}ee=Fe.join("/")}else ee=Ie}return P?C.h=ee:P=v.i.toString()!=="",P?ds(C,Ca(v.i)):P=!!v.m,P&&(C.m=v.m),C};function Si(v){return new or(v)}function pn(v,C,P){v.j=P?Ri(C,!0):C,v.j&&(v.j=v.j.replace(/:$/,""))}function lo(v,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);v.u=C}else v.u=null}function ds(v,C,P){C instanceof uo?(v.i=C,kr(v.i,v.l)):(P||(C=ci(C,_r)),v.i=new uo(C,v.l))}function bn(v,C,P){v.i.set(C,P)}function Ao(v){return bn(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Ri(v,C){return v?C?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function ci(v,C,P){return typeof v=="string"?(v=encodeURI(v).replace(C,Ei),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Ei(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Ko=/[#\/\?@]/g,Vl=/[#\?:]/g,nl=/[#\?]/g,_r=/[#\?@]/g,il=/#/g;function uo(v,C){this.h=this.g=null,this.i=v||null,this.j=!!C}function Ji(v){v.g||(v.g=new Map,v.h=0,v.i&&Wr(v.i,function(C,P){v.add(decodeURIComponent(C.replace(/\+/g," ")),P)}))}n=uo.prototype,n.add=function(v,C){Ji(this),this.i=null,v=co(this,v);let P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(C),this.h+=1,this};function To(v,C){Ji(v),C=co(v,C),v.g.has(C)&&(v.i=null,v.h-=v.g.get(C).length,v.g.delete(C))}function rl(v,C){return Ji(v),C=co(v,C),v.g.has(C)}n.forEach=function(v,C){Ji(this),this.g.forEach(function(P,ee){P.forEach(function(Ie){v.call(C,Ie,ee,this)},this)},this)};function sl(v,C){Ji(v);let P=[];if(typeof C=="string")rl(v,C)&&(P=P.concat(v.g.get(co(v,C))));else for(v=Array.from(v.g.values()),C=0;C<v.length;C++)P=P.concat(v[C]);return P}n.set=function(v,C){return Ji(this),this.i=null,v=co(this,v),rl(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[C]),this.h+=1,this},n.get=function(v,C){return v?(v=sl(this,v),v.length>0?String(v[0]):C):C};function Na(v,C,P){To(v,C),P.length>0&&(v.i=null,v.g.set(co(v,C),x(P)),v.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],C=Array.from(this.g.keys());for(let ee=0;ee<C.length;ee++){var P=C[ee];const Ie=ni(P);P=sl(this,P);for(let Fe=0;Fe<P.length;Fe++){let ot=Ie;P[Fe]!==""&&(ot+="="+ni(P[Fe])),v.push(ot)}}return this.i=v.join("&")};function Ca(v){const C=new uo;return C.i=v.i,v.g&&(C.g=new Map(v.g),C.h=v.h),C}function co(v,C){return C=String(C),v.j&&(C=C.toLowerCase()),C}function kr(v,C){C&&!v.j&&(Ji(v),v.i=null,v.g.forEach(function(P,ee){const Ie=ee.toLowerCase();ee!=Ie&&(To(this,ee),Na(this,Ie,P))},v)),v.j=C}function Ns(v,C){const P=new gr;if(l.Image){const ee=new Image;ee.onload=p(Ur,P,"TestLoadImage: loaded",!0,C,ee),ee.onerror=p(Ur,P,"TestLoadImage: error",!1,C,ee),ee.onabort=p(Ur,P,"TestLoadImage: abort",!1,C,ee),ee.ontimeout=p(Ur,P,"TestLoadImage: timeout",!1,C,ee),l.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else C(!1)}function fo(v,C){const P=new gr,ee=new AbortController,Ie=setTimeout(()=>{ee.abort(),Ur(P,"TestPingServer: timeout",!1,C)},1e4);fetch(v,{signal:ee.signal}).then(Fe=>{clearTimeout(Ie),Fe.ok?Ur(P,"TestPingServer: ok",!0,C):Ur(P,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Ie),Ur(P,"TestPingServer: error",!1,C)})}function Ur(v,C,P,ee,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),ee(P)}catch{}}function No(){this.g=new $t}function Ft(v){this.i=v.Sb||null,this.h=v.ab||!1}b(Ft,bt),Ft.prototype.g=function(){return new Jo(this.i,this.h)};function Jo(v,C){_e.call(this),this.H=v,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Jo,_e),n=Jo.prototype,n.open=function(v,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=C,this.readyState=1,Wi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(C.body=v),(this.H||l).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ia(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ia(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var C=v.value?v.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!v.done}))&&(this.response=this.responseText+=C)}v.done?Co(this):Wi(this),this.readyState==3&&Ia(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,Co(this))},n.Na=function(v){this.g&&(this.response=v,Co(this))},n.ga=function(){this.g&&Co(this)};function Co(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}n.setRequestHeader=function(v,C){this.A.append(v,C)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],C=this.h.entries();for(var P=C.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=C.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Vi(v){let C="";return we(v,function(P,ee){C+=ee,C+=":",C+=P,C+=`\r
`}),C}function Wo(v,C,P){e:{for(ee in P){var ee=!1;break e}ee=!0}ee||(P=Vi(P),typeof v=="string"?P!=null&&ni(P):bn(v,C,P))}function On(v){_e.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(On,_e);var Xr=/^https?$/i,Xo=["POST","PUT"];n=On.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,C,P,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);C=C?C.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lr.g(),this.g.onreadystatechange=S(f(this.Ca,this));try{this.B=!0,this.g.open(C,String(v),!0),this.B=!1}catch(Fe){Cs(this,Fe);return}if(v=P||"",P=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Ie in ee)P.set(Ie,ee[Ie]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Fe of ee.keys())P.set(Fe,ee.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(P.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),Ie=l.FormData&&v instanceof l.FormData,!(Array.prototype.indexOf.call(Xo,C,void 0)>=0)||ee||Ie||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,ot]of P)this.g.setRequestHeader(Fe,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(Fe){Cs(this,Fe)}};function Cs(v,C){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=C,v.o=5,ol(v),ho(v)}function ol(v){v.A||(v.A=!0,at(v,"complete"),at(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,at(this,"complete"),at(this,"abort"),ho(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),On.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},n.Xa=function(){Qr(this)};function Qr(v){if(v.h&&typeof o<"u"){if(v.v&&Zr(v)==4)setTimeout(v.Ca.bind(v),0);else if(at(v,"readystatechange"),Zr(v)==4){v.h=!1;try{const Fe=v.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var P;if(!(P=C)){var ee;if(ee=Fe===0){let ot=String(v.D).match(tl)[1]||null;!ot&&l.self&&l.self.location&&(ot=l.self.location.protocol.slice(0,-1)),ee=!Xr.test(ot?ot.toLowerCase():"")}P=ee}if(P)at(v,"complete"),at(v,"success");else{v.o=6;try{var Ie=Zr(v)>2?v.g.statusText:""}catch{Ie=""}v.l=Ie+" ["+v.ca()+"]",ol(v)}}finally{ho(v)}}}}function ho(v,C){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const P=v.g;v.g=null,C||at(v,"ready");try{P.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zr(v){return v.g?v.g.readyState:0}n.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var C=this.g.responseText;return v&&C.indexOf(v)==0&&(C=C.substring(v.length)),mt(C)}};function Li(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Fs(v){const C={};v=(v.g&&Zr(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(F(v[ee]))continue;var P=Oi(v[ee]);const Ie=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Fe=C[Ie]||[];C[Ie]=Fe,Fe.push(P)}We(C,function(ee){return ee.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(v,C,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||C}function Vs(v){this.za=0,this.i=[],this.j=new gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ar("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ar("baseRetryDelayMs",5e3,v),this.Za=ar("retryDelaySeedMs",1e4,v),this.Ta=ar("forwardChannelMaxRetries",2,v),this.va=ar("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(v&&v.concurrentRequestLimit),this.Ba=new No,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Vs.prototype,n.ka=8,n.I=1,n.connect=function(v,C,P,ee){Mt(0),this.W=v,this.H=C||{},P&&ee!==void 0&&(this.H.OSID=P,this.H.OAID=ee),this.F=this.X,this.J=tt(this,null,this.W),ps(this)};function Io(v){if(qs(v),v.I==3){var C=v.V++,P=Si(v.J);if(bn(P,"SID",v.M),bn(P,"RID",C),bn(P,"TYPE","terminate"),es(v,P),C=new yr(v,v.j,C),C.M=2,C.A=Ao(Si(P)),P=!1,l.navigator&&l.navigator.sendBeacon)try{P=l.navigator.sendBeacon(C.A.toString(),"")}catch{}!P&&l.Image&&(new Image().src=C.A,P=!0),P||(C.g=vt(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Dr(C)}Ye(v)}function Bs(v){v.g&&(La(v),v.g.cancel(),v.g=null)}function qs(v){Bs(v),v.v&&(l.clearTimeout(v.v),v.v=null),H(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&l.clearTimeout(v.m),v.m=null)}function ps(v){if(!Pr(v.h)&&!v.m){v.m=!0;var C=v.Ea;ye||V(),de||(ye(),de=!0),G.add(C,v),v.D=0}}function Qo(v,C){return hs(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=C.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=cn(f(v.Ea,v,C),be(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const Ie=new yr(this,this.j,v);let Fe=this.o;if(this.U&&(Fe?(Fe=ne(Fe),J(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(Ie.J=Fe,Fe=null),this.S)e:{for(var C=0,P=0;P<this.i.length;P++){t:{var ee=this.i[P];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(C+=ee,C>4096){C=P;break e}if(C===4096||P===this.i.length-1){C=P+1;break e}}C=1e3}else C=1e3;C=Hs(this,Ie,C),P=Si(this.J),bn(P,"RID",v),bn(P,"CVER",22),this.G&&bn(P,"X-HTTP-Session-Id",this.G),es(this,P),Fe&&(this.R?C="headers="+ni(Vi(Fe))+"&"+C:this.u&&Wo(P,this.u,Fe)),Yo(this.h,Ie),this.Ra&&bn(P,"TYPE","init"),this.S?(bn(P,"$req",C),bn(P,"SID","null"),Ie.U=!0,Fi(Ie,P,null)):Fi(Ie,P,C),this.I=2}}else this.I==3&&(v?Ra(this,v):this.i.length==0||Pr(this.h)||Ra(this))};function Ra(v,C){var P;C?P=C.l:P=v.V++;const ee=Si(v.J);bn(ee,"SID",v.M),bn(ee,"RID",P),bn(ee,"AID",v.K),es(v,ee),v.u&&v.o&&Wo(ee,v.u,v.o),P=new yr(v,v.j,P,v.D+1),v.u===null&&(P.J=v.o),C&&(v.i=C.G.concat(v.i)),C=Hs(v,P,1e3),P.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Yo(v.h,P),Fi(P,ee,C)}function es(v,C){v.H&&we(v.H,function(P,ee){bn(C,ee,P)}),v.l&&we({},function(P,ee){bn(C,ee,P)})}function Hs(v,C,P){P=Math.min(v.i.length,P);const ee=v.l?f(v.l.Ka,v.l,v):null;e:{var Ie=v.i;let Qt=-1;for(;;){const ri=["count="+P];Qt==-1?P>0?(Qt=Ie[0].g,ri.push("ofs="+Qt)):Qt=0:ri.push("ofs="+Qt);let hn=!0;for(let Fn=0;Fn<P;Fn++){var Fe=Ie[Fn].g;const lr=Ie[Fn].map;if(Fe-=Qt,Fe<0)Qt=Math.max(0,Ie[Fn].g-100),hn=!1;else try{Fe="req"+Fe+"_"||"";try{var ot=lr instanceof Map?lr:Object.entries(lr);for(const[br,Jn]of ot){let wr=Jn;c(Jn)&&(wr=Lt(Jn)),ri.push(Fe+br+"="+encodeURIComponent(wr))}}catch(br){throw ri.push(Fe+"type="+encodeURIComponent("_badmap")),br}}catch{ee&&ee(lr)}}if(hn){ot=ri.join("&");break e}}ot=void 0}return v=v.i.splice(0,P),C.G=v,ot}function al(v){if(!v.g&&!v.v){v.Y=1;var C=v.Da;ye||V(),de||(ye(),de=!0),G.add(C,v),v.A=0}}function Is(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=cn(f(v.Da,v),be(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=cn(f(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),Bs(this),A(this))};function La(v){v.B!=null&&(l.clearTimeout(v.B),v.B=null)}function A(v){v.g=new yr(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var C=Si(v.na);bn(C,"RID","rpc"),bn(C,"SID",v.M),bn(C,"AID",v.K),bn(C,"CI",v.F?"0":"1"),!v.F&&v.ia&&bn(C,"TO",v.ia),bn(C,"TYPE","xmlhttp"),es(v,C),v.u&&v.o&&Wo(C,v.u,v.o),v.O&&(v.g.H=v.O);var P=v.g;v=v.ba,P.M=1,P.A=Ao(Si(C)),P.u=null,P.R=!0,Mr(P,v)}n.Va=function(){this.C!=null&&(this.C=null,Bs(this),Is(this),Mt(19))};function H(v){v.C!=null&&(l.clearTimeout(v.C),v.C=null)}function oe(v,C){var P=null;if(v.g==C){H(v),La(v),v.g=null;var ee=2}else if(Ts(v.h,C))P=C.G,Aa(v.h,C),ee=1;else return;if(v.I!=0){if(C.o)if(ee==1){P=C.u?C.u.length:0,C=Date.now()-C.F;var Ie=v.D;ee=Mn(),at(ee,new It(ee,P)),ps(v)}else al(v);else if(Ie=C.m,Ie==3||Ie==0&&C.X>0||!(ee==1&&Qo(v,C)||ee==2&&Is(v)))switch(P&&P.length>0&&(C=v.h,C.i=C.i.concat(P)),Ie){case 1:Ne(v,5);break;case 4:Ne(v,10);break;case 3:Ne(v,6);break;default:Ne(v,2)}}}function be(v,C){let P=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(P*=2),P*C}function Ne(v,C){if(v.j.info("Error code "+C),C==2){var P=f(v.bb,v),ee=v.Ua;const Ie=!ee;ee=new or(ee||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pn(ee,"https"),Ao(ee),Ie?Ns(ee.toString(),P):fo(ee.toString(),P)}else Mt(2);v.I=0,v.l&&v.l.pa(C),Ye(v),qs(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Ye(v){if(v.I=0,v.ja=[],v.l){const C=Ta(v.h);(C.length!=0||v.i.length!=0)&&(D(v.ja,C),D(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function tt(v,C,P){var ee=P instanceof or?Si(P):new or(P);if(ee.g!="")C&&(ee.g=C+"."+ee.g),lo(ee,ee.u);else{var Ie=l.location;ee=Ie.protocol,C=C?C+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;const Fe=new or(null);ee&&pn(Fe,ee),C&&(Fe.g=C),Ie&&lo(Fe,Ie),P&&(Fe.h=P),ee=Fe}return P=v.G,C=v.wa,P&&C&&bn(ee,P,C),bn(ee,"VER",v.ka),es(v,ee),ee}function vt(v,C,P){if(C&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=v.Aa&&!v.ma?new On(new Ft({ab:P})):new On(v.ma),C.Fa(v.L),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Et(){}n=Et.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Bt(){}Bt.prototype.g=function(v,C){return new Ut(v,C)};function Ut(v,C){_e.call(this),this.g=new Vs(C),this.l=v,this.h=C&&C.messageUrlParams||null,v=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(v?v["X-WebChannel-Content-Type"]=C.messageContentType:v={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(v?v["X-WebChannel-Client-Profile"]=C.sa:v={"X-WebChannel-Client-Profile":C.sa}),this.g.U=v,(v=C&&C.Qb)&&!F(v)&&(this.g.u=v),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!F(C)&&(this.g.G=C,v=this.h,v!==null&&C in v&&(v=this.h,C in v&&delete v[C])),this.j=new $n(this)}b(Ut,_e),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Io(this.g)},Ut.prototype.o=function(v){var C=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.v&&(P={},P.__data__=Lt(v),v=P);C.i.push(new gi(C.Ya++,v)),C.I==3&&ps(C)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Ut.Z.N.call(this)};function mn(v){Ot.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var C=v.__sm__;if(C){e:{for(const P in C){v=P;break e}v=void 0}(this.i=v)&&(v=this.i,C=C!==null&&v in C?C[v]:void 0),this.data=C}else this.data=v}b(mn,Ot);function ii(){Yt.call(this),this.status=1}b(ii,Yt);function $n(v){this.g=v}b($n,Et),$n.prototype.ra=function(){at(this.g,"a")},$n.prototype.qa=function(v){at(this.g,new mn(v))},$n.prototype.pa=function(v){at(this.g,new ii)},$n.prototype.oa=function(){at(this.g,"b")},Bt.prototype.createWebChannel=Bt.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,xx=function(){return new Bt},wx=function(){return Mn()},bx=tn,O0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,pp=Yr,Rr.COMPLETE="complete",_x=Rr,ti.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",_e.prototype.listen=_e.prototype.J,Ah=ti,On.prototype.listenOnce=On.prototype.K,On.prototype.getLastError=On.prototype.Ha,On.prototype.getLastErrorCode=On.prototype.ya,On.prototype.getStatus=On.prototype.ca,On.prototype.getResponseJson=On.prototype.La,On.prototype.getResponseText=On.prototype.la,On.prototype.send=On.prototype.ea,On.prototype.setWithCredentials=On.prototype.Fa,vx=On}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf="12.9.0";function Q4(n){Nf=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new fx("@firebase/firestore");function Zc(){return tc.logLevel}function _t(n,...e){if(tc.logLevel<=Ln.DEBUG){const t=e.map(M1);tc.debug(`Firestore (${Nf}): ${n}`,...t)}}function Pl(n,...e){if(tc.logLevel<=Ln.ERROR){const t=e.map(M1);tc.error(`Firestore (${Nf}): ${n}`,...t)}}function nc(n,...e){if(tc.logLevel<=Ln.WARN){const t=e.map(M1);tc.warn(`Firestore (${Nf}): ${n}`,...t)}}function M1(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sx(n,i,t)}function Sx(n,e,t){let i=`FIRESTORE (${Nf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Pl(i),new Error(i)}function Yn(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||Sx(e,r,i)}function ln(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends Tf{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ss.UNAUTHENTICATED)))}shutdown(){}}class e3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class t3{constructor(e){this.t=e,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Yn(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new Ll;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ll,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ll)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yn(typeof i.accessToken=="string",31837,{l:i}),new Ex(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yn(e===null||typeof e=="string",2055,{h:e}),new Ss(e)}}class n3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class i3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new n3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ss.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class c5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,k4(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Yn(this.o===void 0,3512);const i=o=>{o.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,_t("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new c5(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Yn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new c5(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=s3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Sn(n,e){return n<e?-1:n>e?1:0}function F0(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),o=e.charAt(i);if(r!==o)return Yg(r)===Yg(o)?Sn(r,o):Yg(r)?1:-1}return Sn(n.length,e.length)}const o3=55296,a3=57343;function Yg(n){const e=n.charCodeAt(0);return e>=o3&&e<=a3}function wf(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="__name__";class Ka{constructor(e,t,i){t===void 0?t=0:t>e.length&&Xt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Xt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ka.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=Ka.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Sn(e.length,t.length)}static compareSegments(e,t){const i=Ka.isNumericId(e),r=Ka.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ka.extractNumericId(e).compare(Ka.extractNumericId(t)):F0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wu.fromString(e.substring(4,e.length-2))}}class mi extends Ka{construct(e,t,i){return new mi(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new dt(Qe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new mi(t)}static emptyPath(){return new mi([])}}const l3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends Ka{construct(e,t,i){return new ls(e,t,i)}static isValidIdentifier(e){return l3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f5}static keyField(){return new ls([f5])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new dt(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new dt(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new dt(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new dt(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(t)}static emptyPath(){return new ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.path=e}static fromPath(e){return new zt(mi.fromString(e))}static fromName(e){return new zt(mi.fromString(e).popFirst(5))}static empty(){return new zt(mi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new mi(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n,e,t){if(!t)throw new dt(Qe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u3(n,e,t,i){if(e===!0&&i===!0)throw new dt(Qe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h5(n){if(!zt.isDocumentKey(n))throw new dt(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d5(n){if(zt.isDocumentKey(n))throw new dt(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function nm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xt(12329,{type:typeof n})}function ic(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new dt(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nm(n);throw new dt(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wh(n,e){if(!Tx(n))throw new dt(Qe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new dt(Qe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=-62135596800,m5=1e6;class wi{static now(){return wi.fromMillis(Date.now())}static fromDate(e){return wi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*m5);return new wi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dt(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dt(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<p5)throw new dt(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m5}_compareTo(e){return this.seconds===e.seconds?Sn(this.nanoseconds,e.nanoseconds):Sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wh(e,wi._jsonSchema))return new wi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p5;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wi._jsonSchemaVersion="firestore/timestamp/1.0",wi._jsonSchema={type:pr("string",wi._jsonSchemaVersion),seconds:pr("number"),nanoseconds:pr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{static fromTimestamp(e){return new rn(e)}static min(){return new rn(new wi(0,0))}static max(){return new rn(new wi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=-1;function c3(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=rn.fromTimestamp(i===1e9?new wi(t+1,0):new wi(t,i));return new Su(r,zt.empty(),e)}function f3(n){return new Su(n.readTime,n.key,Vh)}class Su{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Su(rn.min(),zt.empty(),Vh)}static max(){return new Su(rn.max(),zt.empty(),Vh)}}function h3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=zt.comparator(n.documentKey,e.documentKey),t!==0?t:Sn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(n){if(n.code!==Qe.FAILED_PRECONDITION||n.message!==d3)throw n;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nt(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof nt?t:nt.resolve(t)}catch(t){return nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):nt.reject(t)}static resolve(e){return new nt(((t,i)=>{t(e)}))}static reject(e){return new nt(((t,i)=>{i(e)}))}static waitFor(e){return new nt(((t,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&t()}),(h=>i(h)))})),l=!0,o===r&&t()}))}static or(e){let t=nt.resolve(!1);for(const i of e)t=t.next((r=>r?nt.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new nt(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,t){return new nt(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}function m3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function If(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}im.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=-1;function rm(n){return n==null}function kp(n){return n===0&&1/n==-1/0}function g3(n){return typeof n=="number"&&Number.isInteger(n)&&!kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="";function y3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g5(e)),e=v3(n.get(t),e);return g5(e)}function v3(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case Nx:t+="";break;default:t+=o}}return t}function g5(n){return n+Nx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Cx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){this.comparator=e,this.root=t||as.EMPTY}insert(e,t){return new Ui(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,as.BLACK,null,null))}remove(e){return new Ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,as.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xd(this.root,e,this.comparator,!0)}}class Xd{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class as{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??as.RED,this.left=r??as.EMPTY,this.right=o??as.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new as(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return as.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return as.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,as.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,as.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xt(27949);return e+(this.isRed()?0:1)}}as.EMPTY=null,as.RED=!0,as.BLACK=!1;as.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new as(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.comparator=e,this.data=new Ui(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v5(this.data.getIterator())}getIteratorFrom(e){return new v5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ir(this.comparator);return t.data=e,t}}class v5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new ma([])}unionWith(e){let t=new Ir(ls.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ma(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wf(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ix("Invalid base64 string: "+o):o}})(e);return new us(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new us(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}us.EMPTY_BYTE_STRING=new us("");const _3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eu(n){if(Yn(!!n,39018),typeof n=="string"){let e=0;const t=_3.exec(n);if(Yn(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Au(n){return typeof n=="string"?us.fromBase64String(n):us.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="server_timestamp",Lx="__type__",Mx="__previous_value__",Dx="__local_write_time__";function k1(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Lx])==null?void 0:i.stringValue)===Rx}function sm(n){const e=n.mapValue.fields[Mx];return k1(e)?sm(e):e}function Bh(n){const e=Eu(n.mapValue.fields[Dx].timestampValue);return new wi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t,i,r,o,l,c,h,f,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p,this.apiKey=b}}const Up="(default)";class qh{constructor(e,t){this.projectId=e,this.database=t||Up}static empty(){return new qh("","")}get isDefaultDatabase(){return this.database===Up}isEqual(e){return e instanceof qh&&e.projectId===this.projectId&&e.database===this.database}}function w3(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new dt(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qh(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="__type__",x3="__max__",Qd={mapValue:{}},kx="__vector__",Op="value";function Tu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?k1(n)?4:E3(n)?9007199254740991:S3(n)?10:11:Xt(28295,{value:n})}function Za(n,e){if(n===e)return!0;const t=Tu(n);if(t!==Tu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bh(n).isEqual(Bh(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Eu(r.timestampValue),c=Eu(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return Au(r.bytesValue).isEqual(Au(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return er(r.geoPointValue.latitude)===er(o.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return er(r.integerValue)===er(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=er(r.doubleValue),c=er(o.doubleValue);return l===c?kp(l)===kp(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return wf(n.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(y5(l)!==y5(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Za(l[h],c[h])))return!1;return!0})(n,e);default:return Xt(52216,{left:n})}}function Hh(n,e){return(n.values||[]).find((t=>Za(t,e)))!==void 0}function xf(n,e){if(n===e)return 0;const t=Tu(n),i=Tu(e);if(t!==i)return Sn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Sn(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=er(o.integerValue||o.doubleValue),h=er(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return _5(n.timestampValue,e.timestampValue);case 4:return _5(Bh(n),Bh(e));case 5:return F0(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=Au(o),h=Au(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const p=Sn(c[f],h[f]);if(p!==0)return p}return Sn(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Sn(er(o.latitude),er(l.latitude));return c!==0?c:Sn(er(o.longitude),er(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return b5(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var S,x,D,O;const c=o.fields||{},h=l.fields||{},f=(S=c[Op])==null?void 0:S.arrayValue,p=(x=h[Op])==null?void 0:x.arrayValue,b=Sn(((D=f==null?void 0:f.values)==null?void 0:D.length)||0,((O=p==null?void 0:p.values)==null?void 0:O.length)||0);return b!==0?b:b5(f,p)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Qd.mapValue&&l===Qd.mapValue)return 0;if(o===Qd.mapValue)return 1;if(l===Qd.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let b=0;b<h.length&&b<p.length;++b){const S=F0(h[b],p[b]);if(S!==0)return S;const x=xf(c[h[b]],f[p[b]]);if(x!==0)return x}return Sn(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Xt(23264,{he:t})}}function _5(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Sn(n,e);const t=Eu(n),i=Eu(e),r=Sn(t.seconds,i.seconds);return r!==0?r:Sn(t.nanos,i.nanos)}function b5(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=xf(t[r],i[r]);if(o)return o}return Sn(t.length,i.length)}function Sf(n){return V0(n)}function V0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Eu(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Au(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return zt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=V0(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${V0(t.fields[l])}`;return r+"}"})(n.mapValue):Xt(61005,{value:n})}function mp(n){switch(Tu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sm(n);return e?16+mp(e):16;case 5:return 2*n.stringValue.length;case 6:return Au(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+mp(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return lc(i.fields,((o,l)=>{r+=o.length+mp(l)})),r})(n.mapValue);default:throw Xt(13486,{value:n})}}function w5(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function B0(n){return!!n&&"integerValue"in n}function U1(n){return!!n&&"arrayValue"in n}function x5(n){return!!n&&"nullValue"in n}function S5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gp(n){return!!n&&"mapValue"in n}function S3(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Px])==null?void 0:i.stringValue)===kx}function Lh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lc(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Lh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lh(n.arrayValue.values[t]);return e}return{...n}}function E3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===x3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.value=e}static empty(){return new zo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=ls.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=c.popLast()}l?i[c.lastSegment()]=Lh(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];gp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){lc(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new zo(Lh(this.value))}}function Ux(n){const e=[];return lc(n.fields,((t,i)=>{const r=new ls([t]);if(gp(i)){const o=Ux(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new ma(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,i,r,o,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Es(e,0,rn.min(),rn.min(),rn.min(),zo.empty(),0)}static newFoundDocument(e,t,i,r){return new Es(e,1,t,rn.min(),i,r,0)}static newNoDocument(e,t){return new Es(e,2,t,rn.min(),rn.min(),zo.empty(),0)}static newUnknownDocument(e,t){return new Es(e,3,t,rn.min(),rn.min(),zo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.position=e,this.inclusive=t}}function E5(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(o.field.isKeyField()?i=zt.comparator(zt.fromName(l.referenceValue),t.key):i=xf(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function A5(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Za(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function A3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{}class dr extends Ox{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new N3(e,t,i):t==="array-contains"?new R3(e,i):t==="in"?new L3(e,i):t==="not-in"?new M3(e,i):t==="array-contains-any"?new D3(e,i):new dr(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new C3(e,i):new I3(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xf(t,this.value)):t!==null&&Tu(this.value)===Tu(t)&&this.matchesComparison(xf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _a extends Ox{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _a(e,t)}matches(e){return Fx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fx(n){return n.op==="and"}function Vx(n){return T3(n)&&Fx(n)}function T3(n){for(const e of n.filters)if(e instanceof _a)return!1;return!0}function q0(n){if(n instanceof dr)return n.field.canonicalString()+n.op.toString()+Sf(n.value);if(Vx(n))return n.filters.map((e=>q0(e))).join(",");{const e=n.filters.map((t=>q0(t))).join(",");return`${n.op}(${e})`}}function Bx(n,e){return n instanceof dr?(function(i,r){return r instanceof dr&&i.op===r.op&&i.field.isEqual(r.field)&&Za(i.value,r.value)})(n,e):n instanceof _a?(function(i,r){return r instanceof _a&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&Bx(l,r.filters[c])),!0):!1})(n,e):void Xt(19439)}function qx(n){return n instanceof dr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sf(t.value)}`})(n):n instanceof _a?(function(t){return t.op.toString()+" {"+t.getFilters().map(qx).join(" ,")+"}"})(n):"Filter"}class N3 extends dr{constructor(e,t,i){super(e,t,i),this.key=zt.fromName(i.referenceValue)}matches(e){const t=zt.comparator(e.key,this.key);return this.matchesComparison(t)}}class C3 extends dr{constructor(e,t){super(e,"in",t),this.keys=Hx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I3 extends dr{constructor(e,t){super(e,"not-in",t),this.keys=Hx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Hx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>zt.fromName(i.referenceValue)))}class R3 extends dr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return U1(t)&&Hh(t.arrayValue,this.value)}}class L3 extends dr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hh(this.value.arrayValue,t)}}class M3 extends dr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hh(this.value.arrayValue,t)}}class D3 extends dr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!U1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Hh(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,t=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function T5(n,e=null,t=[],i=[],r=null,o=null,l=null){return new P3(n,e,t,i,r,o,l)}function O1(n){const e=ln(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>q0(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),rm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sf(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sf(i))).join(",")),e.Te=t}return e.Te}function F1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A5(n.startAt,e.startAt)&&A5(n.endAt,e.endAt)}function H0(n){return zt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t=null,i=[],r=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function k3(n,e,t,i,r,o,l,c){return new Rf(n,e,t,i,r,o,l,c)}function V1(n){return new Rf(n)}function N5(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U3(n){return zt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zx(n){return n.collectionGroup!==null}function Mh(n){const e=ln(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ir(ls.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zh(o,i))})),t.has(ls.keyField().canonicalString())||e.Ie.push(new zh(ls.keyField(),i))}return e.Ie}function Wa(n){const e=ln(n);return e.Ee||(e.Ee=O3(e,Mh(n))),e.Ee}function O3(n,e){if(n.limitType==="F")return T5(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new zh(r.field,o)}));const t=n.endAt?new Fp(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Fp(n.startAt.position,n.startAt.inclusive):null;return T5(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function z0(n,e){const t=n.filters.concat([e]);return new Rf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function F3(n,e){const t=n.explicitOrderBy.concat([e]);return new Rf(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function G0(n,e,t){return new Rf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function om(n,e){return F1(Wa(n),Wa(e))&&n.limitType===e.limitType}function Gx(n){return`${O1(Wa(n))}|lt:${n.limitType}`}function ef(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>qx(r))).join(", ")}]`),rm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Sf(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Sf(r))).join(",")),`Target(${i})`})(Wa(n))}; limitType=${n.limitType})`}function am(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):zt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of Mh(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,h){const f=E5(l,c,h);return l.inclusive?f<=0:f<0})(i.startAt,Mh(i),r)||i.endAt&&!(function(l,c,h){const f=E5(l,c,h);return l.inclusive?f>=0:f>0})(i.endAt,Mh(i),r))})(n,e)}function V3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jx(n){return(e,t)=>{let i=!1;for(const r of Mh(n)){const o=B3(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function B3(n,e,t){const i=n.field.isKeyField()?zt.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?xf(h,f):Xt(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Xt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lc(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return Cx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=new Ui(zt.comparator);function kl(){return q3}const $x=new Ui(zt.comparator);function Th(...n){let e=$x;for(const t of n)e=e.insert(t.key,t);return e}function Yx(n){let e=$x;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Qu(){return Dh()}function Kx(){return Dh()}function Dh(){return new uc((n=>n.toString()),((n,e)=>n.isEqual(e)))}const H3=new Ui(zt.comparator),z3=new Ir(zt.comparator);function En(...n){let e=z3;for(const t of n)e=e.add(t);return e}const G3=new Ir(Sn);function j3(){return G3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function Jx(n){return{integerValue:""+n}}function $3(n,e){return g3(e)?Jx(e):B1(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this._=void 0}}function Y3(n,e,t){return n instanceof Vp?(function(r,o){const l={fields:{[Lx]:{stringValue:Rx},[Dx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&k1(o)&&(o=sm(o)),o&&(l.fields[Mx]=o),{mapValue:l}})(t,e):n instanceof Gh?Xx(n,e):n instanceof jh?Qx(n,e):(function(r,o){const l=Wx(r,o),c=C5(l)+C5(r.Ae);return B0(l)&&B0(r.Ae)?Jx(c):B1(r.serializer,c)})(n,e)}function K3(n,e,t){return n instanceof Gh?Xx(n,e):n instanceof jh?Qx(n,e):t}function Wx(n,e){return n instanceof Bp?(function(i){return B0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Vp extends lm{}class Gh extends lm{constructor(e){super(),this.elements=e}}function Xx(n,e){const t=Zx(e);for(const i of n.elements)t.some((r=>Za(r,i)))||t.push(i);return{arrayValue:{values:t}}}class jh extends lm{constructor(e){super(),this.elements=e}}function Qx(n,e){let t=Zx(e);for(const i of n.elements)t=t.filter((r=>!Za(r,i)));return{arrayValue:{values:t}}}class Bp extends lm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function C5(n){return er(n.integerValue||n.doubleValue)}function Zx(n){return U1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function J3(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Gh&&r instanceof Gh||i instanceof jh&&r instanceof jh?wf(i.elements,r.elements,Za):i instanceof Bp&&r instanceof Bp?Za(i.Ae,r.Ae):i instanceof Vp&&r instanceof Vp})(n.transform,e.transform)}class W3{constructor(e,t){this.version=e,this.transformResults=t}}class Ml{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ml}static exists(e){return new Ml(void 0,e)}static updateTime(e){return new Ml(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class um{}function eS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nS(n.key,Ml.none()):new Xh(n.key,n.data,Ml.none());{const t=n.data,i=zo.empty();let r=new Ir(ls.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new cc(n.key,i,new ma(r.toArray()),Ml.none())}}function X3(n,e,t){n instanceof Xh?(function(r,o,l){const c=r.value.clone(),h=R5(r.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof cc?(function(r,o,l){if(!yp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=R5(r.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(tS(r)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ph(n,e,t,i){return n instanceof Xh?(function(o,l,c,h){if(!yp(o.precondition,l))return c;const f=o.value.clone(),p=L5(o.fieldTransforms,h,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof cc?(function(o,l,c,h){if(!yp(o.precondition,l))return c;const f=L5(o.fieldTransforms,h,l),p=l.data;return p.setAll(tS(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,e,t,i):(function(o,l,c){return yp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function Q3(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=Wx(i.transform,r||null);o!=null&&(t===null&&(t=zo.empty()),t.set(i.field,o))}return t||null}function I5(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&wf(i,r,((o,l)=>J3(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xh extends um{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cc extends um{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function R5(n,e,t){const i=new Map;Yn(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,K3(l,c,t[r]))}return i}function L5(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,Y3(o,l,e))}return i}class nS extends um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z3 extends um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&X3(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ph(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ph(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Kx();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(r.key)?null:c;const h=eS(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(rn.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),En())}isEqual(e){return this.batchId===e.batchId&&wf(this.mutations,e.mutations,((t,i)=>I5(t,i)))&&wf(this.baseMutations,e.baseMutations,((t,i)=>I5(t,i)))}}class q1{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Yn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return H3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new q1(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,Rn;function iC(n){switch(n){case Qe.OK:return Xt(64938);case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0;default:return Xt(15467,{code:n})}}function iS(n){if(n===void 0)return Pl("GRPC error has no .code"),Qe.UNKNOWN;switch(n){case hr.OK:return Qe.OK;case hr.CANCELLED:return Qe.CANCELLED;case hr.UNKNOWN:return Qe.UNKNOWN;case hr.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case hr.INTERNAL:return Qe.INTERNAL;case hr.UNAVAILABLE:return Qe.UNAVAILABLE;case hr.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case hr.NOT_FOUND:return Qe.NOT_FOUND;case hr.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case hr.ABORTED:return Qe.ABORTED;case hr.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case hr.DATA_LOSS:return Qe.DATA_LOSS;default:return Xt(39323,{code:n})}}(Rn=hr||(hr={}))[Rn.OK=0]="OK",Rn[Rn.CANCELLED=1]="CANCELLED",Rn[Rn.UNKNOWN=2]="UNKNOWN",Rn[Rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rn[Rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rn[Rn.NOT_FOUND=5]="NOT_FOUND",Rn[Rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rn[Rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rn[Rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rn[Rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rn[Rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rn[Rn.ABORTED=10]="ABORTED",Rn[Rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rn[Rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rn[Rn.INTERNAL=13]="INTERNAL",Rn[Rn.UNAVAILABLE=14]="UNAVAILABLE",Rn[Rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new wu([4294967295,4294967295],0);function M5(n){const e=rC().encode(n),t=new yx;return t.update(e),new Uint8Array(t.digest())}function D5(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wu([t,i],0),new wu([r,o],0)]}class H1{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Nh(`Invalid padding: ${t}`);if(i<0)throw new Nh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Nh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Nh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wu.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(wu.fromNumber(i)));return r.compare(sC)===1&&(r=new wu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=M5(e),[i,r]=D5(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new H1(o,r,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=M5(e),[i,r]=D5(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.be(l)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Nh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new cm(rn.min(),r,new Ui(Sn),kl(),En())}}class Qh{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Qh(i,t,En(),En(),En())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class rS{constructor(e,t){this.targetId=e,this.Ce=t}}class sS{constructor(e,t,i=us.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class P5{constructor(){this.ve=0,this.Fe=k5(),this.Me=us.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=En(),t=En(),i=En();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Xt(38017,{changeType:o})}})),new Qh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=k5()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Yn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class oC{constructor(e){this.Ge=e,this.ze=new Map,this.je=kl(),this.He=Zd(),this.Je=Zd(),this.Ze=new Ui(Sn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Xt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(H0(o))if(i===0){const l=new zt(o.path);this.et(t,l,Es.newNoDocument(l,rn.min()))}else Yn(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let l,c;try{l=Au(i).toUint8Array()}catch(h){if(h instanceof Ix)return nc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new H1(l,r,o)}catch(h){return nc(h instanceof Nh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&H0(c.target)){const h=new zt(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Es.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let i=En();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const r=new cm(e,t,this.Ze,this.je,i);return this.je=kl(),this.He=Zd(),this.Je=Zd(),this.Ze=new Ui(Sn),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new P5,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ir(Sn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ir(Sn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_t("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P5),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zd(){return new Ui(zt.comparator)}function k5(){return new Ui(zt.comparator)}const aC={asc:"ASCENDING",desc:"DESCENDING"},lC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uC={and:"AND",or:"OR"};class cC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function j0(n,e){return n.useProto3Json||rm(e)?e:{value:e}}function qp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fC(n,e){return qp(n,e.toTimestamp())}function Xa(n){return Yn(!!n,49232),rn.fromTimestamp((function(t){const i=Eu(t);return new wi(i.seconds,i.nanos)})(n))}function z1(n,e){return $0(n,e).canonicalString()}function $0(n,e){const t=(function(r){return new mi(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aS(n){const e=mi.fromString(n);return Yn(hS(e),10190,{key:e.toString()}),e}function Y0(n,e){return z1(n.databaseId,e.path)}function Kg(n,e){const t=aS(e);if(t.get(1)!==n.databaseId.projectId)throw new dt(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new dt(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new zt(uS(t))}function lS(n,e){return z1(n.databaseId,e)}function hC(n){const e=aS(n);return e.length===4?mi.emptyPath():uS(e)}function K0(n){return new mi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uS(n){return Yn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function U5(n,e,t){return{name:Y0(n,e),fields:t.value.mapValue.fields}}function dC(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Xt(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(Yn(p===void 0||typeof p=="string",58123),us.fromBase64String(p||"")):(Yn(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),us.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?Qe.UNKNOWN:iS(f.code);return new dt(p,f.message||"")})(l);t=new sS(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Kg(n,i.document.name),o=Xa(i.document.updateTime),l=i.document.createTime?Xa(i.document.createTime):rn.min(),c=new zo({mapValue:{fields:i.document.fields}}),h=Es.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];t=new vp(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Kg(n,i.document),o=i.readTime?Xa(i.readTime):rn.min(),l=Es.newNoDocument(r,o),c=i.removedTargetIds||[];t=new vp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Kg(n,i.document),o=i.removedTargetIds||[];t=new vp([],o,r,null)}else{if(!("filter"in e))return Xt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new nC(r,o),c=i.targetId;t=new rS(c,l)}}return t}function pC(n,e){let t;if(e instanceof Xh)t={update:U5(n,e.key,e.value)};else if(e instanceof nS)t={delete:Y0(n,e.key)};else if(e instanceof cc)t={update:U5(n,e.key,e.data),updateMask:SC(e.fieldMask)};else{if(!(e instanceof Z3))return Xt(16599,{dt:e.type});t={verify:Y0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Vp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bp)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Xt(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:fC(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Xt(27497)})(n,e.precondition)),t}function mC(n,e){return n&&n.length>0?(Yn(e!==void 0,14353),n.map((t=>(function(r,o){let l=r.updateTime?Xa(r.updateTime):Xa(o);return l.isEqual(rn.min())&&(l=Xa(o)),new W3(l,r.transformResults||[])})(t,e)))):[]}function gC(n,e){return{documents:[lS(n,e.path)]}}function yC(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=lS(n,r);const o=(function(f){if(f.length!==0)return fS(_a.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(S){return{field:tf(S.field),direction:bC(S.dir)}})(p)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=j0(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function vC(n){let e=hC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Yn(i===1,65062);const p=t.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(b){const S=cS(b);return S instanceof _a&&Vx(S)?S.getFilters():[S]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((S=>(function(D){return new zh(nf(D.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(S)))})(t.orderBy));let c=null;t.limit&&(c=(function(b){let S;return S=typeof b=="object"?b.value:b,rm(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(b){const S=!!b.before,x=b.values||[];return new Fp(x,S)})(t.startAt));let f=null;return t.endAt&&(f=(function(b){const S=!b.before,x=b.values||[];return new Fp(x,S)})(t.endAt)),k3(e,r,l,o,c,"F",h,f)}function _C(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=nf(t.unaryFilter.field);return dr.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=nf(t.unaryFilter.field);return dr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nf(t.unaryFilter.field);return dr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nf(t.unaryFilter.field);return dr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return dr.create(nf(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _a.create(t.compositeFilter.filters.map((i=>cS(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}})(t.compositeFilter.op))})(n):Xt(30097,{filter:n})}function bC(n){return aC[n]}function wC(n){return lC[n]}function xC(n){return uC[n]}function tf(n){return{fieldPath:n.canonicalString()}}function nf(n){return ls.fromServerFormat(n.fieldPath)}function fS(n){return n instanceof dr?(function(t){if(t.op==="=="){if(S5(t.value))return{unaryFilter:{field:tf(t.field),op:"IS_NAN"}};if(x5(t.value))return{unaryFilter:{field:tf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(S5(t.value))return{unaryFilter:{field:tf(t.field),op:"IS_NOT_NAN"}};if(x5(t.value))return{unaryFilter:{field:tf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(t.field),op:wC(t.op),value:t.value}}})(n):n instanceof _a?(function(t){const i=t.getFilters().map((r=>fS(r)));return i.length===1?i[0]:{compositeFilter:{op:xC(t.op),filters:i}}})(n):Xt(54877,{filter:n})}function SC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function dS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,i,r,o=rn.min(),l=rn.min(),c=us.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.yt=e}}function AC(n){const e=vC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?G0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.Sn=new NC}addToCollectionParentIndex(e,t){return this.Sn.add(t),nt.resolve()}getCollectionParents(e,t){return nt.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return nt.resolve()}deleteFieldIndex(e,t){return nt.resolve()}deleteAllFieldIndexes(e){return nt.resolve()}createTargetIndexes(e,t){return nt.resolve()}getDocumentsMatchingTarget(e,t){return nt.resolve(null)}getIndexType(e,t){return nt.resolve(0)}getFieldIndexes(e,t){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}getMinOffset(e,t){return nt.resolve(Su.min())}getMinOffsetFromCollectionGroup(e,t){return nt.resolve(Su.min())}updateCollectionGroup(e,t,i){return nt.resolve()}updateIndexEntries(e,t){return nt.resolve()}}class NC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ir(mi.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ir(mi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pS=41943040;class ro{static withCacheSize(e){return new ro(e,ro.DEFAULT_COLLECTION_PERCENTILE,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro.DEFAULT_COLLECTION_PERCENTILE=10,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ro.DEFAULT=new ro(pS,ro.DEFAULT_COLLECTION_PERCENTILE,ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ro.DISABLED=new ro(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ef(0)}static ar(){return new Ef(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="LruGarbageCollector",CC=1048576;function V5([n,e],[t,i]){const r=Sn(n,t);return r===0?Sn(e,i):r}class IC{constructor(e){this.Pr=e,this.buffer=new Ir(V5),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();V5(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){_t(F5,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){If(t)?_t(F5,"Ignoring IndexedDB error during garbage collection: ",t):await Cf(t)}await this.Ar(3e5)}))}}class LC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return nt.resolve(im.ce);const i=new IC(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(O5)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O5):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,o,l,c,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),r=this.params.maximumSequenceNumbersToCollect):r=b,l=Date.now(),this.nthSequenceNumber(e,r)))).next((b=>(i=b,c=Date.now(),this.removeTargets(e,i,t)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(f=Date.now(),Zc()<=Ln.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:b}))))}}function MC(n,e){return new LC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.changes=new uc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?nt.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Ph(i.mutation,r,ma.empty(),wi.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,En()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=En()){const r=Qu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let l=Th();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Qu();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,En())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,r){let o=kl();const l=Dh(),c=(function(){return Dh()})();return t.forEach(((h,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof cc)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Ph(p.mutation,f,p.mutation.getFieldMask(),wi.now())):l.set(f.key,ma.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,p)=>l.set(f,p))),t.forEach(((f,p)=>c.set(f,new PC(p,l.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=Dh();let r=new Ui(((l,c)=>l-c)),o=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=i.get(h)||ma.empty();p=c.applyToLocalView(f,p),i.set(h,p);const b=(r.get(c.batchId)||En()).add(h);r=r.insert(c.batchId,b)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,p=h.value,b=Kx();p.forEach((S=>{if(!o.has(S)){const x=eS(t.get(S),i.get(S));x!==null&&b.set(S,x),o=o.add(S)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,b))}return nt.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return U3(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):nt.resolve(Qu());let c=Vh,h=o;return l.next((f=>nt.forEach(f,((p,b)=>(c<b.largestBatchId&&(c=b.largestBatchId),o.get(p)?nt.resolve():this.remoteDocumentCache.getEntry(e,p).next((S=>{h=h.insert(p,S)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,En()))).next((p=>({batchId:c,changes:Yx(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zt(t)).next((i=>{let r=Th();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let l=Th();return this.indexManager.getCollectionParents(e,o).next((c=>nt.forEach(c,(h=>{const f=(function(b,S){return new Rf(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((b,S)=>{l=l.insert(b,S)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((l=>{o.forEach(((h,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,Es.newInvalidDocument(p)))}));let c=Th();return l.forEach(((h,f)=>{const p=o.get(h);p!==void 0&&Ph(p.mutation,f,ma.empty(),wi.now()),am(t,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return nt.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Xa(r.createTime)}})(t)),nt.resolve()}getNamedQuery(e,t){return nt.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:AC(r.bundledQuery),readTime:Xa(r.readTime)}})(t)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.overlays=new Ui(zt.comparator),this.Lr=new Map}getOverlay(e,t){return nt.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Qu();return nt.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.bt(e,t,o)})),nt.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(i)),nt.resolve()}getOverlaysForCollection(e,t,i){const r=Qu(),o=t.length+1,l=new zt(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return nt.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Ui(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Qu(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=Qu(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return nt.resolve(c)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new tC(t,i));let o=this.Lr.get(t);o===void 0&&(o=En(),this.Lr.set(t,o)),this.Lr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.sessionToken=us.EMPTY_BYTE_STRING}getSessionToken(e){return nt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.kr=new Ir(zr.Kr),this.qr=new Ir(zr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new zr(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new zr(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new zt(new mi([])),i=new zr(t,e),r=new zr(t,e+1),o=[];return this.qr.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new zt(new mi([])),i=new zr(t,e),r=new zr(t,e+1);let o=En();return this.qr.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new zr(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return zt.comparator(e.key,t.key)||Sn(e.Hr,t.Hr)}static Ur(e,t){return Sn(e.Hr,t.Hr)||zt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ir(zr.Kr)}checkEmpty(e){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new eC(o,t,i,r);this.mutationQueue.push(l);for(const c of r)this.Jr=this.Jr.add(new zr(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return nt.resolve(l)}lookupMutationBatch(e,t){return nt.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),o=r<0?0:r;return nt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?P1:this.Yn-1)}getAllMutationBatches(e){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zr(t,0),r=new zr(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),nt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ir(Sn);return t.forEach((r=>{const o=new zr(r,0),l=new zr(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),nt.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;zt.isDocumentKey(o)||(o=o.child(""));const l=new zr(new zt(o),0);let c=new Ir(Sn);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Hr)),!0)}),l),nt.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Yn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return nt.forEach(t.mutations,(r=>{const o=new zr(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new zr(t,0),r=this.Jr.firstAfterOrEqual(i);return nt.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,nt.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.ti=e,this.docs=(function(){return new Ui(zt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return nt.resolve(i?i.document.mutableCopy():Es.newInvalidDocument(t))}getEntries(e,t){let i=kl();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Es.newInvalidDocument(r))})),nt.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=kl();const l=t.path,c=new zt(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||h3(f3(p),i)<=0||(r.has(p.key)||am(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return nt.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Xt(9500)}ni(e,t){return nt.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new qC(this)}getSize(e){return nt.resolve(this.size)}}class qC extends DC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),nt.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.persistence=e,this.ri=new uc((t=>O1(t)),F1),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.ii=0,this.si=new G1,this.targetCount=0,this.oi=Ef._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),nt.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ef(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,nt.resolve()}updateTargetData(e,t){return this.lr(t),nt.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),nt.waitFor(o).next((()=>r))}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return nt.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),nt.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),nt.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),nt.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return nt.resolve(i)}containsKey(e,t){return nt.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t){this._i={},this.overlays={},this.ai=new im(0),this.ui=!1,this.ui=!0,this.ci=new FC,this.referenceDelegate=e(this),this.li=new HC(this),this.indexManager=new TC,this.remoteDocumentCache=(function(r){return new BC(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new EC(t),this.Pi=new UC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new VC(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){_t("MemoryPersistence","Starting transaction:",e);const r=new zC(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((o=>this.referenceDelegate.Ii(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,t){return nt.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class zC extends p3{constructor(e){super(),this.currentSequenceNumber=e}}class j1{constructor(e){this.persistence=e,this.Ri=new G1,this.Ai=null}static Vi(e){return new j1(e)}get di(){if(this.Ai)return this.Ai;throw Xt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),nt.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),nt.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.di.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.di,(i=>{const r=zt.fromPath(i);return this.mi(e,r).next((o=>{o||t.removeEntry(r,rn.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return nt.or([()=>nt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hp{constructor(e,t){this.persistence=e,this.fi=new uc((i=>y3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=MC(this,t)}static Vi(e,t){return new Hp(e,t)}Ti(){}Ii(e){return nt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return nt.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((o=>o?nt.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(i++,o.removeEntry(l,rn.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),nt.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),nt.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),nt.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),nt.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mp(e.data.value)),t}wr(e,t,i){return nt.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return nt.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=En(),r=En();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new $1(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return MN()?8:m3(RN())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new GC;return this.ys(e,t,l).next((c=>{if(o.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>o.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(Zc()<=Ln.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",ef(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),nt.resolve()):(Zc()<=Ln.DEBUG&&_t("QueryEngine","Query:",ef(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(Zc()<=Ln.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",ef(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(t))):nt.resolve())}gs(e,t){if(N5(t))return nt.resolve(null);let i=Wa(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=G0(t,null,"F"),i=Wa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=En(...o);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.bs(t,c);return this.Ss(t,f,l,h.readTime)?this.gs(e,G0(t,null,"F")):this.Ds(e,f,t,h)}))))})))))}ps(e,t,i,r){return N5(t)||r.isEqual(rn.min())?nt.resolve(null):this.fs.getDocuments(e,i).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,i,r)?nt.resolve(null):(Zc()<=Ln.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ef(t)),this.Ds(e,l,t,c3(r,Vh)).next((c=>c)))}))}bs(e,t){let i=new Ir(jx(e));return t.forEach(((r,o)=>{am(e,o)&&(i=i.add(o))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ys(e,t,i){return Zc()<=Ln.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",ef(t)),this.fs.getDocumentsMatchingQuery(e,t,Su.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="LocalStore",$C=3e8;class YC{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Ui(Sn),this.Fs=new uc((o=>O1(o)),F1),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function KC(n,e,t,i){return new YC(n,e,t,i)}async function gS(n,e){const t=ln(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let h=En();for(const f of r){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(i,h).next((f=>({Ns:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function JC(n,e){const t=ln(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,p){const b=f.batch,S=b.keys();let x=nt.resolve();return S.forEach((D=>{x=x.next((()=>p.getEntry(h,D))).next((O=>{const B=f.docVersions.get(D);Yn(B!==null,48541),O.version.compareTo(B)<0&&(b.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),p.addEntry(O)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(h,b)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let h=En();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function yS(n){const e=ln(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function WC(n,e){const t=ln(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const c=[];e.targetChanges.forEach(((p,b)=>{const S=r.get(b);if(!S)return;c.push(t.li.removeMatchingKeys(o,p.removedDocuments,b).next((()=>t.li.addMatchingKeys(o,p.addedDocuments,b))));let x=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?x=x.withResumeToken(us.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,i)),r=r.insert(b,x),(function(O,B,q){return O.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=$C?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(S,x,p)&&c.push(t.li.updateTargetData(o,x))}));let h=kl(),f=En();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(XC(o,l,e.documentUpdates).next((p=>{h=p.Bs,f=p.Ls}))),!i.isEqual(rn.min())){const p=t.li.getLastRemoteSnapshotVersion(o).next((b=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return nt.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.vs=r,o)))}function XC(n,e,t){let i=En(),r=En();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=kl();return t.forEach(((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(rn.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):_t(Y1,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{Bs:l,Ls:r}}))}function QC(n,e){const t=ln(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=P1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ZC(n,e){const t=ln(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((o=>o?(r=o,nt.resolve(r)):t.li.allocateTargetId(i).next((l=>(r=new gu(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function J0(n,e,t){const i=ln(n),r=i.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!If(l))throw l;_t(Y1,`Failed to update sequence numbers for target ${e}: ${l}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function B5(n,e,t){const i=ln(n);let r=rn.min(),o=En();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,p){const b=ln(h),S=b.Fs.get(p);return S!==void 0?nt.resolve(b.vs.get(S)):b.li.getTargetData(f,p)})(i,l,Wa(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,t?r:rn.min(),t?o:En()))).next((c=>(eI(i,V3(e),c),{documents:c,ks:o})))))}function eI(n,e,t){let i=n.Ms.get(e)||rn.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Ms.set(e,i)}class q5{constructor(){this.activeTargetIds=j3()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tI{constructor(){this.vo=new q5,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new q5,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="ConnectivityMonitor";class z5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){_t(H5,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){_t(H5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep=null;function W0(){return ep===null?ep=(function(){return 268435456+Math.round(2147483648*Math.random())})():ep++,"0x"+ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="RestConnection",iI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class rI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===Up?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){const l=W0(),c=this.Qo(e,t.toUriEncodedString());_t(Jg,`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,r,o);const{host:f}=new URL(c),p=R1(f);return this.zo(e,c,h,i,p).then((b=>(_t(Jg,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw nc(Jg,`RPC '${e}' ${l} failed with error: `,b,"url: ",c,"request:",i),b}))}jo(e,t,i,r,o,l){return this.Wo(e,t,i,r,o)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Qo(e,t){const i=iI[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="WebChannelConnection",_h=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class ff extends rI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ff.c_){const e=wx();_h(e,bx.STAT_EVENT,(t=>{t.stat===O0.PROXY?_t(vs,"STAT_EVENT: detected buffering proxy"):t.stat===O0.NOPROXY&&_t(vs,"STAT_EVENT: detected no buffering proxy")})),ff.c_=!0}}zo(e,t,i,r,o){const l=W0();return new Promise(((c,h)=>{const f=new vx;f.setWithCredentials(!0),f.listenOnce(_x.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case pp.NO_ERROR:const b=f.getResponseJson();_t(vs,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),c(b);break;case pp.TIMEOUT:_t(vs,`RPC '${e}' ${l} timed out`),h(new dt(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:const S=f.getStatus();if(_t(vs,`RPC '${e}' ${l} failed with status:`,S,"response text:",f.getResponseText()),S>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const D=x==null?void 0:x.error;if(D&&D.status&&D.message){const O=(function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(X)>=0?X:Qe.UNKNOWN})(D.status);h(new dt(O,D.message))}else h(new dt(Qe.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new dt(Qe.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_t(vs,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);_t(vs,`RPC '${e}' ${l} sending request:`,r),f.send(t,"POST",p,i,15)}))}T_(e,t,i){const r=W0(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const f=o.join("");_t(vs,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=l.createWebChannel(f,c);this.I_(p);let b=!1,S=!1;const x=new sI({Ho:D=>{S?_t(vs,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(b||(_t(vs,`Opening RPC '${e}' stream ${r} transport.`),p.open(),b=!0),_t(vs,`RPC '${e}' stream ${r} sending:`,D),p.send(D))},Jo:()=>p.close()});return _h(p,Ah.EventType.OPEN,(()=>{S||(_t(vs,`RPC '${e}' stream ${r} transport opened.`),x.i_())})),_h(p,Ah.EventType.CLOSE,(()=>{S||(S=!0,_t(vs,`RPC '${e}' stream ${r} transport closed`),x.o_(),this.E_(p))})),_h(p,Ah.EventType.ERROR,(D=>{S||(S=!0,nc(vs,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),x.o_(new dt(Qe.UNAVAILABLE,"The operation could not be completed")))})),_h(p,Ah.EventType.MESSAGE,(D=>{var O;if(!S){const B=D.data[0];Yn(!!B,16349);const q=B,X=(q==null?void 0:q.error)||((O=q[0])==null?void 0:O.error);if(X){_t(vs,`RPC '${e}' stream ${r} received error:`,X);const Z=X.status;let W=(function(G){const V=hr[G];if(V!==void 0)return iS(V)})(Z),ye=X.message;Z==="NOT_FOUND"&&ye.includes("database")&&ye.includes("does not exist")&&ye.includes(this.databaseId.database)&&nc(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),W===void 0&&(W=Qe.INTERNAL,ye="Unknown error status: "+Z+" with message "+X.message),S=!0,x.o_(new dt(W,ye)),p.close()}else _t(vs,`RPC '${e}' stream ${r} received:`,B),x.__(B)}})),ff.u_(),setTimeout((()=>{x.s_()}),0),x}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){return new ff(n)}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n){return new cC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ff.c_=!1;class vS{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&_t("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="PersistentStream";class _S{constructor(e,t,i,r,o,l,c,h){this.Ci=e,this.b_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Qe.RESOURCE_EXHAUSTED?(Pl(t.toString()),Pl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new dt(Qe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _t(G5,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(_t(G5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aI extends _S{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dC(this.serializer,e),i=(function(o){if(!("targetChange"in o))return rn.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?rn.min():l.readTime?Xa(l.readTime):rn.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=K0(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=H0(h)?{documents:gC(o,h)}:{query:yC(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=oS(o,l.resumeToken);const f=j0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(rn.min())>0){c.readTime=qp(o,l.snapshotVersion.toTimestamp());const f=j0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=_C(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=K0(this.serializer),t.removeTarget=e,this.K_(t)}}class lI extends _S{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Yn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Yn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Yn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mC(e.writeResults,e.commitTime),i=Xa(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=K0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>pC(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{}class cI extends uI{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new dt(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,$0(t,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new dt(Qe.UNKNOWN,o.toString())}))}jo(e,t,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,$0(t,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new dt(Qe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function fI(n,e,t,i){return new cI(n,e,t,i)}class hI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pl(t),this.aa=!1):_t("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="RemoteStore";class dI{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{i.enqueueAndForget((async()=>{fc(this)&&(_t(rc,"Restarting streams for network reachability change."),await(async function(h){const f=ln(h);f.Ea.add(4),await Zh(f),f.Va.set("Unknown"),f.Ea.delete(4),await hm(f)})(this))}))})),this.Va=new hI(i,r)}}async function hm(n){if(fc(n))for(const e of n.Ra)await e(!0)}async function Zh(n){for(const e of n.Ra)await e(!1)}function bS(n,e){const t=ln(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),X1(t)?W1(t):Lf(t).O_()&&J1(t,e))}function K1(n,e){const t=ln(n),i=Lf(t);t.Ia.delete(e),i.O_()&&wS(t,e),t.Ia.size===0&&(i.O_()?i.L_():fc(t)&&t.Va.set("Unknown"))}function J1(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lf(n).Z_(e)}function wS(n,e){n.da.$e(e),Lf(n).X_(e)}function W1(n){n.da=new oC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Lf(n).start(),n.Va.ua()}function X1(n){return fc(n)&&!Lf(n).x_()&&n.Ia.size>0}function fc(n){return ln(n).Ea.size===0}function xS(n){n.da=void 0}async function pI(n){n.Va.set("Online")}async function mI(n){n.Ia.forEach(((e,t)=>{J1(n,e)}))}async function gI(n,e){xS(n),X1(n)?(n.Va.ha(e),W1(n)):n.Va.set("Unknown")}async function yI(n,e,t){if(n.Va.set("Online"),e instanceof sS&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ia.delete(c),r.da.removeTarget(c))})(n,e)}catch(i){_t(rc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zp(n,i)}else if(e instanceof vp?n.da.Xe(e):e instanceof rS?n.da.st(e):n.da.tt(e),!t.isEqual(rn.min()))try{const i=await yS(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const c=o.da.Tt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=o.Ia.get(f);p&&o.Ia.set(f,p.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const p=o.Ia.get(h);if(!p)return;o.Ia.set(h,p.withResumeToken(us.EMPTY_BYTE_STRING,p.snapshotVersion)),wS(o,h);const b=new gu(p.target,h,f,p.sequenceNumber);J1(o,b)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){_t(rc,"Failed to raise snapshot:",i),await zp(n,i)}}async function zp(n,e,t){if(!If(e))throw e;n.Ea.add(1),await Zh(n),n.Va.set("Offline"),t||(t=()=>yS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_t(rc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hm(n)}))}function SS(n,e){return e().catch((t=>zp(n,t,e)))}async function dm(n){const e=ln(n),t=Nu(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:P1;for(;vI(e);)try{const r=await QC(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,_I(e,r)}catch(r){await zp(e,r)}ES(e)&&AS(e)}function vI(n){return fc(n)&&n.Ta.length<10}function _I(n,e){n.Ta.push(e);const t=Nu(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function ES(n){return fc(n)&&!Nu(n).x_()&&n.Ta.length>0}function AS(n){Nu(n).start()}async function bI(n){Nu(n).ra()}async function wI(n){const e=Nu(n);for(const t of n.Ta)e.ea(t.mutations)}async function xI(n,e,t){const i=n.Ta.shift(),r=q1.from(i,e,t);await SS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await dm(n)}async function SI(n,e){e&&Nu(n).Y_&&await(async function(i,r){if((function(l){return iC(l)&&l!==Qe.ABORTED})(r.code)){const o=i.Ta.shift();Nu(i).B_(),await SS(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await dm(i)}})(n,e),ES(n)&&AS(n)}async function j5(n,e){const t=ln(n);t.asyncQueue.verifyOperationInProgress(),_t(rc,"RemoteStore received new credentials");const i=fc(t);t.Ea.add(3),await Zh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hm(t)}async function EI(n,e){const t=ln(n);e?(t.Ea.delete(2),await hm(t)):e||(t.Ea.add(2),await Zh(t),t.Va.set("Unknown"))}function Lf(n){return n.ma||(n.ma=(function(t,i,r){const o=ln(t);return o.sa(),new aI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:pI.bind(null,n),Yo:mI.bind(null,n),t_:gI.bind(null,n),J_:yI.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),X1(n)?W1(n):n.Va.set("Unknown")):(await n.ma.stop(),xS(n))}))),n.ma}function Nu(n){return n.fa||(n.fa=(function(t,i,r){const o=ln(t);return o.sa(),new lI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:bI.bind(null,n),t_:SI.bind(null,n),ta:wI.bind(null,n),na:xI.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await dm(n)):(await n.fa.stop(),n.Ta.length>0&&(_t(rc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ll,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,c=new Q1(e,t,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z1(n,e){if(Pl("AsyncQueue",`${e}: ${n}`),If(n))return new dt(Qe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{static emptySet(e){return new hf(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||zt.comparator(t.key,i.key):(t,i)=>zt.comparator(t.key,i.key),this.keyedMap=Th(),this.sortedSet=new Ui(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new hf;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.ga=new Ui(zt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Af{constructor(e,t,i,r,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Af(e,t,hf.emptySet(t),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class TI{constructor(){this.queries=Y5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=ln(t),o=r.queries;r.queries=Y5(),o.forEach(((l,c)=>{for(const h of c.ba)h.onError(i)}))})(this,new dt(Qe.ABORTED,"Firestore shutting down"))}}function Y5(){return new uc((n=>Gx(n)),om)}async function TS(n,e){const t=ln(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.Sa()&&e.Da()&&(i=2):(o=new AI,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const c=Z1(l,`Initialization of query '${ef(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ey(t)}async function NS(n,e){const t=ln(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?r=e.Da()?0:1:!o.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function NI(n,e){const t=ln(n);let i=!1;for(const r of e){const o=r.query,l=t.queries.get(o);if(l){for(const c of l.ba)c.Fa(r)&&(i=!0);l.wa=r}}i&&ey(t)}function CI(n,e,t){const i=ln(n),r=i.queries.get(e);if(r)for(const o of r.ba)o.onError(t);i.queries.delete(e)}function ey(n){n.Ca.forEach((e=>{e.next()}))}var X0,K5;(K5=X0||(X0={})).Ma="default",K5.Cache="cache";class CS{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Af(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==X0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.key=e}}class RS{constructor(e){this.key=e}}class II{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=En(),this.mutatedKeys=En(),this.eu=jx(e),this.tu=new hf(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new $5,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,b)=>{const S=r.get(p),x=am(this.query,b)?b:null,D=!!S&&this.mutatedKeys.has(S.key),O=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let B=!1;S&&x?S.data.isEqual(x.data)?D!==O&&(i.track({type:3,doc:x}),B=!0):this.su(S,x)||(i.track({type:2,doc:x}),B=!0,(h&&this.eu(x,h)>0||f&&this.eu(x,f)<0)&&(c=!0)):!S&&x?(i.track({type:0,doc:x}),B=!0):S&&!x&&(i.track({type:1,doc:S}),B=!0,(h||f)&&(c=!0)),B&&(x?(l=l.add(x),o=O?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,b)=>(function(x,D){const O=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Vt:B})}};return O(x)-O(D)})(p.type,b.type)||this.eu(p.doc,b.doc))),this.ou(i),r=r??!1;const c=t&&!r?this._u():[],h=this.Ya.size===0&&this.current&&!r?1:0,f=h!==this.Xa;return this.Xa=h,l.length!==0||f?{snapshot:new Af(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=En(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new RS(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new IS(i))})),t}cu(e){this.Za=e.ks,this.Ya=En();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Af.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ty="SyncEngine";class RI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LI{constructor(e){this.key=e,this.hu=!1}}class MI{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new uc((c=>Gx(c)),om),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ui(zt.comparator),this.Au=new Map,this.Vu=new G1,this.du={},this.mu=new Map,this.fu=Ef.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DI(n,e,t=!0){const i=US(n);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await LS(i,e,t,!0),r}async function PI(n,e){const t=US(n);await LS(t,e,!0,!1)}async function LS(n,e,t,i){const r=await ZC(n.localStore,Wa(e)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return i&&(c=await kI(n,e,o,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&bS(n.remoteStore,r),c}async function kI(n,e,t,i,r){n.pu=(b,S,x)=>(async function(O,B,q,X){let Z=B.view.ru(q);Z.Ss&&(Z=await B5(O.localStore,B.query,!1).then((({documents:G})=>B.view.ru(G,Z))));const W=X&&X.targetChanges.get(B.targetId),ye=X&&X.targetMismatches.get(B.targetId)!=null,de=B.view.applyChanges(Z,O.isPrimaryClient,W,ye);return W5(O,B.targetId,de.au),de.snapshot})(n,b,S,x);const o=await B5(n.localStore,e,!0),l=new II(e,o.ks),c=l.ru(o.documents),h=Qh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=l.applyChanges(c,n.isPrimaryClient,h);W5(n,t,f.au);const p=new RI(e,t,l);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function UI(n,e,t){const i=ln(n),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!om(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await J0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&K1(i.remoteStore,r.targetId),Q0(i,r.targetId)})).catch(Cf)):(Q0(i,r.targetId),await J0(i.localStore,r.targetId,!0))}async function OI(n,e){const t=ln(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),K1(t.remoteStore,i.targetId))}async function FI(n,e,t){const i=jI(n);try{const r=await(function(l,c){const h=ln(l),f=wi.now(),p=c.reduce(((x,D)=>x.add(D.key)),En());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let D=kl(),O=En();return h.xs.getEntries(x,p).next((B=>{D=B,D.forEach(((q,X)=>{X.isValidDocument()||(O=O.add(q))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,D))).next((B=>{b=B;const q=[];for(const X of c){const Z=Q3(X,b.get(X.key).overlayedDocument);Z!=null&&q.push(new cc(X.key,Z,Ux(Z.value.mapValue),Ml.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,q,c)})).next((B=>{S=B;const q=B.applyToLocalDocumentSet(b,O);return h.documentOverlayCache.saveOverlays(x,B.batchId,q)}))})).then((()=>({batchId:S.batchId,changes:Yx(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,h){let f=l.du[l.currentUser.toKey()];f||(f=new Ui(Sn)),f=f.insert(c,h),l.du[l.currentUser.toKey()]=f})(i,r.batchId,t),await ed(i,r.changes),await dm(i.remoteStore)}catch(r){const o=Z1(r,"Failed to persist write");t.reject(o)}}async function MS(n,e){const t=ln(n);try{const i=await WC(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=t.Au.get(o);l&&(Yn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Yn(l.hu,14607):r.removedDocuments.size>0&&(Yn(l.hu,42227),l.hu=!1))})),await ed(t,i,e)}catch(i){await Cf(i)}}function J5(n,e,t){const i=ln(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const h=ln(l);h.onlineState=c;let f=!1;h.queries.forEach(((p,b)=>{for(const S of b.ba)S.va(c)&&(f=!0)})),f&&ey(h)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VI(n,e,t){const i=ln(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),o=r&&r.key;if(o){let l=new Ui(zt.comparator);l=l.insert(o,Es.newNoDocument(o,rn.min()));const c=En().add(o),h=new cm(rn.min(),new Map,new Ui(Sn),l,c);await MS(i,h),i.Ru=i.Ru.remove(o),i.Au.delete(e),ny(i)}else await J0(i.localStore,e,!1).then((()=>Q0(i,e,t))).catch(Cf)}async function BI(n,e){const t=ln(n),i=e.batch.batchId;try{const r=await JC(t.localStore,e);PS(t,i,null),DS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ed(t,r)}catch(r){await Cf(r)}}async function qI(n,e,t){const i=ln(n);try{const r=await(function(l,c){const h=ln(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,c).next((b=>(Yn(b!==null,37113),p=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);PS(i,e,t),DS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ed(i,r)}catch(r){await Cf(r)}}function DS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function PS(n,e,t){const i=ln(n);let r=i.du[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function Q0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||kS(n,i)}))}function kS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(K1(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),ny(n))}function W5(n,e,t){for(const i of t)i instanceof IS?(n.Vu.addReference(i.key,e),HI(n,i)):i instanceof RS?(_t(ty,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||kS(n,i.key)):Xt(19791,{wu:i})}function HI(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(_t(ty,"New document in limbo: "+t),n.Eu.add(i),ny(n))}function ny(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new zt(mi.fromString(e)),i=n.fu.next();n.Au.set(i,new LI(t)),n.Ru=n.Ru.insert(t,i),bS(n.remoteStore,new gu(Wa(V1(t.path)),i,"TargetPurposeLimboResolution",im.ce))}}async function ed(n,e,t){const i=ln(n),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,h)=>{l.push(i.pu(h,e,t).then((f=>{var p;if((f||t)&&i.isPrimaryClient){const b=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){r.push(f);const b=$1.Es(h.targetId,f);o.push(b)}})))})),await Promise.all(l),i.Pu.J_(r),await(async function(h,f){const p=ln(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>nt.forEach(f,(S=>nt.forEach(S.Ts,(x=>p.persistence.referenceDelegate.addReference(b,S.targetId,x))).next((()=>nt.forEach(S.Is,(x=>p.persistence.referenceDelegate.removeReference(b,S.targetId,x)))))))))}catch(b){if(!If(b))throw b;_t(Y1,"Failed to update sequence numbers: "+b)}for(const b of f){const S=b.targetId;if(!b.fromCache){const x=p.vs.get(S),D=x.snapshotVersion,O=x.withLastLimboFreeSnapshotVersion(D);p.vs=p.vs.insert(S,O)}}})(i.localStore,o))}async function zI(n,e){const t=ln(n);if(!t.currentUser.isEqual(e)){_t(ty,"User change. New user:",e.toKey());const i=await gS(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new dt(Qe.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ed(t,i.Ns)}}function GI(n,e){const t=ln(n),i=t.Au.get(e);if(i&&i.hu)return En().add(i.key);{let r=En();const o=t.Iu.get(e);if(!o)return r;for(const l of o){const c=t.Tu.get(l);r=r.unionWith(c.view.nu)}return r}}function US(n){const e=ln(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VI.bind(null,e),e.Pu.J_=NI.bind(null,e.eventManager),e.Pu.yu=CI.bind(null,e.eventManager),e}function jI(n){const e=ln(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qI.bind(null,e),e}class Gp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KC(this.persistence,new jC,e.initialUser,this.serializer)}Cu(e){return new mS(j1.Vi,this.serializer)}Du(e){return new tI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gp.provider={build:()=>new Gp};class $I extends Gp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Yn(this.persistence.referenceDelegate instanceof Hp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new RC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ro.withCacheSize(this.cacheSizeBytes):ro.DEFAULT;return new mS((i=>Hp.Vi(i,t)),this.serializer)}}class Z0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>J5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zI.bind(null,this.syncEngine),await EI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TI})()}createDatastore(e){const t=fm(e.databaseInfo.databaseId),i=oI(e.databaseInfo);return fI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,l,c){return new dI(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>J5(this.syncEngine,t,0)),(function(){return z5.v()?new z5:new nI})())}createSyncEngine(e,t){return(function(r,o,l,c,h,f,p){const b=new MI(r,o,l,c,h,f);return p&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=ln(r);_t(rc,"RemoteStore shutting down."),o.Ea.add(5),await Zh(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Z0.provider={build:()=>new Z0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="FirestoreClient";class YI{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=Ss.UNAUTHENTICATED,this.clientId=D1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{_t(Cu,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_t(Cu,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ll;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Z1(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Xg(n,e){n.asyncQueue.verifyOperationInProgress(),_t(Cu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await gS(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function X5(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KI(n);_t(Cu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>j5(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>j5(e.remoteStore,r))),n._onlineComponents=e}async function KI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t(Cu,"Using user provided OfflineComponentProvider");try{await Xg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===Qe.FAILED_PRECONDITION||r.code===Qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;nc("Error using user provided cache. Falling back to memory cache: "+t),await Xg(n,new Gp)}}else _t(Cu,"Using default OfflineComponentProvider"),await Xg(n,new $I(void 0));return n._offlineComponents}async function FS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t(Cu,"Using user provided OnlineComponentProvider"),await X5(n,n._uninitializedComponentsProvider._online)):(_t(Cu,"Using default OnlineComponentProvider"),await X5(n,new Z0))),n._onlineComponents}function JI(n){return FS(n).then((e=>e.syncEngine))}async function VS(n){const e=await FS(n),t=e.eventManager;return t.onListen=DI.bind(null,e.syncEngine),t.onUnlisten=UI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OI.bind(null,e.syncEngine),t}function WI(n,e,t={}){const i=new Ll;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const p=new OS({next:S=>{p.Nu(),l.enqueueAndForget((()=>NS(o,b)));const x=S.docs.has(c);!x&&S.fromCache?f.reject(new dt(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&h&&h.source==="server"?f.reject(new dt(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(S)},error:S=>f.reject(S)}),b=new CS(V1(c.path),p,{includeMetadataChanges:!0,Ka:!0});return TS(o,b)})(await VS(n),n.asyncQueue,e,t,i))),i.promise}function XI(n,e,t={}){const i=new Ll;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const p=new OS({next:S=>{p.Nu(),l.enqueueAndForget((()=>NS(o,b))),S.fromCache&&h.source==="server"?f.reject(new dt(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(S)},error:S=>f.reject(S)}),b=new CS(c,p,{includeMetadataChanges:!0,Ka:!0});return TS(o,b)})(await VS(n),n.asyncQueue,e,t,i))),i.promise}function QI(n,e){const t=new Ll;return n.asyncQueue.enqueueAndForget((async()=>FI(await JI(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="ComponentProvider",Q5=new Map;function e6(n,e,t,i,r){return new b3(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,BS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firestore.googleapis.com",Z5=!0;class e_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new dt(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qS,this.ssl=Z5}else this.host=e.host,this.ssl=e.ssl??Z5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CC)throw new dt(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new dt(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new dt(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new dt(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pm{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dt(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Z4;switch(i.type){case"firstParty":return new i3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new dt(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Q5.get(t);i&&(_t(ZI,"Removing Datastore"),Q5.delete(t),i.terminate())})(this),Promise.resolve()}}function t6(n,e,t,i={}){var f;n=ic(n,pm);const r=R1(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;r&&(AN(`https://${c}`),IN("Firestore",!0)),o.host!==qS&&o.host!==c&&nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:r,emulatorOptions:i};if(!Mp(h,l)&&(n._setSettings(h),i.mockUserToken)){let p,b;if(typeof i.mockUserToken=="string")p=i.mockUserToken,b=Ss.MOCK_USER;else{p=TN(i.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new dt(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ss(S)}n._authCredentials=new e3(new Ex(p,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hc(this.firestore,e,this._query)}}class mr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Wh(t,mr._jsonSchema))return new mr(e,i||null,new zt(mi.fromString(t.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:pr("string",mr._jsonSchemaVersion),referencePath:pr("string")};class xu extends hc{constructor(e,t,i){super(e,t,V1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new zt(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function n6(n,e,...t){if(n=bf(n),Ax("collection","path",e),n instanceof pm){const i=mi.fromString(e,...t);return d5(i),new xu(n,null,i)}{if(!(n instanceof mr||n instanceof xu))throw new dt(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mi.fromString(e,...t));return d5(i),new xu(n.firestore,null,i)}}function HS(n,e,...t){if(n=bf(n),arguments.length===1&&(e=D1.newId()),Ax("doc","path",e),n instanceof pm){const i=mi.fromString(e,...t);return h5(i),new mr(n,null,new zt(i))}{if(!(n instanceof mr||n instanceof xu))throw new dt(Qe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mi.fromString(e,...t));return h5(i),new mr(n.firestore,n instanceof xu?n.converter:null,new zt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="AsyncQueue";class n_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vS(this,"async_queue_retry"),this._c=()=>{const i=Wg();i&&_t(t_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Wg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ll;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!If(e))throw e;_t(t_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Pl("INTERNAL UNHANDLED ERROR: ",i_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Q1.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Xt(47125,{Pc:i_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function i_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class mm extends pm{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new n_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n_(e),this._firestoreClient=void 0,await e}}}function i6(n,e){const t=typeof n=="object"?n:V4(),i=typeof n=="string"?n:Up,r=P4(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=SN("firestore");o&&t6(r,...o)}return r}function iy(n){if(n._terminated)throw new dt(Qe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||r6(n),n._firestoreClient}function r6(n){var i,r,o,l;const e=n._freezeSettings(),t=e6(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new YI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Go(us.fromBase64String(e))}catch(t){throw new dt(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Go(us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Go._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wh(e,Go._jsonSchema))return Go.fromBase64String(e.bytes)}}Go._jsonSchemaVersion="firestore/bytes/1.0",Go._jsonSchema={type:pr("string",Go._jsonSchemaVersion),bytes:pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new dt(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dt(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dt(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Sn(this._lat,e._lat)||Sn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qa._jsonSchemaVersion}}static fromJSON(e){if(Wh(e,Qa._jsonSchema))return new Qa(e.latitude,e.longitude)}}Qa._jsonSchemaVersion="firestore/geoPoint/1.0",Qa._jsonSchema={type:pr("string",Qa._jsonSchemaVersion),latitude:pr("number"),longitude:pr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ga._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wh(e,ga._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ga(e.vectorValues);throw new dt(Qe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ga._jsonSchemaVersion="firestore/vectorValue/1.0",ga._jsonSchema={type:pr("string",ga._jsonSchemaVersion),vectorValues:pr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=/^__.*__$/;class o6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xh(e,this.data,t,this.fieldTransforms)}}function jS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{dataSource:n})}}class ry{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ry({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(jS(this.dataSource)&&s6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class a6{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||fm(e)}createContext(e,t,i,r=!1){return new ry({dataSource:e,methodName:t,targetDoc:i,path:ls.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $S(n){const e=n._freezeSettings(),t=fm(n._databaseId);return new a6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function l6(n,e,t,i,r,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,r);JS("Data must be an object, but it was:",l,i);const c=YS(i,l);let h,f;if(o.merge)h=new ma(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const b of o.mergeFields){const S=gm(e,b,t);if(!l.contains(S))throw new dt(Qe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);h6(p,S)||p.push(S)}h=new ma(p),f=l.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=l.fieldTransforms;return new o6(new zo(c),h,f)}function u6(n,e,t,i=!1){return sy(t,n.createContext(i?4:3,e))}function sy(n,e){if(KS(n=bf(n)))return JS("Unsupported field value:",e,n),YS(n,e);if(n instanceof GS)return(function(i,r){if(!jS(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let h=sy(c,r.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=bf(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=wi.fromDate(i);return{timestampValue:qp(r.serializer,o)}}if(i instanceof wi){const o=new wi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qp(r.serializer,o)}}if(i instanceof Qa)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Go)return{bytesValue:oS(r.serializer,i._byteString)};if(i instanceof mr){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:z1(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ga)return(function(l,c){const h=l instanceof ga?l.toArray():l;return{mapValue:{fields:{[Px]:{stringValue:kx},[Op]:{arrayValue:{values:h.map((p=>{if(typeof p!="number")throw c.createError("VectorValues must only contain numeric values.");return B1(c.serializer,p)}))}}}}}})(i,r);if(dS(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${nm(i)}`)})(n,e)}function YS(n,e){const t={};return Cx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lc(n,((i,r)=>{const o=sy(r,e.childContextForField(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function KS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wi||n instanceof Qa||n instanceof Go||n instanceof mr||n instanceof GS||n instanceof ga||dS(n))}function JS(n,e,t){if(!KS(t)||!Tx(t)){const i=nm(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function gm(n,e,t){if((e=bf(e))instanceof zS)return e._internalPath;if(typeof e=="string")return f6(n,e);throw jp("Field path arguments must be of type string or ",n,!1,void 0,t)}const c6=new RegExp("[~\\*/\\[\\]]");function f6(n,e,t){if(e.search(c6)>=0)throw jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zS(...e.split("."))._internalPath}catch{throw jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jp(n,e,t,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new dt(Qe.INVALID_ARGUMENT,c+n+h)}function h6(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{convertValue(e,t="none"){switch(Tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Au(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return lc(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){var i,r,o;const t=(o=(r=(i=e.fields)==null?void 0:i[Op].arrayValue)==null?void 0:r.values)==null?void 0:o.map((l=>er(l.doubleValue)));return new ga(t)}convertGeoPoint(e){return new Qa(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=sm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Bh(e));default:return null}}convertTimestamp(e){const t=Eu(e);return new wi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mi.fromString(e);Yn(hS(i),9688,{name:e});const r=new qh(i.get(1),i.get(3)),o=new zt(i.popFirst(5));return r.isEqual(t)||Pl(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends d6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}const r_="@firebase/firestore",s_="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(gm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class p6 extends XS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new dt(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class QS extends oy{}function g6(n,e,...t){let i=[];e instanceof oy&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((h=>h instanceof ly)).length,c=o.filter((h=>h instanceof ay)).length;if(l>1||l>0&&c>0)throw new dt(Qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class ay extends QS{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ay(e,t,i)}_apply(e){const t=this._parse(e);return ZS(e._query,t),new hc(e.firestore,e.converter,z0(e._query,t))}_parse(e){const t=$S(e.firestore);return(function(o,l,c,h,f,p,b){let S;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new dt(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){a_(b,p);const D=[];for(const O of b)D.push(o_(h,o,O));S={arrayValue:{values:D}}}else S=o_(h,o,b)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||a_(b,p),S=u6(c,l,b,p==="in"||p==="not-in");return dr.create(f,p,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ly extends oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ly(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:_a.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const h of c)ZS(l,h),l=z0(l,h)})(e._query,t),new hc(e.firestore,e.converter,z0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uy extends QS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uy(e,t)}_apply(e){const t=(function(r,o,l){if(r.startAt!==null)throw new dt(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new dt(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zh(o,l)})(e._query,this._field,this._direction);return new hc(e.firestore,e.converter,F3(e._query,t))}}function y6(n,e="asc"){const t=e,i=gm("orderBy",n);return uy._create(i,t)}function o_(n,e,t){if(typeof(t=bf(t))=="string"){if(t==="")throw new dt(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zx(e)&&t.indexOf("/")!==-1)throw new dt(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(mi.fromString(t));if(!zt.isDocumentKey(i))throw new dt(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return w5(n,new zt(i))}if(t instanceof mr)return w5(n,t._key);throw new dt(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(t)}.`)}function a_(n,e){if(!Array.isArray(n)||n.length===0)throw new dt(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZS(n,e){const t=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new dt(Qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new dt(Qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function v6(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ch{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zu extends XS{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _p(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(gm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(Qe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zu._jsonSchema={type:pr("string",Zu._jsonSchemaVersion),bundleSource:pr("string","DocumentSnapshot"),bundleName:pr("string"),bundle:pr("string")};class _p extends Zu{data(e={}){return super.data(e)}}class df{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ch(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _p(this._firestore,this._userDataWriter,i.key,i,new Ch(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dt(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const h=new _p(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ch(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new _p(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ch(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:_6(c.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(Qe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=df._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=D1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */df._jsonSchemaVersion="firestore/querySnapshot/1.0",df._jsonSchema={type:pr("string",df._jsonSchemaVersion),bundleSource:pr("string","QuerySnapshot"),bundleName:pr("string"),bundle:pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(n){n=ic(n,mr);const e=ic(n.firestore,mm),t=iy(e);return WI(t,n._key).then((i=>E6(e,n,i)))}function w6(n){n=ic(n,hc);const e=ic(n.firestore,mm),t=iy(e),i=new WS(e);return m6(n._query),XI(t,n._query).then((r=>new df(e,i,n,r)))}function x6(n,e,t){n=ic(n,mr);const i=ic(n.firestore,mm),r=v6(n.converter,e,t),o=$S(i);return S6(i,[l6(o,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ml.none())])}function S6(n,e){const t=iy(n);return QI(t,e)}function E6(n,e,t){const i=t.docs.get(e._key),r=new WS(n);return new Zu(n,r,e._key,i,new Ch(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Q4(F4),Pp(new Oh("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new mm(new t3(i.getProvider("auth-internal")),new r3(l,i.getProvider("app-check-internal")),w3(l,r),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),cf(r_,s_,e),cf(r_,s_,"esm2020")})();const A6={apiKey:"AIzaSyAuKC9NaTv4hz0xYjlw0kEmpogmZ2cx1oc",authDomain:"speaking-and-writing.firebaseapp.com",projectId:"speaking-and-writing",storageBucket:"speaking-and-writing.firebasestorage.app",messagingSenderId:"628086175728",appId:"1:628086175728:web:24d412fdb9fef02fab8f35"},T6=px(A6),cy=i6(T6),fy="students",Qg=async(n,e)=>{try{const t=HS(cy,fy,n);await x6(t,{...e,updatedAt:new Date().toISOString()},{merge:!0}),console.log(`Stats saved for ${n}`)}catch(t){throw console.error("Error saving user stats:",t),t}},N6=async n=>{try{const e=HS(cy,fy,n),t=await b6(e);return t.exists()?t.data():null}catch(e){throw console.error("Error fetching user stats:",e),e}},C6=async()=>{try{const n=n6(cy,fy),e=g6(n,y6("updatedAt","desc"));return(await w6(e)).docs.map(i=>({name:i.id,stats:i.data()}))}catch(n){throw console.error("Error fetching all student stats:",n),n}},l_=["Hoa Quang An","Pham Quynh Anh","Ha Thi Minh Anh","Cao Nguyen Quynh Anh","Tran Nguyet Anh","Hoa Gia Binh","Hoang Van Cong Chinh","Nguyen Manh Cuong","Tran Thi Dung","Nguyen Thanh Dat","Nguyen Phuc Dien","Nguyen Trung Duc","Nguyen Le Gia Han","Nguyen Phuong Hien","Nguyen Hoang Gia Huynh","Duong Gia Hung","Dinh Van Hung","Le Dinh Khoi","Nguyen Thi Ngoc Lan","Huynh Dang Khanh Linh","Pham Vu Thuy Linh","Nguyen Bui Yen Linh","Dang Hoang Long","Nguyen Khanh Ly","Tran Hoang Minh","Tran Nu Nguyet Nga","Tran Nhu Ngoc","Le Thi Nhu Ngoc","Tran Nu Bao Ngoc","Tran Hoang Nguyen","Nguyen Thao Nguyen","Phan Duy Nguyen","Nguyen Thi Thanh Nhan","Bui Thien Nhan","Nguyen Ngoc Uyen Nhi","Vu Nguyen Tue Nhi","Nguyen Hoang Tam Nhu","Le Kim Phat","Nguyen Ba Phi","Dinh Xuan Hoang Phuc","Ta Pham Minh Phuc","Tran Huu Quang","Nguyen Tien Sang","Tran Minh Thong","Vu Le Phuong Thuy","Vo Bao Thuy","Nguyen Anh Thu","Le Trinh Anh Thu","Pham Anh Thu","Nguyen Thuy Tien","Nguyen Phuong Uyen","Vu Thi Ha Vy"],I6=()=>{const[n,e]=Nt.useState([]),[t,i]=Nt.useState(!0);Nt.useEffect(()=>{(async()=>{i(!0);try{const c=await C6(),h=new Map(c.map(p=>[p.name,p.stats])),f=l_.map(p=>{const b=h.get(p);if(b){const S=b.speakingScore.length>0?b.speakingScore.reduce((D,O)=>D+O,0)/b.speakingScore.length:null,x=b.writingScore.length>0?b.writingScore.reduce((D,O)=>D+O,0)/b.writingScore.length:null;return{name:p,speakingAvg:S,writingAvg:x,lessonsCompleted:b.lessonsCompleted,lastPractice:b.lastPractice}}return{name:p,speakingAvg:null,writingAvg:null,lessonsCompleted:0,lastPractice:null}}).sort((p,b)=>b.lessonsCompleted-p.lessonsCompleted);e(f)}catch(c){console.error("Failed to fetch teacher data:",c)}finally{i(!1)}})()},[]);const r=n.filter(l=>l.lessonsCompleted>0),o=n.filter(l=>l.lessonsCompleted===0);return t?T.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[T.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-400 mb-4",children:T.jsx("i",{className:"fas fa-spinner fa-spin text-3xl"})}),T.jsx("p",{className:"text-slate-400 font-bold text-lg tracking-wide uppercase",children:"Syncing class data..."})]}):T.jsxs("div",{className:"space-y-8 animate-fade-in",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[T.jsxs(Yi,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white !border-0 relative overflow-hidden group",children:[T.jsx("div",{className:"absolute -right-6 -bottom-6 text-white/10 text-9xl",children:T.jsx("i",{className:"fas fa-users"})}),T.jsxs("div",{className:"flex flex-col relative z-10",children:[T.jsx("span",{className:"text-blue-100 font-medium text-lg",children:"Total Students"}),T.jsx("span",{className:"text-5xl font-extrabold mt-2",children:l_.length}),T.jsx("span",{className:"text-blue-100 text-sm mt-1",children:"Registered in system"})]})]}),T.jsxs(Yi,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white !border-0 relative overflow-hidden group",children:[T.jsx("div",{className:"absolute -right-6 -bottom-6 text-white/10 text-9xl",children:T.jsx("i",{className:"fas fa-chart-line"})}),T.jsxs("div",{className:"flex flex-col relative z-10",children:[T.jsx("span",{className:"text-green-100 font-medium text-lg",children:"Active Students"}),T.jsx("span",{className:"text-5xl font-extrabold mt-2",children:r.length}),T.jsx("span",{className:"text-green-100 text-sm mt-1",children:"Practiced at least once"})]})]}),T.jsxs(Yi,{className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white !border-0 relative overflow-hidden group",children:[T.jsx("div",{className:"absolute -right-6 -bottom-6 text-white/10 text-9xl",children:T.jsx("i",{className:"fas fa-graduation-cap"})}),T.jsxs("div",{className:"flex flex-col relative z-10",children:[T.jsx("span",{className:"text-purple-100 font-medium text-lg",children:"Total Lessons"}),T.jsx("span",{className:"text-5xl font-extrabold mt-2",children:n.reduce((l,c)=>l+c.lessonsCompleted,0)}),T.jsx("span",{className:"text-purple-100 text-sm mt-1",children:"Completed across class"})]})]})]}),T.jsx(Yi,{title:"Student Performance Overview",className:"bg-white/5 border-white/10 backdrop-blur-xl shadow-2xl overflow-hidden",children:T.jsx("div",{className:"overflow-x-auto custom-scrollbar -mx-8 -mb-8",children:T.jsxs("table",{className:"w-full text-left border-collapse",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"bg-white/5 border-b border-white/10",children:[T.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Student Name"}),T.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Lessons"}),T.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Avg Speaking"}),T.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Avg Writing"}),T.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Last Active"})]})}),T.jsxs("tbody",{className:"divide-y divide-white/5",children:[r.map((l,c)=>T.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[T.jsx("td",{className:"px-8 py-5",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 text-blue-400 flex items-center justify-center font-bold",children:l.name.charAt(0)}),T.jsx("span",{className:"font-bold text-white",children:l.name})]})}),T.jsx("td",{className:"px-8 py-5",children:T.jsx("span",{className:"px-3 py-1 bg-white/5 rounded-full text-blue-400 font-bold border border-white/10",children:l.lessonsCompleted})}),T.jsx("td",{className:"px-8 py-5",children:T.jsx("span",{className:`font-bold text-lg ${l.speakingAvg&&l.speakingAvg>=7?"text-green-400":"text-slate-300"}`,children:l.speakingAvg?l.speakingAvg.toFixed(1):"-"})}),T.jsx("td",{className:"px-8 py-5",children:T.jsx("span",{className:`font-bold text-lg ${l.writingAvg&&l.writingAvg>=7?"text-green-400":"text-slate-300"}`,children:l.writingAvg?l.writingAvg.toFixed(1):"-"})}),T.jsx("td",{className:"px-8 py-5 text-slate-400 text-sm font-medium",children:l.lastPractice?new Date(l.lastPractice).toLocaleDateString():"Never"})]},c)),o.length>0&&T.jsx("tr",{className:"bg-white/5",children:T.jsxs("td",{colSpan:5,className:"px-8 py-4 text-sm font-bold text-slate-500 uppercase tracking-widest text-center",children:["Students with no data yet (",o.length,")"]})}),o.map((l,c)=>T.jsxs("tr",{className:"hover:bg-white/5 transition-colors border-b border-white/5 last:border-0",children:[T.jsx("td",{className:"px-8 py-4",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 text-slate-300 flex items-center justify-center font-bold text-xs border border-white/10",children:l.name.charAt(0)}),T.jsx("span",{className:"font-semibold text-white/90",children:l.name})]})}),T.jsxs("td",{colSpan:4,className:"px-8 py-4 text-slate-400 text-xs font-bold uppercase tracking-widest italic",children:[T.jsx("i",{className:"fas fa-clock-rotate-left mr-2 opacity-50"}),"Pending First Session"]})]},`inactive-${c}`))]})]})})})]})},R6="modulepreload",L6=function(n){return"/"+n},u_={},Zg=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=l(t.map(f=>{if(f=L6(f),f in u_)return;u_[f]=!0;const p=f.endsWith(".css"),b=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${b}`))return;const S=document.createElement("link");if(S.rel=p?"stylesheet":R6,p||(S.as="script"),S.crossOrigin="",S.href=f,h&&S.setAttribute("nonce",h),document.head.appendChild(S),p)return new Promise((x,D)=>{S.addEventListener("load",x),S.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return r.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function ei(n){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(n)}var ba=Uint8Array,xo=Uint16Array,hy=Int32Array,dy=new ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),py=new ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c_=new ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eE=function(n,e){for(var t=new xo(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new hy(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},tE=eE(dy,2),M6=tE.b,e1=tE.r;M6[28]=258,e1[258]=28;var D6=eE(py,0),f_=D6.r,t1=new xo(32768);for(var xi=0;xi<32768;++xi){var pu=(xi&43690)>>1|(xi&21845)<<1;pu=(pu&52428)>>2|(pu&13107)<<2,pu=(pu&61680)>>4|(pu&3855)<<4,t1[xi]=((pu&65280)>>8|(pu&255)<<8)>>1}var kh=(function(n,e,t){for(var i=n.length,r=0,o=new xo(e);r<i;++r)n[r]&&++o[n[r]-1];var l=new xo(e);for(r=1;r<e;++r)l[r]=l[r-1]+o[r-1]<<1;var c;if(t){c=new xo(1<<e);var h=15-e;for(r=0;r<i;++r)if(n[r])for(var f=r<<4|n[r],p=e-n[r],b=l[n[r]-1]++<<p,S=b|(1<<p)-1;b<=S;++b)c[t1[b]>>h]=f}else for(c=new xo(i),r=0;r<i;++r)n[r]&&(c[r]=t1[l[n[r]-1]++]>>15-n[r]);return c}),sc=new ba(288);for(var xi=0;xi<144;++xi)sc[xi]=8;for(var xi=144;xi<256;++xi)sc[xi]=9;for(var xi=256;xi<280;++xi)sc[xi]=7;for(var xi=280;xi<288;++xi)sc[xi]=8;var $p=new ba(32);for(var xi=0;xi<32;++xi)$p[xi]=5;var P6=kh(sc,9,0),k6=kh($p,5,0),nE=function(n){return(n+7)/8|0},U6=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ba(n.subarray(e,t))},Nl=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},bh=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},e0=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,o=t.slice();if(!r)return{t:rE,l:0};if(r==1){var l=new ba(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(ye,de){return ye.f-de.f}),t.push({s:-1,f:25001});var c=t[0],h=t[1],f=0,p=1,b=2;for(t[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=r-1;)c=t[t[f].f<t[b].f?f++:b++],h=t[f!=p&&t[f].f<t[b].f?f++:b++],t[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var S=o[0].s,i=1;i<r;++i)o[i].s>S&&(S=o[i].s);var x=new xo(S+1),D=n1(t[p-1],x,0);if(D>e){var i=0,O=0,B=D-e,q=1<<B;for(o.sort(function(de,G){return x[G.s]-x[de.s]||de.f-G.f});i<r;++i){var X=o[i].s;if(x[X]>e)O+=q-(1<<D-x[X]),x[X]=e;else break}for(O>>=B;O>0;){var Z=o[i].s;x[Z]<e?O-=1<<e-x[Z]++-1:++i}for(;i>=0&&O;--i){var W=o[i].s;x[W]==e&&(--x[W],++O)}D=e}return{t:new ba(x),l:D}},n1=function(n,e,t){return n.s==-1?Math.max(n1(n.l,e,t+1),n1(n.r,e,t+1)):e[n.s]=t},h_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new xo(++e),i=0,r=n[0],o=1,l=function(h){t[i++]=h},c=1;c<=e;++c)if(n[c]==r&&c!=e)++o;else{if(!r&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(r),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(r);o=1,r=n[c]}return{c:t.subarray(0,i),n:e}},wh=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},iE=function(n,e,t){var i=t.length,r=nE(e+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var o=0;o<i;++o)n[r+o+4]=t[o];return(r+4+i)*8},d_=function(n,e,t,i,r,o,l,c,h,f,p){Nl(e,p++,t),++r[256];for(var b=e0(r,15),S=b.t,x=b.l,D=e0(o,15),O=D.t,B=D.l,q=h_(S),X=q.c,Z=q.n,W=h_(O),ye=W.c,de=W.n,G=new xo(19),V=0;V<X.length;++V)++G[X[V]&31];for(var V=0;V<ye.length;++V)++G[ye[V]&31];for(var L=e0(G,7),j=L.t,I=L.l,k=19;k>4&&!j[c_[k-1]];--k);var F=f+5<<3,ce=wh(r,sc)+wh(o,$p)+l,Te=wh(r,S)+wh(o,O)+l+14+3*k+wh(G,j)+2*G[16]+3*G[17]+7*G[18];if(h>=0&&F<=ce&&F<=Te)return iE(e,p,n.subarray(h,h+f));var le,ue,ve,we;if(Nl(e,p,1+(Te<ce)),p+=2,Te<ce){le=kh(S,x,0),ue=S,ve=kh(O,B,0),we=O;var We=kh(j,I,0);Nl(e,p,Z-257),Nl(e,p+5,de-1),Nl(e,p+10,k-4),p+=14;for(var V=0;V<k;++V)Nl(e,p+3*V,j[c_[V]]);p+=3*k;for(var ne=[X,ye],U=0;U<2;++U)for(var J=ne[U],V=0;V<J.length;++V){var ie=J[V]&31;Nl(e,p,We[ie]),p+=j[ie],ie>15&&(Nl(e,p,J[V]>>5&127),p+=J[V]>>12)}}else le=P6,ue=sc,ve=k6,we=$p;for(var V=0;V<c;++V){var fe=i[V];if(fe>255){var ie=fe>>18&31;bh(e,p,le[ie+257]),p+=ue[ie+257],ie>7&&(Nl(e,p,fe>>23&31),p+=dy[ie]);var me=fe&31;bh(e,p,ve[me]),p+=we[me],me>3&&(bh(e,p,fe>>5&8191),p+=py[me])}else bh(e,p,le[fe]),p+=ue[fe]}return bh(e,p,le[256]),p+ue[256]},O6=new hy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rE=new ba(0),F6=function(n,e,t,i,r,o){var l=o.z||n.length,c=new ba(i+l+5*(1+Math.ceil(l/7e3))+r),h=c.subarray(i,c.length-r),f=o.l,p=(o.r||0)&7;if(e){p&&(h[0]=o.r>>3);for(var b=O6[e-1],S=b>>13,x=b&8191,D=(1<<t)-1,O=o.p||new xo(32768),B=o.h||new xo(D+1),q=Math.ceil(t/3),X=2*q,Z=function(pt){return(n[pt]^n[pt+1]<<q^n[pt+2]<<X)&D},W=new hy(25e3),ye=new xo(288),de=new xo(32),G=0,V=0,L=o.i||0,j=0,I=o.w||0,k=0;L+2<l;++L){var F=Z(L),ce=L&32767,Te=B[F];if(O[ce]=Te,B[F]=ce,I<=L){var le=l-L;if((G>7e3||j>24576)&&(le>423||!f)){p=d_(n,h,0,W,ye,de,V,j,k,L-k,p),j=G=V=0,k=L;for(var ue=0;ue<286;++ue)ye[ue]=0;for(var ue=0;ue<30;++ue)de[ue]=0}var ve=2,we=0,We=x,ne=ce-Te&32767;if(le>2&&F==Z(L-ne))for(var U=Math.min(S,le)-1,J=Math.min(32767,L),ie=Math.min(258,le);ne<=J&&--We&&ce!=Te;){if(n[L+ve]==n[L+ve-ne]){for(var fe=0;fe<ie&&n[L+fe]==n[L+fe-ne];++fe);if(fe>ve){if(ve=fe,we=ne,fe>U)break;for(var me=Math.min(ne,fe-2),Ee=0,ue=0;ue<me;++ue){var Pe=L-ne+ue&32767,Me=O[Pe],$e=Pe-Me&32767;$e>Ee&&(Ee=$e,Te=Pe)}}}ce=Te,Te=O[ce],ne+=ce-Te&32767}if(we){W[j++]=268435456|e1[ve]<<18|f_[we];var it=e1[ve]&31,lt=f_[we]&31;V+=dy[it]+py[lt],++ye[257+it],++de[lt],I=L+ve,++G}else W[j++]=n[L],++ye[n[L]]}}for(L=Math.max(L,I);L<l;++L)W[j++]=n[L],++ye[n[L]];p=d_(n,h,f,W,ye,de,V,j,k,L-k,p),f||(o.r=p&7|h[p/8|0]<<3,p-=7,o.h=B,o.p=O,o.i=L,o.w=I)}else{for(var L=o.w||0;L<l+f;L+=65535){var ut=L+65535;ut>=l&&(h[p/8|0]=f,ut=l),p=iE(h,p+1,n.subarray(L,ut))}o.i=l}return U6(c,0,i+nE(p)+r)},sE=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,o=t.length|0,l=0;l!=o;){for(var c=Math.min(l+2655,o);l<c;++l)r+=i+=t[l];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},V6=function(n,e,t,i,r){if(!r&&(r={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new ba(o.length+n.length);l.set(o),l.set(n,o.length),n=l,r.w=o.length}return F6(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,r)},oE=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},B6=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=i<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var r=sE();r.p(e.dictionary),oE(n,2,r.d())}};function i1(n,e){e||(e={});var t=sE();t.p(n);var i=V6(n,e,e.dictionary?6:2,4);return B6(i,e),oE(i,i.length-4,t.d()),i}var q6=typeof TextDecoder<"u"&&new TextDecoder,H6=0;try{q6.decode(rE,{stream:!0}),H6=1}catch{}function z6(n){if(Array.isArray(n))return n}function G6(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,o,l,c=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(i=o.call(t)).done)&&(c.push(i.value),c.length!==e);h=!0);}catch(p){f=!0,r=p}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw r}}return c}}function p_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function j6(n,e){if(n){if(typeof n=="string")return p_(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p_(n,e):void 0}}function $6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m_(n,e){return z6(n)||G6(n,e)||j6(n,e)||$6()}function g_(n,e="utf8"){return new TextDecoder(e).decode(n)}const Y6=new TextEncoder;function K6(n){return Y6.encode(n)}const J6=1024*8,W6=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),t0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class my{constructor(e=J6,t={}){Zn(this,"buffer");Zn(this,"byteLength");Zn(this,"byteOffset");Zn(this,"length");Zn(this,"offset");Zn(this,"lastWrittenByte");Zn(this,"littleEndian");Zn(this,"_data");Zn(this,"_mark");Zn(this,"_marks");let i=!1;typeof e=="number"?e=new ArrayBuffer(e):(i=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,o=e.byteLength-r;let l=r;(ArrayBuffer.isView(e)||e instanceof my)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+r),e=e.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const i=(this.offset+e)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const i=t0[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,o=this.buffer.slice(r,r+i);if(this.littleEndian===W6&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(r,r+i));c.reverse();const h=new t0[t](c.buffer);return this.offset+=i,h.reverse(),h}const l=new t0[t](o);return this.offset+=i,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let i=0;i<e;i++)t+=this.readChar();return t}readUtf8(e=1){return g_(this.readBytes(e))}decodeText(e=1,t="utf8"){return g_(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(K6(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Mf(n){let e=n.length;for(;--e>=0;)n[e]=0}const X6=3,Q6=258,aE=29,Z6=256,eR=Z6+1+aE,lE=30,tR=512,nR=new Array((eR+2)*2);Mf(nR);const iR=new Array(lE*2);Mf(iR);const rR=new Array(tR);Mf(rR);const sR=new Array(Q6-X6+1);Mf(sR);const oR=new Array(aE);Mf(oR);const aR=new Array(lE);Mf(aR);const lR=(n,e,t,i)=>{let r=n&65535|0,o=n>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do r=r+e[i++]|0,o=o+r|0;while(--l);r%=65521,o%=65521}return r|o<<16|0};var r1=lR;const uR=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},cR=new Uint32Array(uR()),fR=(n,e,t,i)=>{const r=cR,o=i+t;n^=-1;for(let l=i;l<o;l++)n=n>>>8^r[(n^e[l])&255];return n^-1};var $a=fR,s1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},uE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hR=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var dR=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const i in t)hR(t,i)&&(n[i]=t[i])}}return n},pR=n=>{let e=0;for(let i=0,r=n.length;i<r;i++)e+=n[i].length;const t=new Uint8Array(e);for(let i=0,r=0,o=n.length;i<o;i++){let l=n[i];t.set(l,r),r+=l.length}return t},cE={assign:dR,flattenChunks:pR};let fE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fE=!1}const $h=new Uint8Array(256);for(let n=0;n<256;n++)$h[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;$h[254]=$h[254]=1;var mR=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,r,o,l=n.length,c=0;for(r=0;r<l;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<l&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,r=0;o<c;r++)t=n.charCodeAt(r),(t&64512)===55296&&r+1<l&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),r++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const gR=(n,e)=>{if(e<65534&&n.subarray&&fE)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(n[i]);return t};var yR=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,r;const o=new Array(t*2);for(r=0,i=0;i<t;){let l=n[i++];if(l<128){o[r++]=l;continue}let c=$h[l];if(c>4){o[r++]=65533,i+=c-1;continue}for(l&=c===2?31:c===3?15:7;c>1&&i<t;)l=l<<6|n[i++]&63,c--;if(c>1){o[r++]=65533;continue}l<65536?o[r++]=l:(l-=65536,o[r++]=55296|l>>10&1023,o[r++]=56320|l&1023)}return gR(o,r)},vR=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+$h[n[t]]>e?t:e},o1={string2buf:mR,buf2string:yR,utf8border:vR};function _R(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var bR=_R;const tp=16209,wR=16191;var xR=function(e,t){let i,r,o,l,c,h,f,p,b,S,x,D,O,B,q,X,Z,W,ye,de,G,V,L,j;const I=e.state;i=e.next_in,L=e.input,r=i+(e.avail_in-5),o=e.next_out,j=e.output,l=o-(t-e.avail_out),c=o+(e.avail_out-257),h=I.dmax,f=I.wsize,p=I.whave,b=I.wnext,S=I.window,x=I.hold,D=I.bits,O=I.lencode,B=I.distcode,q=(1<<I.lenbits)-1,X=(1<<I.distbits)-1;e:do{D<15&&(x+=L[i++]<<D,D+=8,x+=L[i++]<<D,D+=8),Z=O[x&q];t:for(;;){if(W=Z>>>24,x>>>=W,D-=W,W=Z>>>16&255,W===0)j[o++]=Z&65535;else if(W&16){ye=Z&65535,W&=15,W&&(D<W&&(x+=L[i++]<<D,D+=8),ye+=x&(1<<W)-1,x>>>=W,D-=W),D<15&&(x+=L[i++]<<D,D+=8,x+=L[i++]<<D,D+=8),Z=B[x&X];n:for(;;){if(W=Z>>>24,x>>>=W,D-=W,W=Z>>>16&255,W&16){if(de=Z&65535,W&=15,D<W&&(x+=L[i++]<<D,D+=8,D<W&&(x+=L[i++]<<D,D+=8)),de+=x&(1<<W)-1,de>h){e.msg="invalid distance too far back",I.mode=tp;break e}if(x>>>=W,D-=W,W=o-l,de>W){if(W=de-W,W>p&&I.sane){e.msg="invalid distance too far back",I.mode=tp;break e}if(G=0,V=S,b===0){if(G+=f-W,W<ye){ye-=W;do j[o++]=S[G++];while(--W);G=o-de,V=j}}else if(b<W){if(G+=f+b-W,W-=b,W<ye){ye-=W;do j[o++]=S[G++];while(--W);if(G=0,b<ye){W=b,ye-=W;do j[o++]=S[G++];while(--W);G=o-de,V=j}}}else if(G+=b-W,W<ye){ye-=W;do j[o++]=S[G++];while(--W);G=o-de,V=j}for(;ye>2;)j[o++]=V[G++],j[o++]=V[G++],j[o++]=V[G++],ye-=3;ye&&(j[o++]=V[G++],ye>1&&(j[o++]=V[G++]))}else{G=o-de;do j[o++]=j[G++],j[o++]=j[G++],j[o++]=j[G++],ye-=3;while(ye>2);ye&&(j[o++]=j[G++],ye>1&&(j[o++]=j[G++]))}}else if((W&64)===0){Z=B[(Z&65535)+(x&(1<<W)-1)];continue n}else{e.msg="invalid distance code",I.mode=tp;break e}break}}else if((W&64)===0){Z=O[(Z&65535)+(x&(1<<W)-1)];continue t}else if(W&32){I.mode=wR;break e}else{e.msg="invalid literal/length code",I.mode=tp;break e}break}}while(i<r&&o<c);ye=D>>3,i-=ye,D-=ye<<3,x&=(1<<D)-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=o<c?257+(c-o):257-(o-c),I.hold=x,I.bits=D};const Wc=15,y_=852,v_=592,__=0,n0=1,b_=2,SR=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ER=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),AR=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),TR=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),NR=(n,e,t,i,r,o,l,c)=>{const h=c.bits;let f=0,p=0,b=0,S=0,x=0,D=0,O=0,B=0,q=0,X=0,Z,W,ye,de,G,V=null,L;const j=new Uint16Array(Wc+1),I=new Uint16Array(Wc+1);let k=null,F,ce,Te;for(f=0;f<=Wc;f++)j[f]=0;for(p=0;p<i;p++)j[e[t+p]]++;for(x=h,S=Wc;S>=1&&j[S]===0;S--);if(x>S&&(x=S),S===0)return r[o++]=1<<24|64<<16|0,r[o++]=1<<24|64<<16|0,c.bits=1,0;for(b=1;b<S&&j[b]===0;b++);for(x<b&&(x=b),B=1,f=1;f<=Wc;f++)if(B<<=1,B-=j[f],B<0)return-1;if(B>0&&(n===__||S!==1))return-1;for(I[1]=0,f=1;f<Wc;f++)I[f+1]=I[f]+j[f];for(p=0;p<i;p++)e[t+p]!==0&&(l[I[e[t+p]]++]=p);if(n===__?(V=k=l,L=20):n===n0?(V=SR,k=ER,L=257):(V=AR,k=TR,L=0),X=0,p=0,f=b,G=o,D=x,O=0,ye=-1,q=1<<x,de=q-1,n===n0&&q>y_||n===b_&&q>v_)return 1;for(;;){F=f-O,l[p]+1<L?(ce=0,Te=l[p]):l[p]>=L?(ce=k[l[p]-L],Te=V[l[p]-L]):(ce=96,Te=0),Z=1<<f-O,W=1<<D,b=W;do W-=Z,r[G+(X>>O)+W]=F<<24|ce<<16|Te|0;while(W!==0);for(Z=1<<f-1;X&Z;)Z>>=1;if(Z!==0?(X&=Z-1,X+=Z):X=0,p++,--j[f]===0){if(f===S)break;f=e[t+l[p]]}if(f>x&&(X&de)!==ye){for(O===0&&(O=x),G+=b,D=f-O,B=1<<D;D+O<S&&(B-=j[D+O],!(B<=0));)D++,B<<=1;if(q+=1<<D,n===n0&&q>y_||n===b_&&q>v_)return 1;ye=X&de,r[ye]=x<<24|D<<16|G-o|0}}return X!==0&&(r[G+X]=f-O<<24|64<<16|0),c.bits=x,0};var Uh=NR;const CR=0,hE=1,dE=2,{Z_FINISH:w_,Z_BLOCK:IR,Z_TREES:np,Z_OK:oc,Z_STREAM_END:RR,Z_NEED_DICT:LR,Z_STREAM_ERROR:jo,Z_DATA_ERROR:pE,Z_MEM_ERROR:mE,Z_BUF_ERROR:MR,Z_DEFLATED:x_}=uE,ym=16180,S_=16181,E_=16182,A_=16183,T_=16184,N_=16185,C_=16186,I_=16187,R_=16188,L_=16189,Yp=16190,Cl=16191,i0=16192,M_=16193,r0=16194,D_=16195,P_=16196,k_=16197,U_=16198,ip=16199,rp=16200,O_=16201,F_=16202,V_=16203,B_=16204,q_=16205,s0=16206,H_=16207,z_=16208,Ii=16209,gE=16210,yE=16211,DR=852,PR=592,kR=15,UR=kR,G_=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function OR(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dc=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<ym||e.mode>yE?1:0},vE=n=>{if(dc(n))return jo;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=ym,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(DR),e.distcode=e.distdyn=new Int32Array(PR),e.sane=1,e.back=-1,oc},_E=n=>{if(dc(n))return jo;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,vE(n)},bE=(n,e)=>{let t;if(dc(n))return jo;const i=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?jo:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,_E(n))},wE=(n,e)=>{if(!n)return jo;const t=new OR;n.state=t,t.strm=n,t.window=null,t.mode=ym;const i=bE(n,e);return i!==oc&&(n.state=null),i},FR=n=>wE(n,UR);let j_=!0,o0,a0;const VR=n=>{if(j_){o0=new Int32Array(512),a0=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Uh(hE,n.lens,0,288,o0,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Uh(dE,n.lens,0,32,a0,0,n.work,{bits:5}),j_=!1}n.lencode=o0,n.lenbits=9,n.distcode=a0,n.distbits=5},xE=(n,e,t,i)=>{let r;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(e.subarray(t-i,t-i+r),o.wnext),i-=r,i?(o.window.set(e.subarray(t-i,t),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0},BR=(n,e)=>{let t,i,r,o,l,c,h,f,p,b,S,x,D,O,B=0,q,X,Z,W,ye,de,G,V;const L=new Uint8Array(4);let j,I;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dc(n)||!n.output||!n.input&&n.avail_in!==0)return jo;t=n.state,t.mode===Cl&&(t.mode=i0),l=n.next_out,r=n.output,h=n.avail_out,o=n.next_in,i=n.input,c=n.avail_in,f=t.hold,p=t.bits,b=c,S=h,V=oc;e:for(;;)switch(t.mode){case ym:if(t.wrap===0){t.mode=i0;break}for(;p<16;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,L[0]=f&255,L[1]=f>>>8&255,t.check=$a(t.check,L,2,0),f=0,p=0,t.mode=S_;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Ii;break}if((f&15)!==x_){n.msg="unknown compression method",t.mode=Ii;break}if(f>>>=4,p-=4,G=(f&15)+8,t.wbits===0&&(t.wbits=G),G>15||G>t.wbits){n.msg="invalid window size",t.mode=Ii;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?L_:Cl,f=0,p=0;break;case S_:for(;p<16;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==x_){n.msg="unknown compression method",t.mode=Ii;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ii;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(L[0]=f&255,L[1]=f>>>8&255,t.check=$a(t.check,L,2,0)),f=0,p=0,t.mode=E_;case E_:for(;p<32;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(L[0]=f&255,L[1]=f>>>8&255,L[2]=f>>>16&255,L[3]=f>>>24&255,t.check=$a(t.check,L,4,0)),f=0,p=0,t.mode=A_;case A_:for(;p<16;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(L[0]=f&255,L[1]=f>>>8&255,t.check=$a(t.check,L,2,0)),f=0,p=0,t.mode=T_;case T_:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(L[0]=f&255,L[1]=f>>>8&255,t.check=$a(t.check,L,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=N_;case N_:if(t.flags&1024&&(x=t.length,x>c&&(x=c),x&&(t.head&&(G=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(o,o+x),G)),t.flags&512&&t.wrap&4&&(t.check=$a(t.check,i,x,o)),c-=x,o+=x,t.length-=x),t.length))break e;t.length=0,t.mode=C_;case C_:if(t.flags&2048){if(c===0)break e;x=0;do G=i[o+x++],t.head&&G&&t.length<65536&&(t.head.name+=String.fromCharCode(G));while(G&&x<c);if(t.flags&512&&t.wrap&4&&(t.check=$a(t.check,i,x,o)),c-=x,o+=x,G)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=I_;case I_:if(t.flags&4096){if(c===0)break e;x=0;do G=i[o+x++],t.head&&G&&t.length<65536&&(t.head.comment+=String.fromCharCode(G));while(G&&x<c);if(t.flags&512&&t.wrap&4&&(t.check=$a(t.check,i,x,o)),c-=x,o+=x,G)break e}else t.head&&(t.head.comment=null);t.mode=R_;case R_:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ii;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Cl;break;case L_:for(;p<32;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}n.adler=t.check=G_(f),f=0,p=0,t.mode=Yp;case Yp:if(t.havedict===0)return n.next_out=l,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,LR;n.adler=t.check=1,t.mode=Cl;case Cl:if(e===IR||e===np)break e;case i0:if(t.last){f>>>=p&7,p-=p&7,t.mode=s0;break}for(;p<3;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=M_;break;case 1:if(VR(t),t.mode=ip,e===np){f>>>=2,p-=2;break e}break;case 2:t.mode=P_;break;case 3:n.msg="invalid block type",t.mode=Ii}f>>>=2,p-=2;break;case M_:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ii;break}if(t.length=f&65535,f=0,p=0,t.mode=r0,e===np)break e;case r0:t.mode=D_;case D_:if(x=t.length,x){if(x>c&&(x=c),x>h&&(x=h),x===0)break e;r.set(i.subarray(o,o+x),l),c-=x,o+=x,h-=x,l+=x,t.length-=x;break}t.mode=Cl;break;case P_:for(;p<14;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ii;break}t.have=0,t.mode=k_;case k_:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.lens[k[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[k[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,j={bits:t.lenbits},V=Uh(CR,t.lens,0,19,t.lencode,0,t.work,j),t.lenbits=j.bits,V){n.msg="invalid code lengths set",t.mode=Ii;break}t.have=0,t.mode=U_;case U_:for(;t.have<t.nlen+t.ndist;){for(;B=t.lencode[f&(1<<t.lenbits)-1],q=B>>>24,X=B>>>16&255,Z=B&65535,!(q<=p);){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(Z<16)f>>>=q,p-=q,t.lens[t.have++]=Z;else{if(Z===16){for(I=q+2;p<I;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(f>>>=q,p-=q,t.have===0){n.msg="invalid bit length repeat",t.mode=Ii;break}G=t.lens[t.have-1],x=3+(f&3),f>>>=2,p-=2}else if(Z===17){for(I=q+3;p<I;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}f>>>=q,p-=q,G=0,x=3+(f&7),f>>>=3,p-=3}else{for(I=q+7;p<I;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}f>>>=q,p-=q,G=0,x=11+(f&127),f>>>=7,p-=7}if(t.have+x>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ii;break}for(;x--;)t.lens[t.have++]=G}}if(t.mode===Ii)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ii;break}if(t.lenbits=9,j={bits:t.lenbits},V=Uh(hE,t.lens,0,t.nlen,t.lencode,0,t.work,j),t.lenbits=j.bits,V){n.msg="invalid literal/lengths set",t.mode=Ii;break}if(t.distbits=6,t.distcode=t.distdyn,j={bits:t.distbits},V=Uh(dE,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,j),t.distbits=j.bits,V){n.msg="invalid distances set",t.mode=Ii;break}if(t.mode=ip,e===np)break e;case ip:t.mode=rp;case rp:if(c>=6&&h>=258){n.next_out=l,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,xR(n,S),l=n.next_out,r=n.output,h=n.avail_out,o=n.next_in,i=n.input,c=n.avail_in,f=t.hold,p=t.bits,t.mode===Cl&&(t.back=-1);break}for(t.back=0;B=t.lencode[f&(1<<t.lenbits)-1],q=B>>>24,X=B>>>16&255,Z=B&65535,!(q<=p);){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(X&&(X&240)===0){for(W=q,ye=X,de=Z;B=t.lencode[de+((f&(1<<W+ye)-1)>>W)],q=B>>>24,X=B>>>16&255,Z=B&65535,!(W+q<=p);){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}f>>>=W,p-=W,t.back+=W}if(f>>>=q,p-=q,t.back+=q,t.length=Z,X===0){t.mode=q_;break}if(X&32){t.back=-1,t.mode=Cl;break}if(X&64){n.msg="invalid literal/length code",t.mode=Ii;break}t.extra=X&15,t.mode=O_;case O_:if(t.extra){for(I=t.extra;p<I;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=F_;case F_:for(;B=t.distcode[f&(1<<t.distbits)-1],q=B>>>24,X=B>>>16&255,Z=B&65535,!(q<=p);){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if((X&240)===0){for(W=q,ye=X,de=Z;B=t.distcode[de+((f&(1<<W+ye)-1)>>W)],q=B>>>24,X=B>>>16&255,Z=B&65535,!(W+q<=p);){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}f>>>=W,p-=W,t.back+=W}if(f>>>=q,p-=q,t.back+=q,X&64){n.msg="invalid distance code",t.mode=Ii;break}t.offset=Z,t.extra=X&15,t.mode=V_;case V_:if(t.extra){for(I=t.extra;p<I;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ii;break}t.mode=B_;case B_:if(h===0)break e;if(x=S-h,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ii;break}x>t.wnext?(x-=t.wnext,D=t.wsize-x):D=t.wnext-x,x>t.length&&(x=t.length),O=t.window}else O=r,D=l-t.offset,x=t.length;x>h&&(x=h),h-=x,t.length-=x;do r[l++]=O[D++];while(--x);t.length===0&&(t.mode=rp);break;case q_:if(h===0)break e;r[l++]=t.length,h--,t.mode=rp;break;case s0:if(t.wrap){for(;p<32;){if(c===0)break e;c--,f|=i[o++]<<p,p+=8}if(S-=h,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?$a(t.check,r,S,l-S):r1(t.check,r,S,l-S)),S=h,t.wrap&4&&(t.flags?f:G_(f))!==t.check){n.msg="incorrect data check",t.mode=Ii;break}f=0,p=0}t.mode=H_;case H_:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,f+=i[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ii;break}f=0,p=0}t.mode=z_;case z_:V=RR;break e;case Ii:V=pE;break e;case gE:return mE;case yE:default:return jo}return n.next_out=l,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,(t.wsize||S!==n.avail_out&&t.mode<Ii&&(t.mode<s0||e!==w_))&&xE(n,n.output,n.next_out,S-n.avail_out),b-=n.avail_in,S-=n.avail_out,n.total_in+=b,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?$a(t.check,r,S,n.next_out-S):r1(t.check,r,S,n.next_out-S)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Cl?128:0)+(t.mode===ip||t.mode===r0?256:0),(b===0&&S===0||e===w_)&&V===oc&&(V=MR),V},qR=n=>{if(dc(n))return jo;let e=n.state;return e.window&&(e.window=null),n.state=null,oc},HR=(n,e)=>{if(dc(n))return jo;const t=n.state;return(t.wrap&2)===0?jo:(t.head=e,e.done=!1,oc)},zR=(n,e)=>{const t=e.length;let i,r,o;return dc(n)||(i=n.state,i.wrap!==0&&i.mode!==Yp)?jo:i.mode===Yp&&(r=1,r=r1(r,e,t,0),r!==i.check)?pE:(o=xE(n,e,t,t),o?(i.mode=gE,mE):(i.havedict=1,oc))};var GR=_E,jR=bE,$R=vE,YR=FR,KR=wE,JR=BR,WR=qR,XR=HR,QR=zR,ZR="pako inflate (from Nodeca project)",Rl={inflateReset:GR,inflateReset2:jR,inflateResetKeep:$R,inflateInit:YR,inflateInit2:KR,inflate:JR,inflateEnd:WR,inflateGetHeader:XR,inflateSetDictionary:QR,inflateInfo:ZR};function eL(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var tL=eL;const SE=Object.prototype.toString,{Z_NO_FLUSH:nL,Z_FINISH:iL,Z_OK:Yh,Z_STREAM_END:l0,Z_NEED_DICT:u0,Z_STREAM_ERROR:rL,Z_DATA_ERROR:$_,Z_MEM_ERROR:sL}=uE;function td(n){this.options=cE.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bR,this.strm.avail_out=0;let t=Rl.inflateInit2(this.strm,e.windowBits);if(t!==Yh)throw new Error(s1[t]);if(this.header=new tL,Rl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=o1.string2buf(e.dictionary):SE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Rl.inflateSetDictionary(this.strm,e.dictionary),t!==Yh)))throw new Error(s1[t])}td.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,l,c;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?iL:nL,SE.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),o=Rl.inflate(t,l),o===u0&&r&&(o=Rl.inflateSetDictionary(t,r),o===Yh?o=Rl.inflate(t,l):o===$_&&(o=u0));t.avail_in>0&&o===l0&&t.state.wrap>0&&n[t.next_in]!==0;)Rl.inflateReset(t),o=Rl.inflate(t,l);switch(o){case rL:case $_:case u0:case sL:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===l0))if(this.options.to==="string"){let h=o1.utf8border(t.output,t.next_out),f=t.next_out-h,p=o1.buf2string(t.output,h);t.next_out=f,t.avail_out=i-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Yh&&c===0)){if(o===l0)return o=Rl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};td.prototype.onData=function(n){this.chunks.push(n)};td.prototype.onEnd=function(n){n===Yh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cE.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function oL(n,e){const t=new td(e);if(t.push(n),t.err)throw t.msg||s1[t.err];return t.result}var aL=td,lL=oL,uL={Inflate:aL,inflate:lL};const{Inflate:cL,inflate:fL}=uL;var Y_=cL,hL=fL;const EE=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;EE[n]=e}const K_=4294967295;function dL(n,e,t){let i=n;for(let r=0;r<t;r++)i=EE[(i^e[r])&255]^i>>>8;return i}function pL(n,e){return(dL(K_,n,e)^K_)>>>0}function J_(n,e,t){const i=n.readUint32(),r=pL(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(r!==i)throw new Error(`CRC mismatch for chunk ${t}. Expected ${i}, found ${r}`)}function AE(n,e,t){for(let i=0;i<t;i++)e[i]=n[i]}function TE(n,e,t,i){let r=0;for(;r<i;r++)e[r]=n[r];for(;r<t;r++)e[r]=n[r]+e[r-i]&255}function NE(n,e,t,i){let r=0;if(t.length===0)for(;r<i;r++)e[r]=n[r];else for(;r<i;r++)e[r]=n[r]+t[r]&255}function CE(n,e,t,i,r){let o=0;if(t.length===0){for(;o<r;o++)e[o]=n[o];for(;o<i;o++)e[o]=n[o]+(e[o-r]>>1)&255}else{for(;o<r;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<i;o++)e[o]=n[o]+(e[o-r]+t[o]>>1)&255}}function IE(n,e,t,i,r){let o=0;if(t.length===0){for(;o<r;o++)e[o]=n[o];for(;o<i;o++)e[o]=n[o]+e[o-r]&255}else{for(;o<r;o++)e[o]=n[o]+t[o]&255;for(;o<i;o++)e[o]=n[o]+mL(e[o-r],t[o],t[o-r])&255}}function mL(n,e,t){const i=n+e-t,r=Math.abs(i-n),o=Math.abs(i-e),l=Math.abs(i-t);return r<=o&&r<=l?n:o<=l?e:t}function gL(n,e,t,i,r,o){switch(n){case 0:AE(e,t,r);break;case 1:TE(e,t,r,o);break;case 2:NE(e,t,i,r);break;case 3:CE(e,t,i,r,o);break;case 4:IE(e,t,i,r,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const yL=new Uint16Array([255]),vL=new Uint8Array(yL.buffer),_L=vL[0]===255;function bL(n){const{data:e,width:t,height:i,channels:r,depth:o}=n,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*r,h=new Uint8Array(i*t*c);let f=0;for(let p=0;p<7;p++){const b=l[p],S=Math.ceil((t-b.x)/b.xStep),x=Math.ceil((i-b.y)/b.yStep);if(S<=0||x<=0)continue;const D=S*c,O=new Uint8Array(D);for(let B=0;B<x;B++){const q=e[f++],X=e.subarray(f,f+D);f+=D;const Z=new Uint8Array(D);gL(q,X,Z,O,D,c),O.set(Z);for(let W=0;W<S;W++){const ye=b.x+W*b.xStep,de=b.y+B*b.yStep;if(!(ye>=t||de>=i))for(let G=0;G<c;G++)h[(de*t+ye)*c+G]=Z[W*c+G]}}}if(o===16){const p=new Uint16Array(h.buffer);if(_L)for(let b=0;b<p.length;b++)p[b]=wL(p[b]);return p}else return h}function wL(n){return(n&255)<<8|n>>8&255}const xL=new Uint16Array([255]),SL=new Uint8Array(xL.buffer),EL=SL[0]===255,AL=new Uint8Array(0);function W_(n){const{data:e,width:t,height:i,channels:r,depth:o}=n,l=Math.ceil(o/8)*r,c=Math.ceil(o/8*r*t),h=new Uint8Array(i*c);let f=AL,p=0,b,S;for(let x=0;x<i;x++){switch(b=e.subarray(p+1,p+1+c),S=h.subarray(x*c,(x+1)*c),e[p]){case 0:AE(b,S,c);break;case 1:TE(b,S,c,l);break;case 2:NE(b,S,f,c);break;case 3:CE(b,S,f,c,l);break;case 4:IE(b,S,f,c,l);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=S,p+=c+1}if(o===16){const x=new Uint16Array(h.buffer);if(EL)for(let D=0;D<x.length;D++)x[D]=TL(x[D]);return x}else return h}function TL(n){return(n&255)<<8|n>>8&255}const bp=Uint8Array.of(137,80,78,71,13,10,26,10);function X_(n){if(!NL(n.readBytes(bp.length)))throw new Error("wrong PNG signature")}function NL(n){if(n.length<bp.length)return!1;for(let e=0;e<bp.length;e++)if(n[e]!==bp[e])return!1;return!0}const CL="tEXt",IL=0,RE=new TextDecoder("latin1");function RL(n){if(ML(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const LL=/^[\u0000-\u00FF]*$/;function ML(n){if(!LL.test(n))throw new Error("invalid latin1 text")}function DL(n,e,t){const i=LE(e);n[i]=PL(e,t-i.length-1)}function LE(n){for(n.mark();n.readByte()!==IL;);const e=n.offset;n.reset();const t=RE.decode(n.readBytes(e-n.offset-1));return n.skip(1),RL(t),t}function PL(n,e){return RE.decode(n.readBytes(e))}const wo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},c0={UNKNOWN:-1,DEFLATE:0},Q_={UNKNOWN:-1,ADAPTIVE:0},f0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},sp={NONE:0,BACKGROUND:1,PREVIOUS:2},h0={SOURCE:0,OVER:1};class kL extends my{constructor(t,i={}){super(t);Zn(this,"_checkCrc");Zn(this,"_inflator");Zn(this,"_png");Zn(this,"_apng");Zn(this,"_end");Zn(this,"_hasPalette");Zn(this,"_palette");Zn(this,"_hasTransparency");Zn(this,"_transparency");Zn(this,"_compressionMethod");Zn(this,"_filterMethod");Zn(this,"_interlaceMethod");Zn(this,"_colorType");Zn(this,"_isAnimated");Zn(this,"_numberOfFrames");Zn(this,"_numberOfPlays");Zn(this,"_frames");Zn(this,"_writingDataChunks");const{checkCrc:r=!1}=i;this._checkCrc=r,this._inflator=new Y_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=c0.UNKNOWN,this._filterMethod=Q_.UNKNOWN,this._interlaceMethod=f0.UNKNOWN,this._colorType=wo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(X_(this);!this._end;){const t=this.readUint32(),i=this.readChars(4);this.decodeChunk(t,i)}return this.decodeImage(),this._png}decodeApng(){for(X_(this);!this._end;){const t=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(t,i)}return this.decodeApngImage(),this._apng}decodeChunk(t,i){const r=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case CL:DL(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?J_(this,t+4,i):this.skip(4)}decodeApngChunk(t,i){const r=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,i),this.offset=r+t;break}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?J_(this,t+4,i):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=UL(this.readUint8());const i=this.readUint8();this._colorType=i;let r;switch(i){case wo.GREYSCALE:r=1;break;case wo.TRUECOLOUR:r=3;break;case wo.INDEXED_COLOUR:r=1;break;case wo.GREYSCALE_ALPHA:r=2;break;case wo.TRUECOLOUR_ALPHA:r=4;break;case wo.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==c0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const i=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let o=0;o<i;o++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const i=t,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let i=t,r=this.offset+this.byteOffset;if(r+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case wo.GREYSCALE:case wo.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let i=0;i<t/2;i++)this._transparency[i]=this.readUint16();break}case wo.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let i=0;for(;i<t;i++){const r=this.readByte();this._palette[i].push(r)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case wo.UNKNOWN:case wo.GREYSCALE_ALPHA:case wo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const i=LE(this),r=this.readUint8();if(r!==c0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const o=this.readBytes(t-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:hL(o)}}decodepHYs(){const t=this.readUint32(),i=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:i,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const i={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(t);if(r){if(r.data=W_({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)i.data=r.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(r,o,i),this.addFrameDataToCanvas(i,r)}this._apng.frames.push(i)}}return this._apng}disposeFrame(t,i,r){switch(t.disposeOp){case sp.NONE:break;case sp.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const c=(o*t.width+l)*this._png.channels;for(let h=0;h<this._png.channels;h++)r.data[c+h]=0}break;case sp.PREVIOUS:r.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,i){const r=1<<this._png.depth,o=(l,c)=>{const h=((l+i.yOffset)*this._png.width+i.xOffset+c)*this._png.channels,f=(l*i.width+c)*this._png.channels;return{index:h,frameIndex:f}};switch(i.blendOp){case h0.SOURCE:for(let l=0;l<i.height;l++)for(let c=0;c<i.width;c++){const{index:h,frameIndex:f}=o(l,c);for(let p=0;p<this._png.channels;p++)t.data[h+p]=i.data[f+p]}break;case h0.OVER:for(let l=0;l<i.height;l++)for(let c=0;c<i.width;c++){const{index:h,frameIndex:f}=o(l,c);for(let p=0;p<this._png.channels;p++){const b=i.data[f+this._png.channels-1]/r,S=p%(this._png.channels-1)===0?1:i.data[f+p],x=Math.floor(b*S+(1-b)*t.data[h+p]);t.data[h+p]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var i;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((i=this._frames)==null?void 0:i.at(0)).data:this._inflator.result;if(this._filterMethod!==Q_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===f0.NO_INTERLACE)this._png.data=W_({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===f0.ADAM7)this._png.data=bL({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,i=this._frames.at(-1);i?i.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:sp.NONE,blendOp:h0.SOURCE,data:t}),this._inflator=new Y_,this._writingDataChunks=!1}}function UL(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Z_;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Z_||(Z_={}));function OL(n,e){return new kL(n,e).decode()}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function d0(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var pi={log:d0,warn:function(n){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):d0.call(null,arguments))},error:function(n){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):d0(n))}};function p0(n,e,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Ju(i.response,e,t)},i.onerror=function(){pi.error("could not download file")},i.send()}function eb(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function op(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ju=en.saveAs||((typeof window>"u"?"undefined":ei(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var i=en.URL||en.webkitURL,r=document.createElement("a");e=e||n.name||"download",r.download=e,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?eb(r.href)?p0(n,e,t):op(r,r.target="_blank"):op(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){op(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(eb(n))p0(n,e,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){op(i)})}else navigator.msSaveOrOpenBlob((function(r,o){return o===void 0?o={autoBom:!1}:ei(o)!=="object"&&(pi.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(n,t),e)}:function(n,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return p0(n,e,t);var r=n.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&o)&&(typeof FileReader>"u"?"undefined":ei(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=l?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},c.readAsDataURL(n)}else{var h=en.URL||en.webkitURL,f=h.createObjectURL(n);i?i.location=f:location.href=f,i=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ME(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<t.length;i++){var r=t[i].re,o=t[i].process,l=r.exec(n);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var wp=en.atob.bind(en),tb=en.btoa.bind(en);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function m0(n,e){var t=n[0],i=n[1],r=n[2],o=n[3];t=_s(t,i,r,o,e[0],7,-680876936),o=_s(o,t,i,r,e[1],12,-389564586),r=_s(r,o,t,i,e[2],17,606105819),i=_s(i,r,o,t,e[3],22,-1044525330),t=_s(t,i,r,o,e[4],7,-176418897),o=_s(o,t,i,r,e[5],12,1200080426),r=_s(r,o,t,i,e[6],17,-1473231341),i=_s(i,r,o,t,e[7],22,-45705983),t=_s(t,i,r,o,e[8],7,1770035416),o=_s(o,t,i,r,e[9],12,-1958414417),r=_s(r,o,t,i,e[10],17,-42063),i=_s(i,r,o,t,e[11],22,-1990404162),t=_s(t,i,r,o,e[12],7,1804603682),o=_s(o,t,i,r,e[13],12,-40341101),r=_s(r,o,t,i,e[14],17,-1502002290),t=bs(t,i=_s(i,r,o,t,e[15],22,1236535329),r,o,e[1],5,-165796510),o=bs(o,t,i,r,e[6],9,-1069501632),r=bs(r,o,t,i,e[11],14,643717713),i=bs(i,r,o,t,e[0],20,-373897302),t=bs(t,i,r,o,e[5],5,-701558691),o=bs(o,t,i,r,e[10],9,38016083),r=bs(r,o,t,i,e[15],14,-660478335),i=bs(i,r,o,t,e[4],20,-405537848),t=bs(t,i,r,o,e[9],5,568446438),o=bs(o,t,i,r,e[14],9,-1019803690),r=bs(r,o,t,i,e[3],14,-187363961),i=bs(i,r,o,t,e[8],20,1163531501),t=bs(t,i,r,o,e[13],5,-1444681467),o=bs(o,t,i,r,e[2],9,-51403784),r=bs(r,o,t,i,e[7],14,1735328473),t=ws(t,i=bs(i,r,o,t,e[12],20,-1926607734),r,o,e[5],4,-378558),o=ws(o,t,i,r,e[8],11,-2022574463),r=ws(r,o,t,i,e[11],16,1839030562),i=ws(i,r,o,t,e[14],23,-35309556),t=ws(t,i,r,o,e[1],4,-1530992060),o=ws(o,t,i,r,e[4],11,1272893353),r=ws(r,o,t,i,e[7],16,-155497632),i=ws(i,r,o,t,e[10],23,-1094730640),t=ws(t,i,r,o,e[13],4,681279174),o=ws(o,t,i,r,e[0],11,-358537222),r=ws(r,o,t,i,e[3],16,-722521979),i=ws(i,r,o,t,e[6],23,76029189),t=ws(t,i,r,o,e[9],4,-640364487),o=ws(o,t,i,r,e[12],11,-421815835),r=ws(r,o,t,i,e[15],16,530742520),t=xs(t,i=ws(i,r,o,t,e[2],23,-995338651),r,o,e[0],6,-198630844),o=xs(o,t,i,r,e[7],10,1126891415),r=xs(r,o,t,i,e[14],15,-1416354905),i=xs(i,r,o,t,e[5],21,-57434055),t=xs(t,i,r,o,e[12],6,1700485571),o=xs(o,t,i,r,e[3],10,-1894986606),r=xs(r,o,t,i,e[10],15,-1051523),i=xs(i,r,o,t,e[1],21,-2054922799),t=xs(t,i,r,o,e[8],6,1873313359),o=xs(o,t,i,r,e[15],10,-30611744),r=xs(r,o,t,i,e[6],15,-1560198380),i=xs(i,r,o,t,e[13],21,1309151649),t=xs(t,i,r,o,e[4],6,-145523070),o=xs(o,t,i,r,e[11],10,-1120210379),r=xs(r,o,t,i,e[2],15,718787259),i=xs(i,r,o,t,e[9],21,-343485551),n[0]=yu(t,n[0]),n[1]=yu(i,n[1]),n[2]=yu(r,n[2]),n[3]=yu(o,n[3])}function vm(n,e,t,i,r,o){return e=yu(yu(e,n),yu(i,o)),yu(e<<r|e>>>32-r,t)}function _s(n,e,t,i,r,o,l){return vm(e&t|~e&i,n,e,r,o,l)}function bs(n,e,t,i,r,o,l){return vm(e&i|t&~i,n,e,r,o,l)}function ws(n,e,t,i,r,o,l){return vm(e^t^i,n,e,r,o,l)}function xs(n,e,t,i,r,o,l){return vm(t^(e|~i),n,e,r,o,l)}function DE(n){var e,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)m0(i,FL(n.substring(e-64,e)));n=n.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(m0(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,m0(i,r),i}function FL(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var nb="0123456789abcdef".split("");function VL(n){for(var e="",t=0;t<4;t++)e+=nb[n>>8*t+4&15]+nb[n>>8*t&15];return e}function BL(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function a1(n){return DE(n).map(BL).join("")}var qL=(function(n){for(var e=0;e<n.length;e++)n[e]=VL(n[e]);return n.join("")})(DE("hello"))!="5d41402abc4b2a76b9719d911017c592";function yu(n,e){if(qL){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function l1(n,e){var t,i,r,o;if(n!==t){for(var l=(r=n,o=1+(256/n.length|0),new Array(o+1).join(r)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+l.charCodeAt(h))%256,c[h]=c[f],c[f]=p}t=n,i=c}else c=i;var b=e.length,S=0,x=0,D="";for(h=0;h<b;h++)x=(x+(p=c[S=(S+1)%256]))%256,c[S]=c[x],c[x]=p,l=c[(c[S]+c[x])%256],D+=String.fromCharCode(e.charCodeAt(h)^l);return D}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ib={print:4,modify:8,copy:16,"annot-forms":32};function rf(n,e,t,i){this.v=1,this.r=2;var r=192;n.forEach(function(c){if(ib.perm!==void 0)throw new Error("Invalid permission: "+c);r+=ib[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^r)),this.encryptionKey=a1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=l1(this.encryptionKey,this.padding)}function sf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,i=0;i<t;i++){var r=n.charCodeAt(i);e+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):n[i]}return e}function rb(n){if(ei(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,r){if(r=r||!1,typeof t!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[i,!!r],o},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[t]){var l=e[t][o];try{l[0].apply(n,i)}catch(c){en.console&&pi.error("jsPDF PubSub Error",c.message,c)}l[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kp(n){if(!(this instanceof Kp))return new Kp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function PE(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Xu(n,e,t,i,r){if(!(this instanceof Xu))return new Xu(n,e,t,i,r);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,PE.call(this,i,r)}function af(n,e,t,i,r){if(!(this instanceof af))return new af(n,e,t,i,r);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,PE.call(this,i,r)}function Dt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],l=[],c=1,h=16,f="S",p=null;ei(n=n||{})==="object"&&(t=n.orientation,i=n.unit||i,r=n.format||r,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),l=n.filters||(o===!0?["FlateEncode"]:l),i=i||"mm",t=(""+(t||"P")).toLowerCase();var b=n.putOnlyUsedFonts||!1,S={},x={internal:{},__private__:{}};x.__private__.PubSub=rb;var D="1.3",O=x.__private__.getPdfVersion=function(){return D};x.__private__.setPdfVersion=function(A){D=A};var B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return B};var q=x.__private__.getPageFormat=function(A){return B[A]};r=r||"a4";var X="compat",Z="advanced",W=X;function ye(){this.saveGraphicsState(),re(new kt($t,0,0,-$t,0,Is()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),f="n",W=Z}function de(){this.restoreGraphicsState(),f="S",W=X}var G=x.__private__.combineFontStyleAndFontWeight=function(A,H){if(A=="bold"&&H=="normal"||A=="bold"&&H==400||A=="normal"&&H=="italic"||A=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(A=H==400||H==="normal"?A==="italic"?"italic":"normal":H!=700&&H!=="bold"||A!=="normal"?(H==700?"bold":H)+""+A:"bold"),A};x.advancedAPI=function(A){var H=W===X;return H&&ye.call(this),typeof A!="function"||(A(this),H&&de.call(this)),this},x.compatAPI=function(A){var H=W===Z;return H&&de.call(this),typeof A!="function"||(A(this),H&&ye.call(this)),this},x.isAdvancedAPI=function(){return W===Z};var V,L=function(A){if(W!==Z)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=x.roundToPrecision=x.__private__.roundToPrecision=function(A,H){var oe=e||H;if(isNaN(A)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(oe).replace(/0+$/,"")};V=x.hpf=x.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,16)};var I=x.f2=x.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return j(A,2)},k=x.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return j(A,3)},F=x.scale=x.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return W===X?A*$t:W===Z?A:void 0},ce=function(A){return F((function(H){return W===X?Is()-H:W===Z?H:void 0})(A))};x.__private__.setPrecision=x.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var Te,le="00000000000000000000000000000000",ue=x.__private__.getFileId=function(){return le},ve=x.__private__.setFileId=function(A){return le=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(ci=new rf(p.userPermissions,p.userPassword,p.ownerPassword,le)),le};x.setFileId=function(A){return ve(A),this},x.getFileId=function(){return ue()};var we=x.__private__.convertDateToPDFDate=function(A){var H=A.getTimezoneOffset(),oe=H<0?"+":"-",be=Math.floor(Math.abs(H/60)),Ne=Math.abs(H%60),Ye=[oe,ie(be),"'",ie(Ne),"'"].join("");return["D:",A.getFullYear(),ie(A.getMonth()+1),ie(A.getDate()),ie(A.getHours()),ie(A.getMinutes()),ie(A.getSeconds()),Ye].join("")},We=x.__private__.convertPDFDateToDate=function(A){var H=parseInt(A.substr(2,4),10),oe=parseInt(A.substr(6,2),10)-1,be=parseInt(A.substr(8,2),10),Ne=parseInt(A.substr(10,2),10),Ye=parseInt(A.substr(12,2),10),tt=parseInt(A.substr(14,2),10);return new Date(H,oe,be,Ne,Ye,tt,0)},ne=x.__private__.setCreationDate=function(A){var H;if(A===void 0&&(A=new Date),A instanceof Date)H=we(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=A}return Te=H},U=x.__private__.getCreationDate=function(A){var H=Te;return A==="jsDate"&&(H=We(Te)),H};x.setCreationDate=function(A){return ne(A),this},x.getCreationDate=function(A){return U(A)};var J,ie=x.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},fe=x.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},me=0,Ee=[],Pe=[],Me=0,$e=[],it=[],lt=!1,ut=Pe;x.__private__.setCustomOutputDestination=function(A){lt=!0,ut=A};var pt=function(A){lt||(ut=A)};x.__private__.resetCustomOutputDestination=function(){lt=!1,ut=Pe};var re=x.__private__.out=function(A){return A=A.toString(),Me+=A.length+1,ut.push(A),ut},ke=x.__private__.write=function(A){return re(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},st=x.__private__.getArrayBuffer=function(A){for(var H=A.length,oe=new ArrayBuffer(H),be=new Uint8Array(oe);H--;)be[H]=A.charCodeAt(H);return oe},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return he};var _e=n.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(A){return _e=W===Z?A/$t:A,this};var at,qe=x.__private__.getFontSize=x.getFontSize=function(){return W===X?_e:_e*$t},He=n.R2L||!1;x.__private__.setR2L=x.setR2L=function(A){return He=A,this},x.__private__.getR2L=x.getR2L=function(){return He};var pe,Ve=x.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))at=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');at=A}else at=parseInt(A,10)};x.__private__.getZoomMode=function(){return at};var Ct,ft=x.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');pe=A};x.__private__.getPageMode=function(){return pe};var xt=x.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');Ct=A};x.__private__.getLayoutMode=function(){return Ct},x.__private__.setDisplayMode=x.setDisplayMode=function(A,H,oe){return Ve(A),xt(H),ft(oe),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(A){if(Object.keys(Lt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[A]},x.__private__.getDocumentProperties=function(){return Lt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(A){for(var H in Lt)Lt.hasOwnProperty(H)&&A[H]&&(Lt[H]=A[H]);return this},x.__private__.setDocumentProperty=function(A,H){if(Object.keys(Lt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[A]=H};var mt,$t,bt,ti,Wt,Ot={},Yt={},tn=[],Pt={},Mn={},Gt={},jt={},kn=null,Mt=0,It=[],cn=new rb(x),gr=n.hotfixes||[],rr={},Os={},Ki=[],kt=function A(H,oe,be,Ne,Ye,tt){if(!(this instanceof A))return new A(H,oe,be,Ne,Ye,tt);isNaN(H)&&(H=1),isNaN(oe)&&(oe=0),isNaN(be)&&(be=0),isNaN(Ne)&&(Ne=1),isNaN(Ye)&&(Ye=0),isNaN(tt)&&(tt=0),this._matrix=[H,oe,be,Ne,Ye,tt]};Object.defineProperty(kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),kt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(A)},kt.prototype.multiply=function(A){var H=A.sx*this.sx+A.shy*this.shx,oe=A.sx*this.shy+A.shy*this.sy,be=A.shx*this.sx+A.sy*this.shx,Ne=A.shx*this.shy+A.sy*this.sy,Ye=A.tx*this.sx+A.ty*this.shx+this.tx,tt=A.tx*this.shy+A.ty*this.sy+this.ty;return new kt(H,oe,be,Ne,Ye,tt)},kt.prototype.decompose=function(){var A=this.sx,H=this.shy,oe=this.shx,be=this.sy,Ne=this.tx,Ye=this.ty,tt=Math.sqrt(A*A+H*H),vt=(A/=tt)*oe+(H/=tt)*be;oe-=A*vt,be-=H*vt;var Et=Math.sqrt(oe*oe+be*be);return vt/=Et,A*(be/=Et)<H*(oe/=Et)&&(A=-A,H=-H,vt=-vt,tt=-tt),{scale:new kt(tt,0,0,Et,0,0),translate:new kt(1,0,0,1,Ne,Ye),rotate:new kt(A,H,-H,A,0,0),skew:new kt(1,0,vt,1,0,0)}},kt.prototype.toString=function(A){return this.join(" ")},kt.prototype.inversed=function(){var A=this.sx,H=this.shy,oe=this.shx,be=this.sy,Ne=this.tx,Ye=this.ty,tt=1/(A*be-H*oe),vt=be*tt,Et=-H*tt,Bt=-oe*tt,Ut=A*tt;return new kt(vt,Et,Bt,Ut,-vt*Ne-Bt*Ye,-Et*Ne-Ut*Ye)},kt.prototype.applyToPoint=function(A){var H=A.x*this.sx+A.y*this.shx+this.tx,oe=A.x*this.shy+A.y*this.sy+this.ty;return new ar(H,oe)},kt.prototype.applyToRectangle=function(A){var H=this.applyToPoint(A),oe=this.applyToPoint(new ar(A.x+A.w,A.y+A.h));return new Vs(H.x,H.y,oe.x-H.x,oe.y-H.y)},kt.prototype.clone=function(){var A=this.sx,H=this.shy,oe=this.shx,be=this.sy,Ne=this.tx,Ye=this.ty;return new kt(A,H,oe,be,Ne,Ye)},x.Matrix=kt;var oo=x.matrixMult=function(A,H){return H.multiply(A)},Yr=new kt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Yr;var Rr=function(A,H){if(!Mn[A]){var oe=(H instanceof Xu?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);H.id=oe,Mn[A]=oe,Pt[oe]=H,cn.publish("addPattern",H)}};x.ShadingPattern=Xu,x.TilingPattern=af,x.addShadingPattern=function(A,H){return L("addShadingPattern()"),Rr(A,H),this},x.beginTilingPattern=function(A){L("beginTilingPattern()"),Bs(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},x.endTilingPattern=function(A,H){L("endTilingPattern()"),H.stream=it[J].join(`
`),Rr(A,H),cn.publish("endTilingPattern",H),Ki.pop().restore()};var Lr,jn=x.__private__.newObject=function(){var A=ni();return Oi(A,!0),A},ni=x.__private__.newObjectDeferred=function(){return me++,Ee[me]=function(){return Me},me},Oi=function(A,H){return H=typeof H=="boolean"&&H,Ee[A]=Me,H&&re(A+" 0 obj"),A},yr=x.__private__.newAdditionalObject=function(){var A={objId:ni(),content:""};return $e.push(A),A},sr=ni(),Un=ni(),Kn=x.__private__.decodeColorString=function(A){var H=A.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var oe=parseFloat(H[0]);H=[oe,oe,oe,"r"]}for(var be="#",Ne=0;Ne<3;Ne++)be+=("0"+Math.floor(255*parseFloat(H[Ne])).toString(16)).slice(-2);return be},Fi=x.__private__.encodeColorString=function(A){var H;typeof A=="string"&&(A={ch1:A});var oe=A.ch1,be=A.ch2,Ne=A.ch3,Ye=A.ch4,tt=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var vt=new ME(oe);if(vt.ok)oe=vt.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var Et=parseInt(oe.substr(1),16);oe=Et>>16&255,be=Et>>8&255,Ne=255&Et}if(be===void 0||Ye===void 0&&oe===be&&be===Ne)H=typeof oe=="string"?oe+" "+tt[0]:A.precision===2?I(oe/255)+" "+tt[0]:k(oe/255)+" "+tt[0];else if(Ye===void 0||ei(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return["1.","1.","1.",tt[1]].join(" ");H=typeof oe=="string"?[oe,be,Ne,tt[1]].join(" "):A.precision===2?[I(oe/255),I(be/255),I(Ne/255),tt[1]].join(" "):[k(oe/255),k(be/255),k(Ne/255),tt[1]].join(" ")}else H=typeof oe=="string"?[oe,be,Ne,Ye,tt[2]].join(" "):A.precision===2?[I(oe),I(be),I(Ne),I(Ye),tt[2]].join(" "):[k(oe),k(be),k(Ne),k(Ye),tt[2]].join(" ");return H},Mr=x.__private__.getFilters=function(){return l},cs=x.__private__.putStream=function(A){var H=(A=A||{}).data||"",oe=A.filters||Mr(),be=A.alreadyAppliedFilters||[],Ne=A.addLength1||!1,Ye=H.length,tt=A.objectId,vt=function(C){return C};if(p!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(vt=ci.encryptor(tt,0));var Et={};oe===!0&&(oe=["FlateEncode"]);var Bt=A.additionalKeyValues||[],Ut=(Et=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(H,oe):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Et.data.length!==0&&(Bt.push({key:"Length",value:Et.data.length}),Ne===!0&&Bt.push({key:"Length1",value:Ye})),Ut.length!=0)if(Ut.split("/").length-1==1)Bt.push({key:"Filter",value:Ut});else{Bt.push({key:"Filter",value:"["+Ut+"]"});for(var mn=0;mn<Bt.length;mn+=1)if(Bt[mn].key==="DecodeParms"){for(var ii=[],$n=0;$n<Et.reverseChain.split("/").length-1;$n+=1)ii.push("null");ii.push(Bt[mn].value),Bt[mn].value="["+ii.join(" ")+"]"}}re("<<");for(var v=0;v<Bt.length;v++)re("/"+Bt[v].key+" "+Bt[v].value);re(">>"),Et.data.length!==0&&(re("stream"),re(vt(Et.data)),re("endstream"))},Eo=x.__private__.putPage=function(A){var H=A.number,oe=A.data,be=A.objId,Ne=A.contentsObjId;Oi(be,!0),re("<</Type /Page"),re("/Parent "+A.rootDictionaryObjId+" 0 R"),re("/Resources "+A.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(V(A.mediaBox.bottomLeftX))+" "+parseFloat(V(A.mediaBox.bottomLeftY))+" "+V(A.mediaBox.topRightX)+" "+V(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&re("/CropBox ["+V(A.cropBox.bottomLeftX)+" "+V(A.cropBox.bottomLeftY)+" "+V(A.cropBox.topRightX)+" "+V(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&re("/BleedBox ["+V(A.bleedBox.bottomLeftX)+" "+V(A.bleedBox.bottomLeftY)+" "+V(A.bleedBox.topRightX)+" "+V(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&re("/TrimBox ["+V(A.trimBox.bottomLeftX)+" "+V(A.trimBox.bottomLeftY)+" "+V(A.trimBox.topRightX)+" "+V(A.trimBox.topRightY)+"]"),A.artBox!==null&&re("/ArtBox ["+V(A.artBox.bottomLeftX)+" "+V(A.artBox.bottomLeftY)+" "+V(A.artBox.topRightX)+" "+V(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&re("/UserUnit "+A.userUnit),cn.publish("putPage",{objId:be,pageContext:It[H],pageNumber:H,page:oe}),re("/Contents "+Ne+" 0 R"),re(">>"),re("endobj");var Ye=oe.join(`
`);return W===Z&&(Ye+=`
Q`),Oi(Ne,!0),cs({data:Ye,filters:Mr(),objectId:Ne}),re("endobj"),be},As=x.__private__.putPages=function(){var A,H,oe=[];for(A=1;A<=Mt;A++)It[A].objId=ni(),It[A].contentsObjId=ni();for(A=1;A<=Mt;A++)oe.push(Eo({number:A,data:it[A],objId:It[A].objId,contentsObjId:It[A].contentsObjId,mediaBox:It[A].mediaBox,cropBox:It[A].cropBox,bleedBox:It[A].bleedBox,trimBox:It[A].trimBox,artBox:It[A].artBox,userUnit:It[A].userUnit,rootDictionaryObjId:sr,resourceDictionaryObjId:Un}));Oi(sr,!0),re("<</Type /Pages");var be="/Kids [";for(H=0;H<Mt;H++)be+=oe[H]+" 0 R ";re(be+"]"),re("/Count "+Mt),re(">>"),re("endobj"),cn.publish("postPutPages")},Dr=function(A){cn.publish("putFont",{font:A,out:re,newObject:jn,putStream:cs}),A.isAlreadyPutted!==!0&&(A.objectNumber=jn(),re("<<"),re("/Type /Font"),re("/BaseFont /"+sf(A.postScriptName)),re("/Subtype /Type1"),typeof A.encoding=="string"&&re("/Encoding /"+A.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},ao=function(A){A.objectNumber=jn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[V(A.x),V(A.y),V(A.x+A.width),V(A.y+A.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var oe=A.pages[1].join(`
`);cs({data:oe,additionalKeyValues:H,objectId:A.objectNumber}),re("endobj")},Kr=function(A,H){H||(H=21);var oe=jn(),be=(function(tt,vt){var Et,Bt=[],Ut=1/(vt-1);for(Et=0;Et<1;Et+=Ut)Bt.push(Et);if(Bt.push(1),tt[0].offset!=0){var mn={offset:0,color:tt[0].color};tt.unshift(mn)}if(tt[tt.length-1].offset!=1){var ii={offset:1,color:tt[tt.length-1].color};tt.push(ii)}for(var $n="",v=0,C=0;C<Bt.length;C++){for(Et=Bt[C];Et>tt[v+1].offset;)v++;var P=tt[v].offset,ee=(Et-P)/(tt[v+1].offset-P),Ie=tt[v].color,Fe=tt[v+1].color;$n+=fe(Math.round((1-ee)*Ie[0]+ee*Fe[0]).toString(16))+fe(Math.round((1-ee)*Ie[1]+ee*Fe[1]).toString(16))+fe(Math.round((1-ee)*Ie[2]+ee*Fe[2]).toString(16))}return $n.trim()})(A.colors,H),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+H+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),cs({data:be,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),re("endobj"),A.objectNumber=jn(),re("<< /ShadingType "+A.type),re("/ColorSpace /DeviceRGB");var Ye="/Coords ["+V(parseFloat(A.coords[0]))+" "+V(parseFloat(A.coords[1]))+" ";A.type===2?Ye+=V(parseFloat(A.coords[2]))+" "+V(parseFloat(A.coords[3])):Ye+=V(parseFloat(A.coords[2]))+" "+V(parseFloat(A.coords[3]))+" "+V(parseFloat(A.coords[4]))+" "+V(parseFloat(A.coords[5])),re(Ye+="]"),A.matrix&&re("/Matrix ["+A.matrix.toString()+"]"),re("/Function "+oe+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},vr=function(A,H){var oe=ni(),be=jn();H.push({resourcesOid:oe,objectOid:be}),A.objectNumber=be;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+A.boundingBox.map(V).join(" ")+"]"}),Ne.push({key:"XStep",value:V(A.xStep)}),Ne.push({key:"YStep",value:V(A.yStep)}),Ne.push({key:"Resources",value:oe+" 0 R"}),A.matrix&&Ne.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),cs({data:A.stream,additionalKeyValues:Ne,objectId:A.objectNumber}),re("endobj")},Jr=function(A){for(var H in A.objectNumber=jn(),re("<<"),A)switch(H){case"opacity":re("/ca "+I(A[H]));break;case"stroke-opacity":re("/CA "+I(A[H]))}re(">>"),re("endobj")},fs=function(A){Oi(A.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in re("/Font <<"),Ot)Ot.hasOwnProperty(H)&&(b===!1||b===!0&&S.hasOwnProperty(H))&&re("/"+H+" "+Ot[H].objectNumber+" 0 R");re(">>")})(),(function(){if(Object.keys(Pt).length>0){for(var H in re("/Shading <<"),Pt)Pt.hasOwnProperty(H)&&Pt[H]instanceof Xu&&Pt[H].objectNumber>=0&&re("/"+H+" "+Pt[H].objectNumber+" 0 R");cn.publish("putShadingPatternDict"),re(">>")}})(),(function(H){if(Object.keys(Pt).length>0){for(var oe in re("/Pattern <<"),Pt)Pt.hasOwnProperty(oe)&&Pt[oe]instanceof x.TilingPattern&&Pt[oe].objectNumber>=0&&Pt[oe].objectNumber<H&&re("/"+oe+" "+Pt[oe].objectNumber+" 0 R");cn.publish("putTilingPatternDict"),re(">>")}})(A.objectOid),(function(){if(Object.keys(Gt).length>0){var H;for(H in re("/ExtGState <<"),Gt)Gt.hasOwnProperty(H)&&Gt[H].objectNumber>=0&&re("/"+H+" "+Gt[H].objectNumber+" 0 R");cn.publish("putGStateDict"),re(">>")}})(),(function(){for(var H in re("/XObject <<"),rr)rr.hasOwnProperty(H)&&rr[H].objectNumber>=0&&re("/"+H+" "+rr[H].objectNumber+" 0 R");cn.publish("putXobjectDict"),re(">>")})(),re(">>"),re("endobj")},gi=function(A){Yt[A.fontName]=Yt[A.fontName]||{},Yt[A.fontName][A.fontStyle]=A.id},Ea=function(A,H,oe,be,Ne){var Ye={id:"F"+(Object.keys(Ot).length+1).toString(10),postScriptName:A,fontName:H,fontStyle:oe,encoding:be,isStandardFont:Ne||!1,metadata:{}};return cn.publish("addFont",{font:Ye,instance:this}),Ot[Ye.id]=Ye,gi(Ye),Ye.id},Pr=x.__private__.pdfEscape=x.pdfEscape=function(A,H){return(function(oe,be){var Ne,Ye,tt,vt,Et,Bt,Ut,mn,ii;if(tt=(be=be||{}).sourceEncoding||"Unicode",Et=be.outputEncoding,(be.autoencode||Et)&&Ot[mt].metadata&&Ot[mt].metadata[tt]&&Ot[mt].metadata[tt].encoding&&(vt=Ot[mt].metadata[tt].encoding,!Et&&Ot[mt].encoding&&(Et=Ot[mt].encoding),!Et&&vt.codePages&&(Et=vt.codePages[0]),typeof Et=="string"&&(Et=vt[Et]),Et)){for(Ut=!1,Bt=[],Ne=0,Ye=oe.length;Ne<Ye;Ne++)(mn=Et[oe.charCodeAt(Ne)])?Bt.push(String.fromCharCode(mn)):Bt.push(oe[Ne]),Bt[Ne].charCodeAt(0)>>8&&(Ut=!0);oe=Bt.join("")}for(Ne=oe.length;Ut===void 0&&Ne!==0;)oe.charCodeAt(Ne-1)>>8&&(Ut=!0),Ne--;if(!Ut)return oe;for(Bt=be.noBOM?[]:[254,255],Ne=0,Ye=oe.length;Ne<Ye;Ne++){if((ii=(mn=oe.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bt.push(ii),Bt.push(mn-(ii<<8))}return String.fromCharCode.apply(void 0,Bt)})(A,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hs=x.__private__.beginPage=function(A){it[++Mt]=[],It[Mt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Aa(Mt),pt(it[J])},Ts=function(A,H){var oe,be,Ne;switch(t=H||t,typeof A=="string"&&(oe=q(A.toLowerCase()),Array.isArray(oe)&&(be=oe[0],Ne=oe[1])),Array.isArray(A)&&(be=A[0]*$t,Ne=A[1]*$t),isNaN(be)&&(be=r[0],Ne=r[1]),(be>14400||Ne>14400)&&(pi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ne=Math.min(14400,Ne)),r=[be,Ne],t.substr(0,1)){case"l":Ne>be&&(r=[Ne,be]);break;case"p":be>Ne&&(r=[Ne,be])}hs(r),Ft(Ur),re(Xr),Zr!==0&&re(Zr+" J"),Li!==0&&re(Li+" j"),cn.publish("addPage",{pageNumber:Mt})},Yo=function(A){A>0&&A<=Mt&&(it.splice(A,1),It.splice(A,1),Mt--,J>Mt&&(J=Mt),this.setPage(J))},Aa=function(A){A>0&&A<=Mt&&(J=A)},Ta=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return it.length-1},tl=function(A,H,oe){var be,Ne=void 0;return oe=oe||{},A=A!==void 0?A:Ot[mt].fontName,H=H!==void 0?H:Ot[mt].fontStyle,be=A.toLowerCase(),Yt[be]!==void 0&&Yt[be][H]!==void 0?Ne=Yt[be][H]:Yt[A]!==void 0&&Yt[A][H]!==void 0?Ne=Yt[A][H]:oe.disableWarning===!1&&pi.warn("Unable to look up font label for font '"+A+"', '"+H+"'. Refer to getFontList() for available fonts."),Ne||oe.noFallback||(Ne=Yt.times[H])==null&&(Ne=Yt.times.normal),Ne},Wr=x.__private__.putInfo=function(){var A=jn(),H=function(be){return be};for(var oe in p!==null&&(H=ci.encryptor(A,0)),re("<<"),re("/Producer ("+Pr(H("jsPDF "+Dt.version))+")"),Lt)Lt.hasOwnProperty(oe)&&Lt[oe]&&re("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Pr(H(Lt[oe]))+")");re("/CreationDate ("+Pr(H(Te))+")"),re(">>"),re("endobj")},or=x.__private__.putCatalog=function(A){var H=(A=A||{}).rootDictionaryObjId||sr;switch(jn(),re("<<"),re("/Type /Catalog"),re("/Pages "+H+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+at;oe.substr(oe.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&re("/OpenAction [3 0 R /XYZ null null "+I(at)+"]")}switch(Ct||(Ct="continuous"),Ct){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}pe&&re("/PageMode /"+pe),cn.publish("putCatalog"),re(">>"),re("endobj")},Si=x.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(me+1)),re("/Root "+me+" 0 R"),re("/Info "+(me-1)+" 0 R"),p!==null&&re("/Encrypt "+ci.oid+" 0 R"),re("/ID [ <"+le+"> <"+le+"> ]"),re(">>")},pn=x.__private__.putHeader=function(){re("%PDF-"+D),re("%")},lo=x.__private__.putXRef=function(){var A="0000000000";re("xref"),re("0 "+(me+1)),re("0000000000 65535 f ");for(var H=1;H<=me;H++)typeof Ee[H]=="function"?re((A+Ee[H]()).slice(-10)+" 00000 n "):Ee[H]!==void 0?re((A+Ee[H]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},ds=x.__private__.buildDocument=function(){var A;me=0,Me=0,Pe=[],Ee=[],$e=[],sr=ni(),Un=ni(),pt(Pe),cn.publish("buildDocument"),pn(),As(),(function(){cn.publish("putAdditionalObjects");for(var oe=0;oe<$e.length;oe++){var be=$e[oe];Oi(be.objId,!0),re(be.content),re("endobj")}cn.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var oe in Ot)Ot.hasOwnProperty(oe)&&(b===!1||b===!0&&S.hasOwnProperty(oe))&&Dr(Ot[oe])})(),(function(){var oe;for(oe in Gt)Gt.hasOwnProperty(oe)&&Jr(Gt[oe])})(),(function(){for(var oe in rr)rr.hasOwnProperty(oe)&&ao(rr[oe])})(),(function(oe){var be;for(be in Pt)Pt.hasOwnProperty(be)&&(Pt[be]instanceof Xu?Kr(Pt[be]):Pt[be]instanceof af&&vr(Pt[be],oe))})(A),cn.publish("putResources"),A.forEach(fs),fs({resourcesOid:Un,objectOid:Number.MAX_SAFE_INTEGER}),cn.publish("postPutResources"),p!==null&&(ci.oid=jn(),re("<<"),re("/Filter /Standard"),re("/V "+ci.v),re("/R "+ci.r),re("/U <"+ci.toHexString(ci.U)+">"),re("/O <"+ci.toHexString(ci.O)+">"),re("/P "+ci.P),re(">>"),re("endobj")),Wr(),or();var H=Me;return lo(),Si(),re("startxref"),re(""+H),re("%%EOF"),pt(it[J]),Pe.join(`
`)},bn=x.__private__.getBlob=function(A){return new Blob([st(A)],{type:"application/pdf"})},Ao=x.output=x.__private__.output=(Lr=function(A,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",A){case void 0:return ds();case"save":x.save(H.filename);break;case"arraybuffer":return st(ds());case"blob":return bn(ds());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(bn(ds()))||void 0;pi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",be=ds();try{oe=tb(be)}catch{oe=tb(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+H.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ne=H.pdfObjectUrl,Ye="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",vt=en.open();return vt!==null&&vt.document.write(tt),vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Bt=en.open();if(Bt!==null){Bt.document.write(Et);var Ut=this;Bt.document.documentElement.querySelector("#pdfViewer").onload=function(){Bt.document.title=H.filename,Bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ii=en.open();if(ii!==null&&(ii.document.write(mn),ii.document.title=H.filename),ii||typeof safari>"u")return ii;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",H);default:return null}},Lr.foo=function(){try{return Lr.apply(this,arguments)}catch(oe){var A=oe.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var H="Error in function "+A.split(`
`)[0].split("<")[0]+": "+oe.message;if(!en.console)throw new Error(H);en.console.error(H,oe),en.alert&&alert(H)}},Lr.foo.bar=Lr,Lr.foo),Ri=function(A){return Array.isArray(gr)===!0&&gr.indexOf(A)>-1};switch(i){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=Ri("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);$t=i}var ci=null;ne(),ve();var Ei=x.__private__.getPageInfo=x.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[A].objId,pageNumber:A,pageContext:It[A]}},Ko=x.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in It)if(It[H].objId===A)break;return Ei(H)},Vl=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:It[J].objId,pageNumber:J,pageContext:It[J]}};x.addPage=function(){return Ts.apply(this,arguments),this},x.setPage=function(){return Aa.apply(this,arguments),pt.call(this,it[J]),this},x.insertPage=function(A){return this.addPage(),this.movePage(J,A),this},x.movePage=function(A,H){var oe,be;if(A>H){oe=it[A],be=It[A];for(var Ne=A;Ne>H;Ne--)it[Ne]=it[Ne-1],It[Ne]=It[Ne-1];it[H]=oe,It[H]=be,this.setPage(H)}else if(A<H){oe=it[A],be=It[A];for(var Ye=A;Ye<H;Ye++)it[Ye]=it[Ye+1],It[Ye]=It[Ye+1];it[H]=oe,It[H]=be,this.setPage(H)}return this},x.deletePage=function(){return Yo.apply(this,arguments),this},x.__private__.text=x.text=function(A,H,oe,be,Ne){var Ye,tt,vt,Et,Bt,Ut,mn,ii,$n,v=(be=be||{}).scope||this;if(typeof A=="number"&&typeof H=="number"&&(typeof oe=="string"||Array.isArray(oe))){var C=oe;oe=H,H=A,A=C}if(arguments[3]instanceof kt==0?(vt=arguments[4],Et=arguments[5],ei(mn=arguments[3])==="object"&&mn!==null||(typeof vt=="string"&&(Et=vt,vt=null),typeof mn=="string"&&(Et=mn,mn=null),typeof mn=="number"&&(vt=mn,mn=null),be={flags:mn,angle:vt,align:Et})):(L("The transform parameter of text() with a Matrix value"),$n=Ne),isNaN(H)||isNaN(oe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return v;var P,ee="",Ie=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:fo,Fe=v.internal.scaleFactor;function ot(Dn){return Dn=Dn.split("	").join(Array(be.TabLen||9).join(" ")),Pr(Dn,mn)}function Qt(Dn){for(var An,si=Dn.concat(),Di=[],Oo=si.length;Oo--;)typeof(An=si.shift())=="string"?Di.push(An):Array.isArray(Dn)&&(An.length===1||An[1]===void 0&&An[2]===void 0)?Di.push(An[0]):Di.push([An[0],An[1],An[2]]);return Di}function ri(Dn,An){var si;if(typeof Dn=="string")si=An(Dn)[0];else if(Array.isArray(Dn)){for(var Di,Oo,go=Dn.concat(),ul=[],Du=go.length;Du--;)typeof(Di=go.shift())=="string"?ul.push(An(Di)[0]):Array.isArray(Di)&&typeof Di[0]=="string"&&(Oo=An(Di[0],Di[1],Di[2]),ul.push([Oo[0],Oo[1],Oo[2]]));si=ul}return si}var hn=!1,Fn=!0;if(typeof A=="string")hn=!0;else if(Array.isArray(A)){var lr=A.concat();tt=[];for(var br,Jn=lr.length;Jn--;)(typeof(br=lr.shift())!="string"||Array.isArray(br)&&typeof br[0]!="string")&&(Fn=!1);hn=Fn}if(hn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var wr=_e/v.internal.scaleFactor,Rs=wr*(Ie-1);switch(be.baseline){case"bottom":oe-=Rs;break;case"top":oe+=wr-Rs;break;case"hanging":oe+=wr-2*Rs;break;case"middle":oe+=wr/2-Rs}if((Ut=be.maxWidth||0)>0&&(typeof A=="string"?A=v.splitTextToSize(A,Ut):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Dn,An){return Dn.concat(v.splitTextToSize(An,Ut))},[]))),Ye={text:A,x:H,y:oe,options:be,mutex:{pdfEscape:Pr,activeFontKey:mt,fonts:Ot,activeFontSize:_e}},cn.publish("preProcessText",Ye),A=Ye.text,vt=(be=Ye.options).angle,$n instanceof kt==0&&vt&&typeof vt=="number"){vt*=Math.PI/180,be.rotationDirection===0&&(vt=-vt),W===Z&&(vt=-vt);var Ro=Math.cos(vt),Lo=Math.sin(vt);$n=new kt(Ro,Lo,-Lo,Ro,0,0)}else vt&&vt instanceof kt&&($n=vt);W!==Z||$n||($n=Yr),(Bt=be.charSpace||Qr)!==void 0&&(ee+=V(F(Bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ii=be.horizontalScale)!==void 0&&(ee+=V(100*ii)+` Tz
`),be.lang;var ts=-1,Zo=be.renderingMode!==void 0?be.renderingMode:be.stroke,Bl=v.internal.getCurrentPageInfo().pageContext;switch(Zo){case 0:case!1:case"fill":ts=0;break;case 1:case!0:case"stroke":ts=1;break;case 2:case"fillThenStroke":ts=2;break;case 3:case"invisible":ts=3;break;case 4:case"fillAndAddForClipping":ts=4;break;case 5:case"strokeAndAddPathForClipping":ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ts=6;break;case 7:case"addToPathForClipping":ts=7}var Lu=Bl.usedRenderingMode!==void 0?Bl.usedRenderingMode:-1;ts!==-1?ee+=ts+` Tr
`:Lu!==-1&&(ee+=`0 Tr
`),ts!==-1&&(Bl.usedRenderingMode=ts),Et=be.align||"left";var Ls,po=_e*Ie,ea=v.internal.pageSize.getWidth(),Mu=Ot[mt];Bt=be.charSpace||Qr,Ut=be.maxWidth||0,mn=Object.assign({autoencode:!0,noBOM:!0},be.flags);var mo=[],Ma=function(Dn){return v.getStringUnitWidth(Dn,{font:Mu,charSpace:Bt,fontSize:_e,doKerning:!1})*_e/Fe};if(Object.prototype.toString.call(A)==="[object Array]"){var ms;tt=Qt(A),Et!=="left"&&(Ls=tt.map(Ma));var ns,Mo=0;if(Et==="right"){H-=Ls[0],A=[],Jn=tt.length;for(var Do=0;Do<Jn;Do++)Do===0?(ns=Wi(H),ms=Vi(oe)):(ns=F(Mo-Ls[Do]),ms=-po),A.push([tt[Do],ns,ms]),Mo=Ls[Do]}else if(Et==="center"){H-=Ls[0]/2,A=[],Jn=tt.length;for(var ta=0;ta<Jn;ta++)ta===0?(ns=Wi(H),ms=Vi(oe)):(ns=F((Mo-Ls[ta])/2),ms=-po),A.push([tt[ta],ns,ms]),Mo=Ls[ta]}else if(Et==="left"){A=[],Jn=tt.length;for(var ql=0;ql<Jn;ql++)A.push(tt[ql])}else if(Et==="justify"&&Mu.encoding==="Identity-H"){A=[],Jn=tt.length,Ut=Ut!==0?Ut:ea;for(var Hl=0,Mi=0;Mi<Jn;Mi++)if(ms=Mi===0?Vi(oe):-po,ns=Mi===0?Wi(H):Hl,Mi<Jn-1){var gc=F((Ut-Ls[Mi])/(tt[Mi].split(" ").length-1)),Po=tt[Mi].split(" ");A.push([Po[0]+" ",ns,ms]),Hl=0;for(var ko=1;ko<Po.length;ko++){var xr=(Ma(Po[ko-1]+" "+Po[ko])-Ma(Po[ko]))*Fe+gc;ko==Po.length-1?A.push([Po[ko],xr,0]):A.push([Po[ko]+" ",xr,0]),Hl-=xr}}else A.push([tt[Mi],ns,ms]);A.push(["",Hl,0])}else{if(Et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Jn=tt.length,Ut=Ut!==0?Ut:ea,Mi=0;Mi<Jn;Mi++){ms=Mi===0?Vi(oe):-po,ns=Mi===0?Wi(H):0;var na=tt[Mi].split(" ").length-1,zl=na>0?(Ut-Ls[Mi])/na:0;Mi<Jn-1?mo.push(V(F(zl))):mo.push(0),A.push([tt[Mi],ns,ms])}}}(typeof be.R2L=="boolean"?be.R2L:He)===!0&&(A=ri(A,function(Dn,An,si){return[Dn.split("").reverse().join(""),An,si]})),Ye={text:A,x:H,y:oe,options:be,mutex:{pdfEscape:Pr,activeFontKey:mt,fonts:Ot,activeFontSize:_e}},cn.publish("postProcessText",Ye),A=Ye.text,P=Ye.mutex.isHex||!1;var Gl=Ot[mt].encoding;Gl!=="WinAnsiEncoding"&&Gl!=="StandardEncoding"||(A=ri(A,function(Dn,An,si){return[ot(Dn),An,si]})),tt=Qt(A),A=[];for(var ia,ra,Uo,ll=Array.isArray(tt[0])?1:0,Ms="",sa=function(Dn,An,si){var Di="";return si instanceof kt?(si=typeof be.angle=="number"?oo(si,new kt(1,0,0,1,Dn,An)):oo(new kt(1,0,0,1,Dn,An),si),W===Z&&(si=oo(new kt(1,0,0,-1,0,0),si)),Di=si.join(" ")+` Tm
`):Di=V(Dn)+" "+V(An)+` Td
`,Di},Or=0;Or<tt.length;Or++){switch(Ms="",ll){case 1:Uo=(P?"<":"(")+tt[Or][0]+(P?">":")"),ia=parseFloat(tt[Or][1]),ra=parseFloat(tt[Or][2]);break;case 0:Uo=(P?"<":"(")+tt[Or]+(P?">":")"),ia=Wi(H),ra=Vi(oe)}mo!==void 0&&mo[Or]!==void 0&&(Ms=mo[Or]+` Tw
`),Or===0?A.push(Ms+sa(ia,ra,$n)+Uo):ll===0?A.push(Ms+Uo):ll===1&&A.push(Ms+sa(ia,ra,$n)+Uo)}A=ll===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var zs=`BT
/`;return zs+=mt+" "+_e+` Tf
`,zs+=V(_e*Ie)+` TL
`,zs+=Cs+`
`,zs+=ee,zs+=A,re(zs+="ET"),S[mt]=!0,v};var nl=x.__private__.clip=x.clip=function(A){return re(A==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return nl("evenodd")},x.__private__.discardPath=x.discardPath=function(){return re("n"),this};var _r=x.__private__.isValidStyle=function(A){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(H=!0),H};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(A){return _r(A)&&(f=A),this};var il=x.__private__.getStyle=x.getStyle=function(A){var H=f;switch(A){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=A}return H},uo=x.close=function(){return re("h"),this};x.stroke=function(){return re("S"),this},x.fill=function(A){return Ji("f",A),this},x.fillEvenOdd=function(A){return Ji("f*",A),this},x.fillStroke=function(A){return Ji("B",A),this},x.fillStrokeEvenOdd=function(A){return Ji("B*",A),this};var Ji=function(A,H){ei(H)==="object"?sl(H,A):re(A)},To=function(A){A===null||W===Z&&A===void 0||(A=il(A),re(A))};function rl(A,H,oe,be,Ne){var Ye=new af(H||this.boundingBox,oe||this.xStep,be||this.yStep,this.gState,Ne||this.matrix);Ye.stream=this.stream;var tt=A+"$$"+this.cloneIndex+++"$$";return Rr(tt,Ye),Ye}var sl=function(A,H){var oe=Mn[A.key],be=Pt[oe];if(be instanceof Xu)re("q"),re(Na(H)),be.gState&&x.setGState(be.gState),re(A.matrix.toString()+" cm"),re("/"+oe+" sh"),re("Q");else if(be instanceof af){var Ne=new kt(1,0,0,-1,0,Is());A.matrix&&(Ne=Ne.multiply(A.matrix||Yr),oe=rl.call(be,A.key,A.boundingBox,A.xStep,A.yStep,Ne).id),re("q"),re("/Pattern cs"),re("/"+oe+" scn"),be.gState&&x.setGState(be.gState),re(H),re("Q")}},Na=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ca=x.moveTo=function(A,H){return re(V(F(A))+" "+V(ce(H))+" m"),this},co=x.lineTo=function(A,H){return re(V(F(A))+" "+V(ce(H))+" l"),this},kr=x.curveTo=function(A,H,oe,be,Ne,Ye){return re([V(F(A)),V(ce(H)),V(F(oe)),V(ce(be)),V(F(Ne)),V(ce(Ye)),"c"].join(" ")),this};x.__private__.line=x.line=function(A,H,oe,be,Ne){if(isNaN(A)||isNaN(H)||isNaN(oe)||isNaN(be)||!_r(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return W===X?this.lines([[oe-A,be-H]],A,H,[1,1],Ne||"S"):this.lines([[oe-A,be-H]],A,H,[1,1]).stroke()},x.__private__.lines=x.lines=function(A,H,oe,be,Ne,Ye){var tt,vt,Et,Bt,Ut,mn,ii,$n,v,C,P,ee;if(typeof A=="number"&&(ee=oe,oe=H,H=A,A=ee),be=be||[1,1],Ye=Ye||!1,isNaN(H)||isNaN(oe)||!Array.isArray(A)||!Array.isArray(be)||!_r(Ne)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ca(H,oe),tt=be[0],vt=be[1],Bt=A.length,C=H,P=oe,Et=0;Et<Bt;Et++)(Ut=A[Et]).length===2?(C=Ut[0]*tt+C,P=Ut[1]*vt+P,co(C,P)):(mn=Ut[0]*tt+C,ii=Ut[1]*vt+P,$n=Ut[2]*tt+C,v=Ut[3]*vt+P,C=Ut[4]*tt+C,P=Ut[5]*vt+P,kr(mn,ii,$n,v,C,P));return Ye&&uo(),To(Ne),this},x.path=function(A){for(var H=0;H<A.length;H++){var oe=A[H],be=oe.c;switch(oe.op){case"m":Ca(be[0],be[1]);break;case"l":co(be[0],be[1]);break;case"c":kr.apply(this,be);break;case"h":uo()}}return this},x.__private__.rect=x.rect=function(A,H,oe,be,Ne){if(isNaN(A)||isNaN(H)||isNaN(oe)||isNaN(be)||!_r(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return W===X&&(be=-be),re([V(F(A)),V(ce(H)),V(F(oe)),V(F(be)),"re"].join(" ")),To(Ne),this},x.__private__.triangle=x.triangle=function(A,H,oe,be,Ne,Ye,tt){if(isNaN(A)||isNaN(H)||isNaN(oe)||isNaN(be)||isNaN(Ne)||isNaN(Ye)||!_r(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-A,be-H],[Ne-oe,Ye-be],[A-Ne,H-Ye]],A,H,[1,1],tt,!0),this},x.__private__.roundedRect=x.roundedRect=function(A,H,oe,be,Ne,Ye,tt){if(isNaN(A)||isNaN(H)||isNaN(oe)||isNaN(be)||isNaN(Ne)||isNaN(Ye)||!_r(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vt=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*oe),Ye=Math.min(Ye,.5*be),this.lines([[oe-2*Ne,0],[Ne*vt,0,Ne,Ye-Ye*vt,Ne,Ye],[0,be-2*Ye],[0,Ye*vt,-Ne*vt,Ye,-Ne,Ye],[2*Ne-oe,0],[-Ne*vt,0,-Ne,-Ye*vt,-Ne,-Ye],[0,2*Ye-be],[0,-Ye*vt,Ne*vt,-Ye,Ne,-Ye]],A+Ne,H,[1,1],tt,!0),this},x.__private__.ellipse=x.ellipse=function(A,H,oe,be,Ne){if(isNaN(A)||isNaN(H)||isNaN(oe)||isNaN(be)||!_r(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*oe,tt=4/3*(Math.SQRT2-1)*be;return Ca(A+oe,H),kr(A+oe,H-tt,A+Ye,H-be,A,H-be),kr(A-Ye,H-be,A-oe,H-tt,A-oe,H),kr(A-oe,H+tt,A-Ye,H+be,A,H+be),kr(A+Ye,H+be,A+oe,H+tt,A+oe,H),To(Ne),this},x.__private__.circle=x.circle=function(A,H,oe,be){if(isNaN(A)||isNaN(H)||isNaN(oe)||!_r(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,H,oe,oe,be)},x.setFont=function(A,H,oe){return oe&&(H=G(H,oe)),mt=tl(A,H,{disableWarning:!1}),this};var Ns=x.__private__.getFont=x.getFont=function(){return Ot[tl.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var A,H,oe={};for(A in Yt)if(Yt.hasOwnProperty(A))for(H in oe[A]=[],Yt[A])Yt[A].hasOwnProperty(H)&&oe[A].push(H);return oe},x.addFont=function(A,H,oe,be,Ne){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(oe=G(oe,be)),Ea.call(this,A,H,oe,Ne=Ne||"Identity-H")};var fo,Ur=n.lineWidth||.200025,No=x.__private__.getLineWidth=x.getLineWidth=function(){return Ur},Ft=x.__private__.setLineWidth=x.setLineWidth=function(A){return Ur=A,re(V(F(A))+" w"),this};x.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(A,H){if(A=A||[],H=H||0,isNaN(H)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(oe){return V(F(oe))}).join(" "),H=V(F(H)),re("["+A+"] "+H+" d"),this};var Jo=x.__private__.getLineHeight=x.getLineHeight=function(){return _e*fo};x.__private__.getLineHeight=x.getLineHeight=function(){return _e*fo};var Ia=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(fo=A),this},Co=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return fo};Ia(n.lineHeight);var Wi=x.__private__.getHorizontalCoordinate=function(A){return F(A)},Vi=x.__private__.getVerticalCoordinate=function(A){return W===Z?A:It[J].mediaBox.topRightY-It[J].mediaBox.bottomLeftY-F(A)},Wo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(A){return V(Wi(A))},On=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(A){return V(Vi(A))},Xr=n.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Kn(Xr)},x.__private__.setStrokeColor=x.setDrawColor=function(A,H,oe,be){return Xr=Fi({ch1:A,ch2:H,ch3:oe,ch4:be,pdfColorType:"draw",precision:2}),re(Xr),this};var Xo=n.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Kn(Xo)},x.__private__.setFillColor=x.setFillColor=function(A,H,oe,be){return Xo=Fi({ch1:A,ch2:H,ch3:oe,ch4:be,pdfColorType:"fill",precision:2}),re(Xo),this};var Cs=n.textColor||"0 g",ol=x.__private__.getTextColor=x.getTextColor=function(){return Kn(Cs)};x.__private__.setTextColor=x.setTextColor=function(A,H,oe,be){return Cs=Fi({ch1:A,ch2:H,ch3:oe,ch4:be,pdfColorType:"text",precision:3}),this};var Qr=n.charSpace,ho=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Qr||0)};x.__private__.setCharSpace=x.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qr=A,this};var Zr=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(A){var H=x.CapJoinStyles[A];if(H===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zr=H,re(H+" J"),this};var Li=0;x.__private__.setLineJoin=x.setLineJoin=function(A){var H=x.CapJoinStyles[A];if(H===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=H,re(H+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(V(F(A))+" M"),this},x.GState=Kp,x.setGState=function(A){(A=typeof A=="string"?Gt[jt[A]]:Fs(null,A)).equals(kn)||(re("/"+A.id+" gs"),kn=A)};var Fs=function(A,H){if(!A||!jt[A]){var oe=!1;for(var be in Gt)if(Gt.hasOwnProperty(be)&&Gt[be].equals(H)){oe=!0;break}if(oe)H=Gt[be];else{var Ne="GS"+(Object.keys(Gt).length+1).toString(10);Gt[Ne]=H,H.id=Ne}return A&&(jt[A]=H.id),cn.publish("addGState",H),H}};x.addGState=function(A,H){return Fs(A,H),this},x.saveGraphicsState=function(){return re("q"),tn.push({key:mt,size:_e,color:Cs}),this},x.restoreGraphicsState=function(){re("Q");var A=tn.pop();return mt=A.key,_e=A.size,Cs=A.color,kn=null,this},x.setCurrentTransformationMatrix=function(A){return re(A.toString()+" cm"),this},x.comment=function(A){return re("#"+A),this};var ar=function(A,H){var oe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ye){isNaN(Ye)||(oe=parseFloat(Ye))}});var be=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ye){isNaN(Ye)||(be=parseFloat(Ye))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Ye){Ne=Ye.toString()}}),this},Vs=function(A,H,oe,be){ar.call(this,A,H),this.type="rect";var Ne=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(tt){isNaN(tt)||(Ne=parseFloat(tt))}});var Ye=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(tt){isNaN(tt)||(Ye=parseFloat(tt))}}),this},Io=function(){this.page=Mt,this.currentPage=J,this.pages=it.slice(0),this.pagesContext=It.slice(0),this.x=bt,this.y=ti,this.matrix=Wt,this.width=ps(J),this.height=Ra(J),this.outputDestination=ut,this.id="",this.objectNumber=-1};Io.prototype.restore=function(){Mt=this.page,J=this.currentPage,It=this.pagesContext,it=this.pages,bt=this.x,ti=this.y,Wt=this.matrix,Qo(J,this.width),es(J,this.height),ut=this.outputDestination};var Bs=function(A,H,oe,be,Ne){Ki.push(new Io),Mt=J=0,it=[],bt=A,ti=H,Wt=Ne,hs([oe,be])};for(var qs in x.beginFormObject=function(A,H,oe,be,Ne){return Bs(A,H,oe,be,Ne),this},x.endFormObject=function(A){return(function(H){if(Os[H])Ki.pop().restore();else{var oe=new Io,be="Xo"+(Object.keys(rr).length+1).toString(10);oe.id=be,Os[H]=be,rr[be]=oe,cn.publish("addFormObject",oe),Ki.pop().restore()}})(A),this},x.doFormObject=function(A,H){var oe=rr[Os[A]];return re("q"),re(H.toString()+" cm"),re("/"+oe.id+" Do"),re("Q"),this},x.getFormObject=function(A){var H=rr[Os[A]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},x.save=function(A,H){return A=A||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Ju(bn(ds()),A),typeof Ju.unload=="function"&&en.setTimeout&&setTimeout(Ju.unload,911),this):new Promise(function(oe,be){try{var Ne=Ju(bn(ds()),A);typeof Ju.unload=="function"&&en.setTimeout&&setTimeout(Ju.unload,911),oe(Ne)}catch(Ye){be(Ye.message)}})},Dt.API)Dt.API.hasOwnProperty(qs)&&(qs==="events"&&Dt.API.events.length?(function(A,H){var oe,be,Ne;for(Ne=H.length-1;Ne!==-1;Ne--)oe=H[Ne][0],be=H[Ne][1],A.subscribe.apply(A,[oe].concat(typeof be=="function"?[be]:be))})(cn,Dt.API.events):x[qs]=Dt.API[qs]);function ps(A){return It[A].mediaBox.topRightX-It[A].mediaBox.bottomLeftX}function Qo(A,H){It[A].mediaBox.topRightX=H+It[A].mediaBox.bottomLeftX}function Ra(A){return It[A].mediaBox.topRightY-It[A].mediaBox.bottomLeftY}function es(A,H){It[A].mediaBox.topRightY=H+It[A].mediaBox.bottomLeftY}var Hs=x.getPageWidth=function(A){return ps(A=A||J)/$t},al=x.setPageWidth=function(A,H){Qo(A,H*$t)},Is=x.getPageHeight=function(A){return Ra(A=A||J)/$t},La=x.setPageHeight=function(A,H){es(A,H*$t)};return x.internal={pdfEscape:Pr,getStyle:il,getFont:Ns,getFontSize:qe,getCharSpace:ho,getTextColor:ol,getLineHeight:Jo,getLineHeightFactor:Co,getLineWidth:No,write:ke,getHorizontalCoordinate:Wi,getVerticalCoordinate:Vi,getCoordinateString:Wo,getVerticalCoordinateString:On,collections:{},newObject:jn,newAdditionalObject:yr,newObjectDeferred:ni,newObjectDeferredBegin:Oi,getFilters:Mr,putStream:cs,events:cn,scaleFactor:$t,pageSize:{getWidth:function(){return Hs(J)},setWidth:function(A){al(J,A)},getHeight:function(){return Is(J)},setHeight:function(A){La(J,A)}},encryptionOptions:p,encryption:ci,getEncryptor:function(A){return p!==null?ci.encryptor(A,0):function(H){return H}},output:Ao,getNumberOfPages:Ta,get pages(){return it},out:re,f2:I,f3:k,getPageInfo:Ei,getPageInfoByObjId:Ko,getCurrentPageInfo:Vl,getPDFVersion:O,Point:ar,Rectangle:Vs,Matrix:kt,hasHotfix:Ri},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Hs(J)},set:function(A){al(J,A)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Is(J)},set:function(A){La(J,A)},enumerable:!0,configurable:!0}),(function(A){for(var H=0,oe=he.length;H<oe;H++){var be=Ea.call(this,A[H][0],A[H][1],A[H][2],he[H][3],!0);b===!1&&(S[be]=!0);var Ne=A[H][0].split("-");gi({id:be,fontName:Ne[0],fontStyle:Ne[1]||""})}cn.publish("addFonts",{fonts:Ot,dictionary:Yt})}).call(x,he),mt="F1",Ts(r,t),cn.publish("initialized"),x}rf.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},rf.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rf.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},rf.prototype.processOwnerPassword=function(n,e){return l1(a1(e).substr(0,5),n)},rf.prototype.encryptor=function(n,e){var t=a1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return l1(t,i)}},Kp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ei(n)!==ei(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;i++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},Dt.API={events:[]},Dt.version="4.2.0";var $i=Dt.API,gy=1,pc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ac=function(n){return n.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(t.length===1?"0"+t:t)})},an=function(n){return n.toFixed(2)},mu=function(n){return n.toFixed(5)};$i.__acroform__={};var so=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},sb=function(n){return n*gy},Ya=function(n){var e=new UE,t=Tt.internal.getHeight(n)||0,i=Tt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(an(i)),Number(an(t))],e},HL=$i.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},zL=$i.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},GL=$i.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},tr=$i.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GL(n,e-1)},nr=$i.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return HL(n,e-1)},ir=$i.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zL(n,e-1)},jL=$i.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=n[0],o=n[1],l=n[2],c=n[3],h={};return h.lowerLeft_X=t(r)||0,h.lowerLeft_Y=i(o+c)||0,h.upperRight_X=t(r+l)||0,h.upperRight_Y=i(o)||0,[Number(an(h.lowerLeft_X)),Number(an(h.lowerLeft_Y)),Number(an(h.upperRight_X)),Number(an(h.upperRight_Y))]},$L=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,i=u1(n,t),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+r+" "+an(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Ya(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},u1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=n.multiline?r.map(function(I){return I.split(`
`)}):r.map(function(I){return[I]});var o=t,l=Tt.internal.getHeight(n)||0;l=l<0?-l:l;var c=Tt.internal.getWidth(n)||0;c=c<0?-c:c;var h=function(I,k,F){if(I+1<r.length){var ce=k+" "+r[I+1][0];return ap(ce,n,F).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var f,p,b=ap("3",n,o).height,S=n.multiline?l-o:(l-b)/2,x=S+=2,D=0,O=0,B=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+ap(e,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var q="",X=0,Z=0;Z<r.length;Z++)if(r.hasOwnProperty(Z)){var W=!1;if(r[Z].length!==1&&B!==r[Z].length-1){if((b+2)*(X+2)+2>l)continue e;q+=r[Z][B],W=!0,O=Z,Z--}else{q=(q+=r[Z][B]+" ").substr(q.length-1)==" "?q.substr(0,q.length-1):q;var ye=parseInt(Z),de=h(ye,q,o),G=Z>=r.length-1;if(de&&!G){q+=" ",B=0;continue}if(de||G){if(G)O=ye;else if(n.multiline&&(b+2)*(X+2)+2>l)continue e}else{if(!n.multiline||(b+2)*(X+2)+2>l)continue e;O=ye}}for(var V="",L=D;L<=O;L++){var j=r[L];if(n.multiline){if(L===O){V+=j[B]+" ",B=(B+1)%j.length;continue}if(L===D){V+=j[j.length-1]+" ";continue}}V+=j[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,p=ap(V,n,o).width,n.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}e+=an(f)+" "+an(x)+` Td
`,e+="("+pc(V)+`) Tj
`,e+=-an(f)+` 0 Td
`,x=-(o+2),p=0,D=W?O:O+1,X++,q=""}break}return i.text=e,i.fontSize=o,i},ap=function(n,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},YL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KL=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},JL=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(wa.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(YL)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new OE,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o.objId=void 0,o.hasAnnotation&&KL(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(i,r){var o=!i;for(var l in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],h=[],f=c.Rect;if(c.Rect&&(c.Rect=jL(c.Rect,r)),r.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Tt.createDefaultAppearanceStream(c),ei(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=$L(c);h.push({key:"AP",value:"<</N "+p+">>"}),r.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var b="";for(var S in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(S)){var x=c.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var D=x[l];typeof D=="function"&&(D=D.call(r,c)),b+="/"+l+" "+D+" ",r.internal.acroformPlugin.xForms.indexOf(D)>=0||r.internal.acroformPlugin.xForms.push(D)}}else typeof(D=x)=="function"&&(D=D.call(r,c)),b+="/"+l+" "+D,r.internal.acroformPlugin.xForms.indexOf(D)>=0||r.internal.acroformPlugin.xForms.push(D);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}r.internal.putStream({additionalKeyValues:h,objectId:c.objId}),r.internal.out("endobj")}o&&(function(O,B){for(var q in O)if(O.hasOwnProperty(q)){var X=q,Z=O[q];B.internal.newObjectDeferredBegin(Z.objId,!0),ei(Z)==="object"&&typeof Z.putStream=="function"&&Z.putStream(),delete O[X]}})(r.internal.acroformPlugin.xForms,r)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},kE=$i.__acroform__.arrayToPdfArray=function(n,e,t){var i=function(l){return l};if(Array.isArray(n)){for(var r="[",o=0;o<n.length;o++)switch(o!==0&&(r+=" "),ei(n[o])){case"boolean":case"number":case"object":r+=n[o].toString();break;case"string":n[o].substr(0,1)==="/"?r+="/"+ac(n[o].substr(1)):(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),r+="("+pc(i(n[o].toString()))+")")}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},g0=function(n,e,t){var i=function(r){return r};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+pc(i(n))+")"},Ja=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ja.prototype.toString=function(){return this.objId+" 0 R"},Ja.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ja.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:kE(r,this.objId,this.scope)}):r instanceof Ja?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var UE=function(){Ja.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};so(UE,Ja);var OE=function(){Ja.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+pc(t(n))+")"}},set:function(t){n=t}})};so(OE,Ja);var wa=function n(){Ja.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute F supplied.');e=q}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!tr(e,3)},set:function(q){q?this.F=nr(e,3):this.F=ir(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute Ff supplied.');t=q}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(q){i=q!==void 0?q:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(q){i[0]=q}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(q){i[1]=q}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(q){i[2]=q}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(q){i[3]=q}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(q){switch(q){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=q;break;default:throw new Error('Invalid value "'+q+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Jp)return;o="FieldObject"+n.FieldNum++}var q=function(X){return X};return this.scope&&(q=this.scope.internal.getEncryptor(this.objId)),"("+pc(q(o))+")"},set:function(q){o=q.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(q){o=q}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(q){l=q}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(q){c=q}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(q){h=q}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/gy:f},set:function(q){f=q}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(q){p=q}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Jp||this instanceof ec))return g0(b,this.objId,this.scope)},set:function(q){q=q.toString(),b=q}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Gr==0?g0(S,this.objId,this.scope):S},set:function(q){q=q.toString(),S=this instanceof Gr==0?q.substr(0,1)==="("?Xc(q.substr(1,q.length-2)):Xc(q):q}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gr==1?Xc(S.substr(1,S.length-1)):S},set:function(q){q=q.toString(),S=this instanceof Gr==1?"/"+ac(q):q}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(q){this.V=q}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Gr==0?g0(x,this.objId,this.scope):x},set:function(q){q=q.toString(),x=this instanceof Gr==0?q.substr(0,1)==="("?Xc(q.substr(1,q.length-2)):Xc(q):q}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gr==1?Xc(x.substr(1,x.length-1)):x},set:function(q){q=q.toString(),x=this instanceof Gr==1?"/"+ac(q):q}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(q){q=!!q,O=q}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(q){D=q}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,1)},set:function(q){q?this.Ff=nr(this.Ff,1):this.Ff=ir(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,2)},set:function(q){q?this.Ff=nr(this.Ff,2):this.Ff=ir(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,3)},set:function(q){q?this.Ff=nr(this.Ff,3):this.Ff=ir(this.Ff,3)}});var B=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(B!==null)return B},set:function(q){if([0,1,2].indexOf(q)===-1)throw new Error('Invalid value "'+q+'" for attribute Q supplied.');B=q}}),Object.defineProperty(this,"textAlign",{get:function(){var q;switch(B){case 0:default:q="left";break;case 1:q="center";break;case 2:q="right"}return q},configurable:!0,enumerable:!0,set:function(q){switch(q){case"right":case 2:B=2;break;case"center":case 1:B=1;break;default:B=0}}})};so(wa,Ja);var pf=function(){wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kE(e,this.objId,this.scope)},set:function(t){var i,r;r=[],typeof(i=t)=="string"&&(r=(function(o,l,c){c||(c=1);for(var h,f=[];h=l.exec(o);)f.push(h[c]);return f})(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,18)},set:function(t){t?this.Ff=nr(this.Ff,18):this.Ff=ir(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=nr(this.Ff,19):this.Ff=ir(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,20)},set:function(t){t?(this.Ff=nr(this.Ff,20),e.sort()):this.Ff=ir(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,22)},set:function(t){t?this.Ff=nr(this.Ff,22):this.Ff=ir(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(t){t?this.Ff=nr(this.Ff,23):this.Ff=ir(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,27)},set:function(t){t?this.Ff=nr(this.Ff,27):this.Ff=ir(this.Ff,27)}}),this.hasAppearanceStream=!1};so(pf,wa);var mf=function(){pf.call(this),this.fontName="helvetica",this.combo=!1};so(mf,pf);var gf=function(){mf.call(this),this.combo=!0};so(gf,mf);var xp=function(){gf.call(this),this.edit=!0};so(xp,gf);var Gr=function(){wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,15)},set:function(t){t?this.Ff=nr(this.Ff,15):this.Ff=ir(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,16)},set:function(t){t?this.Ff=nr(this.Ff,16):this.Ff=ir(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,17)},set:function(t){t?this.Ff=nr(this.Ff,17):this.Ff=ir(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(t){t?this.Ff=nr(this.Ff,26):this.Ff=ir(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+pc(t(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){ei(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){var i=t==null?"":t.toString();i.substr(0,1)==="/"&&(i=i.substr(1)),n="/"+ac(i)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+ac(t)}})};so(Gr,wa);var Sp=function(){Gr.call(this),this.pushButton=!0};so(Sp,Gr);var yf=function(){Gr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};so(yf,Gr);var Jp=function(){var n,e;wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),i)l.push("/"+o+" ("+pc(r(i[o]))+")");return l.push(">>"),l.join(`
`)},set:function(r){ei(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){var o=r==null?"":r.toString();o.substr(0,1)==="/"&&(o=o.substr(1)),t="/"+ac(o)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){var o=r==null?"":r.toString();o.substr(0,1)==="/"&&(o=o.substr(1)),t="/"+ac(o)}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};so(Jp,wa),yf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},yf.prototype.createOption=function(n){var e=new Jp;return e.Parent=this,e.optionName=n,this.Kids.push(e),WL.call(this.scope,e),e};var Ep=function(){Gr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};so(Ep,Gr);var ec=function(){wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,13)},set:function(e){e?this.Ff=nr(this.Ff,13):this.Ff=ir(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,21)},set:function(e){e?this.Ff=nr(this.Ff,21):this.Ff=ir(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(e){e?this.Ff=nr(this.Ff,23):this.Ff=ir(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,24)},set:function(e){e?this.Ff=nr(this.Ff,24):this.Ff=ir(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,25)},set:function(e){e?this.Ff=nr(this.Ff,25):this.Ff=ir(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(e){e?this.Ff=nr(this.Ff,26):this.Ff=ir(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};so(ec,wa);var Ap=function(){ec.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,14)},set:function(n){n?this.Ff=nr(this.Ff,14):this.Ff=ir(this.Ff,14)}}),this.password=!0};so(Ap,ec);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),o=u1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+an(Tt.internal.getWidth(n))+" "+an(Tt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+an(o.fontSize)+" Tf "+r),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ya(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],o=Tt.internal.getHeight(n),l=Tt.internal.getWidth(n),c=u1(n,n.caption);return r.push("1 g"),r.push("0 0 "+an(l)+" "+an(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+an(l-1)+" "+an(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+an(c.fontSize)+" Tf "+i),r.push(c.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+an(Tt.internal.getWidth(n))+" "+an(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Circle.YesNormal,e.D[n]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ya(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Tt.internal.Bezier_C,o=Number((i*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+mu(Tt.internal.getWidth(n)/2)+" "+mu(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5)),l=Number((i*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mu(Tt.internal.getWidth(n)/2)+" "+mu(Tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+mu(Tt.internal.getWidth(n)/2)+" "+mu(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),t.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),t.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),t.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mu(Tt.internal.getWidth(n)/2)+" "+mu(Tt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Cross.YesNormal,e.D[n]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ya(n);e.scope=n.scope;var t=[],i=Tt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+an(Tt.internal.getWidth(n)-2)+" "+an(Tt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(an(i.x1.x)+" "+an(i.x1.y)+" m"),t.push(an(i.x2.x)+" "+an(i.x2.y)+" l"),t.push(an(i.x4.x)+" "+an(i.x4.y)+" m"),t.push(an(i.x3.x)+" "+an(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=Tt.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+an(Tt.internal.getWidth(n))+" "+an(Tt.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+an(Tt.internal.getWidth(n)-2)+" "+an(Tt.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(an(t.x1.x)+" "+an(t.x1.y)+" m"),i.push(an(t.x2.x)+" "+an(t.x2.y)+" l"),i.push(an(t.x4.x)+" "+an(t.x4.y)+" m"),i.push(an(t.x3.x)+" "+an(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ya(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+an(Tt.internal.getWidth(n))+" "+an(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Tt.internal.getWidth(n),t=Tt.internal.getHeight(n),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},Tt.internal.getWidth=function(n){var e=0;return ei(n)==="object"&&(e=sb(n.Rect[2])),e},Tt.internal.getHeight=function(n){var e=0;return ei(n)==="object"&&(e=sb(n.Rect[3])),e};var WL=$i.addField=function(n){if(JL(this,n),!(n instanceof wa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};$i.AcroFormChoiceField=pf,$i.AcroFormListBox=mf,$i.AcroFormComboBox=gf,$i.AcroFormEditBox=xp,$i.AcroFormButton=Gr,$i.AcroFormPushButton=Sp,$i.AcroFormRadioButton=yf,$i.AcroFormCheckBox=Ep,$i.AcroFormTextField=ec,$i.AcroFormPasswordField=Ap,$i.AcroFormAppearance=Tt,$i.AcroForm={ChoiceField:pf,ListBox:mf,ComboBox:gf,EditBox:xp,Button:Gr,PushButton:Sp,RadioButton:yf,CheckBox:Ep,TextField:ec,PasswordField:Ap,Appearance:Tt},Dt.AcroForm={ChoiceField:pf,ListBox:mf,ComboBox:gf,EditBox:xp,Button:Gr,PushButton:Sp,RadioButton:yf,CheckBox:Ep,TextField:ec,PasswordField:Ap,Appearance:Tt};Dt.AcroForm;function FE(n){return n.reduce(function(e,t,i){return e[t]=i,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(I,k){var F,ce,Te,le,ue,ve=t;if((k=k||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(de(I))for(ue in i)for(Te=i[ue],F=0;F<Te.length;F+=1){for(le=!0,ce=0;ce<Te[F].length;ce+=1)if(Te[F][ce]!==void 0&&Te[F][ce]!==I[ce]){le=!1;break}if(le===!0){ve=ue;break}}else for(ue in i)for(Te=i[ue],F=0;F<Te.length;F+=1){for(le=!0,ce=0;ce<Te[F].length;ce+=1)if(Te[F][ce]!==void 0&&Te[F][ce]!==I.charCodeAt(ce)){le=!1;break}if(le===!0){ve=ue;break}}return ve===t&&k!==t&&(ve=k),ve},o=function I(k){for(var F=this.internal.write,ce=this.internal.putStream,Te=(0,this.internal.getFilters)();Te.indexOf("FlateEncode")!==-1;)Te.splice(Te.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:k.width}),le.push({key:"Height",value:k.height}),k.colorSpace===q.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===q.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)&&k.transparency.length>0){for(var ue="",ve=0,we=k.transparency.length;ve<we;ve++)ue+=k.transparency[ve]+" "+k.transparency[ve]+" ";le.push({key:"Mask",value:"["+ue+"]"})}k.sMask!==void 0&&le.push({key:"SMask",value:k.objectId+1+" 0 R"});var We=k.filter!==void 0?["/"+k.filter]:void 0;if(ce({data:k.data,additionalKeyValues:le,alreadyAppliedFilters:We,objectId:k.objectId}),F("endobj"),"sMask"in k&&k.sMask!==void 0){var ne,U=(ne=k.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:k.bitsPerComponent,J={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:k.sMask};"filter"in k&&(J.decodeParameters="/Predictor ".concat(k.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(k.width),J.filter=k.filter),I.call(this,J)}if(k.colorSpace===q.INDEXED){var ie=this.internal.newObject();ce({data:V(new Uint8Array(k.palette)),objectId:ie}),F("endobj")}},l=function(){var I=this.internal.collections[e+"images"];for(var k in I)o.call(this,I[k])},c=function(){var I,k=this.internal.collections[e+"images"],F=this.internal.write;for(var ce in k)F("/I"+(I=k[ce]).index,I.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var I=this.internal.collections[e+"images"];return h.call(this),I},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(I){return typeof n["process"+I.toUpperCase()]=="function"},S=function(I){return ei(I)==="object"&&I.nodeType===1},x=function(I,k){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var F=""+I.getAttribute("src");if(F.indexOf("data:image/")===0)return wp(unescape(F).split("base64,").pop());var ce=n.loadFile(F,!0);if(ce!==void 0)return ce}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var Te;switch(k){case"PNG":Te="image/png";break;case"WEBP":Te="image/webp";break;default:Te="image/jpeg"}return wp(I.toDataURL(Te,1).split("base64,").pop())}},D=function(I){var k=this.internal.collections[e+"images"];if(k){for(var F in k)if(I===k[F].alias)return k[F]}},O=function(I,k,F){return I||k||(I=-96,k=-96),I<0&&(I=-1*F.width*72/I/this.internal.scaleFactor),k<0&&(k=-1*F.height*72/k/this.internal.scaleFactor),I===0&&(I=k*F.width/F.height),k===0&&(k=I*F.height/F.width),[I,k]},B=function(I,k,F,ce,Te,le){var ue=O.call(this,F,ce,Te),ve=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,We=f.call(this);if(F=ue[0],ce=ue[1],We[Te.index]=Te,le){le*=Math.PI/180;var ne=Math.cos(le),U=Math.sin(le),J=function(fe){return fe.toFixed(4)},ie=[J(ne),J(U),J(-1*U),J(ne),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,ve(I),we(k+ce),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([ve(F),"0","0",ve(ce),"0","0","cm"].join(" "))):this.internal.write([ve(F),"0","0",ve(ce),ve(I),we(k+ce),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Te.index+" Do"),this.internal.write("Q")},q=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var X=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Z=n.__addimage__.sHashCode=function(I){var k,F,ce=0;if(typeof I=="string")for(F=I.length,k=0;k<F;k++)ce=(ce<<5)-ce+I.charCodeAt(k),ce|=0;else if(de(I))for(F=I.byteLength/2,k=0;k<F;k++)ce=(ce<<5)-ce+I[k],ce|=0;return ce},W=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var k=!0;return I.length===0&&(k=!1),I.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(k=!1),k},ye=n.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var k=I.indexOf(",");return k<0?null:I.substring(0,k).trim().endsWith("base64")?I.substring(k+1):null};n.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var de=n.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},G=n.__addimage__.binaryStringToUint8Array=function(I){for(var k=I.length,F=new Uint8Array(k),ce=0;ce<k;ce++)F[ce]=I.charCodeAt(ce);return F},V=n.__addimage__.arrayBufferToBinaryString=function(I){for(var k="",F=de(I)?I:new Uint8Array(I),ce=0;ce<F.length;ce+=8192)k+=String.fromCharCode.apply(null,F.subarray(ce,ce+8192));return k};n.addImage=function(){var I,k,F,ce,Te,le,ue,ve,we;if(typeof arguments[1]=="number"?(k=t,F=arguments[1],ce=arguments[2],Te=arguments[3],le=arguments[4],ue=arguments[5],ve=arguments[6],we=arguments[7]):(k=arguments[1],F=arguments[2],ce=arguments[3],Te=arguments[4],le=arguments[5],ue=arguments[6],ve=arguments[7],we=arguments[8]),ei(I=arguments[0])==="object"&&!S(I)&&"imageData"in I){var We=I;I=We.imageData,k=We.format||k||t,F=We.x||F||0,ce=We.y||ce||0,Te=We.w||We.width||Te,le=We.h||We.height||le,ue=We.alias||ue,ve=We.compression||ve,we=We.rotation||We.angle||we}var ne=this.internal.getFilters();if(ve===void 0&&ne.indexOf("FlateEncode")!==-1&&(ve="SLOW"),isNaN(F)||isNaN(ce))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var U=L.call(this,I,k,ue,ve);return B.call(this,F,ce,Te,le,U,we),this};var L=function(I,k,F,ce){var Te,le,ue;if(typeof I=="string"&&r(I)===t){I=unescape(I);var ve=j(I,!1);(ve!==""||(ve=n.loadFile(I,!0))!==void 0)&&(I=ve)}if(S(I)&&(I=x(I,k)),k=r(I,k),!b(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((ue=F)==null||ue.length===0)&&(F=(function(we){return typeof we=="string"||de(we)?Z(we):de(we.data)?Z(we.data):null})(I)),(Te=D.call(this,F))||(I instanceof Uint8Array||k==="RGBA"||(le=I,I=G(I)),Te=this["process"+k.toUpperCase()](I,p.call(this),F,(function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in n.image_compression?we:X.NONE})(ce),le)),!Te)throw new Error("An unknown error occurred whilst processing the image.");return Te},j=n.__addimage__.convertBase64ToBinaryString=function(I,k){k=typeof k!="boolean"||k;var F,ce="";if(typeof I=="string"){var Te;F=(Te=ye(I))!==null&&Te!==void 0?Te:I;try{ce=wp(F)}catch(le){if(k)throw W(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ce};n.getImageProperties=function(I){var k,F,ce="";if(S(I)&&(I=x(I)),typeof I=="string"&&r(I)===t&&((ce=j(I,!1))===""&&(ce=n.loadFile(I)||""),I=ce),F=r(I),!b(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(I instanceof Uint8Array||(I=G(I)),!(k=this["process"+F.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=F,k}})(Dt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,r,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,b=0;b<f.length&&!p;b++)switch((i=f[b]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var S=0;S<f.length;S++){i=f[S];var x=this.internal.pdfEscape,D=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),B=this.internal.newAdditionalObject(),q=this.internal.getEncryptor(O.objId),X=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+x(q(i.contents))+")",o+=" /Popup "+B.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+x(q(X))+") >>",O.content=o;var Z=O.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+Z,i.open&&(o+=" /Open true"),o+=" >>",B.content=o,this.internal.write(O.objId,"0 R",B.objId,"0 R");break;case"freetext":r="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var W=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+x(D(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var ye=this.annotations._nameMap[i.options.name];i.options.pageNumber=ye.page,i.options.top=ye.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+x(D(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;default:var de=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+de+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,r,o,l){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(t),y:f(i),w:h(t+r),h:f(i+o)},options:l,type:"link"})},n.textWithLink=function(t,i,r,o){var l,c,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;l=Math.ceil(f*p)}else c=h,l=f;return this.text(t,i,r,o),r+=.2*f,o.align==="center"&&(i-=h/2),o.align==="right"&&(i-=h),this.link(i,r-f,c,l,o),h},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}})(Dt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(O){return e[O.charCodeAt(0)]!==void 0},l=n.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},c=n.__arabicParser__.isArabicEndLetter=function(O){return l(O)&&o(O)&&e[O.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(O){return l(O)&&r.indexOf(O.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return l(O)&&o(O)&&e[O.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(O){return l(O)&&o(O)&&e[O.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(O){return l(O)&&o(O)&&e[O.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(O){return l(O)&&o(O)&&e[O.charCodeAt(0)].length==4},b=n.__arabicParser__.resolveLigatures=function(O){var B=0,q=t,X="",Z=0;for(B=0;B<O.length;B+=1)q[O.charCodeAt(B)]!==void 0?(Z++,typeof(q=q[O.charCodeAt(B)])=="number"&&(X+=String.fromCharCode(q),q=t,Z=0),B===O.length-1&&(q=t,X+=O.charAt(B-(Z-1)),B-=Z-1,Z=0)):(q=t,X+=O.charAt(B-Z),B-=Z,Z=0);return X};n.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&i[O.charCodeAt(0)]!==void 0};var S=n.__arabicParser__.getCorrectForm=function(O,B,q){return l(O)?o(O)===!1?-1:!f(O)||!l(B)&&!l(q)||!l(q)&&c(B)||c(O)&&!l(B)||c(O)&&h(B)||c(O)&&c(B)?0:p(O)&&l(B)&&!c(B)&&l(q)&&f(q)?3:c(O)||!l(q)?1:2:-1},x=function(O){var B=0,q=0,X=0,Z="",W="",ye="",de=(O=O||"").split("\\s+"),G=[];for(B=0;B<de.length;B+=1){for(G.push(""),q=0;q<de[B].length;q+=1)Z=de[B][q],W=de[B][q-1],ye=de[B][q+1],l(Z)?(X=S(Z,W,ye),G[B]+=X!==-1?String.fromCharCode(e[Z.charCodeAt(0)][X]):Z):G[B]+=Z;G[B]=b(G[B])}return G.join(" ")},D=n.__arabicParser__.processArabic=n.processArabic=function(){var O,B=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,q=[];if(Array.isArray(B)){var X=0;for(q=[],X=0;X<B.length;X+=1)Array.isArray(B[X])?q.push([x(B[X][0]),B[X][1],B[X][2]]):q.push([x(B[X])]);O=q}else O=x(B);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};n.events.push(["preProcessText",D])})(Dt.API),Dt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var r;if((t=t||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Dt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(O){h=O}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(O){f=O}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(O){p=O}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(O){S=O}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(O){x=O}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(O){D=O}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return i.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){i.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),b=f.font||this.getFont(),S=f.scaleFactor||this.internal.scaleFactor,x=0,D=0,O=0,B=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var q=f.maxWidth;q>0?typeof h=="string"?h=this.splitTextToSize(h,q):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(Z,W){return Z.concat(B.splitTextToSize(W,q))},[])):h=Array.isArray(h)?h:[h];for(var X=0;X<h.length;X++)x<(O=this.getStringUnitWidth(h[X],{font:b})*p)&&(x=O);return x!==0&&(D=h.length),{w:x/=S,h:Math.max((D*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/S,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,x&&S&&(this.printHeaderRow(h.lineNumber,!0),h.y+=S[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,b,S){if(i.call(this),!p)throw new Error("No data for PDF table.");var x,D,O,B,q=[],X=[],Z=[],W={},ye={},de=[],G=[],V=(S=S||{}).autoSize||!1,L=S.printHeaders!==!1,j=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,I=S.margins||Object.assign({width:this.getPageWidth()},e),k=typeof S.padding=="number"?S.padding:3,F=S.headerBackgroundColor||"#c8c8c8",ce=S.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ce,this.setFontSize(j),b==null)X=q=Object.keys(p[0]),Z=q.map(function(){return"left"});else if(Array.isArray(b)&&ei(b[0])==="object")for(q=b.map(function(We){return We.name}),X=b.map(function(We){return We.prompt||We.name||""}),Z=b.map(function(We){return We.align||"left"}),x=0;x<b.length;x+=1)ye[b[x].name]=.7499990551181103*b[x].width;else Array.isArray(b)&&typeof b[0]=="string"&&(X=q=b,Z=q.map(function(){return"left"}));if(V||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<q.length;x+=1){for(W[B=q[x]]=p.map(function(We){return We[B]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(X[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=W[B],this.setFont(void 0,"normal"),O=0;O<D.length;O+=1)de.push(this.getTextDimensions(D[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ye[B]=Math.max.apply(null,de)+k+k,de=[]}if(L){var Te={};for(x=0;x<q.length;x+=1)Te[q[x]]={},Te[q[x]].text=X[x],Te[q[x]].align=Z[x];var le=c.call(this,Te,ye);G=q.map(function(We){return new o(h,f,ye[We],le,Te[We].text,void 0,Te[We].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var ue=b.reduce(function(We,ne){return We[ne.name]=ne.align,We},{});for(x=0;x<p.length;x+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:x,data:p[x]},this);var ve=c.call(this,p[x],ye);for(O=0;O<q.length;O+=1){var we=p[x][q[O]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:x,col:O,data:we},this),l.call(this,new o(h,f,ye[q[O]],ve,we,x+2,ue[q[O]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(h).map(function(x){var D=h[x];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,f[x]-p-p)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/S+p+p},this).reduce(function(x,D){return Math.max(x,D)},0)};n.setTableHeaderRow=function(h){i.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){p=this.internal.__cell__.tableHeaderRow[x].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,S.push(p)),p.lineNumber=h;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,p),this.setTextColor(D)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(Dt.API);var VE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},BE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],c1=FE(BE),qE=[100,200,300,400,500,600,700,800,900],XL=FE(qE);function y0(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return VE[o=o||"normal"]?o:"normal"})(n.style),i=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),r=(function(o){return typeof c1[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:e,style:[r,t,i].join(" ")}}}function ob(n,e,t,i){var r;for(r=t;r>=0&&r<e.length;r+=i)if(n[e[r]])return n[e[r]];for(r=t;r>=0&&r<e.length;r-=i)if(n[e[r]])return n[e[r]]}var QL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ab={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lb(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function ub(n){return n.trimLeft()}function ZL(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function eM(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Qc,lp,cb,fb,hb,v0=["times"];function db(n,e,t,i,r){var o=4,l=mb;switch(r){case Dt.API.image_compression.FAST:o=1,l=pb;break;case Dt.API.image_compression.MEDIUM:o=6,l=gb;break;case Dt.API.image_compression.SLOW:o=9,l=yb}n=(function(h,f,p,b){for(var S,x=h.length/f,D=new Uint8Array(h.length+x),O=[tM,pb,mb,gb,yb],B=0;B<x;B+=1){var q=B*f,X=h.subarray(q,q+f);if(b)D.set(b(X,p,S),q+B);else{for(var Z=O.length,W=[],ye=0;ye<Z;ye+=1)W[ye]=O[ye](X,p,S);var de=iM(W.concat());D.set(W[de],q+B)}S=X}return D})(n,e,Math.ceil(t*i/8),l);var c=i1(n,{level:o});return Dt.API.__addimage__.arrayBufferToBinaryString(c)}function tM(n){var e=Array.apply([],n);return e.unshift(0),e}function pb(n,e){var t=n.length,i=[];i[0]=1;for(var r=0;r<t;r+=1){var o=n[r-e]||0;i[r+1]=n[r]-o+256&255}return i}function mb(n,e,t){var i=n.length,r=[];r[0]=2;for(var o=0;o<i;o+=1){var l=t&&t[o]||0;r[o+1]=n[o]-l+256&255}return r}function gb(n,e,t){var i=n.length,r=[];r[0]=3;for(var o=0;o<i;o+=1){var l=n[o-e]||0,c=t&&t[o]||0;r[o+1]=n[o]+256-(l+c>>>1)&255}return r}function yb(n,e,t){var i=n.length,r=[];r[0]=4;for(var o=0;o<i;o+=1){var l=nM(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);r[o+1]=n[o]-l+256&255}return r}function nM(n,e,t){if(n===e&&e===t)return n;var i=Math.abs(e-t),r=Math.abs(n-t),o=Math.abs(n+e-t-t);return i<=r&&i<=o?n:r<=o?e:t}function iM(n){var e=n.map(function(t){return t.reduce(function(i,r){return i+Math.abs(r)},0)});return e.indexOf(Math.min.apply(null,e))}function _0(n,e,t){var i=e*t,r=Math.floor(i/8),o=16-(i-8*r+t),l=(1<<t)-1;return HE(n,r)>>o&l}function vb(n,e,t,i){var r=t*i,o=Math.floor(r/8),l=16-(r-8*o+i),c=(1<<i)-1,h=(e&c)<<l;(function(f,p,b){if(p+1<f.byteLength)f.setUint16(p,b,!1);else{var S=b>>8&255;f.setUint8(p,S)}})(n,o,HE(n,o)&~(c<<l)&65535|h)}function HE(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function rM(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,i=n[e++]|n[e++]<<8,r=n[e++],o=r>>7,l=1<<1+(7&r);n[e++],n[e++];var c=null,h=null;o&&(c=e,h=l,e+=3*l);var f=!0,p=[],b=0,S=null,x=0,D=null;for(this.width=t,this.height=i;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,D=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var O=n[e++];b=n[e++]|n[e++]<<8,S=n[e++],1&O||(S=null),x=O>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var B=n[e++]|n[e++]<<8,q=n[e++]|n[e++]<<8,X=n[e++]|n[e++]<<8,Z=n[e++]|n[e++]<<8,W=n[e++],ye=W>>6&1,de=1<<1+(7&W),G=c,V=h,L=!1;W>>7&&(L=!0,G=e,V=de,e+=3*de);var j=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}p.push({x:B,y:q,width:X,height:Z,has_local_palette:L,palette_offset:G,palette_size:V,data_offset:j,data_length:e-j,transparent_index:S,interlaced:!!ye,delay:b,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return D},this.frameInfo=function(k){if(k<0||k>=p.length)throw new Error("Frame index out of range.");return p[k]},this.decodeAndBlitFrameBGRA=function(k,F){var ce=this.frameInfo(k),Te=ce.width*ce.height;if(Te>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var le=new Uint8Array(Te);_b(n,ce.data_offset,le,Te);var ue=ce.palette_offset,ve=ce.transparent_index;ve===null&&(ve=256);var we=ce.width,We=t-we,ne=we,U=4*(ce.y*t+ce.x),J=4*((ce.y+ce.height)*t+ce.x),ie=U,fe=4*We;ce.interlaced===!0&&(fe+=4*t*7);for(var me=8,Ee=0,Pe=le.length;Ee<Pe;++Ee){var Me=le[Ee];if(ne===0&&(ne=we,(ie+=fe)>=J&&(fe=4*We+4*t*(me-1),ie=U+(we+We)*(me<<1),me>>=1)),Me===ve)ie+=4;else{var $e=n[ue+3*Me],it=n[ue+3*Me+1],lt=n[ue+3*Me+2];F[ie++]=lt,F[ie++]=it,F[ie++]=$e,F[ie++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(k,F){var ce=this.frameInfo(k),Te=ce.width*ce.height;if(Te>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var le=new Uint8Array(Te);_b(n,ce.data_offset,le,Te);var ue=ce.palette_offset,ve=ce.transparent_index;ve===null&&(ve=256);var we=ce.width,We=t-we,ne=we,U=4*(ce.y*t+ce.x),J=4*((ce.y+ce.height)*t+ce.x),ie=U,fe=4*We;ce.interlaced===!0&&(fe+=4*t*7);for(var me=8,Ee=0,Pe=le.length;Ee<Pe;++Ee){var Me=le[Ee];if(ne===0&&(ne=we,(ie+=fe)>=J&&(fe=4*We+4*t*(me-1),ie=U+(we+We)*(me<<1),me>>=1)),Me===ve)ie+=4;else{var $e=n[ue+3*Me],it=n[ue+3*Me+1],lt=n[ue+3*Me+2];F[ie++]=$e,F[ie++]=it,F[ie++]=lt,F[ie++]=255}--ne}}}function _b(n,e,t,i){for(var r=n[e++],o=1<<r,l=o+1,c=l+1,h=r+1,f=(1<<h)-1,p=0,b=0,S=0,x=n[e++],D=new Int32Array(4096),O=null;;){for(;p<16&&x!==0;)b|=n[e++]<<p,p+=8,x===1?x=n[e++]:--x;if(p<h)break;var B=b&f;if(b>>=h,p-=h,B!==o){if(B===l)break;for(var q=B<c?B:O,X=0,Z=q;Z>o;)Z=D[Z]>>8,++X;var W=Z;if(S+X+(q!==B?1:0)>i)return void pi.log("Warning, gif stream longer than expected.");t[S++]=W;var ye=S+=X;for(q!==B&&(t[S++]=W),Z=q;X--;)Z=D[Z],t[--ye]=255&Z,Z>>=8;O!==null&&c<4096&&(D[c++]=O<<8|W,c>=f+1&&h<12&&(++h,f=f<<1|1)),O=B}else c=l+1,f=(1<<(h=r+1))-1,O=null}return S!==i&&pi.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function b0(n){var e,t,i,r,o,l=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),b=new Array(65535),S=new Array(65535),x=new Array(64),D=new Array(64),O=[],B=0,q=7,X=new Array(64),Z=new Array(64),W=new Array(64),ye=new Array(256),de=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(U,J){for(var ie=0,fe=0,me=new Array,Ee=1;Ee<=16;Ee++){for(var Pe=1;Pe<=U[Ee];Pe++)me[J[fe]]=[],me[J[fe]][0]=ie,me[J[fe]][1]=Ee,fe++,ie++;ie*=2}return me}function ue(U){for(var J=U[0],ie=U[1]-1;ie>=0;)J&1<<ie&&(B|=1<<q),ie--,--q<0&&(B==255?(ve(255),ve(0)):ve(B),q=7,B=0)}function ve(U){O.push(U)}function we(U){ve(U>>8&255),ve(255&U)}function We(U,J,ie,fe,me){for(var Ee,Pe=me[0],Me=me[240],$e=(function(_e,at){var qe,He,pe,Ve,Ct,ft,xt,Lt,mt,$t,bt=0;for(mt=0;mt<8;++mt){qe=_e[bt],He=_e[bt+1],pe=_e[bt+2],Ve=_e[bt+3],Ct=_e[bt+4],ft=_e[bt+5],xt=_e[bt+6];var ti=qe+(Lt=_e[bt+7]),Wt=qe-Lt,Ot=He+xt,Yt=He-xt,tn=pe+ft,Pt=pe-ft,Mn=Ve+Ct,Gt=Ve-Ct,jt=ti+Mn,kn=ti-Mn,Mt=Ot+tn,It=Ot-tn;_e[bt]=jt+Mt,_e[bt+4]=jt-Mt;var cn=.707106781*(It+kn);_e[bt+2]=kn+cn,_e[bt+6]=kn-cn;var gr=.382683433*((jt=Gt+Pt)-(It=Yt+Wt)),rr=.5411961*jt+gr,Os=1.306562965*It+gr,Ki=.707106781*(Mt=Pt+Yt),kt=Wt+Ki,oo=Wt-Ki;_e[bt+5]=oo+rr,_e[bt+3]=oo-rr,_e[bt+1]=kt+Os,_e[bt+7]=kt-Os,bt+=8}for(bt=0,mt=0;mt<8;++mt){qe=_e[bt],He=_e[bt+8],pe=_e[bt+16],Ve=_e[bt+24],Ct=_e[bt+32],ft=_e[bt+40],xt=_e[bt+48];var Yr=qe+(Lt=_e[bt+56]),Rr=qe-Lt,Lr=He+xt,jn=He-xt,ni=pe+ft,Oi=pe-ft,yr=Ve+Ct,sr=Ve-Ct,Un=Yr+yr,Kn=Yr-yr,Fi=Lr+ni,Mr=Lr-ni;_e[bt]=Un+Fi,_e[bt+32]=Un-Fi;var cs=.707106781*(Mr+Kn);_e[bt+16]=Kn+cs,_e[bt+48]=Kn-cs;var Eo=.382683433*((Un=sr+Oi)-(Mr=jn+Rr)),As=.5411961*Un+Eo,Dr=1.306562965*Mr+Eo,ao=.707106781*(Fi=Oi+jn),Kr=Rr+ao,vr=Rr-ao;_e[bt+40]=vr+As,_e[bt+24]=vr-As,_e[bt+8]=Kr+Dr,_e[bt+56]=Kr-Dr,bt++}for(mt=0;mt<64;++mt)$t=_e[mt]*at[mt],x[mt]=$t>0?$t+.5|0:$t-.5|0;return x})(U,J),it=0;it<64;++it)D[G[it]]=$e[it];var lt=D[0]-ie;ie=D[0],lt==0?ue(fe[0]):(ue(fe[S[Ee=32767+lt]]),ue(b[Ee]));for(var ut=63;ut>0&&D[ut]==0;)ut--;if(ut==0)return ue(Pe),ie;for(var pt,re=1;re<=ut;){for(var ke=re;D[re]==0&&re<=ut;)++re;var st=re-ke;if(st>=16){pt=st>>4;for(var he=1;he<=pt;++he)ue(Me);st&=15}Ee=32767+D[re],ue(me[(st<<4)+S[Ee]]),ue(b[Ee]),re++}return ut!=63&&ue(Pe),ie}function ne(U){U=Math.min(Math.max(U,1),100),o!=U&&((function(J){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var me=l((ie[fe]*J+50)/100);me=Math.min(Math.max(me,1),255),c[G[fe]]=me}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var Me=l((Ee[Pe]*J+50)/100);Me=Math.min(Math.max(Me,1),255),h[G[Pe]]=Me}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],it=0,lt=0;lt<8;lt++)for(var ut=0;ut<8;ut++)f[it]=1/(c[G[it]]*$e[lt]*$e[ut]*8),p[it]=1/(h[G[it]]*$e[lt]*$e[ut]*8),it++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),o=U)}this.encode=function(U,J){J&&ne(J),O=new Array,B=0,q=7,we(65496),we(65504),we(16),ve(74),ve(70),ve(73),ve(70),ve(0),ve(1),ve(1),ve(0),we(1),we(1),ve(0),ve(0),(function(){we(65499),we(132),ve(0);for(var He=0;He<64;He++)ve(c[He]);ve(1);for(var pe=0;pe<64;pe++)ve(h[pe])})(),(function(He,pe){we(65472),we(17),ve(8),we(pe),we(He),ve(3),ve(1),ve(17),ve(0),ve(2),ve(17),ve(1),ve(3),ve(17),ve(1)})(U.width,U.height),(function(){we(65476),we(418),ve(0);for(var He=0;He<16;He++)ve(V[He+1]);for(var pe=0;pe<=11;pe++)ve(L[pe]);ve(16);for(var Ve=0;Ve<16;Ve++)ve(j[Ve+1]);for(var Ct=0;Ct<=161;Ct++)ve(I[Ct]);ve(1);for(var ft=0;ft<16;ft++)ve(k[ft+1]);for(var xt=0;xt<=11;xt++)ve(F[xt]);ve(17);for(var Lt=0;Lt<16;Lt++)ve(ce[Lt+1]);for(var mt=0;mt<=161;mt++)ve(Te[mt])})(),we(65498),we(12),ve(3),ve(1),ve(0),ve(2),ve(17),ve(3),ve(17),ve(0),ve(63),ve(0);var ie=0,fe=0,me=0;B=0,q=7,this.encode.displayName="_encode_";for(var Ee,Pe,Me,$e,it,lt,ut,pt,re,ke=U.data,st=U.width,he=U.height,_e=4*st,at=0;at<he;){for(Ee=0;Ee<_e;){for(it=_e*at+Ee,ut=-1,pt=0,re=0;re<64;re++)lt=it+(pt=re>>3)*_e+(ut=4*(7&re)),at+pt>=he&&(lt-=_e*(at+1+pt-he)),Ee+ut>=_e&&(lt-=Ee+ut-_e+4),Pe=ke[lt++],Me=ke[lt++],$e=ke[lt++],X[re]=(de[Pe]+de[Me+256|0]+de[$e+512|0]>>16)-128,Z[re]=(de[Pe+768|0]+de[Me+1024|0]+de[$e+1280|0]>>16)-128,W[re]=(de[Pe+1280|0]+de[Me+1536|0]+de[$e+1792|0]>>16)-128;ie=We(X,f,ie,e,i),fe=We(Z,p,fe,t,r),me=We(W,p,me,t,r),Ee+=32}at+=8}if(q>=0){var qe=[];qe[1]=q+1,qe[0]=(1<<q+1)-1,ue(qe)}return we(65497),new Uint8Array(O)},n=n||50,(function(){for(var U=String.fromCharCode,J=0;J<256;J++)ye[J]=U(J)})(),e=le(V,L),t=le(k,F),i=le(j,I),r=le(ce,Te),(function(){for(var U=1,J=2,ie=1;ie<=15;ie++){for(var fe=U;fe<J;fe++)S[32767+fe]=ie,b[32767+fe]=[],b[32767+fe][1]=ie,b[32767+fe][0]=fe;for(var me=-(J-1);me<=-U;me++)S[32767+me]=ie,b[32767+me]=[],b[32767+me][1]=ie,b[32767+me][0]=J-1+me;U<<=1,J<<=1}})(),(function(){for(var U=0;U<256;U++)de[U]=19595*U,de[U+256|0]=38470*U,de[U+512|0]=7471*U+32768,de[U+768|0]=-11059*U,de[U+1024|0]=-21709*U,de[U+1280|0]=32768*U+8421375,de[U+1536|0]=-27439*U,de[U+1792|0]=-5329*U})(),ne(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function pa(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bb(n){function e(L){if(!L)throw Error("assert :P")}function t(L,j,I){for(var k=0;4>k;k++)if(L[j+k]!=I.charCodeAt(k))return!0;return!1}function i(L,j,I,k,F){for(var ce=0;ce<F;ce++)L[j+ce]=I[k+ce]}function r(L,j,I,k){for(var F=0;F<k;F++)L[j+F]=I}function o(L){return new Int32Array(L)}function l(L,j){for(var I=[],k=0;k<L;k++)I.push(new j);return I}function c(L,j){var I=[];return(function k(F,ce,Te){for(var le=Te[ce],ue=0;ue<le&&(F.push(Te.length>ce+1?[]:new j),!(Te.length<ce+1));ue++)k(F[ue],ce+1,Te)})(I,0,L),I}var h=function(){var L=this;function j(g,w){for(var N=1<<w-1>>>0;g&N;)N>>>=1;return N?(g&N-1)+N:g}function I(g,w,N,R,z){e(!(R%N));do g[w+(R-=N)]=z;while(0<R)}function k(g,w,N,R,z){if(e(2328>=z),512>=z)var $=o(512);else if(($=o(z))==null)return 0;return(function(Y,Q,te,ae,xe,De){var se,Ae,Re=Q,je=1<<te,Le=o(16),Ge=o(16);for(e(xe!=0),e(ae!=null),e(Y!=null),e(0<te),Ae=0;Ae<xe;++Ae){if(15<ae[Ae])return 0;++Le[ae[Ae]]}if(Le[0]==xe)return 0;for(Ge[1]=0,se=1;15>se;++se){if(Le[se]>1<<se)return 0;Ge[se+1]=Ge[se]+Le[se]}for(Ae=0;Ae<xe;++Ae)se=ae[Ae],0<ae[Ae]&&(De[Ge[se]++]=Ae);if(Ge[15]==1)return(ae=new F).g=0,ae.value=De[0],I(Y,Re,1,je,ae),je;var Je,rt=-1,et=je-1,At=0,gt=1,Zt=1,wt=1<<te;for(Ae=0,se=1,xe=2;se<=te;++se,xe<<=1){if(gt+=Zt<<=1,0>(Zt-=Le[se]))return 0;for(;0<Le[se];--Le[se])(ae=new F).g=se,ae.value=De[Ae++],I(Y,Re+At,xe,wt,ae),At=j(At,se)}for(se=te+1,xe=2;15>=se;++se,xe<<=1){if(gt+=Zt<<=1,0>(Zt-=Le[se]))return 0;for(;0<Le[se];--Le[se]){if(ae=new F,(At&et)!=rt){for(Re+=wt,Je=1<<(rt=se)-te;15>rt&&!(0>=(Je-=Le[rt]));)++rt,Je<<=1;je+=wt=1<<(Je=rt-te),Y[Q+(rt=At&et)].g=Je+te,Y[Q+rt].value=Re-Q-rt}ae.g=se-te,ae.value=De[Ae++],I(Y,Re+(At>>te),xe,wt,ae),At=j(At,se)}}return gt!=2*Ge[15]-1?0:je})(g,w,N,R,z,$)}function F(){this.value=this.g=0}function ce(){this.value=this.g=0}function Te(){this.G=l(5,F),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ma,ce)}function le(g,w,N,R){e(g!=null),e(w!=null),e(2147483648>R),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=N,g.Jd=w,g.Yc=N+R,g.Zc=4<=R?N+R-4+1:N,Pe(g)}function ue(g,w){for(var N=0;0<w--;)N|=$e(g,128)<<w;return N}function ve(g,w){var N=ue(g,w);return Me(g)?-N:N}function we(g,w,N,R){var z,$=0;for(e(g!=null),e(w!=null),e(4294967288>R),g.Sb=R,g.Ra=0,g.u=0,g.h=0,4<R&&(R=4),z=0;z<R;++z)$+=w[N+z]<<8*z;g.Ra=$,g.bb=R,g.oa=w,g.pa=N}function We(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Mo-8>>>0,++g.bb,g.u-=8;fe(g)&&(g.h=1,g.u=0)}function ne(g,w){if(e(0<=w),!g.h&&w<=ns){var N=ie(g)&ms[w];return g.u+=w,We(g),N}return g.h=1,g.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(g){return g.Ra>>>(g.u&Mo-1)>>>0}function fe(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Mo}function me(g,w){g.u=w,g.h=fe(g)}function Ee(g){g.u>=Do&&(e(g.u>=Do),We(g))}function Pe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Me(g){return ue(g,1)}function $e(g,w){var N=g.Ca;0>g.b&&Pe(g);var R=g.b,z=N*w>>>8,$=(g.I>>>R>z)+0;for($?(N-=z,g.I-=z+1<<R>>>0):N=z+1,R=N,z=0;256<=R;)z+=8,R>>=8;return R=7^z+ta[R],g.b-=R,g.Ca=(N<<R)-1,$}function it(g,w,N){g[w+0]=N>>24&255,g[w+1]=N>>16&255,g[w+2]=N>>8&255,g[w+3]=255&N}function lt(g,w){return g[w+0]|g[w+1]<<8}function ut(g,w){return lt(g,w)|g[w+2]<<16}function pt(g,w){return lt(g,w)|lt(g,w+2)<<16}function re(g,w){var N=1<<w;return e(g!=null),e(0<w),g.X=o(N),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function ke(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),i(w.X,0,g.X,0,1<<w.Xa)}function st(){this.X=[],this.Xa=this.Mb=0}function he(g,w,N,R){e(N!=null),e(R!=null);var z=N[0],$=R[0];return z==0&&(z=(g*$+w/2)/w),$==0&&($=(w*z+g/2)/g),0>=z||0>=$?0:(N[0]=z,R[0]=$,1)}function _e(g,w){return g+(1<<w)-1>>>w}function at(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function qe(g,w){L[w]=function(N,R,z,$,Y,Q,te){var ae;for(ae=0;ae<Y;++ae){var xe=L[g](Q[te+ae-1],z,$+ae);Q[te+ae]=at(N[R+ae],xe)}}}function He(){this.ud=this.hd=this.jd=0}function pe(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Ve(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Ct(g,w){return Ve(g+(g-w+.5>>1))}function ft(g,w,N){return Math.abs(w-N)-Math.abs(g-N)}function xt(g,w,N,R,z,$,Y){for(R=$[Y-1],N=0;N<z;++N)$[Y+N]=R=at(g[w+N],R)}function Lt(g,w,N,R,z){var $;for($=0;$<N;++$){var Y=g[w+$],Q=Y>>8&255,te=16711935&(te=(te=16711935&Y)+((Q<<16)+Q));R[z+$]=(4278255360&Y)+te>>>0}}function mt(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function $t(g,w,N,R,z,$){var Y;for(Y=0;Y<R;++Y){var Q=w[N+Y],te=Q>>>8,ae=Q,xe=255&(xe=(xe=Q>>>16)+((g.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(g.hd<<24>>24)*(te<<24>>24)>>>5)+((g.ud<<24>>24)*(xe<<24>>24)>>>5)),z[$+Y]=(4278255360&Q)+(xe<<16)+ae}}function bt(g,w,N,R,z){L[w]=function($,Y,Q,te,ae,xe,De,se,Ae){for(te=De;te<se;++te)for(De=0;De<Ae;++De)ae[xe++]=z(Q[R($[Y++])])},L[g]=function($,Y,Q,te,ae,xe,De){var se=8>>$.b,Ae=$.Ea,Re=$.K[0],je=$.w;if(8>se)for($=(1<<$.b)-1,je=(1<<se)-1;Y<Q;++Y){var Le,Ge=0;for(Le=0;Le<Ae;++Le)Le&$||(Ge=R(te[ae++])),xe[De++]=z(Re[Ge&je]),Ge>>=se}else L["VP8LMapColor"+N](te,ae,Re,je,xe,De,Y,Q,Ae)}}function ti(g,w,N,R,z){for(N=w+N;w<N;){var $=g[w++];R[z++]=$>>16&255,R[z++]=$>>8&255,R[z++]=255&$}}function Wt(g,w,N,R,z){for(N=w+N;w<N;){var $=g[w++];R[z++]=$>>16&255,R[z++]=$>>8&255,R[z++]=255&$,R[z++]=$>>24&255}}function Ot(g,w,N,R,z){for(N=w+N;w<N;){var $=(Y=g[w++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;R[z++]=$,R[z++]=Y}}function Yt(g,w,N,R,z){for(N=w+N;w<N;){var $=(Y=g[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;R[z++]=$,R[z++]=Y}}function tn(g,w,N,R,z){for(N=w+N;w<N;){var $=g[w++];R[z++]=255&$,R[z++]=$>>8&255,R[z++]=$>>16&255}}function Pt(g,w,N,R,z,$){if($==0)for(N=w+N;w<N;)it(R,(($=g[w++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),z+=32;else i(R,z,g,w,N)}function Mn(g,w){L[w][0]=L[g+"0"],L[w][1]=L[g+"1"],L[w][2]=L[g+"2"],L[w][3]=L[g+"3"],L[w][4]=L[g+"4"],L[w][5]=L[g+"5"],L[w][6]=L[g+"6"],L[w][7]=L[g+"7"],L[w][8]=L[g+"8"],L[w][9]=L[g+"9"],L[w][10]=L[g+"10"],L[w][11]=L[g+"11"],L[w][12]=L[g+"12"],L[w][13]=L[g+"13"],L[w][14]=L[g+"0"],L[w][15]=L[g+"0"]}function Gt(g){return g==Vu||g==wc||g==$l||g==xc}function jt(){this.eb=[],this.size=this.A=this.fb=0}function kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jt,this.f.kb=new kn,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function rr(g,w){var N=g.T,R=w.ba.f.RGBA,z=R.eb,$=R.fb+g.ka*R.A,Y=Ar[w.ba.S],Q=g.y,te=g.O,ae=g.f,xe=g.N,De=g.ea,se=g.W,Ae=w.cc,Re=w.dc,je=w.Mc,Le=w.Nc,Ge=g.ka,Je=g.ka+g.T,rt=g.U,et=rt+1>>1;for(Ge==0?Y(Q,te,null,null,ae,xe,De,se,ae,xe,De,se,z,$,null,null,rt):(Y(w.ec,w.fc,Q,te,Ae,Re,je,Le,ae,xe,De,se,z,$-R.A,z,$,rt),++N);Ge+2<Je;Ge+=2)Ae=ae,Re=xe,je=De,Le=se,xe+=g.Rc,se+=g.Rc,$+=2*R.A,Y(Q,(te+=2*g.fa)-g.fa,Q,te,Ae,Re,je,Le,ae,xe,De,se,z,$-R.A,z,$,rt);return te+=g.fa,g.j+Je<g.o?(i(w.ec,w.fc,Q,te,rt),i(w.cc,w.dc,ae,xe,et),i(w.Mc,w.Nc,De,se,et),N--):1&Je||Y(Q,te,null,null,ae,xe,De,se,ae,xe,De,se,z,$+R.A,null,null,rt),N}function Os(g,w,N){var R=g.F,z=[g.J];if(R!=null){var $=g.U,Y=w.ba.S,Q=Y==Fu||Y==$l;w=w.ba.f.RGBA;var te=[0],ae=g.ka;te[0]=g.T,g.Kb&&(ae==0?--te[0]:(--ae,z[0]-=g.width),g.j+g.ka+g.T==g.o&&(te[0]=g.o-g.j-ae));var xe=w.eb;ae=w.fb+ae*w.A,g=Pu(R,z[0],g.width,$,te,xe,ae+(Q?0:3),w.A),e(N==te),g&&Gt(Y)&&cl(xe,ae,Q,$,te,w.A)}return 0}function Ki(g){var w=g.ma,N=w.ba.S,R=11>N,z=N==Vr||N==js||N==Fu||N==jl||N==12||Gt(N);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!ea(w.Oa,g,z?11:12))return 0;if(z&&Gt(N)&&Qt(),g.da)alert("todo:use_scaling");else{if(R){if(w.Ib=gr,g.Kb){if(N=g.U+1>>1,w.memory=o(g.U+2*N),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+N,w.Ib=rr,Qt()}}else alert("todo:EmitYUV");z&&(w.Jb=Os,R&&Fe())}if(R&&!Va){for(g=0;256>g;++g)Tr[g]=89858*(g-128)+Jl>>Xs,Tm[g]=-22014*(g-128)+Jl,ud[g]=-45773*(g-128),Nc[g]=113618*(g-128)+Jl>>Xs;for(g=pl;g<Fa;++g)w=76283*(g-16)+Jl>>Xs,Nm[g-pl]=Wr(w,255),Cm[g-pl]=Wr(w+8>>4,15);Va=1}return 1}function kt(g){var w=g.ma,N=g.U,R=g.T;return e(!(1&g.ka)),0>=N||0>=R?0:(N=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,N),w.Dc+=N,1)}function oo(g){g.ma.memory=null}function Yr(g,w,N,R){return ne(g,8)!=47?0:(w[0]=ne(g,14)+1,N[0]=ne(g,14)+1,R[0]=ne(g,1),ne(g,3)!=0?0:!g.h)}function Rr(g,w){if(4>g)return g+1;var N=g-2>>1;return(2+(1&g)<<N)+ne(w,N)+1}function Lr(g,w){return 120<w?w-120:1<=(N=((N=Ys[w-1])>>4)*g+(8-(15&N)))?N:1;var N}function jn(g,w,N){var R=ie(N),z=g[w+=255&R].g-8;return 0<z&&(me(N,N.u+8),R=ie(N),w+=g[w].value,w+=R&(1<<z)-1),me(N,N.u+g[w].g),g[w].value}function ni(g,w,N){return N.g+=g.g,N.value+=g.value<<w>>>0,e(8>=N.g),g.g}function Oi(g,w,N){var R=g.xc;return e((w=R==0?0:g.vc[g.md*(N>>R)+(w>>R)])<g.Wb),g.Ya[w]}function yr(g,w,N,R){var z=g.ab,$=g.c*w,Y=g.C;w=Y+w;var Q=N,te=R;for(R=g.Ta,N=g.Ua;0<z--;){var ae=g.gc[z],xe=Y,De=w,se=Q,Ae=te,Re=(te=R,Q=N,ae.Ea);switch(e(xe<De),e(De<=ae.nc),ae.hc){case 2:Mi(se,Ae,(De-xe)*Re,te,Q);break;case 0:var je=xe,Le=De,Ge=te,Je=Q,rt=(wt=ae).Ea;je==0&&(ql(se,Ae,null,null,1,Ge,Je),xt(se,Ae+1,0,0,rt-1,Ge,Je+1),Ae+=rt,Je+=rt,++je);for(var et=1<<wt.b,At=et-1,gt=_e(rt,wt.b),Zt=wt.K,wt=wt.w+(je>>wt.b)*gt;je<Le;){var gn=Zt,hi=wt,sn=1;for(Hl(se,Ae,Ge,Je-rt,1,Ge,Je);sn<rt;){var yt=(sn&~At)+et;yt>rt&&(yt=rt),(0,na[gn[hi++]>>8&15])(se,Ae+ +sn,Ge,Je+sn-rt,yt-sn,Ge,Je+sn),sn=yt}Ae+=rt,Je+=rt,++je&At||(wt+=gt)}De!=ae.nc&&i(te,Q-Re,te,Q+(De-xe-1)*Re,Re);break;case 1:for(Re=se,Le=Ae,rt=(se=ae.Ea)-(Je=se&~(Ge=(Ae=1<<ae.b)-1)),je=_e(se,ae.b),et=ae.K,ae=ae.w+(xe>>ae.b)*je;xe<De;){for(At=et,gt=ae,Zt=new He,wt=Le+Je,gn=Le+se;Le<wt;)mt(At[gt++],Zt),zl(Zt,Re,Le,Ae,te,Q),Le+=Ae,Q+=Ae;Le<gn&&(mt(At[gt++],Zt),zl(Zt,Re,Le,rt,te,Q),Le+=rt,Q+=rt),++xe&Ge||(ae+=je)}break;case 3:if(se==te&&Ae==Q&&0<ae.b){for(Le=te,se=Re=Q+(De-xe)*Re-(Je=(De-xe)*_e(ae.Ea,ae.b)),Ae=te,Ge=Q,je=[],Je=(rt=Je)-1;0<=Je;--Je)je[Je]=Ae[Ge+Je];for(Je=rt-1;0<=Je;--Je)Le[se+Je]=je[Je];gc(ae,xe,De,te,Re,te,Q)}else gc(ae,xe,De,se,Ae,te,Q)}Q=R,te=N}te!=N&&i(R,N,Q,te,$)}function sr(g,w){var N=g.V,R=g.Ba+g.c*g.C,z=w-g.C;if(e(w<=g.l.o),e(16>=z),0<z){var $=g.l,Y=g.Ta,Q=g.Ua,te=$.width;if(yr(g,z,N,R),z=Q=[Q],e((N=g.C)<(R=w)),e($.v<$.va),R>$.o&&(R=$.o),N<$.j){var ae=$.j-N;N=$.j,z[0]+=ae*te}if(N>=R?N=0:(z[0]+=4*$.v,$.ka=N-$.j,$.U=$.va-$.v,$.T=R-N,N=1),N){if(Q=Q[0],11>(N=g.ca).S){var xe=N.f.RGBA,De=(R=N.S,z=$.U,$=$.T,ae=xe.eb,xe.A),se=$;for(xe=xe.fb+g.Ma*xe.A;0<se--;){var Ae=Y,Re=Q,je=z,Le=ae,Ge=xe;switch(R){case _c:Gl(Ae,Re,je,Le,Ge);break;case Vr:ia(Ae,Re,je,Le,Ge);break;case Vu:ia(Ae,Re,je,Le,Ge),cl(Le,Ge,0,je,1,0);break;case bc:ll(Ae,Re,je,Le,Ge);break;case js:Pt(Ae,Re,je,Le,Ge,1);break;case wc:Pt(Ae,Re,je,Le,Ge,1),cl(Le,Ge,0,je,1,0);break;case Fu:Pt(Ae,Re,je,Le,Ge,0);break;case $l:Pt(Ae,Re,je,Le,Ge,0),cl(Le,Ge,1,je,1,0);break;case jl:ra(Ae,Re,je,Le,Ge);break;case xc:ra(Ae,Re,je,Le,Ge),Gs(Le,Ge,je,1,0);break;case Da:Uo(Ae,Re,je,Le,Ge);break;default:e(0)}Q+=te,xe+=De}g.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=N.height)}}g.C=w,e(g.C<=g.i)}function Un(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var N=g.Ya[w].G,R=g.Ya[w].H;if(0<N[1][R[1]+0].g||0<N[2][R[2]+0].g||0<N[3][R[3]+0].g)return 0}return 1}function Kn(g,w,N,R,z,$){if(g.Z!=0){var Y=g.qd,Q=g.rd;for(e(aa[g.Z]!=null);w<N;++w)aa[g.Z](Y,Q,R,z,R,z,$),Y=R,Q=z,z+=$;g.qd=Y,g.rd=Q}}function Fi(g,w){var N=g.l.ma,R=N.Z==0||N.Z==1?g.l.j:g.C;if(R=g.C<R?R:g.C,e(w<=g.l.o),w>R){var z=g.l.width,$=N.ca,Y=N.tb+z*R,Q=g.V,te=g.Ba+g.c*R,ae=g.gc;e(g.ab==1),e(ae[0].hc==3),ko(ae[0],R,w,Q,te,$,Y),Kn(N,R,w,$,Y,z)}g.C=g.Ma=w}function Mr(g,w,N,R,z,$,Y){var Q=g.$/R,te=g.$%R,ae=g.m,xe=g.s,De=N+g.$,se=De;z=N+R*z;var Ae=N+R*$,Re=280+xe.ua,je=g.Pb?Q:16777216,Le=0<xe.ua?xe.Wa:null,Ge=xe.wc,Je=De<Ae?Oi(xe,te,Q):null;e(g.C<$),e(Ae<=z);var rt=!1;e:for(;;){for(;rt||De<Ae;){var et=0;if(Q>=je){var At=De-N;e((je=g).Pb),je.wd=je.m,je.xd=At,0<je.s.ua&&ke(je.s.Wa,je.s.vb),je=Q+Pa}if(te&Ge||(Je=Oi(xe,te,Q)),e(Je!=null),Je.Qb&&(w[De]=Je.qb,rt=!0),!rt)if(Ee(ae),Je.jc){et=ae,At=w;var gt=De,Zt=Je.pd[ie(et)&Ma-1];e(Je.jc),256>Zt.g?(me(et,et.u+Zt.g),At[gt]=Zt.value,et=0):(me(et,et.u+Zt.g-256),e(256<=Zt.value),et=Zt.value),et==0&&(rt=!0)}else et=jn(Je.G[0],Je.H[0],ae);if(ae.h)break;if(rt||256>et){if(!rt)if(Je.nd)w[De]=(Je.qb|et<<8)>>>0;else{if(Ee(ae),rt=jn(Je.G[1],Je.H[1],ae),Ee(ae),At=jn(Je.G[2],Je.H[2],ae),gt=jn(Je.G[3],Je.H[3],ae),ae.h)break;w[De]=(gt<<24|rt<<16|et<<8|At)>>>0}if(rt=!1,++De,++te>=R&&(te=0,++Q,Y!=null&&Q<=$&&!(Q%16)&&Y(g,Q),Le!=null))for(;se<De;)et=w[se++],Le.X[(506832829*et&4294967295)>>>Le.Mb]=et}else if(280>et){if(et=Rr(et-256,ae),At=jn(Je.G[4],Je.H[4],ae),Ee(ae),At=Lr(R,At=Rr(At,ae)),ae.h)break;if(De-N<At||z-De<et)break e;for(gt=0;gt<et;++gt)w[De+gt]=w[De+gt-At];for(De+=et,te+=et;te>=R;)te-=R,++Q,Y!=null&&Q<=$&&!(Q%16)&&Y(g,Q);if(e(De<=z),te&Ge&&(Je=Oi(xe,te,Q)),Le!=null)for(;se<De;)et=w[se++],Le.X[(506832829*et&4294967295)>>>Le.Mb]=et}else{if(!(et<Re))break e;for(rt=et-280,e(Le!=null);se<De;)et=w[se++],Le.X[(506832829*et&4294967295)>>>Le.Mb]=et;et=De,e(!(rt>>>(At=Le).Xa)),w[et]=At.X[rt],rt=!0}rt||e(ae.h==fe(ae))}if(g.Pb&&ae.h&&De<z)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&ke(g.s.vb,g.s.Wa);else{if(ae.h)break e;Y!=null&&Y(g,Q>$?$:Q),g.a=0,g.$=De-N}return 1}return g.a=3,0}function cs(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Eo(){var g=new Bt;return g==null?null:(g.a=0,g.xb=Bf,Mn("Predictor","VP8LPredictors"),Mn("Predictor","VP8LPredictors_C"),Mn("PredictorAdd","VP8LPredictorsAdd"),Mn("PredictorAdd","VP8LPredictorsAdd_C"),Mi=Lt,zl=$t,Gl=ti,ia=Wt,ra=Ot,Uo=Yt,ll=tn,L.VP8LMapColor32b=Po,L.VP8LMapColor8b=xr,g)}function As(g,w,N,R,z){var $=1,Y=[g],Q=[w],te=R.m,ae=R.s,xe=null,De=0;e:for(;;){if(N)for(;$&&ne(te,1);){var se=Y,Ae=Q,Re=R,je=1,Le=Re.m,Ge=Re.gc[Re.ab],Je=ne(Le,2);if(Re.Oc&1<<Je)$=0;else{switch(Re.Oc|=1<<Je,Ge.hc=Je,Ge.Ea=se[0],Ge.nc=Ae[0],Ge.K=[null],++Re.ab,e(4>=Re.ab),Je){case 0:case 1:Ge.b=ne(Le,3)+2,je=As(_e(Ge.Ea,Ge.b),_e(Ge.nc,Ge.b),0,Re,Ge.K),Ge.K=Ge.K[0];break;case 3:var rt,et=ne(Le,8)+1,At=16<et?0:4<et?1:2<et?2:3;if(se[0]=_e(Ge.Ea,At),Ge.b=At,rt=je=As(et,1,0,Re,Ge.K)){var gt,Zt=et,wt=Ge,gn=1<<(8>>wt.b),hi=o(gn);if(hi==null)rt=0;else{var sn=wt.K[0],yt=wt.w;for(hi[0]=wt.K[0][0],gt=1;gt<1*Zt;++gt)hi[gt]=at(sn[yt+gt],hi[gt-1]);for(;gt<4*gn;++gt)hi[gt]=0;wt.K[0]=null,wt.K[0]=hi,rt=1}}je=rt;break;case 2:break;default:e(0)}$=je}}if(Y=Y[0],Q=Q[0],$&&ne(te,1)&&!($=1<=(De=ne(te,4))&&11>=De)){R.a=3;break e}var ct;if(ct=$)t:{var yi,Kt,un,Hn=R,Xi=Y,Nr=Q,oi=De,Bi=N,Br=Hn.m,qi=Hn.s,dn=[null],Nn=1,vi=0,Pn=Ks[oi];n:for(;;){if(Bi&&ne(Br,1)){var Qi=ne(Br,3)+2,_i=_e(Xi,Qi),Cn=_e(Nr,Qi),ki=_i*Cn;if(!As(_i,Cn,0,Hn,dn))break n;for(dn=dn[0],qi.xc=Qi,yi=0;yi<ki;++yi){var zn=dn[yi]>>8&65535;dn[yi]=zn,zn>=Nn&&(Nn=zn+1)}}if(Br.h)break n;for(Kt=0;5>Kt;++Kt){var Hi=hl[Kt];!Kt&&0<oi&&(Hi+=1<<oi),vi<Hi&&(vi=Hi)}var zi=l(Nn*Pn,F),Wn=Nn,Tn=l(Wn,Te);if(Tn==null)var qr=null;else e(65536>=Wn),qr=Tn;var Ti=o(vi);if(qr==null||Ti==null||zi==null){Hn.a=1;break n}var Vt=zi;for(yi=un=0;yi<Nn;++yi){var qt=qr[yi],In=qt.G,gs=qt.H,Qs=0,rs=1,Gi=0;for(Kt=0;5>Kt;++Kt){Hi=hl[Kt],In[Kt]=Vt,gs[Kt]=un,!Kt&&0<oi&&(Hi+=1<<oi);r:{var Ba,qa=Hi,Ic=Hn,ai=Ti,Hf=Vt,zf=un,Rc=0,la=Ic.m,Im=ne(la,1);if(r(ai,0,0,qa),Im){var Gf=ne(la,1)+1,jf=ne(la,1),Lc=ne(la,jf==0?1:8);ai[Lc]=1,Gf==2&&(ai[Lc=ne(la,8)]=1);var ur=1}else{var Ni=o(19),zu=ne(la,4)+4;if(19<zu){Ic.a=3;var Ha=0;break r}for(Ba=0;Ba<zu;++Ba)Ni[Bu[Ba]]=ne(la,3);var Xl=void 0,ml=void 0,Vo=Ic,Mc=Ni,Ql=qa,Dc=ai,Pc=0,ua=Vo.m,$f=8,Yf=l(128,F);i:for(;k(Yf,0,7,Mc,19);){if(ne(ua,1)){var cd=2+2*ne(ua,3);if((Xl=2+ne(ua,cd))>Ql)break i}else Xl=Ql;for(ml=0;ml<Ql&&Xl--;){Ee(ua);var Kf=Yf[0+(127&ie(ua))];me(ua,ua.u+Kf.g);var za=Kf.value;if(16>za)Dc[ml++]=za,za!=0&&($f=za);else{var fd=za==16,hd=za-16,dd=Yl[hd],Jf=ne(ua,$s[hd])+dd;if(ml+Jf>Ql)break i;for(var pd=fd?$f:0;0<Jf--;)Dc[ml++]=pd}}Pc=1;break i}Pc||(Vo.a=3),ur=Pc}(ur=ur&&!la.h)&&(Rc=k(Hf,zf,8,ai,qa)),ur&&Rc!=0?Ha=Rc:(Ic.a=3,Ha=0)}if(Ha==0)break n;if(rs&&Sc[Kt]==1&&(rs=Vt[un].g==0),Qs+=Vt[un].g,un+=Ha,3>=Kt){var gl,kc=Ti[0];for(gl=1;gl<Hi;++gl)Ti[gl]>kc&&(kc=Ti[gl]);Gi+=kc}}if(qt.nd=rs,qt.Qb=0,rs&&(qt.qb=(In[3][gs[3]+0].value<<24|In[1][gs[1]+0].value<<16|In[2][gs[2]+0].value)>>>0,Qs==0&&256>In[0][gs[0]+0].value&&(qt.Qb=1,qt.qb+=In[0][gs[0]+0].value<<8)),qt.jc=!qt.Qb&&6>Gi,qt.jc){var Gu,Bo=qt;for(Gu=0;Gu<Ma;++Gu){var ca=Gu,fa=Bo.pd[ca],Uc=Bo.G[0][Bo.H[0]+ca];256<=Uc.value?(fa.g=Uc.g+256,fa.value=Uc.value):(fa.g=0,fa.value=0,ca>>=ni(Uc,8,fa),ca>>=ni(Bo.G[1][Bo.H[1]+ca],16,fa),ca>>=ni(Bo.G[2][Bo.H[2]+ca],0,fa),ni(Bo.G[3][Bo.H[3]+ca],24,fa))}}}qi.vc=dn,qi.Wb=Nn,qi.Ya=qr,qi.yc=zi,ct=1;break t}ct=0}if(!($=ct)){R.a=3;break e}if(0<De){if(ae.ua=1<<De,!re(ae.Wa,De)){R.a=1,$=0;break e}}else ae.ua=0;var Oc=R,yl=Y,md=Q,Zl=Oc.s,eu=Zl.xc;if(Oc.c=yl,Oc.i=md,Zl.md=_e(yl,eu),Zl.wc=eu==0?-1:(1<<eu)-1,N){R.xb=ka;break e}if((xe=o(Y*Q))==null){R.a=1,$=0;break e}$=($=Mr(R,xe,0,Y,Q,Q,null))&&!te.h;break e}return $?(z!=null?z[0]=xe:(e(xe==null),e(N)),R.$=0,N||cs(ae)):cs(ae),$}function Dr(g,w){var N=g.c*g.i,R=N+w+16*w;return e(g.c<=w),g.V=o(R),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+N+w,1)}function ao(g,w){var N=g.C,R=w-N,z=g.V,$=g.Ba+g.c*N;for(e(w<=g.l.o);0<R;){var Y=16<R?16:R,Q=g.l.ma,te=g.l.width,ae=te*Y,xe=Q.ca,De=Q.tb+te*N,se=g.Ta,Ae=g.Ua;yr(g,Y,z,$),Ds(se,Ae,xe,De,ae),Kn(Q,N,N+Y,xe,De,te),R-=Y,z+=Y*g.c,N+=Y}e(N==w),g.C=g.Ma=w}function Kr(){this.ub=this.yd=this.td=this.Rb=0}function vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jr(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function fs(){this.Yb=(function(){var g=[];return(function w(N,R,z){for(var $=z[R],Y=0;Y<$&&(N.push(z.length>R+1?[]:0),!(z.length<R+1));Y++)w(N[Y],R+1,z)})(g,0,[3,11]),g})()}function gi(){this.jb=o(3),this.Wc=c([4,8],fs),this.Xc=c([4,17],fs)}function Ea(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function hs(){this.Na=this.la=0}function Ts(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Aa(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new Yo),this.aa=0,this.l=new or}function Ta(){this.y=o(16),this.f=o(8),this.ea=o(8)}function tl(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new Kr,this.Kc=new vr,this.ed=new Ea,this.Qa=new Jr,this.Ic=this.$c=this.Aa=0,this.D=new Aa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,U),this.ia=0,this.pb=l(4,Ts),this.Pa=new gi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ta),this.Hd=0,this.rb=Array(new hs),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yo),this.L=this.aa=0,this.gd=c([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wr(g,w){return 0>g?0:g>w?w:g}function or(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Si(){var g=new tl;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Ps||(Ps=bn)),g}function pn(g,w,N){return g.a==0&&(g.a=w,g.sc=N,g.cb=0),0}function lo(g,w,N){return 3<=N&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function ds(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return pn(g,2,"null VP8Io passed to VP8GetHeaders()");var N=w.data,R=w.w,z=w.ha;if(4>z)return pn(g,7,"Truncated header.");var $=N[R+0]|N[R+1]<<8|N[R+2]<<16,Y=g.Od;if(Y.Rb=!(1&$),Y.td=$>>1&7,Y.yd=$>>4&1,Y.ub=$>>5,3<Y.td)return pn(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return pn(g,4,"Frame not displayable.");R+=3,z-=3;var Q=g.Kc;if(Y.Rb){if(7>z)return pn(g,7,"cannot parse picture header");if(!lo(N,R,z))return pn(g,3,"Bad code word");Q.c=16383&(N[R+4]<<8|N[R+3]),Q.Td=N[R+4]>>6,Q.i=16383&(N[R+6]<<8|N[R+5]),Q.Ud=N[R+6]>>6,R+=7,z-=7,g.za=Q.c+15>>4,g.Ub=Q.i+15>>4,w.width=Q.c,w.height=Q.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,r(($=g.Pa).jb,0,255,$.jb.length),e(($=g.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,r($.Zb,0,0,$.Zb.length),r($.Lb,0,0,$.Lb)}if(Y.ub>z)return pn(g,7,"bad partition length");le($=g.m,N,R,Y.ub),R+=Y.ub,z-=Y.ub,Y.Rb&&(Q.Ld=Me($),Q.Kd=Me($)),Q=g.Qa;var te,ae=g.Pa;if(e($!=null),e(Q!=null),Q.Cb=Me($),Q.Cb){if(Q.Bb=Me($),Me($)){for(Q.Fb=Me($),te=0;4>te;++te)Q.Zb[te]=Me($)?ve($,7):0;for(te=0;4>te;++te)Q.Lb[te]=Me($)?ve($,6):0}if(Q.Bb)for(te=0;3>te;++te)ae.jb[te]=Me($)?ue($,8):255}else Q.Bb=0;if($.Ka)return pn(g,3,"cannot parse segment header");if((Q=g.ed).zd=Me($),Q.Tb=ue($,6),Q.wb=ue($,3),Q.Pc=Me($),Q.Pc&&Me($)){for(ae=0;4>ae;++ae)Me($)&&(Q.vd[ae]=ve($,6));for(ae=0;4>ae;++ae)Me($)&&(Q.od[ae]=ve($,6))}if(g.L=Q.Tb==0?0:Q.zd?1:2,$.Ka)return pn(g,3,"cannot parse filter header");var xe=z;if(z=te=R,R=te+xe,Q=xe,g.Xb=(1<<ue(g.m,2))-1,xe<3*(ae=g.Xb))N=7;else{for(te+=3*ae,Q-=3*ae,xe=0;xe<ae;++xe){var De=N[z+0]|N[z+1]<<8|N[z+2]<<16;De>Q&&(De=Q),le(g.Jc[+xe],N,te,De),te+=De,Q-=De,z+=3}le(g.Jc[+ae],N,te,Q),N=te<R?0:5}if(N!=0)return pn(g,N,"cannot parse partitions");for(N=ue(te=g.m,7),z=Me(te)?ve(te,4):0,R=Me(te)?ve(te,4):0,Q=Me(te)?ve(te,4):0,ae=Me(te)?ve(te,4):0,te=Me(te)?ve(te,4):0,xe=g.Qa,De=0;4>De;++De){if(xe.Cb){var se=xe.Zb[De];xe.Fb||(se+=N)}else{if(0<De){g.pb[De]=g.pb[0];continue}se=N}var Ae=g.pb[De];Ae.Sc[0]=Js[Wr(se+z,127)],Ae.Sc[1]=Ws[Wr(se+0,127)],Ae.Eb[0]=2*Js[Wr(se+R,127)],Ae.Eb[1]=101581*Ws[Wr(se+Q,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=Js[Wr(se+ae,117)],Ae.Qc[1]=Ws[Wr(se+te,127)],Ae.lc=se+te}if(!Y.Rb)return pn(g,4,"Not a key frame.");for(Me($),Y=g.Pa,N=0;4>N;++N){for(z=0;8>z;++z)for(R=0;3>R;++R)for(Q=0;11>Q;++Q)ae=$e($,fi[N][z][R][Q])?ue($,8):ld[N][z][R][Q],Y.Wc[N][z].Yb[R][Q]=ae;for(z=0;17>z;++z)Y.Xc[N][z]=Y.Wc[N][yn[z]]}return g.kc=Me($),g.kc&&(g.Bd=ue($,8)),g.cb=1}function bn(g,w,N,R,z,$,Y){var Q=w[z].Yb[N];for(N=0;16>z;++z){if(!$e(g,Q[N+0]))return z;for(;!$e(g,Q[N+1]);)if(Q=w[++z].Yb[0],N=0,z==16)return 16;var te=w[z+1].Yb;if($e(g,Q[N+2])){var ae=g,xe=0;if($e(ae,(se=Q)[(De=N)+3]))if($e(ae,se[De+6])){for(Q=0,De=2*(xe=$e(ae,se[De+8]))+(se=$e(ae,se[De+9+xe])),xe=0,se=ad[De];se[Q];++Q)xe+=xe+$e(ae,se[Q]);xe+=3+(8<<De)}else $e(ae,se[De+7])?(xe=7+2*$e(ae,165),xe+=$e(ae,145)):xe=5+$e(ae,159);else xe=$e(ae,se[De+4])?3+$e(ae,se[De+5]):2;Q=te[2]}else xe=1,Q=te[1];te=Y+Vf[z],0>(ae=g).b&&Pe(ae);var De,se=ae.b,Ae=(De=ae.Ca>>1)-(ae.I>>se)>>31;--ae.b,ae.Ca+=Ae,ae.Ca|=1,ae.I-=(De+1&Ae)<<se,$[te]=((xe^Ae)-Ae)*R[(0<z)+0]}return 16}function Ao(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,r(g.zc,0,0,g.zc.length),g.ja=0}function Ri(g,w,N,R,z){z=g[w+N+32*R]+(z>>3),g[w+N+32*R]=-256&z?0>z?0:255:z}function ci(g,w,N,R,z,$){Ri(g,w,0,N,R+z),Ri(g,w,1,N,R+$),Ri(g,w,2,N,R-$),Ri(g,w,3,N,R-z)}function Ei(g){return(20091*g>>16)+g}function Ko(g,w,N,R){var z,$=0,Y=o(16);for(z=0;4>z;++z){var Q=g[w+0]+g[w+8],te=g[w+0]-g[w+8],ae=(35468*g[w+4]>>16)-Ei(g[w+12]),xe=Ei(g[w+4])+(35468*g[w+12]>>16);Y[$+0]=Q+xe,Y[$+1]=te+ae,Y[$+2]=te-ae,Y[$+3]=Q-xe,$+=4,w++}for(z=$=0;4>z;++z)Q=(g=Y[$+0]+4)+Y[$+8],te=g-Y[$+8],ae=(35468*Y[$+4]>>16)-Ei(Y[$+12]),Ri(N,R,0,0,Q+(xe=Ei(Y[$+4])+(35468*Y[$+12]>>16))),Ri(N,R,1,0,te+ae),Ri(N,R,2,0,te-ae),Ri(N,R,3,0,Q-xe),$++,R+=32}function Vl(g,w,N,R){var z=g[w+0]+4,$=35468*g[w+4]>>16,Y=Ei(g[w+4]),Q=35468*g[w+1]>>16;ci(N,R,0,z+Y,g=Ei(g[w+1]),Q),ci(N,R,1,z+$,g,Q),ci(N,R,2,z-$,g,Q),ci(N,R,3,z-Y,g,Q)}function nl(g,w,N,R,z){Ko(g,w,N,R),z&&Ko(g,w+16,N,R+4)}function _r(g,w,N,R){sa(g,w+0,N,R,1),sa(g,w+32,N,R+128,1)}function il(g,w,N,R){var z;for(g=g[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)Ri(N,R,w,z,g)}function uo(g,w,N,R){g[w+0]&&Dn(g,w+0,N,R),g[w+16]&&Dn(g,w+16,N,R+4),g[w+32]&&Dn(g,w+32,N,R+128),g[w+48]&&Dn(g,w+48,N,R+128+4)}function Ji(g,w,N,R){var z,$=o(16);for(z=0;4>z;++z){var Y=g[w+0+z]+g[w+12+z],Q=g[w+4+z]+g[w+8+z],te=g[w+4+z]-g[w+8+z],ae=g[w+0+z]-g[w+12+z];$[0+z]=Y+Q,$[8+z]=Y-Q,$[4+z]=ae+te,$[12+z]=ae-te}for(z=0;4>z;++z)Y=(g=$[0+4*z]+3)+$[3+4*z],Q=$[1+4*z]+$[2+4*z],te=$[1+4*z]-$[2+4*z],ae=g-$[3+4*z],N[R+0]=Y+Q>>3,N[R+16]=ae+te>>3,N[R+32]=Y-Q>>3,N[R+48]=ae-te>>3,R+=64}function To(g,w,N){var R,z=w-32,$=Fr,Y=255-g[z-1];for(R=0;R<N;++R){var Q,te=$,ae=Y+g[w-1];for(Q=0;Q<N;++Q)g[w+Q]=te[ae+g[z+Q]];w+=32}}function rl(g,w){To(g,w,4)}function sl(g,w){To(g,w,8)}function Na(g,w){To(g,w,16)}function Ca(g,w){var N;for(N=0;16>N;++N)i(g,w+32*N,g,w-32,16)}function co(g,w){var N;for(N=16;0<N;--N)r(g,w,g[w-1],16),w+=32}function kr(g,w,N){var R;for(R=0;16>R;++R)r(w,N+32*R,g,16)}function Ns(g,w){var N,R=16;for(N=0;16>N;++N)R+=g[w-1+32*N]+g[w+N-32];kr(R>>5,g,w)}function fo(g,w){var N,R=8;for(N=0;16>N;++N)R+=g[w-1+32*N];kr(R>>4,g,w)}function Ur(g,w){var N,R=8;for(N=0;16>N;++N)R+=g[w+N-32];kr(R>>4,g,w)}function No(g,w){kr(128,g,w)}function Ft(g,w,N){return g+2*w+N+2>>2}function Jo(g,w){var N,R=w-32;for(R=new Uint8Array([Ft(g[R-1],g[R+0],g[R+1]),Ft(g[R+0],g[R+1],g[R+2]),Ft(g[R+1],g[R+2],g[R+3]),Ft(g[R+2],g[R+3],g[R+4])]),N=0;4>N;++N)i(g,w+32*N,R,0,R.length)}function Ia(g,w){var N=g[w-1],R=g[w-1+32],z=g[w-1+64],$=g[w-1+96];it(g,w+0,16843009*Ft(g[w-1-32],N,R)),it(g,w+32,16843009*Ft(N,R,z)),it(g,w+64,16843009*Ft(R,z,$)),it(g,w+96,16843009*Ft(z,$,$))}function Co(g,w){var N,R=4;for(N=0;4>N;++N)R+=g[w+N-32]+g[w-1+32*N];for(R>>=3,N=0;4>N;++N)r(g,w+32*N,R,4)}function Wi(g,w){var N=g[w-1+0],R=g[w-1+32],z=g[w-1+64],$=g[w-1-32],Y=g[w+0-32],Q=g[w+1-32],te=g[w+2-32],ae=g[w+3-32];g[w+0+96]=Ft(R,z,g[w-1+96]),g[w+1+96]=g[w+0+64]=Ft(N,R,z),g[w+2+96]=g[w+1+64]=g[w+0+32]=Ft($,N,R),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Ft(Y,$,N),g[w+3+64]=g[w+2+32]=g[w+1+0]=Ft(Q,Y,$),g[w+3+32]=g[w+2+0]=Ft(te,Q,Y),g[w+3+0]=Ft(ae,te,Q)}function Vi(g,w){var N=g[w+1-32],R=g[w+2-32],z=g[w+3-32],$=g[w+4-32],Y=g[w+5-32],Q=g[w+6-32],te=g[w+7-32];g[w+0+0]=Ft(g[w+0-32],N,R),g[w+1+0]=g[w+0+32]=Ft(N,R,z),g[w+2+0]=g[w+1+32]=g[w+0+64]=Ft(R,z,$),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Ft(z,$,Y),g[w+3+32]=g[w+2+64]=g[w+1+96]=Ft($,Y,Q),g[w+3+64]=g[w+2+96]=Ft(Y,Q,te),g[w+3+96]=Ft(Q,te,te)}function Wo(g,w){var N=g[w-1+0],R=g[w-1+32],z=g[w-1+64],$=g[w-1-32],Y=g[w+0-32],Q=g[w+1-32],te=g[w+2-32],ae=g[w+3-32];g[w+0+0]=g[w+1+64]=$+Y+1>>1,g[w+1+0]=g[w+2+64]=Y+Q+1>>1,g[w+2+0]=g[w+3+64]=Q+te+1>>1,g[w+3+0]=te+ae+1>>1,g[w+0+96]=Ft(z,R,N),g[w+0+64]=Ft(R,N,$),g[w+0+32]=g[w+1+96]=Ft(N,$,Y),g[w+1+32]=g[w+2+96]=Ft($,Y,Q),g[w+2+32]=g[w+3+96]=Ft(Y,Q,te),g[w+3+32]=Ft(Q,te,ae)}function On(g,w){var N=g[w+0-32],R=g[w+1-32],z=g[w+2-32],$=g[w+3-32],Y=g[w+4-32],Q=g[w+5-32],te=g[w+6-32],ae=g[w+7-32];g[w+0+0]=N+R+1>>1,g[w+1+0]=g[w+0+64]=R+z+1>>1,g[w+2+0]=g[w+1+64]=z+$+1>>1,g[w+3+0]=g[w+2+64]=$+Y+1>>1,g[w+0+32]=Ft(N,R,z),g[w+1+32]=g[w+0+96]=Ft(R,z,$),g[w+2+32]=g[w+1+96]=Ft(z,$,Y),g[w+3+32]=g[w+2+96]=Ft($,Y,Q),g[w+3+64]=Ft(Y,Q,te),g[w+3+96]=Ft(Q,te,ae)}function Xr(g,w){var N=g[w-1+0],R=g[w-1+32],z=g[w-1+64],$=g[w-1+96];g[w+0+0]=N+R+1>>1,g[w+2+0]=g[w+0+32]=R+z+1>>1,g[w+2+32]=g[w+0+64]=z+$+1>>1,g[w+1+0]=Ft(N,R,z),g[w+3+0]=g[w+1+32]=Ft(R,z,$),g[w+3+32]=g[w+1+64]=Ft(z,$,$),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=$}function Xo(g,w){var N=g[w-1+0],R=g[w-1+32],z=g[w-1+64],$=g[w-1+96],Y=g[w-1-32],Q=g[w+0-32],te=g[w+1-32],ae=g[w+2-32];g[w+0+0]=g[w+2+32]=N+Y+1>>1,g[w+0+32]=g[w+2+64]=R+N+1>>1,g[w+0+64]=g[w+2+96]=z+R+1>>1,g[w+0+96]=$+z+1>>1,g[w+3+0]=Ft(Q,te,ae),g[w+2+0]=Ft(Y,Q,te),g[w+1+0]=g[w+3+32]=Ft(N,Y,Q),g[w+1+32]=g[w+3+64]=Ft(R,N,Y),g[w+1+64]=g[w+3+96]=Ft(z,R,N),g[w+1+96]=Ft($,z,R)}function Cs(g,w){var N;for(N=0;8>N;++N)i(g,w+32*N,g,w-32,8)}function ol(g,w){var N;for(N=0;8>N;++N)r(g,w,g[w-1],8),w+=32}function Qr(g,w,N){var R;for(R=0;8>R;++R)r(w,N+32*R,g,8)}function ho(g,w){var N,R=8;for(N=0;8>N;++N)R+=g[w+N-32]+g[w-1+32*N];Qr(R>>4,g,w)}function Zr(g,w){var N,R=4;for(N=0;8>N;++N)R+=g[w+N-32];Qr(R>>3,g,w)}function Li(g,w){var N,R=4;for(N=0;8>N;++N)R+=g[w-1+32*N];Qr(R>>3,g,w)}function Fs(g,w){Qr(128,g,w)}function ar(g,w,N){var R=g[w-N],z=g[w+0],$=3*(z-R)+oa[1020+g[w-2*N]-g[w+N]],Y=Ou[112+($+4>>3)];g[w-N]=Fr[255+R+Ou[112+($+3>>3)]],g[w+0]=Fr[255+z-Y]}function Vs(g,w,N,R){var z=g[w+0],$=g[w+N];return Sr[255+g[w-2*N]-g[w-N]]>R||Sr[255+$-z]>R}function Io(g,w,N,R){return 4*Sr[255+g[w-N]-g[w+0]]+Sr[255+g[w-2*N]-g[w+N]]<=R}function Bs(g,w,N,R,z){var $=g[w-3*N],Y=g[w-2*N],Q=g[w-N],te=g[w+0],ae=g[w+N],xe=g[w+2*N],De=g[w+3*N];return 4*Sr[255+Q-te]+Sr[255+Y-ae]>R?0:Sr[255+g[w-4*N]-$]<=z&&Sr[255+$-Y]<=z&&Sr[255+Y-Q]<=z&&Sr[255+De-xe]<=z&&Sr[255+xe-ae]<=z&&Sr[255+ae-te]<=z}function qs(g,w,N,R){var z=2*R+1;for(R=0;16>R;++R)Io(g,w+R,N,z)&&ar(g,w+R,N)}function ps(g,w,N,R){var z=2*R+1;for(R=0;16>R;++R)Io(g,w+R*N,1,z)&&ar(g,w+R*N,1)}function Qo(g,w,N,R){var z;for(z=3;0<z;--z)qs(g,w+=4*N,N,R)}function Ra(g,w,N,R){var z;for(z=3;0<z;--z)ps(g,w+=4,N,R)}function es(g,w,N,R,z,$,Y,Q){for($=2*$+1;0<z--;){if(Bs(g,w,N,$,Y))if(Vs(g,w,N,Q))ar(g,w,N);else{var te=g,ae=w,xe=N,De=te[ae-2*xe],se=te[ae-xe],Ae=te[ae+0],Re=te[ae+xe],je=te[ae+2*xe],Le=27*(Je=oa[1020+3*(Ae-se)+oa[1020+De-Re]])+63>>7,Ge=18*Je+63>>7,Je=9*Je+63>>7;te[ae-3*xe]=Fr[255+te[ae-3*xe]+Je],te[ae-2*xe]=Fr[255+De+Ge],te[ae-xe]=Fr[255+se+Le],te[ae+0]=Fr[255+Ae-Le],te[ae+xe]=Fr[255+Re-Ge],te[ae+2*xe]=Fr[255+je-Je]}w+=R}}function Hs(g,w,N,R,z,$,Y,Q){for($=2*$+1;0<z--;){if(Bs(g,w,N,$,Y))if(Vs(g,w,N,Q))ar(g,w,N);else{var te=g,ae=w,xe=N,De=te[ae-xe],se=te[ae+0],Ae=te[ae+xe],Re=Ou[112+(4+(je=3*(se-De))>>3)],je=Ou[112+(je+3>>3)],Le=Re+1>>1;te[ae-2*xe]=Fr[255+te[ae-2*xe]+Le],te[ae-xe]=Fr[255+De+je],te[ae+0]=Fr[255+se-Re],te[ae+xe]=Fr[255+Ae-Le]}w+=R}}function al(g,w,N,R,z,$){es(g,w,N,1,16,R,z,$)}function Is(g,w,N,R,z,$){es(g,w,1,N,16,R,z,$)}function La(g,w,N,R,z,$){var Y;for(Y=3;0<Y;--Y)Hs(g,w+=4*N,N,1,16,R,z,$)}function A(g,w,N,R,z,$){var Y;for(Y=3;0<Y;--Y)Hs(g,w+=4,1,N,16,R,z,$)}function H(g,w,N,R,z,$,Y,Q){es(g,w,z,1,8,$,Y,Q),es(N,R,z,1,8,$,Y,Q)}function oe(g,w,N,R,z,$,Y,Q){es(g,w,1,z,8,$,Y,Q),es(N,R,1,z,8,$,Y,Q)}function be(g,w,N,R,z,$,Y,Q){Hs(g,w+4*z,z,1,8,$,Y,Q),Hs(N,R+4*z,z,1,8,$,Y,Q)}function Ne(g,w,N,R,z,$,Y,Q){Hs(g,w+4,1,z,8,$,Y,Q),Hs(N,R+4,1,z,8,$,Y,Q)}function Ye(){this.ba=new Mt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function vt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Et(){this.ua=0,this.Wa=new st,this.vb=new st,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Te,this.yc=new F}function Bt(){this.xb=this.a=0,this.l=new or,this.ca=new Mt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Et,this.ab=0,this.gc=l(4,vt),this.Oc=0}function Ut(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new or,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mn(g,w,N,R,z,$,Y){for(g=g==null?0:g[w+0],w=0;w<Y;++w)z[$+w]=g+N[R+w]&255,g=z[$+w]}function ii(g,w,N,R,z,$,Y){var Q;if(g==null)mn(null,null,N,R,z,$,Y);else for(Q=0;Q<Y;++Q)z[$+Q]=g[w+Q]+N[R+Q]&255}function $n(g,w,N,R,z,$,Y){if(g==null)mn(null,null,N,R,z,$,Y);else{var Q,te=g[w+0],ae=te,xe=te;for(Q=0;Q<Y;++Q)ae=xe+(te=g[w+Q])-ae,xe=N[R+Q]+(-256&ae?0>ae?0:255:ae)&255,ae=te,z[$+Q]=xe}}function v(g,w,N,R){var z=w.width,$=w.o;if(e(g!=null&&w!=null),0>N||0>=R||N+R>$)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new Ut,(Y=g.ga==null)||(Y=w.width*w.o,e(g.Gb.length==0),g.Gb=o(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var Q=g.Fa,te=g.P,ae=g.qc,xe=g.mb,De=g.nb,se=te+1,Ae=ae-1,Re=Y.l;if(e(Q!=null&&xe!=null&&w!=null),aa[0]=null,aa[1]=mn,aa[2]=ii,aa[3]=$n,Y.ca=xe,Y.tb=De,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=ae)w=0;else if(Y.$a=3&Q[te+0],Y.Z=Q[te+0]>>2&3,Y.Lc=Q[te+0]>>4&3,te=Q[te+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||te)w=0;else if(Re.put=kt,Re.ac=Ki,Re.bc=oo,Re.ma=Y,Re.width=w.width,Re.height=w.height,Re.Da=w.Da,Re.v=w.v,Re.va=w.va,Re.j=w.j,Re.o=w.o,Y.$a)e:{e(Y.$a==1),w=Eo();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,we(w.m,Q,se,Ae),!As(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Un(w.s)?(Y.ic=1,Q=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o(Q),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=Dr(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=Ae>=Y.c*Y.i;Y=!w}if(Y)return null;g.ga.Lc!=1?g.Ga=0:R=$-N}e(g.ga!=null),e(N+R<=$);e:{if(w=(Q=g.ga).c,$=Q.l.o,Q.$a==0){if(se=g.rc,Ae=g.Vc,Re=g.Fa,te=g.P+1+N*w,ae=g.mb,xe=g.nb+N*w,e(te<=g.P+g.qc),Q.Z!=0)for(e(aa[Q.Z]!=null),Y=0;Y<R;++Y)aa[Q.Z](se,Ae,Re,te,ae,xe,w),se=ae,Ae=xe,xe+=w,te+=w;else for(Y=0;Y<R;++Y)i(ae,xe,Re,te,w),se=ae,Ae=xe,xe+=w,te+=w;g.rc=se,g.Vc=Ae}else{if(e(Q.mc!=null),w=N+R,e((Y=Q.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(Q.ic||Fe(),Q.ic){Q=Y.V,se=Y.Ba,Ae=Y.c;var je=Y.i,Le=(Re=1,te=Y.$/Ae,ae=Y.$%Ae,xe=Y.m,De=Y.s,Y.$),Ge=Ae*je,Je=Ae*w,rt=De.wc,et=Le<Je?Oi(De,ae,te):null;e(Le<=Ge),e(w<=je),e(Un(De));t:for(;;){for(;!xe.h&&Le<Je;){if(ae&rt||(et=Oi(De,ae,te)),e(et!=null),Ee(xe),256>(je=jn(et.G[0],et.H[0],xe)))Q[se+Le]=je,++Le,++ae>=Ae&&(ae=0,++te<=w&&!(te%16)&&Fi(Y,te));else{if(!(280>je)){Re=0;break t}je=Rr(je-256,xe);var At,gt=jn(et.G[4],et.H[4],xe);if(Ee(xe),!(Le>=(gt=Lr(Ae,gt=Rr(gt,xe)))&&Ge-Le>=je)){Re=0;break t}for(At=0;At<je;++At)Q[se+Le+At]=Q[se+Le+At-gt];for(Le+=je,ae+=je;ae>=Ae;)ae-=Ae,++te<=w&&!(te%16)&&Fi(Y,te);Le<Je&&ae&rt&&(et=Oi(De,ae,te))}e(xe.h==fe(xe))}Fi(Y,te>w?w:te);break t}!Re||xe.h&&Le<Ge?(Re=0,Y.a=xe.h?5:3):Y.$=Le,w=Re}else w=Mr(Y,Y.V,Y.Ba,Y.c,Y.i,w,ao);if(!w){R=0;break e}}N+R>=$&&(g.Cc=1),R=1}if(!R)return null;if(g.Cc&&((R=g.ga)!=null&&(R.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+N*z}function C(g,w,N,R,z,$){for(;0<z--;){var Y,Q=g,te=w+(N?1:0),ae=g,xe=w+(N?0:3);for(Y=0;Y<R;++Y){var De=ae[xe+4*Y];De!=255&&(De*=32897,Q[te+4*Y+0]=Q[te+4*Y+0]*De>>23,Q[te+4*Y+1]=Q[te+4*Y+1]*De>>23,Q[te+4*Y+2]=Q[te+4*Y+2]*De>>23)}w+=$}}function P(g,w,N,R,z){for(;0<R--;){var $;for($=0;$<N;++$){var Y=g[w+2*$+0],Q=15&(ae=g[w+2*$+1]),te=4369*Q,ae=(240&ae|ae>>4)*te>>16;g[w+2*$+0]=(240&Y|Y>>4)*te>>16&240|(15&Y|Y<<4)*te>>16>>4&15,g[w+2*$+1]=240&ae|Q}w+=z}}function ee(g,w,N,R,z,$,Y,Q){var te,ae,xe=255;for(ae=0;ae<z;++ae){for(te=0;te<R;++te){var De=g[w+te];$[Y+4*te]=De,xe&=De}w+=N,Y+=Q}return xe!=255}function Ie(g,w,N,R,z){var $;for($=0;$<z;++$)N[R+$]=g[w+$]>>8}function Fe(){cl=C,Gs=P,Pu=ee,Ds=Ie}function ot(g,w,N){L[g]=function(R,z,$,Y,Q,te,ae,xe,De,se,Ae,Re,je,Le,Ge,Je,rt){var et,At=rt-1>>1,gt=Q[te+0]|ae[xe+0]<<16,Zt=De[se+0]|Ae[Re+0]<<16;e(R!=null);var wt=3*gt+Zt+131074>>2;for(w(R[z+0],255&wt,wt>>16,je,Le),$!=null&&(wt=3*Zt+gt+131074>>2,w($[Y+0],255&wt,wt>>16,Ge,Je)),et=1;et<=At;++et){var gn=Q[te+et]|ae[xe+et]<<16,hi=De[se+et]|Ae[Re+et]<<16,sn=gt+gn+Zt+hi+524296,yt=sn+2*(gn+Zt)>>3;wt=yt+gt>>1,gt=(sn=sn+2*(gt+hi)>>3)+gn>>1,w(R[z+2*et-1],255&wt,wt>>16,je,Le+(2*et-1)*N),w(R[z+2*et-0],255&gt,gt>>16,je,Le+(2*et-0)*N),$!=null&&(wt=sn+Zt>>1,gt=yt+hi>>1,w($[Y+2*et-1],255&wt,wt>>16,Ge,Je+(2*et-1)*N),w($[Y+2*et+0],255&gt,gt>>16,Ge,Je+(2*et+0)*N)),gt=gn,Zt=hi}1&rt||(wt=3*gt+Zt+131074>>2,w(R[z+rt-1],255&wt,wt>>16,je,Le+(rt-1)*N),$!=null&&(wt=3*Zt+gt+131074>>2,w($[Y+rt-1],255&wt,wt>>16,Ge,Je+(rt-1)*N)))}}function Qt(){Ar[_c]=dl,Ar[Vr]=Kl,Ar[bc]=qf,Ar[js]=Ac,Ar[Fu]=Ua,Ar[jl]=Fo,Ar[Da]=Oa,Ar[Vu]=Kl,Ar[wc]=Ac,Ar[$l]=Ua,Ar[xc]=Fo}function ri(g){return g&-16384?0>g?0:255:g>>Tc}function hn(g,w){return ri((19077*g>>8)+(26149*w>>8)-14234)}function Fn(g,w,N){return ri((19077*g>>8)-(6419*w>>8)-(13320*N>>8)+8708)}function lr(g,w){return ri((19077*g>>8)+(33050*w>>8)-17685)}function br(g,w,N,R,z){R[z+0]=hn(g,N),R[z+1]=Fn(g,w,N),R[z+2]=lr(g,w)}function Jn(g,w,N,R,z){R[z+0]=lr(g,w),R[z+1]=Fn(g,w,N),R[z+2]=hn(g,N)}function wr(g,w,N,R,z){var $=Fn(g,w,N);w=$<<3&224|lr(g,w)>>3,R[z+0]=248&hn(g,N)|$>>5,R[z+1]=w}function Rs(g,w,N,R,z){var $=240&lr(g,w)|15;R[z+0]=240&hn(g,N)|Fn(g,w,N)>>4,R[z+1]=$}function Ro(g,w,N,R,z){R[z+0]=255,br(g,w,N,R,z+1)}function Lo(g,w,N,R,z){Jn(g,w,N,R,z),R[z+3]=255}function ts(g,w,N,R,z){br(g,w,N,R,z),R[z+3]=255}function Zo(g,w,N){L[g]=function(R,z,$,Y,Q,te,ae,xe,De){for(var se=xe+(-2&De)*N;xe!=se;)w(R[z+0],$[Y+0],Q[te+0],ae,xe),w(R[z+1],$[Y+0],Q[te+0],ae,xe+N),z+=2,++Y,++te,xe+=2*N;1&De&&w(R[z+0],$[Y+0],Q[te+0],ae,xe)}}function Bl(g,w,N){return N==0?g==0?w==0?6:5:w==0?4:0:N}function Lu(g,w,N,R,z){switch(g>>>30){case 3:sa(w,N,R,z,0);break;case 2:Or(w,N,R,z);break;case 1:Dn(w,N,R,z)}}function Ls(g,w){var N,R,z=w.M,$=w.Nb,Y=g.oc,Q=g.pc+40,te=g.oc,ae=g.pc+584,xe=g.oc,De=g.pc+600;for(N=0;16>N;++N)Y[Q+32*N-1]=129;for(N=0;8>N;++N)te[ae+32*N-1]=129,xe[De+32*N-1]=129;for(0<z?Y[Q-1-32]=te[ae-1-32]=xe[De-1-32]=129:(r(Y,Q-32-1,127,21),r(te,ae-32-1,127,9),r(xe,De-32-1,127,9)),R=0;R<g.za;++R){var se=w.ya[w.aa+R];if(0<R){for(N=-1;16>N;++N)i(Y,Q+32*N-4,Y,Q+32*N+12,4);for(N=-1;8>N;++N)i(te,ae+32*N-4,te,ae+32*N+4,4),i(xe,De+32*N-4,xe,De+32*N+4,4)}var Ae=g.Gd,Re=g.Hd+R,je=se.ad,Le=se.Hc;if(0<z&&(i(Y,Q-32,Ae[Re].y,0,16),i(te,ae-32,Ae[Re].f,0,8),i(xe,De-32,Ae[Re].ea,0,8)),se.Za){var Ge=Y,Je=Q-32+16;for(0<z&&(R>=g.za-1?r(Ge,Je,Ae[Re].y[15],4):i(Ge,Je,Ae[Re+1].y,0,4)),N=0;4>N;N++)Ge[Je+128+N]=Ge[Je+256+N]=Ge[Je+384+N]=Ge[Je+0+N];for(N=0;16>N;++N,Le<<=2)Ge=Y,Je=Q+Pi[N],Ai[se.Ob[N]](Ge,Je),Lu(Le,je,16*+N,Ge,Je)}else if(Ge=Bl(R,z,se.Ob[0]),is[Ge](Y,Q),Le!=0)for(N=0;16>N;++N,Le<<=2)Lu(Le,je,16*+N,Y,Q+Pi[N]);for(N=se.Gc,Ge=Bl(R,z,se.Dd),yo[Ge](te,ae),yo[Ge](xe,De),Le=je,Ge=te,Je=ae,255&(se=0|N)&&(170&se?zs(Le,256,Ge,Je):An(Le,256,Ge,Je)),se=xe,Le=De,255&(N>>=8)&&(170&N?zs(je,320,se,Le):An(je,320,se,Le)),z<g.Ub-1&&(i(Ae[Re].y,0,Y,Q+480,16),i(Ae[Re].f,0,te,ae+224,8),i(Ae[Re].ea,0,xe,De+224,8)),N=8*$*g.B,Ae=g.sa,Re=g.ta+16*R+16*$*g.R,je=g.qa,se=g.ra+8*R+N,Le=g.Ha,Ge=g.Ia+8*R+N,N=0;16>N;++N)i(Ae,Re+N*g.R,Y,Q+32*N,16);for(N=0;8>N;++N)i(je,se+N*g.B,te,ae+32*N,8),i(Le,Ge+N*g.B,xe,De+32*N,8)}}function po(g,w,N,R,z,$,Y,Q,te){var ae=[0],xe=[0],De=0,se=te!=null?te.kd:0,Ae=te??new tt;if(g==null||12>N)return 7;Ae.data=g,Ae.w=w,Ae.ha=N,w=[w],N=[N],Ae.gb=[Ae.gb];e:{var Re=w,je=N,Le=Ae.gb;if(e(g!=null),e(je!=null),e(Le!=null),Le[0]=0,12<=je[0]&&!t(g,Re[0],"RIFF")){if(t(g,Re[0]+8,"WEBP")){Le=3;break e}var Ge=pt(g,Re[0]+4);if(12>Ge||4294967286<Ge){Le=3;break e}if(se&&Ge>je[0]-8){Le=7;break e}Le[0]=Ge,Re[0]+=12,je[0]-=12}Le=0}if(Le!=0)return Le;for(Ge=0<Ae.gb[0],N=N[0];;){e:{var Je=g;je=w,Le=N;var rt=ae,et=xe,At=Re=[0];if((wt=De=[De])[0]=0,8>Le[0])Le=7;else{if(!t(Je,je[0],"VP8X")){if(pt(Je,je[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var gt=pt(Je,je[0]+8),Zt=1+ut(Je,je[0]+12);if(2147483648<=Zt*(Je=1+ut(Je,je[0]+15))){Le=3;break e}At!=null&&(At[0]=gt),rt!=null&&(rt[0]=Zt),et!=null&&(et[0]=Je),je[0]+=18,Le[0]-=18,wt[0]=1}Le=0}}if(De=De[0],Re=Re[0],Le!=0)return Le;if(je=!!(2&Re),!Ge&&De)return 3;if($!=null&&($[0]=!!(16&Re)),Y!=null&&(Y[0]=je),Q!=null&&(Q[0]=0),Y=ae[0],Re=xe[0],De&&je&&te==null){Le=0;break}if(4>N){Le=7;break}if(Ge&&De||!Ge&&!De&&!t(g,w[0],"ALPH")){N=[N],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{gt=g,Le=w,Ge=N;var wt=Ae.gb;rt=Ae.na,et=Ae.P,At=Ae.Sa,Zt=22,e(gt!=null),e(Ge!=null),Je=Le[0];var gn=Ge[0];for(e(rt!=null),e(At!=null),rt[0]=null,et[0]=null,At[0]=0;;){if(Le[0]=Je,Ge[0]=gn,8>gn){Le=7;break e}var hi=pt(gt,Je+4);if(4294967286<hi){Le=3;break e}var sn=8+hi+1&-2;if(Zt+=sn,0<wt&&Zt>wt){Le=3;break e}if(!t(gt,Je,"VP8 ")||!t(gt,Je,"VP8L")){Le=0;break e}if(gn[0]<sn){Le=7;break e}t(gt,Je,"ALPH")||(rt[0]=gt,et[0]=Je+8,At[0]=hi),Je+=sn,gn-=sn}}if(N=N[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],Le!=0)break}N=[N],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(wt=g,Le=w,Ge=N,rt=Ae.gb[0],et=Ae.Ja,At=Ae.xa,gt=Le[0],Je=!t(wt,gt,"VP8 "),Zt=!t(wt,gt,"VP8L"),e(wt!=null),e(Ge!=null),e(et!=null),e(At!=null),8>Ge[0])Le=7;else{if(Je||Zt){if(wt=pt(wt,gt+4),12<=rt&&wt>rt-12){Le=3;break e}if(se&&wt>Ge[0]-8){Le=7;break e}et[0]=wt,Le[0]+=8,Ge[0]-=8,At[0]=Zt}else At[0]=5<=Ge[0]&&wt[gt+0]==47&&!(wt[gt+4]>>5),et[0]=Ge[0];Le=0}if(N=N[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],w=w[0],Le!=0)break;if(4294967286<Ae.Ja)return 3;if(Q==null||je||(Q[0]=Ae.xa?2:1),Y=[Y],Re=[Re],Ae.xa){if(5>N){Le=7;break}Q=Y,se=Re,je=$,g==null||5>N?g=0:5<=N&&g[w+0]==47&&!(g[w+4]>>5)?(Ge=[0],wt=[0],rt=[0],we(et=new J,g,w,N),Yr(et,Ge,wt,rt)?(Q!=null&&(Q[0]=Ge[0]),se!=null&&(se[0]=wt[0]),je!=null&&(je[0]=rt[0]),g=1):g=0):g=0}else{if(10>N){Le=7;break}Q=Re,g==null||10>N||!lo(g,w+3,N-3)?g=0:(se=g[w+0]|g[w+1]<<8|g[w+2]<<16,je=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&se||3<(se>>1&7)||!(se>>4&1)||se>>5>=Ae.Ja||!je||!g?g=0:(Y&&(Y[0]=je),Q&&(Q[0]=g),g=1))}if(!g||(Y=Y[0],Re=Re[0],De&&(ae[0]!=Y||xe[0]!=Re)))return 3;te!=null&&(te[0]=Ae,te.offset=w-te.w,e(4294967286>w-te.w),e(te.offset==te.ha-N));break}return Le==0||Le==7&&De&&te==null?($!=null&&($[0]|=Ae.na!=null&&0<Ae.na.length),R!=null&&(R[0]=Y),z!=null&&(z[0]=Re),0):Le}function ea(g,w,N){var R=w.width,z=w.height,$=0,Y=0,Q=R,te=z;if(w.Da=g!=null&&0<g.Da,w.Da&&(Q=g.cd,te=g.bd,$=g.v,Y=g.j,11>N||($&=-2,Y&=-2),0>$||0>Y||0>=Q||0>=te||$+Q>R||Y+te>z))return 0;if(w.v=$,w.j=Y,w.va=$+Q,w.o=Y+te,w.U=Q,w.T=te,w.da=g!=null&&0<g.da,w.da){if(!he(Q,te,N=[g.ib],$=[g.hb]))return 0;w.ib=N[0],w.hb=$[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*R/4&&w.hb<3*z/4,w.Kb=0),1}function Mu(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function mo(g,w,N,R){if(R==null||0>=g||0>=w)return 2;if(N!=null){if(N.Da){var z=N.cd,$=N.bd,Y=-2&N.v,Q=-2&N.j;if(0>Y||0>Q||0>=z||0>=$||Y+z>g||Q+$>w)return 2;g=z,w=$}if(N.da){if(!he(g,w,z=[N.ib],$=[N.hb]))return 2;g=z[0],w=$[0]}}R.width=g,R.height=w;e:{var te=R.width,ae=R.height;if(g=R.S,0>=te||0>=ae||!(g>=_c&&13>g))g=2;else{if(0>=R.Rd&&R.sd==null){Y=$=z=w=0;var xe=(Q=te*Cc[g])*ae;if(11>g||($=(ae+1)/2*(w=(te+1)/2),g==12&&(Y=(z=te)*ae)),(ae=o(xe+2*$+Y))==null){g=1;break e}R.sd=ae,11>g?((te=R.f.RGBA).eb=ae,te.fb=0,te.A=Q,te.size=xe):((te=R.f.kb).y=ae,te.O=0,te.fa=Q,te.Fd=xe,te.f=ae,te.N=0+xe,te.Ab=w,te.Cd=$,te.ea=ae,te.W=0+xe+$,te.Db=w,te.Ed=$,g==12&&(te.F=ae,te.J=0+xe+2*$),te.Tc=Y,te.lb=z)}if(w=1,z=R.S,$=R.width,Y=R.height,z>=_c&&13>z)if(11>z)g=R.f.RGBA,w&=(Q=Math.abs(g.A))*(Y-1)+$<=g.size,w&=Q>=$*Cc[z],w&=g.eb!=null;else{g=R.f.kb,Q=($+1)/2,xe=(Y+1)/2,te=Math.abs(g.fa),ae=Math.abs(g.Ab);var De=Math.abs(g.Db),se=Math.abs(g.lb),Ae=se*(Y-1)+$;w&=te*(Y-1)+$<=g.Fd,w&=ae*(xe-1)+Q<=g.Cd,w=(w&=De*(xe-1)+Q<=g.Ed)&te>=$&ae>=Q&De>=Q,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,z==12&&(w&=se>=$,w&=Ae<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||N!=null&&N.fd&&(g=Mu(R)),g}var Ma=64,ms=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ns=24,Mo=32,Do=8,ta=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(g){return g},L.Predictor2=function(g,w,N){return w[N+0]},L.Predictor3=function(g,w,N){return w[N+1]},L.Predictor4=function(g,w,N){return w[N-1]},L.Predictor5=function(g,w,N){return pe(pe(g,w[N+1]),w[N+0])},L.Predictor6=function(g,w,N){return pe(g,w[N-1])},L.Predictor7=function(g,w,N){return pe(g,w[N+0])},L.Predictor8=function(g,w,N){return pe(w[N-1],w[N+0])},L.Predictor9=function(g,w,N){return pe(w[N+0],w[N+1])},L.Predictor10=function(g,w,N){return pe(pe(g,w[N-1]),pe(w[N+0],w[N+1]))},L.Predictor11=function(g,w,N){var R=w[N+0];return 0>=ft(R>>24&255,g>>24&255,(w=w[N-1])>>24&255)+ft(R>>16&255,g>>16&255,w>>16&255)+ft(R>>8&255,g>>8&255,w>>8&255)+ft(255&R,255&g,255&w)?R:g},L.Predictor12=function(g,w,N){var R=w[N+0];return(Ve((g>>24&255)+(R>>24&255)-((w=w[N-1])>>24&255))<<24|Ve((g>>16&255)+(R>>16&255)-(w>>16&255))<<16|Ve((g>>8&255)+(R>>8&255)-(w>>8&255))<<8|Ve((255&g)+(255&R)-(255&w)))>>>0},L.Predictor13=function(g,w,N){var R=w[N-1];return(Ct((g=pe(g,w[N+0]))>>24&255,R>>24&255)<<24|Ct(g>>16&255,R>>16&255)<<16|Ct(g>>8&255,R>>8&255)<<8|Ct(255&g,255&R))>>>0};var ql=L.PredictorAdd0;L.PredictorAdd1=xt,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var Hl=L.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Mi,gc=L.ColorIndexInverseTransform,Po=L.MapARGB,ko=L.VP8LColorIndexInverseTransformAlpha,xr=L.MapAlpha,na=L.VP8LPredictorsAdd=[];na.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var zl,Gl,ia,ra,Uo,ll,Ms,sa,Or,zs,Dn,An,si,Di,Oo,go,ul,Du,Uf,rd,sd,od,Of,Ff,cl,Gs,Pu,Ds,fl=o(511),yc=o(2041),ku=o(225),Uu=o(767),vc=0,oa=yc,Ou=ku,Fr=Uu,Sr=fl,_c=0,Vr=1,bc=2,js=3,Fu=4,jl=5,Da=6,Vu=7,wc=8,$l=9,xc=10,$s=[2,3,7],Yl=[3,3,11],hl=[280,256,256,256,40],Sc=[0,1,1,1,0],Bu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ys=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ks=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Pa=8,Js=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ws=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ps=null,ad=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Vf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ec=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ld=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Er=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],is=[],Ai=[],yo=[],ka=1,Bf=2,aa=[],Ar=[];ot("UpsampleRgbLinePair",br,3),ot("UpsampleBgrLinePair",Jn,3),ot("UpsampleRgbaLinePair",ts,4),ot("UpsampleBgraLinePair",Lo,4),ot("UpsampleArgbLinePair",Ro,4),ot("UpsampleRgba4444LinePair",Rs,2),ot("UpsampleRgb565LinePair",wr,2);var dl=L.UpsampleRgbLinePair,qf=L.UpsampleBgrLinePair,Kl=L.UpsampleRgbaLinePair,Ac=L.UpsampleBgraLinePair,Ua=L.UpsampleArgbLinePair,Fo=L.UpsampleRgba4444LinePair,Oa=L.UpsampleRgb565LinePair,Xs=16,Jl=1<<Xs-1,pl=-227,Fa=482,Tc=6,Va=0,Tr=o(256),Nc=o(256),ud=o(256),Tm=o(256),Nm=o(Fa-pl),Cm=o(Fa-pl);Zo("YuvToRgbRow",br,3),Zo("YuvToBgrRow",Jn,3),Zo("YuvToRgbaRow",ts,4),Zo("YuvToBgraRow",Lo,4),Zo("YuvToArgbRow",Ro,4),Zo("YuvToRgba4444Row",Rs,2),Zo("YuvToRgb565Row",wr,2);var Pi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wl=[0,2,8],qu=[8,7,6,4,4,2,2,2,1,1,1,1],Hu=1;this.WebPDecodeRGBA=function(g,w,N,R,z){var $=Vr,Y=new Ye,Q=new Mt;Y.ba=Q,Q.S=$,Q.width=[Q.width],Q.height=[Q.height];var te=Q.width,ae=Q.height,xe=new It;if(xe==null||g==null)var De=2;else e(xe!=null),De=po(g,w,N,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(De!=0?te=0:(te!=null&&(te[0]=xe.width[0]),ae!=null&&(ae[0]=xe.height[0]),te=1),te){Q.width=Q.width[0],Q.height=Q.height[0],R!=null&&(R[0]=Q.width),z!=null&&(z[0]=Q.height);e:{if(R=new or,(z=new tt).data=g,z.w=w,z.ha=N,z.kd=1,w=[0],e(z!=null),((g=po(z.data,z.w,z.ha,null,null,null,w,null,z))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(Y!=null),R.data=z.data,R.w=z.w+z.offset,R.ha=z.ha-z.offset,R.put=kt,R.ac=Ki,R.bc=oo,R.ma=Y,z.xa){if((g=Eo())==null){Y=1;break e}if((function(se,Ae){var Re=[0],je=[0],Le=[0];t:for(;;){if(se==null)return 0;if(Ae==null)return se.a=2,0;if(se.l=Ae,se.a=0,we(se.m,Ae.data,Ae.w,Ae.ha),!Yr(se.m,Re,je,Le)){se.a=3;break t}if(se.xb=Bf,Ae.width=Re[0],Ae.height=je[0],!As(Re[0],je[0],1,se,null))break t;return 1}return e(se.a!=0),0})(g,R)){if(R=(w=mo(R.width,R.height,Y.Oa,Y.ba))==0){t:{R=g;n:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((N=R.l)!=null),e((z=N.ma)!=null),R.xb!=0){if(R.ca=z.ba,R.tb=z.tb,e(R.ca!=null),!ea(z.Oa,N,js)){R.a=2;break n}if(!Dr(R,N.width)||N.da)break n;if((N.da||Gt(R.ca.S))&&Fe(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&Fe()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!re(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!Mr(R,R.V,R.Ba,R.c,R.i,N.o,sr))break n;z.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(w=g.a)}else w=g.a}else{if((g=new Si)==null){Y=1;break e}if(g.Fa=z.na,g.P=z.P,g.qc=z.Sa,ds(g,R)){if((w=mo(R.width,R.height,Y.Oa,Y.ba))==0){if(g.Aa=0,N=Y.Oa,e((z=g)!=null),N!=null){if(0<(te=0>(te=N.Md)?0:100<te?255:255*te/100)){for(ae=xe=0;4>ae;++ae)12>(De=z.pb[ae]).lc&&(De.ia=te*qu[0>De.lc?0:De.lc]>>3),xe|=De.ia;xe&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=N.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(se,Ae){if(se==null)return 0;if(Ae==null)return pn(se,2,"NULL VP8Io parameter in VP8Decode().");if(!se.cb&&!ds(se,Ae))return 0;if(e(se.cb),Ae.ac==null||Ae.ac(Ae)){Ae.ob&&(se.L=0);var Re=Wl[se.L];if(se.L==2?(se.yb=0,se.zb=0):(se.yb=Ae.v-Re>>4,se.zb=Ae.j-Re>>4,0>se.yb&&(se.yb=0),0>se.zb&&(se.zb=0)),se.Va=Ae.o+15+Re>>4,se.Hb=Ae.va+15+Re>>4,se.Hb>se.za&&(se.Hb=se.za),se.Va>se.Ub&&(se.Va=se.Ub),0<se.L){var je=se.ed;for(Re=0;4>Re;++Re){var Le;if(se.Qa.Cb){var Ge=se.Qa.Lb[Re];se.Qa.Fb||(Ge+=je.Tb)}else Ge=je.Tb;for(Le=0;1>=Le;++Le){var Je=se.gd[Re][Le],rt=Ge;if(je.Pc&&(rt+=je.vd[0],Le&&(rt+=je.od[0])),0<(rt=0>rt?0:63<rt?63:rt)){var et=rt;0<je.wb&&(et=4<je.wb?et>>2:et>>1)>9-je.wb&&(et=9-je.wb),1>et&&(et=1),Je.dd=et,Je.tc=2*rt+et,Je.ld=40<=rt?2:15<=rt?1:0}else Je.tc=0;Je.La=Le}}}Re=0}else pn(se,6,"Frame setup failed"),Re=se.a;if(Re=Re==0){if(Re){se.$c=0,0<se.Aa||(se.Ic=Hu);t:{Re=se.Ic,je=4*(et=se.za);var At=32*et,gt=et+1,Zt=0<se.L?et*(0<se.Aa?2:1):0,wt=(se.Aa==2?2:1)*et;if((Je=je+832+(Le=3*(16*Re+Wl[se.L])/2*At)+(Ge=se.Fa!=null&&0<se.Fa.length?se.Kc.c*se.Kc.i:0))!=Je)Re=0;else{if(Je>se.Vb){if(se.Vb=0,se.Ec=o(Je),se.Fc=0,se.Ec==null){Re=pn(se,1,"no memory during frame initialization.");break t}se.Vb=Je}Je=se.Ec,rt=se.Fc,se.Ac=Je,se.Bc=rt,rt+=je,se.Gd=l(At,Ta),se.Hd=0,se.rb=l(gt+1,hs),se.sb=1,se.wa=Zt?l(Zt,Pr):null,se.Y=0,se.D.Nb=0,se.D.wa=se.wa,se.D.Y=se.Y,0<se.Aa&&(se.D.Y+=et),e(!0),se.oc=Je,se.pc=rt,rt+=832,se.ya=l(wt,Yo),se.aa=0,se.D.ya=se.ya,se.D.aa=se.aa,se.Aa==2&&(se.D.aa+=et),se.R=16*et,se.B=8*et,et=(At=Wl[se.L])*se.R,At=At/2*se.B,se.sa=Je,se.ta=rt+et,se.qa=se.sa,se.ra=se.ta+16*Re*se.R+At,se.Ha=se.qa,se.Ia=se.ra+8*Re*se.B+At,se.$c=0,rt+=Le,se.mb=Ge?Je:null,se.nb=Ge?rt:null,e(rt+Ge<=se.Fc+se.Vb),Ao(se),r(se.Ac,se.Bc,0,je),Re=1}}if(Re){if(Ae.ka=0,Ae.y=se.sa,Ae.O=se.ta,Ae.f=se.qa,Ae.N=se.ra,Ae.ea=se.Ha,Ae.Vd=se.Ia,Ae.fa=se.R,Ae.Rc=se.B,Ae.F=null,Ae.J=0,!vc){for(Re=-255;255>=Re;++Re)fl[255+Re]=0>Re?-Re:Re;for(Re=-1020;1020>=Re;++Re)yc[1020+Re]=-128>Re?-128:127<Re?127:Re;for(Re=-112;112>=Re;++Re)ku[112+Re]=-16>Re?-16:15<Re?15:Re;for(Re=-255;510>=Re;++Re)Uu[255+Re]=0>Re?0:255<Re?255:Re;vc=1}Ms=Ji,sa=nl,zs=_r,Dn=il,An=uo,Or=Vl,si=al,Di=Is,Oo=H,go=oe,ul=La,Du=A,Uf=be,rd=Ne,sd=qs,od=ps,Of=Qo,Ff=Ra,Ai[0]=Co,Ai[1]=rl,Ai[2]=Jo,Ai[3]=Ia,Ai[4]=Wi,Ai[5]=Wo,Ai[6]=Vi,Ai[7]=On,Ai[8]=Xo,Ai[9]=Xr,is[0]=Ns,is[1]=Na,is[2]=Ca,is[3]=co,is[4]=fo,is[5]=Ur,is[6]=No,yo[0]=ho,yo[1]=sl,yo[2]=Cs,yo[3]=ol,yo[4]=Li,yo[5]=Zr,yo[6]=Fs,Re=1}else Re=0}Re&&(Re=(function(gn,hi){for(gn.M=0;gn.M<gn.Va;++gn.M){var sn,yt=gn.Jc[gn.M&gn.Xb],ct=gn.m,yi=gn;for(sn=0;sn<yi.za;++sn){var Kt=ct,un=yi,Hn=un.Ac,Xi=un.Bc+4*sn,Nr=un.zc,oi=un.ya[un.aa+sn];if(un.Qa.Bb?oi.$b=$e(Kt,un.Pa.jb[0])?2+$e(Kt,un.Pa.jb[2]):$e(Kt,un.Pa.jb[1]):oi.$b=0,un.kc&&(oi.Ad=$e(Kt,un.Bd)),oi.Za=!$e(Kt,145)+0,oi.Za){var Bi=oi.Ob,Br=0;for(un=0;4>un;++un){var qi,dn=Nr[0+un];for(qi=0;4>qi;++qi){dn=Er[Hn[Xi+qi]][dn];for(var Nn=Ec[$e(Kt,dn[0])];0<Nn;)Nn=Ec[2*Nn+$e(Kt,dn[Nn])];dn=-Nn,Hn[Xi+qi]=dn}i(Bi,Br,Hn,Xi,4),Br+=4,Nr[0+un]=dn}}else dn=$e(Kt,156)?$e(Kt,128)?1:3:$e(Kt,163)?2:0,oi.Ob[0]=dn,r(Hn,Xi,dn,4),r(Nr,0,dn,4);oi.Dd=$e(Kt,142)?$e(Kt,114)?$e(Kt,183)?1:3:2:0}if(yi.m.Ka)return pn(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(yi=yt,Kt=(ct=gn).rb[ct.sb-1],Hn=ct.rb[ct.sb+ct.ja],sn=ct.ya[ct.aa+ct.ja],Xi=ct.kc?sn.Ad:0)Kt.la=Hn.la=0,sn.Za||(Kt.Na=Hn.Na=0),sn.Hc=0,sn.Gc=0,sn.ia=0;else{var vi,Pn;if(Kt=Hn,Hn=yi,Xi=ct.Pa.Xc,Nr=ct.ya[ct.aa+ct.ja],oi=ct.pb[Nr.$b],un=Nr.ad,Bi=0,Br=ct.rb[ct.sb-1],dn=qi=0,r(un,Bi,0,384),Nr.Za)var Qi=0,_i=Xi[3];else{Nn=o(16);var Cn=Kt.Na+Br.Na;if(Cn=Ps(Hn,Xi[1],Cn,oi.Eb,0,Nn,0),Kt.Na=Br.Na=(0<Cn)+0,1<Cn)Ms(Nn,0,un,Bi);else{var ki=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)un[Bi+Nn]=ki}Qi=1,_i=Xi[0]}var zn=15&Kt.la,Hi=15&Br.la;for(Nn=0;4>Nn;++Nn){var zi=1&Hi;for(ki=Pn=0;4>ki;++ki)zn=zn>>1|(zi=(Cn=Ps(Hn,_i,Cn=zi+(1&zn),oi.Sc,Qi,un,Bi))>Qi)<<7,Pn=Pn<<2|(3<Cn?3:1<Cn?2:un[Bi+0]!=0),Bi+=16;zn>>=4,Hi=Hi>>1|zi<<7,qi=(qi<<8|Pn)>>>0}for(_i=zn,Qi=Hi>>4,vi=0;4>vi;vi+=2){for(Pn=0,zn=Kt.la>>4+vi,Hi=Br.la>>4+vi,Nn=0;2>Nn;++Nn){for(zi=1&Hi,ki=0;2>ki;++ki)Cn=zi+(1&zn),zn=zn>>1|(zi=0<(Cn=Ps(Hn,Xi[2],Cn,oi.Qc,0,un,Bi)))<<3,Pn=Pn<<2|(3<Cn?3:1<Cn?2:un[Bi+0]!=0),Bi+=16;zn>>=2,Hi=Hi>>1|zi<<5}dn|=Pn<<4*vi,_i|=zn<<4<<vi,Qi|=(240&Hi)<<vi}Kt.la=_i,Br.la=Qi,Nr.Hc=qi,Nr.Gc=dn,Nr.ia=43690&dn?0:oi.ia,Xi=!(qi|dn)}if(0<ct.L&&(ct.wa[ct.Y+ct.ja]=ct.gd[sn.$b][sn.Za],ct.wa[ct.Y+ct.ja].La|=!Xi),yi.Ka)return pn(gn,7,"Premature end-of-file encountered.")}if(Ao(gn),ct=hi,yi=1,sn=(yt=gn).D,Kt=0<yt.L&&yt.M>=yt.zb&&yt.M<=yt.Va,yt.Aa==0)t:{if(sn.M=yt.M,sn.uc=Kt,Ls(yt,sn),yi=1,sn=(Pn=yt.D).Nb,Kt=(dn=Wl[yt.L])*yt.R,Hn=dn/2*yt.B,Nn=16*sn*yt.R,ki=8*sn*yt.B,Xi=yt.sa,Nr=yt.ta-Kt+Nn,oi=yt.qa,un=yt.ra-Hn+ki,Bi=yt.Ha,Br=yt.Ia-Hn+ki,Hi=(zn=Pn.M)==0,qi=zn>=yt.Va-1,yt.Aa==2&&Ls(yt,Pn),Pn.uc)for(zi=(Cn=yt).D.M,e(Cn.D.uc),Pn=Cn.yb;Pn<Cn.Hb;++Pn){Qi=Pn,_i=zi;var Wn=(Tn=(Gi=Cn).D).Nb;vi=Gi.R;var Tn=Tn.wa[Tn.Y+Qi],qr=Gi.sa,Ti=Gi.ta+16*Wn*vi+16*Qi,Vt=Tn.dd,qt=Tn.tc;if(qt!=0)if(e(3<=qt),Gi.L==1)0<Qi&&od(qr,Ti,vi,qt+4),Tn.La&&Ff(qr,Ti,vi,qt),0<_i&&sd(qr,Ti,vi,qt+4),Tn.La&&Of(qr,Ti,vi,qt);else{var In=Gi.B,gs=Gi.qa,Qs=Gi.ra+8*Wn*In+8*Qi,rs=Gi.Ha,Gi=Gi.Ia+8*Wn*In+8*Qi;Wn=Tn.ld,0<Qi&&(Di(qr,Ti,vi,qt+4,Vt,Wn),go(gs,Qs,rs,Gi,In,qt+4,Vt,Wn)),Tn.La&&(Du(qr,Ti,vi,qt,Vt,Wn),rd(gs,Qs,rs,Gi,In,qt,Vt,Wn)),0<_i&&(si(qr,Ti,vi,qt+4,Vt,Wn),Oo(gs,Qs,rs,Gi,In,qt+4,Vt,Wn)),Tn.La&&(ul(qr,Ti,vi,qt,Vt,Wn),Uf(gs,Qs,rs,Gi,In,qt,Vt,Wn))}}if(yt.ia&&alert("todo:DitherRow"),ct.put!=null){if(Pn=16*zn,zn=16*(zn+1),Hi?(ct.y=yt.sa,ct.O=yt.ta+Nn,ct.f=yt.qa,ct.N=yt.ra+ki,ct.ea=yt.Ha,ct.W=yt.Ia+ki):(Pn-=dn,ct.y=Xi,ct.O=Nr,ct.f=oi,ct.N=un,ct.ea=Bi,ct.W=Br),qi||(zn-=dn),zn>ct.o&&(zn=ct.o),ct.F=null,ct.J=null,yt.Fa!=null&&0<yt.Fa.length&&Pn<zn&&(ct.J=v(yt,ct,Pn,zn-Pn),ct.F=yt.mb,ct.F==null&&ct.F.length==0)){yi=pn(yt,3,"Could not decode alpha data.");break t}Pn<ct.j&&(dn=ct.j-Pn,Pn=ct.j,e(!(1&dn)),ct.O+=yt.R*dn,ct.N+=yt.B*(dn>>1),ct.W+=yt.B*(dn>>1),ct.F!=null&&(ct.J+=ct.width*dn)),Pn<zn&&(ct.O+=ct.v,ct.N+=ct.v>>1,ct.W+=ct.v>>1,ct.F!=null&&(ct.J+=ct.v),ct.ka=Pn-ct.j,ct.U=ct.va-ct.v,ct.T=zn-Pn,yi=ct.put(ct))}sn+1!=yt.Ic||qi||(i(yt.sa,yt.ta-Kt,Xi,Nr+16*yt.R,Kt),i(yt.qa,yt.ra-Hn,oi,un+8*yt.B,Hn),i(yt.Ha,yt.Ia-Hn,Bi,Br+8*yt.B,Hn))}if(!yi)return pn(gn,6,"Output aborted.")}return 1})(se,Ae)),Ae.bc!=null&&Ae.bc(Ae),Re&=1}return Re?(se.cb=0,Re):0})(g,R)||(w=g.a)}}else w=g.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=Mu(Y.ba))}Y=w}$=Y!=0?null:11>$?Q.f.RGBA.eb:Q.f.kb.y}else $=null;return $};var Cc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(L,j){for(var I="",k=0;k<4;k++)I+=String.fromCharCode(L[j++]);return I}function p(L,j){return L[j+0]|L[j+1]<<8}function b(L,j){return(L[j+0]|L[j+1]<<8|L[j+2]<<16)>>>0}function S(L,j){return(L[j+0]|L[j+1]<<8|L[j+2]<<16|L[j+3]<<24)>>>0}new h;var x=[0],D=[0],O=[],B=new h,q=n,X=(function(L,j){var I={},k=0,F=!1,ce=0,Te=0;if(I.frames=[],!(function(U,J){for(var ie=0;ie<4;ie++)if(U[J+ie]!="RIFF".charCodeAt(ie))return!0;return!1})(L,j)){for(S(L,j+=4),j+=8;j<L.length;){var le=f(L,j),ue=S(L,j+=4);j+=4;var ve=ue+(1&ue);switch(le){case"VP8 ":case"VP8L":I.frames[k]===void 0&&(I.frames[k]={}),(ne=I.frames[k]).src_off=F?Te:j-8,ne.src_size=ce+ue+8,k++,F&&(F=!1,ce=0,Te=0);break;case"VP8X":(ne=I.header={}).feature_flags=L[j];var we=j+4;ne.canvas_width=1+b(L,we),we+=3,ne.canvas_height=1+b(L,we),we+=3;break;case"ALPH":F=!0,ce=ve+8,Te=j-8;break;case"ANIM":(ne=I.header).bgcolor=S(L,j),we=j+4,ne.loop_count=p(L,we),we+=2;break;case"ANMF":var We,ne;(ne=I.frames[k]={}).offset_x=2*b(L,j),j+=3,ne.offset_y=2*b(L,j),j+=3,ne.width=1+b(L,j),j+=3,ne.height=1+b(L,j),j+=3,ne.duration=b(L,j),j+=3,We=L[j++],ne.dispose=1&We,ne.blend=We>>1&1}le!="ANMF"&&(j+=ve)}return I}})(q,0);X.response=q,X.rgbaoutput=!0,X.dataurl=!1;var Z=X.header?X.header:null,W=X.frames?X.frames:null;if(Z){Z.loop_counter=Z.loop_count,x=[Z.canvas_height],D=[Z.canvas_width];for(var ye=0;ye<W.length&&W[ye].blend!=0;ye++);}var de=W[0],G=B.WebPDecodeRGBA(q,de.src_off,de.src_size,D,x);de.rgba=G,de.imgwidth=D[0],de.imgheight=x[0];for(var V=0;V<D[0]*x[0]*4;V++)O[V]=G[V];return this.width=D,this.height=x,this.data=O,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function sM(){var n,e=this.internal.__metadata__.metadata,t=unescape(encodeURIComponent(e));n=this.internal.__metadata__.rawXml?t:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+n.length+" >>"),this.internal.write("stream"),this.internal.write(n),this.internal.write("endstream"),this.internal.write("endobj")}function oM(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(n){var e,t,i,r,o,l,c,h,f,p=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new h,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new l,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new l,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var b=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=U;Object.defineProperty(this,"pdf",{get:function(){return J}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(re){ie=!!re}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(re){fe=!!re}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(re){isNaN(re)||(me=re)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(re){isNaN(re)||(Ee=re)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(re){var ke;typeof re=="number"?ke=[re,re,re,re]:((ke=new Array(4))[0]=re[0],ke[1]=re.length>=2?re[1]:ke[0],ke[2]=re.length>=3?re[2]:ke[0],ke[3]=re.length>=4?re[3]:ke[1]),f.margin=ke}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(re){Pe=re}});var Me=0;Object.defineProperty(this,"lastBreak",{get:function(){return Me},set:function(re){Me=re}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(re){$e=re}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(re){re instanceof p&&(f=re)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(re){f.path=re}});var it=[];Object.defineProperty(this,"ctxStack",{get:function(){return it},set:function(re){it=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var ke;ke=S(re),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var ke=S(re);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var lt=null,ut=null,pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return pt},set:function(re){lt=null,ut=null,pt=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var ke;if(this.ctx.font=re,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(re))!==null){var st=ke[1];ke[2];var he=ke[3],_e=ke[4];ke[5];var at=ke[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor(qe==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var He=(function(bt){var ti,Wt,Ot=[],Yt=bt.trim();if(Yt==="")return v0;if(Yt in ab)return[ab[Yt]];for(;Yt!=="";){switch(Wt=null,ti=(Yt=ub(Yt)).charAt(0)){case'"':case"'":Wt=ZL(Yt.substring(1),ti);break;default:Wt=eM(Yt)}if(Wt===null||(Ot.push(Wt[0]),(Yt=ub(Wt[1]))!==""&&Yt.charAt(0)!==","))return v0;Yt=Yt.replace(/^,/,"")}return Ot})(at);if(this.fontFaces){var pe=(function(bt,ti){var Wt=bt.getFontList(),Ot=JSON.stringify(Wt);if(lt===null||ut!==Ot){var Yt=(function(tn){var Pt=[];return Object.keys(tn).forEach(function(Mn){tn[Mn].forEach(function(Gt){var jt=null;switch(Gt){case"bold":jt={family:Mn,weight:"bold"};break;case"italic":jt={family:Mn,style:"italic"};break;case"bolditalic":jt={family:Mn,weight:"bold",style:"italic"};break;case"":case"normal":jt={family:Mn}}jt!==null&&(jt.ref={name:Mn,style:Gt},Pt.push(jt))})}),Pt})(Wt);lt=(function(tn){for(var Pt={},Mn=0;Mn<tn.length;++Mn){var Gt=y0(tn[Mn]),jt=Gt.family,kn=Gt.stretch,Mt=Gt.style,It=Gt.weight;Pt[jt]=Pt[jt]||{},Pt[jt][kn]=Pt[jt][kn]||{},Pt[jt][kn][Mt]=Pt[jt][kn][Mt]||{},Pt[jt][kn][Mt][It]=Gt}return Pt})(Yt.concat(ti)),ut=Ot}return lt})(this.pdf,this.fontFaces),Ve=He.map(function(bt){return{family:bt,stretch:"normal",weight:he,style:st}}),Ct=(function(bt,ti,Wt){for(var Ot=(Wt=Wt||{}).defaultFontFamily||"times",Yt=Object.assign({},QL,Wt.genericFontFamilies||{}),tn=null,Pt=null,Mn=0;Mn<ti.length;++Mn)if(Yt[(tn=y0(ti[Mn])).family]&&(tn.family=Yt[tn.family]),bt.hasOwnProperty(tn.family)){Pt=bt[tn.family];break}if(!(Pt=Pt||bt[Ot]))throw new Error("Could not find a font-family for the rule '"+lb(tn)+"' and default family '"+Ot+"'.");if(Pt=(function(Gt,jt){if(jt[Gt])return jt[Gt];var kn=c1[Gt],Mt=kn<=c1.normal?-1:1,It=ob(jt,BE,kn,Mt);if(!It)throw new Error("Could not find a matching font-stretch value for "+Gt);return It})(tn.stretch,Pt),Pt=(function(Gt,jt){if(jt[Gt])return jt[Gt];for(var kn=VE[Gt],Mt=0;Mt<kn.length;++Mt)if(jt[kn[Mt]])return jt[kn[Mt]];throw new Error("Could not find a matching font-style for "+Gt)})(tn.style,Pt),!(Pt=(function(Gt,jt){if(jt[Gt])return jt[Gt];if(Gt===400&&jt[500])return jt[500];if(Gt===500&&jt[400])return jt[400];var kn=XL[Gt],Mt=ob(jt,qE,kn,Gt<400?-1:1);if(!Mt)throw new Error("Could not find a matching font-weight for value "+Gt);return Mt})(tn.weight,Pt)))throw new Error("Failed to resolve a font for the rule '"+lb(tn)+"'.");return Pt})(pe,Ve);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var ft="";(he==="bold"||parseInt(he,10)>=700||st==="bold")&&(ft="bold"),st==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var xt="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<He.length;mt++){if(this.pdf.internal.getFont(He[mt],ft,{noFallback:!0,disableWarning:!0})!==void 0){xt=He[mt];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(He[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xt=He[mt],ft="bold";else if(this.pdf.internal.getFont(He[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xt=He[mt],ft="normal";break}}if(xt===""){for(var $t=0;$t<He.length;$t++)if(Lt[He[$t]]){xt=Lt[He[$t]];break}}xt=xt===""?"Times":xt,this.pdf.setFont(xt,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};b.prototype.setLineDash=function(U){this.lineDash=U},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){W.call(this,"fill",!1)},b.prototype.stroke=function(){W.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(U,J){if(isNaN(U)||isNaN(J))throw pi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new l(U,J));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new l(U,J)},b.prototype.closePath=function(){var U=new l(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&ei(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){U=new l(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(U.x,U.y)},b.prototype.lineTo=function(U,J){if(isNaN(U)||isNaN(J))throw pi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new l(U,J));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new l(ie.x,ie.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},b.prototype.quadraticCurveTo=function(U,J,ie,fe){if(isNaN(ie)||isNaN(fe)||isNaN(U)||isNaN(J))throw pi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new l(ie,fe)),Ee=this.ctx.transform.applyToPoint(new l(U,J));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},b.prototype.bezierCurveTo=function(U,J,ie,fe,me,Ee){if(isNaN(me)||isNaN(Ee)||isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe))throw pi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new l(me,Ee)),Me=this.ctx.transform.applyToPoint(new l(U,J)),$e=this.ctx.transform.applyToPoint(new l(ie,fe));this.path.push({type:"bct",x1:Me.x,y1:Me.y,x2:$e.x,y2:$e.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new l(Pe.x,Pe.y)},b.prototype.arc=function(U,J,ie,fe,me,Ee){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(me))throw pi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new l(U,J));U=Pe.x,J=Pe.y;var Me=this.ctx.transform.applyToPoint(new l(0,ie)),$e=this.ctx.transform.applyToPoint(new l(0,0));ie=Math.sqrt(Math.pow(Me.x-$e.x,2)+Math.pow(Me.y-$e.y,2))}Math.abs(me-fe)>=2*Math.PI&&(fe=0,me=2*Math.PI),this.path.push({type:"arc",x:U,y:J,radius:ie,startAngle:fe,endAngle:me,counterclockwise:Ee})},b.prototype.arcTo=function(U,J,ie,fe,me){throw new Error("arcTo not implemented.")},b.prototype.rect=function(U,J,ie,fe){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe))throw pi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,J),this.lineTo(U+ie,J),this.lineTo(U+ie,J+fe),this.lineTo(U,J+fe),this.lineTo(U,J),this.lineTo(U+ie,J),this.lineTo(U,J)},b.prototype.fillRect=function(U,J,ie,fe){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe))throw pi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,J,ie,fe),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},b.prototype.strokeRect=function(U,J,ie,fe){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe))throw pi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(U,J,ie,fe),this.stroke())},b.prototype.clearRect=function(U,J,ie,fe){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe))throw pi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,J,ie,fe))},b.prototype.save=function(U){U=typeof U!="boolean"||U;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},b.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(J),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(U){var J,ie,fe,me;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))J=0,ie=0,fe=0,me=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(Ee!==null)J=parseInt(Ee[1]),ie=parseInt(Ee[2]),fe=parseInt(Ee[3]),me=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)J=parseInt(Ee[1]),ie=parseInt(Ee[2]),fe=parseInt(Ee[3]),me=parseFloat(Ee[4]);else{if(me=1,typeof U=="string"&&U.charAt(0)!=="#"){var Pe=new ME(U);U=Pe.ok?Pe.toHex():"#000000"}U.length===4?(J=U.substring(1,2),J+=J,ie=U.substring(2,3),ie+=ie,fe=U.substring(3,4),fe+=fe):(J=U.substring(1,3),ie=U.substring(3,5),fe=U.substring(5,7)),J=parseInt(J,16),ie=parseInt(ie,16),fe=parseInt(fe,16)}}return{r:J,g:ie,b:fe,a:me,style:U}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(U,J,ie,fe){if(isNaN(J)||isNaN(ie)||typeof U!="string")throw pi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!x.call(this)){var me=ve(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;k.call(this,{text:U,x:J,y:ie,scale:Ee,angle:me,align:this.textAlign,maxWidth:fe})}},b.prototype.strokeText=function(U,J,ie,fe){if(isNaN(J)||isNaN(ie)||typeof U!="string")throw pi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){fe=isNaN(fe)?void 0:fe;var me=ve(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;k.call(this,{text:U,x:J,y:ie,scale:Ee,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:fe})}},b.prototype.measureText=function(U){if(typeof U!="string")throw pi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,ie=this.pdf.internal.scaleFactor,fe=J.internal.getFontSize(),me=J.getStringUnitWidth(U)*fe/J.internal.scaleFactor;return new function(Ee){var Pe=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pe}}),this}({width:me*=Math.round(96*ie/72*1e4)/1e4})},b.prototype.scale=function(U,J){if(isNaN(U)||isNaN(J))throw pi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new h(U,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},b.prototype.rotate=function(U){if(isNaN(U))throw pi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},b.prototype.translate=function(U,J){if(isNaN(U)||isNaN(J))throw pi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new h(1,0,0,1,U,J);this.ctx.transform=this.ctx.transform.multiply(ie)},b.prototype.transform=function(U,J,ie,fe,me,Ee){if(isNaN(U)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(me)||isNaN(Ee))throw pi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new h(U,J,ie,fe,me,Ee);this.ctx.transform=this.ctx.transform.multiply(Pe)},b.prototype.setTransform=function(U,J,ie,fe,me,Ee){U=isNaN(U)?1:U,J=isNaN(J)?0:J,ie=isNaN(ie)?0:ie,fe=isNaN(fe)?1:fe,me=isNaN(me)?0:me,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new h(U,J,ie,fe,me,Ee)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(U,J,ie,fe,me,Ee,Pe,Me,$e){var it=this.pdf.getImageProperties(U),lt=1,ut=1,pt=1,re=1;fe!==void 0&&Me!==void 0&&(pt=Me/fe,re=$e/me,lt=it.width/fe*Me/fe,ut=it.height/me*$e/me),Ee===void 0&&(Ee=J,Pe=ie,J=0,ie=0),fe!==void 0&&Me===void 0&&(Me=fe,$e=me),fe===void 0&&Me===void 0&&(Me=it.width,$e=it.height);var ke=this.ctx.transform.decompose(),st=ve(ke.rotate.shx),he=new h,_e=(he=(he=(he=he.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new c(Ee-J*pt,Pe-ie*re,fe*lt,me*ut));if(this.autoPaging){for(var at,qe=B.call(this,_e),He=[],pe=0;pe<qe.length;pe+=1)He.indexOf(qe[pe])===-1&&He.push(qe[pe]);Z(He);for(var Ve=He[0],Ct=He[He.length-1],ft=Ve;ft<Ct+1;ft++){this.pdf.setPage(ft);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=ft===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=ft===1?0:mt+(ft-2)*$t;if(this.ctx.clip_path.length!==0){var ti=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(at,this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset),ye.call(this,"fill",!0),this.path=ti}var Wt=JSON.parse(JSON.stringify(_e));Wt=X([Wt],this.posX+this.margin[3],-bt+Lt+this.ctx.prevPageLastElemOffset)[0];var Ot=(ft>Ve||ft<Ct)&&O.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,$t,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,st),Ot&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(U,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,st)};var B=function(U,J,ie){var fe=[];J=J||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":fe.push(Math.floor((U.y+me)/ie)+1);break;case"arc":fe.push(Math.floor((U.y+me-U.radius)/ie)+1),fe.push(Math.floor((U.y+me+U.radius)/ie)+1);break;case"qct":var Ee=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);fe.push(Math.floor((Ee.y+me)/ie)+1),fe.push(Math.floor((Ee.y+Ee.h+me)/ie)+1);break;case"bct":var Pe=We(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);fe.push(Math.floor((Pe.y+me)/ie)+1),fe.push(Math.floor((Pe.y+Pe.h+me)/ie)+1);break;case"rect":fe.push(Math.floor((U.y+me)/ie)+1),fe.push(Math.floor((U.y+U.h+me)/ie)+1)}for(var Me=0;Me<fe.length;Me+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Me];)q.call(this);return fe},q=function(){var U=this.fillStyle,J=this.strokeStyle,ie=this.font,fe=this.lineCap,me=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=J,this.font=ie,this.lineCap=fe,this.lineWidth=me,this.lineJoin=Ee},X=function(U,J,ie){for(var fe=0;fe<U.length;fe++)switch(U[fe].type){case"bct":U[fe].x2+=J,U[fe].y2+=ie;case"qct":U[fe].x1+=J,U[fe].y1+=ie;default:U[fe].x+=J,U[fe].y+=ie}return U},Z=function(U){return U.sort(function(J,ie){return J-ie})},W=function(U,J){var ie=this.fillStyle,fe=this.strokeStyle,me=this.lineCap,Ee=this.lineWidth,Pe=Math.abs(Ee*this.ctx.transform.scaleX),Me=this.lineJoin;if(this.autoPaging){for(var $e,it,lt=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),pt=[],re=0;re<ut.length;re++)if(ut[re].x!==void 0)for(var ke=B.call(this,ut[re]),st=0;st<ke.length;st+=1)pt.indexOf(ke[st])===-1&&pt.push(ke[st]);for(var he=0;he<pt.length;he++)for(;this.pdf.internal.getNumberOfPages()<pt[he];)q.call(this);Z(pt);for(var _e=pt[0],at=pt[pt.length-1],qe=_e;qe<at+1;qe++){this.pdf.setPage(qe),this.fillStyle=ie,this.strokeStyle=fe,this.lineCap=me,this.lineWidth=Pe,this.lineJoin=Me;var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=qe===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=qe===1?0:Ve+(qe-2)*Ct;if(this.ctx.clip_path.length!==0){var xt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X($e,this.posX+this.margin[3],-ft+pe+this.ctx.prevPageLastElemOffset),ye.call(this,U,!0),this.path=xt}if(it=JSON.parse(JSON.stringify(lt)),this.path=X(it,this.posX+this.margin[3],-ft+pe+this.ctx.prevPageLastElemOffset),J===!1||qe===0){var Lt=(qe>_e||qe<at)&&O.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,Ct,null).clip().discardPath()),ye.call(this,U,J),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}this.path=lt}else this.lineWidth=Pe,ye.call(this,U,J),this.lineWidth=Ee},ye=function(U,J){if((U!=="stroke"||J||!D.call(this))&&(U==="stroke"||J||!x.call(this))){for(var ie,fe,me=[],Ee=this.path,Pe=0;Pe<Ee.length;Pe++){var Me=Ee[Pe];switch(Me.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Me,deltas:[],abs:[]});break;case"lt":var $e=me.length;if(Ee[Pe-1]&&!isNaN(Ee[Pe-1].x)&&(ie=[Me.x-Ee[Pe-1].x,Me.y-Ee[Pe-1].y],$e>0)){for(;$e>=0;$e--)if(me[$e-1].close!==!0&&me[$e-1].begin!==!0){me[$e-1].deltas.push(ie),me[$e-1].abs.push(Me);break}}break;case"bct":ie=[Me.x1-Ee[Pe-1].x,Me.y1-Ee[Pe-1].y,Me.x2-Ee[Pe-1].x,Me.y2-Ee[Pe-1].y,Me.x-Ee[Pe-1].x,Me.y-Ee[Pe-1].y],me[me.length-1].deltas.push(ie);break;case"qct":var it=Ee[Pe-1].x+2/3*(Me.x1-Ee[Pe-1].x),lt=Ee[Pe-1].y+2/3*(Me.y1-Ee[Pe-1].y),ut=Me.x+2/3*(Me.x1-Me.x),pt=Me.y+2/3*(Me.y1-Me.y),re=Me.x,ke=Me.y;ie=[it-Ee[Pe-1].x,lt-Ee[Pe-1].y,ut-Ee[Pe-1].x,pt-Ee[Pe-1].y,re-Ee[Pe-1].x,ke-Ee[Pe-1].y],me[me.length-1].deltas.push(ie);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Me)}}fe=J?null:U==="stroke"?"stroke":"fill";for(var st=!1,he=0;he<me.length;he++)if(me[he].arc)for(var _e=me[he].abs,at=0;at<_e.length;at++){var qe=_e[at];qe.type==="arc"?V.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,J,!st):F.call(this,qe.x,qe.y),st=!0}else if(me[he].close===!0)this.pdf.internal.out("h"),st=!1;else if(me[he].begin!==!0){var He=me[he].start.x,pe=me[he].start.y;ce.call(this,me[he].deltas,He,pe),st=!0}fe&&L.call(this,fe),J&&j.call(this)}},de=function(U){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-ie;case"top":return U+J-ie;case"hanging":return U+J-2*ie;case"middle":return U+J/2-ie;default:return U}},G=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(J,ie){this.colorStops.push([J,ie])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(U,J,ie,fe,me,Ee,Pe,Me,$e){for(var it=le.call(this,ie,fe,me,Ee),lt=0;lt<it.length;lt++){var ut=it[lt];lt===0&&($e?I.call(this,ut.x1+U,ut.y1+J):F.call(this,ut.x1+U,ut.y1+J)),Te.call(this,U,J,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}Me?j.call(this):L.call(this,Pe)},L=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(U,J){this.pdf.internal.out(t(U)+" "+i(J)+" m")},k=function(U){var J;switch(U.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var ie,fe,me,Ee=this.pdf.getTextDimensions(U.text),Pe=de.call(this,U.y),Me=G.call(this,Pe)-Ee.h,$e=this.ctx.transform.applyToPoint(new l(U.x,Pe));if(this.autoPaging){var it=this.ctx.transform.decompose(),lt=new h;lt=(lt=(lt=lt.multiply(it.translate)).multiply(it.skew)).multiply(it.scale);for(var ut=this.ctx.transform.applyToRectangle(new c(U.x,Pe,Ee.w,Ee.h)),pt=lt.applyToRectangle(new c(U.x,Me,Ee.w,Ee.h)),re=B.call(this,pt),ke=[],st=0;st<re.length;st+=1)ke.indexOf(re[st])===-1&&ke.push(re[st]);Z(ke);for(var he=ke[0],_e=ke[ke.length-1],at=he;at<_e+1;at++){this.pdf.setPage(at);var qe=at===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],Ve=pe-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],ft=Ct-this.margin[3],xt=at===1?0:He+(at-2)*Ve;if(this.ctx.clip_path.length!==0){var Lt=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(ie,this.posX+this.margin[3],-1*xt+qe),ye.call(this,"fill",!0),this.path=Lt}var mt=X([JSON.parse(JSON.stringify(pt))],this.posX+this.margin[3],-xt+qe+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*U.scale),me=this.lineWidth,this.lineWidth=me*U.scale);var $t=this.autoPaging!=="text";if($t||mt.y+mt.h<=pe){if($t||mt.y>=qe&&mt.x<=Ct){var bt=$t?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Ct-mt.x)[0],ti=X([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-xt+qe+this.ctx.prevPageLastElemOffset)[0],Wt=$t&&(at>he||at<_e)&&O.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ve,null).clip().discardPath()),this.pdf.text(bt,ti.x,ti.y,{angle:U.angle,align:J,renderingMode:U.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else mt.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-mt.y);U.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=me)}}else U.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*U.scale),me=this.lineWidth,this.lineWidth=me*U.scale),this.pdf.text(U.text,$e.x+this.posX,$e.y+this.posY,{angle:U.angle,align:J,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=me)},F=function(U,J,ie,fe){ie=ie||0,fe=fe||0,this.pdf.internal.out(t(U+ie)+" "+i(J+fe)+" l")},ce=function(U,J,ie){return this.pdf.lines(U,J,ie,null,null)},Te=function(U,J,ie,fe,me,Ee,Pe,Me){this.pdf.internal.out([e(r(ie+U)),e(o(fe+J)),e(r(me+U)),e(o(Ee+J)),e(r(Pe+U)),e(o(Me+J)),"c"].join(" "))},le=function(U,J,ie,fe){for(var me=2*Math.PI,Ee=Math.PI/2;J>ie;)J-=me;var Pe=Math.abs(ie-J);Pe<me&&fe&&(Pe=me-Pe);for(var Me=[],$e=fe?-1:1,it=J;Pe>1e-5;){var lt=it+$e*Math.min(Pe,Ee);Me.push(ue.call(this,U,it,lt)),Pe-=Math.abs(lt-it),it=lt}return Me},ue=function(U,J,ie){var fe=(ie-J)/2,me=U*Math.cos(fe),Ee=U*Math.sin(fe),Pe=me,Me=-Ee,$e=Pe*Pe+Me*Me,it=$e+Pe*me+Me*Ee,lt=4/3*(Math.sqrt(2*$e*it)-it)/(Pe*Ee-Me*me),ut=Pe-lt*Me,pt=Me+lt*Pe,re=ut,ke=-pt,st=fe+J,he=Math.cos(st),_e=Math.sin(st);return{x1:U*Math.cos(J),y1:U*Math.sin(J),x2:ut*he-pt*_e,y2:ut*_e+pt*he,x3:re*he-ke*_e,y3:re*_e+ke*he,x4:U*Math.cos(ie),y4:U*Math.sin(ie)}},ve=function(U){return 180*U/Math.PI},we=function(U,J,ie,fe,me,Ee){var Pe=U+.5*(ie-U),Me=J+.5*(fe-J),$e=me+.5*(ie-me),it=Ee+.5*(fe-Ee),lt=Math.min(U,me,Pe,$e),ut=Math.max(U,me,Pe,$e),pt=Math.min(J,Ee,Me,it),re=Math.max(J,Ee,Me,it);return new c(lt,pt,ut-lt,re-pt)},We=function(U,J,ie,fe,me,Ee,Pe,Me){var $e,it,lt,ut,pt,re,ke,st,he,_e,at,qe,He,pe,Ve=ie-U,Ct=fe-J,ft=me-ie,xt=Ee-fe,Lt=Pe-me,mt=Me-Ee;for(it=0;it<41;it++)he=(ke=(lt=U+($e=it/40)*Ve)+$e*((pt=ie+$e*ft)-lt))+$e*(pt+$e*(me+$e*Lt-pt)-ke),_e=(st=(ut=J+$e*Ct)+$e*((re=fe+$e*xt)-ut))+$e*(re+$e*(Ee+$e*mt-re)-st),it==0?(at=he,qe=_e,He=he,pe=_e):(at=Math.min(at,he),qe=Math.min(qe,_e),He=Math.max(He,he),pe=Math.max(pe,_e));return new c(Math.round(at),Math.round(qe),Math.round(He-at),Math.round(pe-qe))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,J,ie=(U=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:J}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(Dt.API),(function(n){var e=function(l){var c,h,f,p,b,S,x,D,O,B;for(h=[],f=0,p=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;p>f;f+=4)(b=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(S=(b=((b=((b=((b=(b-(B=b%85))/85)-(O=b%85))/85)-(D=b%85))/85)-(x=b%85))/85)%85,h.push(S+33,x+33,D+33,O+33,B+33)):h.push(122);return(function(q,X){for(var Z=X;Z>0;Z--)q.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var c,h,f,p,b,S=String,x="length",D=255,O="charCodeAt",B="slice",q="replace";for(l[B](-2),l=l[B](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),f=[],p=0,b=(l+=c="uuuuu"[B](l[x]%5||5))[x];b>p;p+=5)h=52200625*(l[O](p)-33)+614125*(l[O](p+1)-33)+7225*(l[O](p+2)-33)+85*(l[O](p+3)-33)+(l[O](p+4)-33),f.push(D&h>>24,D&h>>16,D&h>>8,D&h);return(function(X,Z){for(var W=Z;W>0;W--)X.pop()})(f,c[x]),S.fromCharCode.apply(S,f)},i=function(l){return l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var h="",f=0;f<l.length;f+=2)h+=String.fromCharCode("0x"+(l[f]+l[f+1]));return h},o=function(l){for(var c=new Uint8Array(l.length),h=l.length;h--;)c[h]=l.charCodeAt(h);return(c=i1(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(l,c){var h=0,f=l||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=i(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Dt.API),(function(n){n.loadFile=function(e,t,i){return(function(r,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(h,f,p){var b=new XMLHttpRequest,S=0,x=function(D){var O=D.length,B=[],q=String.fromCharCode;for(S=0;S<O;S+=1)B.push(q(255&D.charCodeAt(S)));return B.join("")};if(b.open("GET",h,!f),b.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(b.onload=function(){b.status===200?p(x(this.responseText)):p(void 0)}),b.send(null),f&&b.status===200)return x(b.responseText)})(r,o,l)}catch{}return c})(e,t,i)},n.allowFsRead=void 0,n.loadImageFile=n.loadFile})(Dt.API),(function(n){function e(){return(en.html2canvas?Promise.resolve(en.html2canvas):Zg(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):Zg(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var i=function(c){var h=ei(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},r=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},o=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)f!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||p.appendChild(c(b,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},l=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,h){return c.__proto__=h||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(i(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(t).then(function(f){return this.set({src:r("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var x=0;x<p.length;++x){var D=p[x],O=D.src.find(function(B){return B.format==="truetype"});O&&f.addFont(O.url,D.ref.name,D.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,f.context2d.save(!0),h(this.prop.container,S)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},l.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(i(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(c,h){return this.then(function(){var f=c in l.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},l.prototype.setMargin=function(c){return this.then(function(){switch(i(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,b){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(S){return f.updateProgress(null,p),S}).then(p,b).then(function(S){return f.updateProgress(1),S})})},l.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:l.convert(Object.assign({},p),Promise.prototype),S=f.call(b,c,h);return l.convert(S,p.__proto__)},l.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},l.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},l.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return l.convert(h,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Dt.getPageSize=function(c,h,f){if(ei(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var b,S=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+h}var D,O=0,B=0;if(x.hasOwnProperty(S))O=x[S][1]/b,B=x[S][0]/b;else try{O=f[1],B=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",B>O&&(D=B,B=O,O=D);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",O>B&&(D=B,B=O,O=D)}return{width:B,height:O,unit:h,k:b,orientation:c}},n.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(y0):null;var f=new l(h);return h.worker?f:f.from(c).doCallback()}})(Dt.API),Dt.API.addJS=function(n){var e,t,i=(function(r){for(var o="",l=0;l<r.length;l++){var c=r[l];if(c==="("||c===")"){for(var h=0,f=l-1;f>=0&&r[f]==="\\";f--)h++;o+=h%2==0?"\\"+c:c}else o+=c}return o})(n);return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&t!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),o=0;o<r.length;o++){var l=r[o],c=i.exec(l);if(c!=null){var h=c[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(o=0;o<f;o++){var b=t.internal.newObject();p.push(b);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,r,o){var l={title:r,options:o,children:[]};return i==null&&(i=this.root),i.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var l=i.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var f=0;f<i.children.length;f++)this.renderItems(i.children[f])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,r){for(var o=0;o<r.children.length;o++)i.count++,this.count_r(i,r.children[o]);return i.count}}])})(Dt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,r,o,l,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(b){for(var S,x=256*b.charCodeAt(4)+b.charCodeAt(5),D=b.length,O={width:0,height:0,numcomponents:1},B=4;B<D;B+=2){if(B+=x,e.indexOf(b.charCodeAt(B+1))!==-1){S=256*b.charCodeAt(B+5)+b.charCodeAt(B+6),O={width:256*b.charCodeAt(B+7)+b.charCodeAt(B+8),height:S,numcomponents:b.charCodeAt(B+9)};break}x=256*b.charCodeAt(B+2)+b.charCodeAt(B+3)}return O})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:i,alias:r}}return p}})(Dt.API),Dt.API.processPNG=function(n,e,t,i){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var r,o=OL(n,{checkCrc:!0}),l=o.width,c=o.height,h=o.channels,f=o.palette,p=o.depth;r=f&&h===1?(function(V){for(var L=V.width,j=V.height,I=V.data,k=V.palette,F=V.depth,ce=!1,Te=[],le=[],ue=void 0,ve=!1,we=0,We=0;We<k.length;We++){var ne=m_(k[We],4),U=ne[0],J=ne[1],ie=ne[2],fe=ne[3];Te.push(U,J,ie),fe!=null&&(fe===0?(we++,le.length<1&&le.push(We)):fe<255&&(ve=!0))}if(ve||we>1){ce=!0,le=void 0;var me=L*j;ue=new Uint8Array(me);for(var Ee=new DataView(I.buffer),Pe=0;Pe<me;Pe++){var Me=_0(Ee,Pe,F),$e=m_(k[Me],4)[3];ue[Pe]=$e}}else we===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ce?8:void 0,colorBytes:I,alphaBytes:ue,needSMask:ce,palette:Te,mask:le}})(o):h===2||h===4?(function(V){for(var L=V.data,j=V.width,I=V.height,k=V.channels,F=V.depth,ce=k===2?"DeviceGray":"DeviceRGB",Te=k-1,le=j*I,ue=Te,ve=le*ue,we=1*le,We=Math.ceil(ve*F/8),ne=Math.ceil(we*F/8),U=new Uint8Array(We),J=new Uint8Array(ne),ie=new DataView(L.buffer),fe=new DataView(U.buffer),me=new DataView(J.buffer),Ee=!1,Pe=0;Pe<le;Pe++){for(var Me=Pe*k,$e=0;$e<ue;$e++)vb(fe,_0(ie,Me+$e,F),Pe*ue+$e,F);var it=_0(ie,Me+ue,F);it<(1<<F)-1&&(Ee=!0),vb(me,it,1*Pe,F)}return{colorSpace:ce,colorsPerPixel:Te,sMaskBitsPerComponent:Ee?F:void 0,colorBytes:U,alphaBytes:J,needSMask:Ee}})(o):(function(V){var L=V.data,j=V.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:j,colorsPerPixel:j==="DeviceGray"?1:3,colorBytes:L instanceof Uint16Array?(function(I){for(var k=I.length,F=new Uint8Array(2*k),ce=new DataView(F.buffer,F.byteOffset,F.byteLength),Te=0;Te<k;Te++)ce.setUint16(2*Te,I[Te],!1);return F})(L):L,needSMask:!1}})(o);var b,S,x,D=r,O=D.colorSpace,B=D.colorsPerPixel,q=D.sMaskBitsPerComponent,X=D.colorBytes,Z=D.alphaBytes,W=D.needSMask,ye=D.palette,de=D.mask,G=null;return i!==Dt.API.image_compression.NONE&&typeof i1=="function"?(G=(function(V){var L;switch(V){case Dt.API.image_compression.FAST:L=11;break;case Dt.API.image_compression.MEDIUM:L=13;break;case Dt.API.image_compression.SLOW:L=14;break;default:L=12}return L})(i),b=this.decode.FLATE_DECODE,S="/Predictor ".concat(G," /Colors ").concat(B," /BitsPerComponent ").concat(p," /Columns ").concat(l),n=db(X,Math.ceil(l*B*p/8),B,p,i),W&&(x=db(Z,Math.ceil(l*q/8),1,q,i))):(b=void 0,S=void 0,n=X,W&&(x=Z)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:t,data:n,index:e,filter:b,decodeParameters:S,transparency:de,palette:ye,sMask:x,predictor:G,width:l,height:c,bitsPerComponent:p,sMaskBitsPerComponent:q,colorSpace:O}}},(function(n){n.processGIF89A=function(e,t,i,r){var o=new rM(e),l=o.width,c=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:l,height:c},p=new b0(100).encode(f,100);return n.processJPEG.call(this,p,t,i,r)},n.processGIF87A=n.processGIF89A})(Dt.API),pa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pa.prototype.parseBGR=function(){this.pos=this.offset;var n="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[n]()}catch(t){pi.log("bit decode error:"+t)}},pa.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*r*4,c=0;c<8&&8*r+c<this.width;c++){var h=this.palette[o>>7-c&1];this.data[l+4*c]=h.blue,this.data[l+4*c+1]=h.green,this.data[l+4*c+2]=h.red,this.data[l+4*c+3]=255}t!==0&&(this.pos+=4-t)}},pa.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<n;r++){var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*r*4,c=o>>4,h=15&o,f=this.palette[c];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*r+1>=this.width)break;f=this.palette[h],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},pa.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*i;if(r<this.palette.length){var l=this.palette[r];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},pa.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,p=i*this.width*4+4*r;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=f}this.pos+=n}},pa.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,f=(l>>11)/e*255|0,p=r*this.width*4+4*o;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},pa.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=o,this.data[l+1]=r,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},pa.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=r,this.data[c+2]=i,this.data[c+3]=l}},pa.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,i,r){var o=new pa(e,!1),l=o.width,c=o.height,h={data:o.getData(),width:l,height:c},f=new b0(100).encode(h,100);return n.processJPEG.call(this,f,t,i,r)}})(Dt.API),bb.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,i,r){var o=new bb(e),l=o.width,c=o.height,h={data:o.getData(),width:l,height:c},f=new b0(100).encode(h,100);return n.processJPEG.call(this,f,t,i,r)}})(Dt.API),Dt.API.processRGBA=function(n,e,t){for(var i=n.data,r=i.length,o=new Uint8Array(r/4*3),l=new Uint8Array(r/4),c=0,h=0,f=0;f<r;f+=4){var p=i[f],b=i[f+1],S=i[f+2],x=i[f+3];o[c++]=p,o[c++]=b,o[c++]=S,l[h++]=x}var D=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:D,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Dt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qc=Dt.API,lp=Qc.getCharWidthsArray=function(n,e){var t,i,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:r.metadata.Unicode.widths,h=c.fof?c.fof:1,f=e.kerning?e.kerning:r.metadata.Unicode.kerning,p=f.fof?f.fof:1,b=e.doKerning!==!1,S=0,x=n.length,D=0,O=c[0]||h,B=[];for(t=0;t<x;t++)i=n.charCodeAt(t),typeof r.metadata.widthOfString=="function"?B.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+l*(1e3/o)||0)/1e3):(S=b&&ei(f[i])==="object"&&!isNaN(parseInt(f[i][D],10))?f[i][D]/p:0,B.push((c[i]||O)/h+S)),D=i;return B},cb=Qc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Qc.processArabic&&(n=Qc.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,t,r)/t:lp.apply(this,arguments).reduce(function(o,l){return o+l},0)},fb=function(n,e,t,i){for(var r=[],o=0,l=n.length,c=0;o!==l&&c+e[o]<t;)c+=e[o],o++;r.push(n.slice(0,o));var h=o;for(c=0;o!==l;)c+e[o]>i&&(r.push(n.slice(h,o)),c=0,h=o),c+=e[o],o++;return h!==o&&r.push(n.slice(h,o)),r},hb=function(n,e,t){t||(t={});var i,r,o,l,c,h,f,p=[],b=[p],S=t.textIndent||0,x=0,D=0,O=n.split(" "),B=lp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?O[0].length+2:t.lineIndent||0){var q=Array(h).join(" "),X=[];O.map(function(W){(W=W.split(/\s*\n/)).length>1?X=X.concat(W.map(function(ye,de){return(de&&ye.length?`
`:"")+ye})):X.push(W[0])}),O=X,h=cb.apply(this,[q,t])}for(o=0,l=O.length;o<l;o++){var Z=0;if(i=O[o],h&&i[0]==`
`&&(i=i.substr(1),Z=1),S+x+(D=(r=lp.apply(this,[i,t])).reduce(function(W,ye){return W+ye},0))>e||Z){if(D>e){for(c=fb.apply(this,[i,r,e-(S+x),e]),p.push(c.shift()),p=[c.pop()];c.length;)b.push([c.shift()]);D=r.slice(i.length-(p[0]?p[0].length:0)).reduce(function(W,ye){return W+ye},0)}else p=[i];b.push(p),S=D+h,x=B}else p.push(i),S+=x+D,x=B}return f=h?function(W,ye){return(ye?q:"")+W.join(" ")}:function(W){return W.join(" ")},b.map(f)},Qc.splitTextToSize=function(n,e,t){var i,r=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var b=this.internal.getFont(p.fontName,p.fontStyle),S="Unicode";return b.metadata[S]?{widths:b.metadata[S].widths||{0:1},kerning:b.metadata[S].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/r;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=t.lineIndent;var c,h,f=[];for(c=0,h=i.length;c<h;c++)f=f.concat(hb.apply(this,[i[c],l,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",i={},r={},o=0;o<16;o++)i[t[o]]=e[o],r[e[o]]=t[o];var l=function(S){return"0x"+parseInt(S,10).toString(16)},c=n.__fontmetrics__.compress=function(S){var x,D,O,B,q=["{"];for(var X in S){if(x=S[X],isNaN(parseInt(X,10))?D="'"+X+"'":(X=parseInt(X,10),D=(D=l(X).slice(2)).slice(0,-1)+r[D.slice(-1)]),typeof x=="number")x<0?(O=l(x).slice(3),B="-"):(O=l(x).slice(2),B=""),O=B+O.slice(0,-1)+r[O.slice(-1)];else{if(ei(x)!=="object")throw new Error("Don't know what to do with value type "+ei(x)+".");O=c(x)}q.push(D+O)}return q.push("}"),q.join("")},h=n.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,D,O,B,q={},X=1,Z=q,W=[],ye="",de="",G=S.length-1,V=1;V<G;V+=1)(B=S[V])=="'"?x?(O=x.join(""),x=void 0):x=[]:x?x.push(B):B=="{"?(W.push([Z,O]),Z={},O=void 0):B=="}"?((D=W.pop())[0][D[1]]=Z,O=void 0,Z=D[0]):B=="-"?X=-1:O===void 0?i.hasOwnProperty(B)?(ye+=i[B],O=parseInt(ye,16)*X,X=1,ye=""):ye+=B:i.hasOwnProperty(B)?(de+=i[B],Z[O]=parseInt(de,16)*X,X=1,O=void 0,de=""):de+=B;return q},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},b={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(S){var x=S.font,D=b.Unicode[x.postScriptName];D&&(x.metadata.Unicode={},x.metadata.Unicode.widths=D.widths,x.metadata.Unicode.kerning=D.kerning);var O=p.Unicode[x.postScriptName];O&&(x.metadata.Unicode.encoding=O,x.encoding=O.codePages[0])}])})(Dt.API),(function(n){var e=function(t){for(var i=t.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=t.charCodeAt(o);return r};n.API.events.push(["addFont",function(t){var i=void 0,r=t.font,o=t.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(wp(c)),l.metadata=n.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(r,i)}}])})(Dt),Dt.API.addSvgAsImage=function(n,e,t,i,r,o,l,c){if(isNaN(e)||isNaN(t))throw pi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw pi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=i,h.height=r;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(en.canvg?Promise.resolve(en.canvg):Zg(()=>import("./index.es-D0quetE8.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(p)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),e,t,i,r,l,c)})},Dt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,t);return this},Dt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var i,r,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),h=[],f=0,p=0,b=0;function S(D,O){var B,q=!1;for(B=0;B<D.length;B+=1)D[B]===O&&(q=!0);return q}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var x=c.length;for(b=0;b<x;b+=1)t[c[b]].value=t[c[b]].defaultValue,t[c[b]].explicitSet=!1}if(ei(n)==="object"){for(r in n)if(o=n[r],S(c,r)&&o!==void 0){if(t[r].type==="boolean"&&typeof o=="boolean")t[r].value=o;else if(t[r].type==="name"&&S(t[r].valueSet,o))t[r].value=o;else if(t[r].type==="integer"&&Number.isInteger(o))t[r].value=o;else if(t[r].type==="array"){for(f=0;f<o.length;f+=1)if(i=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(p=0;p<o[f].length;p+=1)typeof o[f][p]!="number"&&(i=!1);i===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[r].value="["+h.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,O=[];for(D in t)t[D].explicitSet===!0&&(t[D].type==="name"?O.push("/"+D+" /"+t[D].value):O.push("/"+D+" "+t[D].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},Dt.API.addMetadata=function(n,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",oM),this.internal.events.subscribe("postPutResources",sM)),this},(function(n){var e=n.API,t=e.pdfEscape16=function(o,l){for(var c,h=l.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],b=0,S=o.length;b<S;++b){if(c=l.metadata.characterToGlyph(o.charCodeAt(b)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(b),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},i=function(o){var l,c,h,f,p,b,S;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,S=(c=Object.keys(o).sort(function(x,D){return x-D})).length;b<S;b++)l=c[b],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(f=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var c=l.font,h=l.out,f=l.newObject,p=l.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,S=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",D=0;D<S.length;D++)x+=String.fromCharCode(S[D]);var O=f();p({data:x,addLength1:!0,objectId:O}),h("endobj");var B=f();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:B}),h("endobj");var q=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+sf(c.fontName)),h("/FontFile2 "+O+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var X=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+sf(c.fontName)),h("/FontDescriptor "+q+" 0 R"),h("/W "+n.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+B+" 0 R"),h("/BaseFont /"+sf(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+X+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var c=l.font,h=l.out,f=l.newObject,p=l.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,S="",x=0;x<b.length;x++)S+=String.fromCharCode(b[x]);var D=f();p({data:S,addLength1:!0,objectId:D}),h("endobj");var O=f();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:O}),h("endobj");var B=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+D+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+sf(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var q=0;q<c.metadata.hmtx.widths.length;q++)c.metadata.hmtx.widths[q]=parseInt(c.metadata.hmtx.widths[q]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+sf(c.fontName)+"/FontDescriptor "+B+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]);var r=function(o){var l,c=o.text||"",h=o.x,f=o.y,p=o.options||{},b=o.mutex||{},S=b.pdfEscape,x=b.activeFontKey,D=b.fonts,O=x,B="",q=0,X="",Z=D[O].encoding;if(D[O].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:b};for(X=c,O=x,Array.isArray(c)&&(X=c[0]),q=0;q<X.length;q+=1)D[O].metadata.hasOwnProperty("cmap")&&(l=D[O].metadata.cmap.unicode.codeMap[X[q].charCodeAt(0)]),l||X[q].charCodeAt(0)<256&&D[O].metadata.hasOwnProperty("Unicode")?B+=X[q]:B+="";var W="";return parseInt(O.slice(1))<14||Z==="WinAnsiEncoding"?W=S(B,O).split("").map(function(ye){return ye.charCodeAt(0).toString(16)}).join(""):Z==="Identity-H"&&(W=t(B,D[O])),b.isHex=!0,{text:W,x:h,y:f,options:p,mutex:b}};e.events.push(["postProcessText",function(o){var l=o.text||"",c=[],h={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?c.push([r(Object.assign({},h,{text:l[f][0]})).text,l[f][1],l[f][2]]):c.push(r(Object.assign({},h,{text:l[f]})).text);o.text=c}else o.text=r(Object.assign({},h,{text:l})).text}])})(Dt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Dt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,o,l,c,h,f,p,b=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},B=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],q=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),X=!1,Z=0;this.__bidiEngine__={};var W=function(I){var k=I.charCodeAt(),F=k>>8,ce=O[F];return ce!==void 0?b[256*ce+(255&k)]:F===252||F===253?"AL":q.test(F)?"L":F===8?"R":"N"},ye=function(I){for(var k,F=0;F<I.length;F++){if((k=W(I.charAt(F)))==="L")return!1;if(k==="R")return!0}return!1},de=function(I,k,F,ce){var Te,le,ue,ve,we=k[ce];switch(we){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":X=!1;break;case"N":case"AN":break;case"EN":X&&(we="AN");break;case"AL":X=!0,we="R";break;case"WS":case"BN":we="N";break;case"CS":ce<1||ce+1>=k.length||(Te=F[ce-1])!=="EN"&&Te!=="AN"||(le=k[ce+1])!=="EN"&&le!=="AN"?we="N":X&&(le="AN"),we=le===Te?le:"N";break;case"ES":we=(Te=ce>0?F[ce-1]:"B")==="EN"&&ce+1<k.length&&k[ce+1]==="EN"?"EN":"N";break;case"ET":if(ce>0&&F[ce-1]==="EN"){we="EN";break}if(X){we="N";break}for(ue=ce+1,ve=k.length;ue<ve&&k[ue]==="ET";)ue++;we=ue<ve&&k[ue]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(ve=k.length,ue=ce+1;ue<ve&&k[ue]==="NSM";)ue++;if(ue<ve){var We=I[ce],ne=We>=1425&&We<=2303||We===64286;if(Te=k[ue],ne&&(Te==="R"||Te==="AL")){we="R";break}}}we=ce<1||(Te=k[ce-1])==="B"?"N":F[ce-1];break;case"B":X=!1,r=!0,we=Z;break;case"S":o=!0,we="N"}return we},G=function(I,k,F){var ce=I.split("");return F&&V(ce,F,{hiLevel:Z}),ce.reverse(),k&&k.reverse(),ce.join("")},V=function(I,k,F){var ce,Te,le,ue,ve,we=-1,We=I.length,ne=0,U=[],J=Z?x:S,ie=[];for(X=!1,r=!1,o=!1,Te=0;Te<We;Te++)ie[Te]=W(I[Te]);for(le=0;le<We;le++){if(ve=ne,U[le]=de(I,ie,U,le),ce=240&(ne=J[ve][D[U[le]]]),ne&=15,k[le]=ue=J[ne][5],ce>0)if(ce===16){for(Te=we;Te<le;Te++)k[Te]=1;we=-1}else we=-1;if(J[ne][6])we===-1&&(we=le);else if(we>-1){for(Te=we;Te<le;Te++)k[Te]=ue;we=-1}ie[le]==="B"&&(k[le]=0),F.hiLevel|=ue}o&&(function(fe,me,Ee){for(var Pe=0;Pe<Ee;Pe++)if(fe[Pe]==="S"){me[Pe]=Z;for(var Me=Pe-1;Me>=0&&fe[Me]==="WS";Me--)me[Me]=Z}})(ie,k,We)},L=function(I,k,F,ce,Te){if(!(Te.hiLevel<I)){if(I===1&&Z===1&&!r)return k.reverse(),void(F&&F.reverse());for(var le,ue,ve,we,We=k.length,ne=0;ne<We;){if(ce[ne]>=I){for(ve=ne+1;ve<We&&ce[ve]>=I;)ve++;for(we=ne,ue=ve-1;we<ue;we++,ue--)le=k[we],k[we]=k[ue],k[ue]=le,F&&(le=F[we],F[we]=F[ue],F[ue]=le);ne=ve}ne++}}},j=function(I,k,F){var ce=I.split(""),Te={hiLevel:Z};return F||(F=[]),V(ce,F,Te),(function(le,ue,ve){if(ve.hiLevel!==0&&p)for(var we,We=0;We<le.length;We++)ue[We]===1&&(we=B.indexOf(le[We]))>=0&&(le[We]=B[we+1])})(ce,F,Te),L(2,ce,k,F,Te),L(1,ce,k,F,Te),ce.join("")};return this.__bidiEngine__.doBidiReorder=function(I,k,F){if((function(Te,le){if(le)for(var ue=0;ue<Te.length;ue++)le[ue]=ue;c===void 0&&(c=ye(Te)),f===void 0&&(f=ye(Te))})(I,k),l||!h||f)if(l&&h&&c^f)Z=c?1:0,I=G(I,k,F);else if(!l&&h&&f)Z=c?1:0,I=j(I,k,F),I=G(I,k);else if(!l||c||h||f){if(l&&!h&&c^f)I=G(I,k),c?(Z=0,I=j(I,k,F)):(Z=1,I=j(I,k,F),I=G(I,k));else if(l&&c&&!h&&f)Z=1,I=j(I,k,F),I=G(I,k);else if(!l&&!h&&c^f){var ce=p;c?(Z=1,I=j(I,k,F),Z=0,p=!1,I=j(I,k,F),p=ce):(Z=0,I=j(I,k,F),I=G(I,k),Z=1,p=!1,I=j(I,k,F),p=ce,I=G(I,k))}}else Z=0,I=j(I,k,F);else Z=c?1:0,I=j(I,k,F);return I},this.__bidiEngine__.setOptions=function(I){I&&(l=I.isInputVisual,h=I.isOutputVisual,c=I.isInputRtl,f=I.isOutputRtl,p=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var o=i.options||{};i.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var c=0;for(l=[],c=0;c<r.length;c+=1)Object.prototype.toString.call(r[c])==="[object Array]"?l.push([t.doBidiReorder(r[c][0]),r[c][1],r[c][2]]):l.push([t.doBidiReorder(r[c])]);i.text=l}else i.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])})(Dt),Dt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Iu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new wM(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new aM(this.contents),this.head=new uM(this),this.name=new pM(this),this.cmap=new zE(this),this.toUnicode={},this.hhea=new cM(this),this.maxp=new mM(this),this.hmtx=new gM(this),this.post=new hM(this),this.os2=new fM(this),this.loca=new bM(this),this.glyf=new yM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,i,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,h,f;for(f=[],l=0,c=(h=this.bbox).length;l<c;l++)e=h[l],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,i){var r,o,l,c;for(l=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)r=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/t)||0;return l*(t/1e3)},n.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},n})();var xa,Iu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(e){var t,i,r;for(r=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,i,r,o,l,c,h;return e=this.readByte(),t=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*r+16777216*o+65536*l+256*c+h},n.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(e){var t,i,r,o;for(o=[],i=0,r=e.length;i<r;i++)t=e[i],o.push(this.writeByte(t));return o},n})(),aM=(function(){var n;function e(t){var i,r,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,r,o,l,c,h,f,p,b,S,x,D,O;for(O in x=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(x)/h),l=Math.floor(b/h),p=16*x-b,(r=new Iu).writeInt(this.scalarType),r.writeShort(x),r.writeShort(b),r.writeShort(l),r.writeShort(p),o=16*x,f=r.pos+o,c=null,D=[],t)for(S=t[O],r.writeString(O),r.writeInt(n(S)),r.writeInt(f),r.writeInt(S.length),D=D.concat(S),O==="head"&&(c=f),f+=S.length;f%4;)D.push(0),f++;return r.write(D),i=2981146554-n(r.data),r.pos=c+8,r.writeUInt32(i),r.data},n=function(t){var i,r,o,l;for(t=GE.call(t);t.length%4;)t.push(0);for(o=new Iu(t),r=0,i=0,l=t.length;i<l;i=i+=4)r+=o.readUInt32();return 4294967295&r},e})(),lM={}.hasOwnProperty,el=function(n,e){for(var t in e)lM.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};xa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var uM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Iu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),wb=(function(){function n(e,t){var i,r,o,l,c,h,f,p,b,S,x,D,O,B,q,X,Z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),S=x/2,e.pos+=6,o=(function(){var W,ye;for(ye=[],h=W=0;0<=S?W<S:W>S;h=0<=S?++W:--W)ye.push(e.readUInt16());return ye})(),e.pos+=2,O=(function(){var W,ye;for(ye=[],h=W=0;0<=S?W<S:W>S;h=0<=S?++W:--W)ye.push(e.readUInt16());return ye})(),f=(function(){var W,ye;for(ye=[],h=W=0;0<=S?W<S:W>S;h=0<=S?++W:--W)ye.push(e.readUInt16());return ye})(),p=(function(){var W,ye;for(ye=[],h=W=0;0<=S?W<S:W>S;h=0<=S?++W:--W)ye.push(e.readUInt16());return ye})(),r=(this.length-e.pos+this.offset)/2,c=(function(){var W,ye;for(ye=[],h=W=0;0<=r?W<r:W>r;h=0<=r?++W:--W)ye.push(e.readUInt16());return ye})(),h=q=0,Z=o.length;q<Z;h=++q)for(B=o[h],i=X=D=O[h];D<=B?X<=B:X>=B;i=D<=B?++X:--X)p[h]===0?l=i+f[h]:(l=c[p[h]/2+(i-D)-(S-h)]||0)!==0&&(l+=f[h]),this.codeMap[i]=65535&l}e.pos=b}return n.encode=function(e,t){var i,r,o,l,c,h,f,p,b,S,x,D,O,B,q,X,Z,W,ye,de,G,V,L,j,I,k,F,ce,Te,le,ue,ve,we,We,ne,U,J,ie,fe,me,Ee,Pe,Me,$e,it,lt;switch(ce=new Iu,l=Object.keys(e).sort(function(ut,pt){return ut-pt}),t){case"macroman":for(O=0,B=(function(){var ut=[];for(D=0;D<256;++D)ut.push(0);return ut})(),X={0:0},o={},Te=0,we=l.length;Te<we;Te++)X[Me=e[r=l[Te]]]==null&&(X[Me]=++O),o[r]={old:e[r],new:X[e[r]]},B[r]=X[e[r]];return ce.writeUInt16(1),ce.writeUInt16(0),ce.writeUInt32(12),ce.writeUInt16(0),ce.writeUInt16(262),ce.writeUInt16(0),ce.write(B),{charMap:o,subtable:ce.data,maxGlyphID:O+1};case"unicode":for(k=[],b=[],Z=0,X={},i={},q=f=null,le=0,We=l.length;le<We;le++)X[ye=e[r=l[le]]]==null&&(X[ye]=++Z),i[r]={old:ye,new:X[ye]},c=X[ye]-r,q!=null&&c===f||(q&&b.push(q),k.push(r),f=c),q=r;for(q&&b.push(q),b.push(65535),k.push(65535),j=2*(L=k.length),V=2*Math.pow(Math.log(L)/Math.LN2,2),S=Math.log(V/2)/Math.LN2,G=2*L-V,h=[],de=[],x=[],D=ue=0,ne=k.length;ue<ne;D=++ue){if(I=k[D],p=b[D],I===65535){h.push(0),de.push(0);break}if(I-(F=i[I].new)>=32768)for(h.push(0),de.push(2*(x.length+L-D)),r=ve=I;I<=p?ve<=p:ve>=p;r=I<=p?++ve:--ve)x.push(i[r].new);else h.push(F-I),de.push(0)}for(ce.writeUInt16(3),ce.writeUInt16(1),ce.writeUInt32(12),ce.writeUInt16(4),ce.writeUInt16(16+8*L+2*x.length),ce.writeUInt16(0),ce.writeUInt16(j),ce.writeUInt16(V),ce.writeUInt16(S),ce.writeUInt16(G),Ee=0,U=b.length;Ee<U;Ee++)r=b[Ee],ce.writeUInt16(r);for(ce.writeUInt16(0),Pe=0,J=k.length;Pe<J;Pe++)r=k[Pe],ce.writeUInt16(r);for($e=0,ie=h.length;$e<ie;$e++)c=h[$e],ce.writeUInt16(c);for(it=0,fe=de.length;it<fe;it++)W=de[it],ce.writeUInt16(W);for(lt=0,me=x.length;lt<me;lt++)O=x[lt],ce.writeUInt16(O);return{charMap:i,subtable:ce.data,maxGlyphID:Z+1}}},n})(),zE=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,i,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)t=new wb(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var i,r;return t==null&&(t="macroman"),i=wb.encode(e,t),(r=new Iu).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},n})(),cM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),fM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,i;for(i=[],t=0;t<10;++t)i.push(e.readByte());return i})(),this.charRange=(function(){var t,i;for(i=[],t=0;t<4;++t)i.push(e.readInt());return i})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,i;for(i=[],t=0;t<2;t=++t)i.push(e.readInt());return i})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),hM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="post",n.prototype.parse=function(e){var t,i,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 262144:return this.map=(function(){var l,c,h;for(h=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)h.push(e.readUInt32());return h}).call(this)}},n})(),dM=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="name",n.prototype.parse=function(e){var t,i,r,o,l,c,h,f,p,b,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),i=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(h={},o=p=0,b=i.length;p<b;o=++p)r=i[o],e.pos=r.offset,f=e.readString(r.length),l=new dM(f,r),h[S=r.nameID]==null&&(h[S]=[]),h[r.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),mM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),gM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,i,r,o,l,c,h;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=r?f<r:f>r;t=0<=r?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,b,S;for(S=[],f=0,p=(b=this.metrics).length;f<p;f++)o=b[f],S.push(o.advance);return S}).call(this),i=this.widths[this.widths.length-1],h=[],t=l=0;0<=r?l<r:l>r;t=0<=r?++l:--l)h.push(this.widths.push(i));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),GE=[].slice,yM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,i,r,o,l,c,h,f,p,b;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,i=o.indexOf(e),(r=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+i,l=(c=new Iu(t.read(r))).readShort(),f=c.readShort(),b=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[e]=l===-1?new _M(c,f,b,h,p):new vM(c,l,f,b,h,p),this.cache[e]))},n.prototype.encode=function(e,t,i){var r,o,l,c,h;for(l=[],o=[],c=0,h=t.length;c<h;c++)r=e[t[c]],o.push(l.length),r&&(l=l.concat(r.encode(i)));return o.push(l.length),{table:l,offsets:o}},n})(),vM=(function(){function n(e,t,i,r,o,l){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),_M=(function(){function n(e,t,i,r,o){var l,c;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return n.prototype.encode=function(){var e,t,i;for(t=new Iu(GE.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),bM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return el(n,xa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,i;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var i=new Uint32Array(this.offsets.length),r=0,o=0,l=0;l<i.length;++l)if(i[l]=r,o<t.length&&t[o]==l){++o,i[l]=r;var c=this.offsets[l],h=this.offsets[l+1]-c;h>0&&(r+=h)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},n})(),wM=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,r,o;for(t in r=this.font.cmap.tables[0].codeMap,e={},o=this.subset)i=o[t],e[t]=r[i];return e},n.prototype.glyphsFor=function(e){var t,i,r,o,l,c,h;for(r={},l=0,c=e.length;l<c;l++)r[o=e[l]]=this.font.glyf.glyphFor(o);for(o in t=[],r)(i=r[o])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))i=h[o],r[o]=i;return r},n.prototype.encode=function(e,t){var i,r,o,l,c,h,f,p,b,S,x,D,O,B,q;for(r in i=zE.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},q=i.charMap)x[(h=q[r]).old]=h.new;for(D in S=i.maxGlyphID,l)D in x||(x[D]=S++);return p=(function(X){var Z,W;for(Z in W={},X)W[X[Z]]=Z;return W})(x),b=Object.keys(p).sort(function(X,Z){return X-Z}),O=(function(){var X,Z,W;for(W=[],X=0,Z=b.length;X<Z;X++)c=b[X],W.push(p[c]);return W})(),o=this.font.glyf.encode(l,O,x),f=this.font.loca.encode(o.offsets,O),B={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(B["OS/2"]=this.font.os2.raw()),this.font.directory.encode(B)},n})();Dt.API.PDFObject=(function(){var n;function e(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,r,o,l;if(Array.isArray(t))return"["+(function(){var c,h,f;for(f=[],c=0,h=t.length;c<h;c++)i=t[c],f.push(e.convert(i));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in o=["<<"],t)l=t[r],o.push("/"+r+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+t},e})();var xh={exports:{}},w0={},x0,xb;function xM(){if(xb)return x0;xb=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return x0=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var o=this._errors[r],l=o.message,c=(e[l]||0)+1;e[l]=c,c>=i&&(t=o,i=c)}return t},x0}var Sb;function SM(){return Sb||(Sb=1,(function(n){var e=xM();n.operation=function(t){var i=n.timeouts(t);return new e(i,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var i={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)i[r]=t[r];if(i.minTimeout>i.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],l=0;l<i.retries;l++)o.push(this.createTimeout(l,i));return t&&t.forever&&!o.length&&o.push(this.createTimeout(l,i)),o.sort(function(c,h){return c-h}),o},n.createTimeout=function(t,i){var r=i.randomize?Math.random()+1:1,o=Math.round(r*Math.max(i.minTimeout,1)*Math.pow(i.factor,t));return o=Math.min(o,i.maxTimeout),o},n.wrap=function(t,i,r){if(i instanceof Array&&(r=i,i=null),!r){r=[];for(var o in t)typeof t[o]=="function"&&r.push(o)}for(var l=0;l<r.length;l++){var c=r[l],h=t[c];t[c]=(function(p){var b=n.operation(i),S=Array.prototype.slice.call(arguments,1),x=S.pop();S.push(function(D){b.retry(D)||(D&&(arguments[0]=b.mainError()),x.apply(this,arguments))}),b.attempt(function(){p.apply(t,S)})}).bind(t,h),t[c].options=i}}})(w0)),w0}var S0,Eb;function EM(){return Eb||(Eb=1,S0=SM()),S0}var Ab;function AM(){if(Ab)return xh.exports;Ab=1;const n=EM(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(c){super(),c instanceof Error?(this.originalError=c,{message:c}=c):(this.originalError=new Error(c),this.originalError.stack=this.stack),this.name="AbortError",this.message=c}}const i=(l,c,h)=>{const f=h.retries-(c-1);return l.attemptNumber=c,l.retriesLeft=f,l},r=l=>e.includes(l),o=(l,c)=>new Promise((h,f)=>{c={onFailedAttempt:()=>{},retries:10,...c};const p=n.operation(c);p.attempt(async b=>{try{h(await l(b))}catch(S){if(!(S instanceof Error)){f(new TypeError(`Non-error was thrown: "${S}". You should only throw errors.`));return}if(S instanceof t)p.stop(),f(S.originalError);else if(S instanceof TypeError&&!r(S.message))p.stop(),f(S);else{i(S,b,c);try{await c.onFailedAttempt(S)}catch(x){f(x);return}p.retry(S)||f(p.mainError())}}})});return xh.exports=o,xh.exports.default=o,xh.exports.AbortError=t,xh.exports}var jE=AM();const TM=N1(jE);var NM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CM,IM;function RM(){return{geminiUrl:CM,vertexUrl:IM}}function LM(n,e,t,i){var r,o;if(!(n!=null&&n.baseUrl)){const l=RM();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:t:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ol{}function ht(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(n,e,t){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const h=n[c];if(Array.isArray(t))for(let f=0;f<h.length;f++){const p=h[f];y(p,e.slice(o+1),t[f])}else for(const f of h)y(f,e.slice(o+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const h=n[c];y(h[0],e.slice(o+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function m(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function MM(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),o=i.split("."),l=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&o.length>c)for(let h=c;h<o.length;h++){const f=o[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}f1(n,r,o,0,l)}}function f1(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const h of c[l])f1(h,e,t,i+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),h={};for(const f of c)h[f]=l[f];for(const[f,p]of Object.entries(h)){const b=[];for(const S of t.slice(i))S==="*"?b.push(f):b.push(S);y(l,b,p)}for(const f of c)delete l[f]}}else{const l=n;o in l&&f1(l[o],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DM(n){const e={},t=m(n,["operationName"]);t!=null&&y(e,["operationName"],t);const i=m(n,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function PM(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],UM(l)),e}function kM(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["response"]);return l!=null&&y(e,["response"],OM(l)),e}function UM(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>FM(l))),y(e,["generatedVideos"],o)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function OM(n){const e={},t=m(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>VM(l))),y(e,["generatedVideos"],o)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function FM(n){const e={},t=m(n,["video"]);return t!=null&&y(e,["video"],jM(t)),e}function VM(n){const e={},t=m(n,["_self"]);return t!=null&&y(e,["video"],$M(t)),e}function BM(n){const e={},t=m(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function qM(n){const e={},t=m(n,["operationName"]);return t!=null&&y(e,["_url","operationName"],t),e}function HM(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["response"]);return l!=null&&y(e,["response"],zM(l)),e}function zM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&y(e,["parent"],i);const r=m(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function $E(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["response"]);return l!=null&&y(e,["response"],GM(l)),e}function GM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&y(e,["parent"],i);const r=m(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function jM(n){const e={},t=m(n,["uri"]);t!=null&&y(e,["uri"],t);const i=m(n,["encodedVideo"]);i!=null&&y(e,["videoBytes"],yy(i));const r=m(n,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function $M(n){const e={},t=m(n,["gcsUri"]);t!=null&&y(e,["uri"],t);const i=m(n,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],yy(i));const r=m(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Tb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Tb||(Tb={}));var Nb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Nb||(Nb={}));var Cb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Cb||(Cb={}));var vu;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(vu||(vu={}));var Ib;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ib||(Ib={}));var Rb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Rb||(Rb={}));var Lb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Lb||(Lb={}));var Mb;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Mb||(Mb={}));var Db;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Db||(Db={}));var Pb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Pb||(Pb={}));var kb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(kb||(kb={}));var Ub;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Ub||(Ub={}));var Ob;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ob||(Ob={}));var Fb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Fb||(Fb={}));var Vb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Vb||(Vb={}));var Bb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Bb||(Bb={}));var qb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(qb||(qb={}));var Hb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hb||(Hb={}));var zb;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(zb||(zb={}));var Gb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Gb||(Gb={}));var jb;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jb||(jb={}));var Kh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Kh||(Kh={}));var $b;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($b||($b={}));var Yb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yb||(Yb={}));var Kb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Kb||(Kb={}));var h1;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(h1||(h1={}));var Jb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jb||(Jb={}));var Wb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Wb||(Wb={}));var d1;(function(n){n.COLLECTION="COLLECTION"})(d1||(d1={}));var Xb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Xb||(Xb={}));var Qb;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Qb||(Qb={}));var Wp;(function(n){n.PREDICT="PREDICT",n.EMBED_CONTENT="EMBED_CONTENT"})(Wp||(Wp={}));var Zb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Zb||(Zb={}));var ew;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ew||(ew={}));var tw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tw||(tw={}));var nw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nw||(nw={}));var iw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(iw||(iw={}));var rw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rw||(rw={}));var sw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sw||(sw={}));var ow;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ow||(ow={}));var aw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(aw||(aw={}));var lw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(lw||(lw={}));var uw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(uw||(uw={}));var cw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(cw||(cw={}));var fw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(fw||(fw={}));var hw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(hw||(hw={}));var dw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(dw||(dw={}));var pw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pw||(pw={}));var mw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(mw||(mw={}));var gw;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gw||(gw={}));var yw;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(yw||(yw={}));var vw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vw||(vw={}));var _w;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_w||(_w={}));var bw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(bw||(bw={}));var ww;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ww||(ww={}));var xw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xw||(xw={}));var Sw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Sw||(Sw={}));var lf;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(lf||(lf={}));class p1{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sh{get text(){var e,t,i,r,o,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const b=[];for(const S of(h=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[x,D]of Object.entries(S))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(D!==null||D!==void 0)&&b.push(x);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;p=!0,f+=S.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,t,i,r,o,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const b of(h=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[S,x]of Object.entries(b))S!=="inlineData"&&(x!==null||x!==void 0)&&p.push(S);b.inlineData&&typeof b.inlineData.data=="string"&&(f+=atob(b.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,i,r,o,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,i,r,o,l,c,h,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(h=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,i,r,o,l,c,h,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(h=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class Ew{}class Aw{}class YM{}class KM{}class JM{}class WM{}class Tw{}class Nw{}class Cw{}class XM{}class Xp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Xp;let r;const o=e;return t?r=kM(o):r=PM(o),Object.assign(i,r),i}}class Iw{}class Rw{}class Lw{}class Mw{}class QM{}class ZM{}class e8{}class vy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new vy,o=HM(e);return Object.assign(i,o),i}}class t8{}class n8{}class i8{}class r8{}class Dw{}class s8{get text(){var e,t,i;let r="",o=!1;const l=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,f]of Object.entries(c))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,i;let r="";const o=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class o8{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class _y{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new _y,o=$E(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qn(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function YE(n,e){const t=qn(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function KE(n){return Array.isArray(n)?n.map(e=>Qp(e)):[Qp(n)]}function Qp(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function JE(n){const e=Qp(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WE(n){const e=Qp(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pw(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function XE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Pw(e)):[Pw(n)]}function m1(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function kw(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Uw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function jr(n){if(n==null)throw new Error("ContentUnion is required");return m1(n)?n:{role:"user",parts:XE(n)}}function by(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=jr(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=jr(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>jr(t)):[jr(e)]}function So(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(kw(n)||Uw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[jr(n)]}const e=[],t=[],i=m1(n[0]);for(const r of n){const o=m1(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(kw(r)||Uw(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:XE(t)}),e}function a8(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(vu).includes(t[0].toUpperCase())?t[0].toUpperCase():vu.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(vu).includes(i.toUpperCase())?i.toUpperCase():vu.TYPE_UNSPECIFIED})}}function vf(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&a8(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(vu).includes(c.toUpperCase())?c.toUpperCase():vu.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=vf(c);else if(i.includes(l)){const h=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}h.push(vf(f))}e[l]=h}else if(r.includes(l)){const h={};for(const[f,p]of Object.entries(c))h[f]=vf(p);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function wy(n){return vf(n)}function xy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Sy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Df(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vf(e.response));return n}function Pf(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function l8(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Fl(n,e){if(typeof e!="string")throw new Error("name must be a string");return l8(n,e,"cachedContents")}function QE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ru(n){return yy(n)}function u8(n){return n!=null&&typeof n=="object"&&"name"in n}function c8(n){return n!=null&&typeof n=="object"&&"video"in n}function f8(n){return n!=null&&typeof n=="object"&&"uri"in n}function ZE(n){var e;let t;if(u8(n)&&(t=n.name),!(f8(n)&&(t=n.uri,t===void 0))&&!(c8(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tA(n){for(const e of["models","tunedModels","publisherModels"])if(h8(n,e))return n[e];return[]}function h8(n,e){return n!==null&&typeof n=="object"&&e in n}function d8(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function p8(n,e={}){const t=[],i=new Set;for(const r of n){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=d8(r,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function nA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function m8(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function kf(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function rA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function g8(n){return n.includes("gemini")&&n!=="gemini-embedding-001"||n.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y8(n){const e={},t=m(n,["responsesFile"]);t!=null&&y(e,["fileName"],t);const i=m(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>X8(l))),y(e,["inlinedResponses"],o)}const r=m(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function v8(n){const e={},t=m(n,["predictionsFormat"]);t!=null&&y(e,["format"],t);const i=m(n,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(n,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function _8(n){const e={},t=m(n,["format"]);t!=null&&y(e,["predictionsFormat"],t);const i=m(n,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(n,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Tp(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(n,["metadata","state"]);r!=null&&y(e,["state"],rA(r));const o=m(n,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(n,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(n,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const h=m(n,["metadata","model"]);h!=null&&y(e,["model"],h);const f=m(n,["metadata","output"]);return f!=null&&y(e,["dest"],y8(iA(f))),e}function g1(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(n,["state"]);r!=null&&y(e,["state"],rA(r));const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(n,["startTime"]);c!=null&&y(e,["startTime"],c);const h=m(n,["endTime"]);h!=null&&y(e,["endTime"],h);const f=m(n,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=m(n,["model"]);p!=null&&y(e,["model"],p);const b=m(n,["inputConfig"]);b!=null&&y(e,["src"],b8(b));const S=m(n,["outputConfig"]);S!=null&&y(e,["dest"],v8(iA(S)));const x=m(n,["completionStats"]);return x!=null&&y(e,["completionStats"],x),e}function b8(n){const e={},t=m(n,["instancesFormat"]);t!=null&&y(e,["format"],t);const i=m(n,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(n,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function w8(n,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(t,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>W8(n,l))),y(t,["requests","requests"],o)}return t}function x8(n){const e={},t=m(n,["format"]);t!=null&&y(e,["instancesFormat"],t);const i=m(n,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(n,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function S8(n){const e={},t=m(n,["data"]);if(t!=null&&y(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function E8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function A8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function T8(n){const e={},t=m(n,["content"]);t!=null&&y(e,["content"],t);const i=m(n,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],N8(i));const r=m(n,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(n,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(n,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(n,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const h=m(n,["index"]);h!=null&&y(e,["index"],h);const f=m(n,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(n,["safetyRatings"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(x=>x)),y(e,["safetyRatings"],S)}const b=m(n,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function N8(n){const e={},t=m(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function sA(n){const e={},t=m(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>rD(o))),y(e,["parts"],r)}const i=m(n,["role"]);return i!=null&&y(e,["role"],i),e}function C8(n,e){const t={},i=m(n,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function I8(n,e){const t={},i=m(n,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(n,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],_8(m8(r))),t}function Ow(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["_url","model"],qn(n,i));const r=m(e,["src"]);r!=null&&y(t,["batch","inputConfig"],w8(n,nA(n,r)));const o=m(e,["config"]);return o!=null&&C8(o,t),t}function R8(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["model"],qn(n,i));const r=m(e,["src"]);r!=null&&y(t,["inputConfig"],x8(nA(n,r)));const o=m(e,["config"]);return o!=null&&I8(o,t),t}function L8(n,e){const t={},i=m(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),t}function M8(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["_url","model"],qn(n,i));const r=m(e,["src"]);r!=null&&y(t,["batch","inputConfig"],V8(n,r));const o=m(e,["config"]);return o!=null&&L8(o,t),t}function D8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function P8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function k8(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["name"]);i!=null&&y(e,["name"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);return o!=null&&y(e,["error"],o),e}function U8(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["name"]);i!=null&&y(e,["name"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);return o!=null&&y(e,["error"],o),e}function O8(n,e){const t={},i=m(e,["contents"]);if(i!=null){let o=by(n,i);Array.isArray(o)&&(o=o.map(l=>l)),y(t,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(t,["_self"],F8(r,t)),MM(t,{"requests[].*":"requests[].request.*"})),t}function F8(n,e){const t={},i=m(n,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(n,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function V8(n,e){const t={},i=m(e,["fileName"]);i!=null&&y(t,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(t,["requests"],O8(n,r)),t}function B8(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function q8(n){const e={},t=m(n,["id"]);t!=null&&y(e,["id"],t);const i=m(n,["args"]);i!=null&&y(e,["args"],i);const r=m(n,["name"]);if(r!=null&&y(e,["name"],r),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H8(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&y(e,["allowedFunctionNames"],t);const i=m(n,["mode"]);if(i!=null&&y(e,["mode"],i),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function z8(n,e,t){const i={},r=m(e,["systemInstruction"]);t!==void 0&&r!=null&&y(t,["systemInstruction"],sA(jr(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const h=m(e,["candidateCount"]);h!=null&&y(i,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const b=m(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const S=m(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const x=m(e,["presencePenalty"]);x!=null&&y(i,["presencePenalty"],x);const D=m(e,["frequencyPenalty"]);D!=null&&y(i,["frequencyPenalty"],D);const O=m(e,["seed"]);O!=null&&y(i,["seed"],O);const B=m(e,["responseMimeType"]);B!=null&&y(i,["responseMimeType"],B);const q=m(e,["responseSchema"]);q!=null&&y(i,["responseSchema"],wy(q));const X=m(e,["responseJsonSchema"]);if(X!=null&&y(i,["responseJsonSchema"],X),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=m(e,["safetySettings"]);if(t!==void 0&&Z!=null){let F=Z;Array.isArray(F)&&(F=F.map(ce=>sD(ce))),y(t,["safetySettings"],F)}const W=m(e,["tools"]);if(t!==void 0&&W!=null){let F=Pf(W);Array.isArray(F)&&(F=F.map(ce=>aD(Df(ce)))),y(t,["tools"],F)}const ye=m(e,["toolConfig"]);if(t!==void 0&&ye!=null&&y(t,["toolConfig"],oD(ye)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=m(e,["cachedContent"]);t!==void 0&&de!=null&&y(t,["cachedContent"],Fl(n,de));const G=m(e,["responseModalities"]);G!=null&&y(i,["responseModalities"],G);const V=m(e,["mediaResolution"]);V!=null&&y(i,["mediaResolution"],V);const L=m(e,["speechConfig"]);if(L!=null&&y(i,["speechConfig"],xy(L)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=m(e,["thinkingConfig"]);j!=null&&y(i,["thinkingConfig"],j);const I=m(e,["imageConfig"]);I!=null&&y(i,["imageConfig"],J8(I));const k=m(e,["enableEnhancedCivicAnswers"]);if(k!=null&&y(i,["enableEnhancedCivicAnswers"],k),m(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function G8(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>T8(f))),y(e,["candidates"],h)}const r=m(n,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(n,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(n,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(n,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function j8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function $8(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],kf(n,i)),t}function Y8(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function K8(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function J8(n){const e={},t=m(n,["aspectRatio"]);t!=null&&y(e,["aspectRatio"],t);const i=m(n,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function W8(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["request","model"],qn(n,i));const r=m(e,["contents"]);if(r!=null){let c=So(r);Array.isArray(c)&&(c=c.map(h=>sA(h))),y(t,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(t,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(t,["request","generationConfig"],z8(n,l,m(t,["request"],{}))),t}function X8(n){const e={},t=m(n,["response"]);t!=null&&y(e,["response"],G8(t));const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["error"]);return r!=null&&y(e,["error"],r),e}function Q8(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Z8(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(n,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),t}function eD(n){const e={},t=m(n,["config"]);return t!=null&&Q8(t,e),e}function tD(n){const e={},t=m(n,["config"]);return t!=null&&Z8(t,e),e}function nD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Tp(l))),y(e,["batchJobs"],o)}return e}function iD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>g1(l))),y(e,["batchJobs"],o)}return e}function rD(n){const e={},t=m(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(n,["fileData"]);o!=null&&y(e,["fileData"],B8(o));const l=m(n,["functionCall"]);l!=null&&y(e,["functionCall"],q8(l));const c=m(n,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const h=m(n,["inlineData"]);h!=null&&y(e,["inlineData"],S8(h));const f=m(n,["text"]);f!=null&&y(e,["text"],f);const p=m(n,["thought"]);p!=null&&y(e,["thought"],p);const b=m(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=m(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function sD(n){const e={},t=m(n,["category"]);if(t!=null&&y(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(n,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function oD(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&y(e,["retrievalConfig"],t);const i=m(n,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],H8(i)),e}function aD(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=m(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=m(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=m(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(b=>b)),y(e,["functionDeclarations"],p)}const l=m(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],Y8(l));const c=m(n,["googleSearch"]);c!=null&&y(e,["googleSearch"],K8(c));const h=m(n,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const f=m(n,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ul;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ul||(Ul={}));class mc{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lD extends Ol{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mc(Ul.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=Ow(this.apiClient,e),i=t._url,r=ht("{model}:batchGenerateContent",i),c=t.batch.inputConfig.requests,h=c.requests,f=[];for(const p of h){const b=Object.assign({},p);if(b.systemInstruction){const S=b.systemInstruction;delete b.systemInstruction;const x=b.request;x.systemInstruction=S,b.request=x}f.push(b)}return c.requests=f,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=R8(this.apiClient,e);return c=ht("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>g1(p))}else{const f=Ow(this.apiClient,e);return c=ht("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Tp(p))}}async createEmbeddingsInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=M8(this.apiClient,e);return o=ht("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Tp(h))}}async get(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=$8(this.apiClient,e);return c=ht("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>g1(p))}else{const f=j8(this.apiClient,e);return c=ht("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Tp(p))}}async cancel(e){var t,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const h=A8(this.apiClient,e);l=ht("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=E8(this.apiClient,e);l=ht("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=tD(e);return c=ht("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=iD(p),S=new Dw;return Object.assign(S,b),S})}else{const f=eD(e);return c=ht("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=nD(p),S=new Dw;return Object.assign(S,b),S})}}async delete(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=P8(this.apiClient,e);return c=ht("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>U8(p))}else{const f=D8(this.apiClient,e);return c=ht("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>k8(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(n){const e={},t=m(n,["data"]);if(t!=null&&y(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Fw(n){const e={},t=m(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>MD(o))),y(e,["parts"],r)}const i=m(n,["role"]);return i!=null&&y(e,["role"],i),e}function cD(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(n,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(n,["contents"]);if(e!==void 0&&l!=null){let p=So(l);Array.isArray(p)&&(p=p.map(b=>Fw(b))),y(e,["contents"],p)}const c=m(n,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],Fw(jr(c)));const h=m(n,["tools"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(b=>PD(b))),y(e,["tools"],p)}const f=m(n,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],DD(f)),m(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function fD(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(n,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(n,["contents"]);if(e!==void 0&&l!=null){let b=So(l);Array.isArray(b)&&(b=b.map(S=>S)),y(e,["contents"],b)}const c=m(n,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],jr(c));const h=m(n,["tools"]);if(e!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(S=>kD(S))),y(e,["tools"],b)}const f=m(n,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=m(n,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),t}function hD(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["model"],YE(n,i));const r=m(e,["config"]);return r!=null&&cD(r,t),t}function dD(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["model"],YE(n,i));const r=m(e,["config"]);return r!=null&&fD(r,t),t}function pD(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],Fl(n,i)),t}function mD(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],Fl(n,i)),t}function gD(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function yD(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function vD(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function _D(n){const e={},t=m(n,["id"]);t!=null&&y(e,["id"],t);const i=m(n,["args"]);i!=null&&y(e,["args"],i);const r=m(n,["name"]);if(r!=null&&y(e,["name"],r),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bD(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&y(e,["allowedFunctionNames"],t);const i=m(n,["mode"]);if(i!=null&&y(e,["mode"],i),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wD(n){const e={},t=m(n,["description"]);t!=null&&y(e,["description"],t);const i=m(n,["name"]);i!=null&&y(e,["name"],i);const r=m(n,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(n,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(n,["response"]);l!=null&&y(e,["response"],l);const c=m(n,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function xD(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],Fl(n,i)),t}function SD(n,e){const t={},i=m(e,["name"]);return i!=null&&y(t,["_url","name"],Fl(n,i)),t}function ED(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function AD(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function TD(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function ND(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function CD(n){const e={},t=m(n,["config"]);return t!=null&&TD(t,e),e}function ID(n){const e={},t=m(n,["config"]);return t!=null&&ND(t,e),e}function RD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function LD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function MD(n){const e={},t=m(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(n,["fileData"]);o!=null&&y(e,["fileData"],vD(o));const l=m(n,["functionCall"]);l!=null&&y(e,["functionCall"],_D(l));const c=m(n,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const h=m(n,["inlineData"]);h!=null&&y(e,["inlineData"],uD(h));const f=m(n,["text"]);f!=null&&y(e,["text"],f);const p=m(n,["thought"]);p!=null&&y(e,["thought"],p);const b=m(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=m(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function DD(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&y(e,["retrievalConfig"],t);const i=m(n,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],bD(i)),e}function PD(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=m(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=m(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=m(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(b=>b)),y(e,["functionDeclarations"],p)}const l=m(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],ED(l));const c=m(n,["googleSearch"]);c!=null&&y(e,["googleSearch"],AD(c));const h=m(n,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const f=m(n,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function kD(n){const e={},t=m(n,["retrieval"]);t!=null&&y(e,["retrieval"],t);const i=m(n,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=m(n,["codeExecution"]);r!=null&&y(e,["codeExecution"],r);const o=m(n,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>wD(S))),y(e,["functionDeclarations"],b)}const c=m(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const h=m(n,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const f=m(n,["googleSearchRetrieval"]);f!=null&&y(e,["googleSearchRetrieval"],f);const p=m(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function UD(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),t}function OD(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),t}function FD(n,e){const t={},i=m(e,["name"]);i!=null&&y(t,["_url","name"],Fl(n,i));const r=m(e,["config"]);return r!=null&&UD(r,t),t}function VD(n,e){const t={},i=m(e,["name"]);i!=null&&y(t,["_url","name"],Fl(n,i));const r=m(e,["config"]);return r!=null&&OD(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BD extends Ol{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mc(Ul.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=dD(this.apiClient,e);return c=ht("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=hD(this.apiClient,e);return c=ht("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=SD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=xD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=mD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=yD(p),S=new Lw;return Object.assign(S,b),S})}else{const f=pD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=gD(p),S=new Lw;return Object.assign(S,b),S})}}async update(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=VD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=FD(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=ID(e);return c=ht("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=LD(p),S=new Mw;return Object.assign(S,b),S})}else{const f=CD(e);return c=ht("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=RD(p),S=new Mw;return Object.assign(S,b),S})}}}function Zp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function Vw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(n){return this instanceof nn?(this.v=n,this):new nn(n)}function ya(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(x){return function(D){return Promise.resolve(D).then(x,b)}}function c(x,D){i[x]&&(r[x]=function(O){return new Promise(function(B,q){o.push([x,O,B,q])>1||h(x,O)})},D&&(r[x]=D(r[x])))}function h(x,D){try{f(i[x](D))}catch(O){S(o[0][3],O)}}function f(x){x.value instanceof nn?Promise.resolve(x.value.v).then(p,b):S(o[0][2],x)}function p(x){h("next",x)}function b(x){h("throw",x)}function S(x,D){x(D),o.shift(),o.length&&h(o[0][0],o[0][1])}}function va(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Vw=="function"?Vw(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(l){return new Promise(function(c,h){l=n[o](l),r(c,h,l.done,l.value)})}}function r(o,l,c,h){Promise.resolve(h).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:oA(t)}function oA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function HD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let o=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),o&&!oA(n[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class zD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new GD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class GD{constructor(e,t,i,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),HD(o)}async sendMessage(e){var t;await this.sendPromise;const i=jr(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,l,c;const h=await r,f=(l=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=h.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let S=[];p!=null&&(S=(c=p.slice(b))!==null&&c!==void 0?c:[]);const x=f?[f]:[];this.recordHistory(i,x,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=jr(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const t=e?Bw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ya(this,arguments,function*(){var r,o,l,c,h,f;const p=[];try{for(var b=!0,S=va(e),x;x=yield nn(S.next()),r=x.done,!r;b=!0){c=x.value,b=!1;const D=c;if(qD(D)){const O=(f=(h=D.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;O!==void 0&&p.push(O)}yield yield nn(D)}}catch(D){o={error:D}}finally{try{!b&&!r&&(l=S.return)&&(yield nn(l.call(S)))}finally{if(o)throw o.error}}this.recordHistory(t,p)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Bw(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jD(n){const e={},t=m(n,["file"]);return t!=null&&y(e,["file"],t),e}function $D(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function YD(n){const e={},t=m(n,["name"]);return t!=null&&y(e,["_url","file"],ZE(t)),e}function KD(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}function JD(n){const e={},t=m(n,["name"]);return t!=null&&y(e,["_url","file"],ZE(t)),e}function WD(n){const e={},t=m(n,["uris"]);return t!=null&&y(e,["uris"],t),e}function XD(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function QD(n){const e={},t=m(n,["config"]);return t!=null&&XD(t,e),e}function ZD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}function eP(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tP extends Ol{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mc(Ul.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QD(e);return o=ht("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const f=ZD(h),p=new t8;return Object.assign(p,f),p})}}async createInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jD(e);return o=ht("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=$D(h),p=new n8;return Object.assign(p,f),p})}}async get(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=JD(e);return o=ht("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YD(e);return o=ht("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const f=KD(h),p=new i8;return Object.assign(p,f),p})}}async registerFilesInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WD(e);return o=ht("files:register",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=eP(h),p=new r8;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Np(n){const e={},t=m(n,["data"]);if(t!=null&&y(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function nP(n){const e={},t=m(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>vP(o))),y(e,["parts"],r)}const i=m(n,["role"]);return i!=null&&y(e,["role"],i),e}function iP(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function rP(n){const e={},t=m(n,["id"]);t!=null&&y(e,["id"],t);const i=m(n,["args"]);i!=null&&y(e,["args"],i);const r=m(n,["name"]);if(r!=null&&y(e,["name"],r),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sP(n){const e={},t=m(n,["description"]);t!=null&&y(e,["description"],t);const i=m(n,["name"]);i!=null&&y(e,["name"],i);const r=m(n,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(n,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(n,["response"]);l!=null&&y(e,["response"],l);const c=m(n,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function oP(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&y(e,["modelConfig"],t);const i=m(n,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(n,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(n,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const h=m(n,["logprobs"]);h!=null&&y(e,["logprobs"],h);const f=m(n,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(n,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const b=m(n,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const S=m(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const x=m(n,["responseMimeType"]);x!=null&&y(e,["responseMimeType"],x);const D=m(n,["responseModalities"]);D!=null&&y(e,["responseModalities"],D);const O=m(n,["responseSchema"]);O!=null&&y(e,["responseSchema"],O);const B=m(n,["routingConfig"]);B!=null&&y(e,["routingConfig"],B);const q=m(n,["seed"]);q!=null&&y(e,["seed"],q);const X=m(n,["speechConfig"]);X!=null&&y(e,["speechConfig"],X);const Z=m(n,["stopSequences"]);Z!=null&&y(e,["stopSequences"],Z);const W=m(n,["temperature"]);W!=null&&y(e,["temperature"],W);const ye=m(n,["thinkingConfig"]);ye!=null&&y(e,["thinkingConfig"],ye);const de=m(n,["topK"]);de!=null&&y(e,["topK"],de);const G=m(n,["topP"]);if(G!=null&&y(e,["topP"],G),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aP(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function lP(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function uP(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(n,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(n,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const h=m(n,["maxOutputTokens"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(n,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const b=m(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Sy(b));const S=m(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=m(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],nP(jr(D)));const O=m(n,["tools"]);if(e!==void 0&&O!=null){let de=Pf(O);Array.isArray(de)&&(de=de.map(G=>bP(Df(G)))),y(e,["setup","tools"],de)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&y(e,["setup","sessionResumption"],_P(B));const q=m(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&y(e,["setup","inputAudioTranscription"],q);const X=m(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&y(e,["setup","outputAudioTranscription"],X);const Z=m(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&y(e,["setup","realtimeInputConfig"],Z);const W=m(n,["contextWindowCompression"]);e!==void 0&&W!=null&&y(e,["setup","contextWindowCompression"],W);const ye=m(n,["proactivity"]);if(e!==void 0&&ye!=null&&y(e,["setup","proactivity"],ye),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function cP(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],oP(i));const r=m(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(n,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(n,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const h=m(n,["maxOutputTokens"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(n,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const b=m(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Sy(b));const S=m(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=m(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],jr(D));const O=m(n,["tools"]);if(e!==void 0&&O!=null){let G=Pf(O);Array.isArray(G)&&(G=G.map(V=>wP(Df(V)))),y(e,["setup","tools"],G)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&y(e,["setup","sessionResumption"],B);const q=m(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&y(e,["setup","inputAudioTranscription"],q);const X=m(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&y(e,["setup","outputAudioTranscription"],X);const Z=m(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&y(e,["setup","realtimeInputConfig"],Z);const W=m(n,["contextWindowCompression"]);e!==void 0&&W!=null&&y(e,["setup","contextWindowCompression"],W);const ye=m(n,["proactivity"]);e!==void 0&&ye!=null&&y(e,["setup","proactivity"],ye);const de=m(n,["explicitVadSignal"]);return e!==void 0&&de!=null&&y(e,["setup","explicitVadSignal"],de),t}function fP(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["setup","model"],qn(n,i));const r=m(e,["config"]);return r!=null&&y(t,["config"],uP(r,t)),t}function hP(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["setup","model"],qn(n,i));const r=m(e,["config"]);return r!=null&&y(t,["config"],cP(r,t)),t}function dP(n){const e={},t=m(n,["musicGenerationConfig"]);return t!=null&&y(e,["musicGenerationConfig"],t),e}function pP(n){const e={},t=m(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function mP(n){const e={},t=m(n,["media"]);if(t!=null){let f=KE(t);Array.isArray(f)&&(f=f.map(p=>Np(p))),y(e,["mediaChunks"],f)}const i=m(n,["audio"]);i!=null&&y(e,["audio"],Np(WE(i)));const r=m(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(n,["video"]);o!=null&&y(e,["video"],Np(JE(o)));const l=m(n,["text"]);l!=null&&y(e,["text"],l);const c=m(n,["activityStart"]);c!=null&&y(e,["activityStart"],c);const h=m(n,["activityEnd"]);return h!=null&&y(e,["activityEnd"],h),e}function gP(n){const e={},t=m(n,["media"]);if(t!=null){let f=KE(t);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const i=m(n,["audio"]);i!=null&&y(e,["audio"],WE(i));const r=m(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(n,["video"]);o!=null&&y(e,["video"],JE(o));const l=m(n,["text"]);l!=null&&y(e,["text"],l);const c=m(n,["activityStart"]);c!=null&&y(e,["activityStart"],c);const h=m(n,["activityEnd"]);return h!=null&&y(e,["activityEnd"],h),e}function yP(n){const e={},t=m(n,["setupComplete"]);t!=null&&y(e,["setupComplete"],t);const i=m(n,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(n,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(n,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(n,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],xP(l));const c=m(n,["goAway"]);c!=null&&y(e,["goAway"],c);const h=m(n,["sessionResumptionUpdate"]);h!=null&&y(e,["sessionResumptionUpdate"],h);const f=m(n,["voiceActivityDetectionSignal"]);f!=null&&y(e,["voiceActivityDetectionSignal"],f);const p=m(n,["voiceActivity"]);return p!=null&&y(e,["voiceActivity"],SP(p)),e}function vP(n){const e={},t=m(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(n,["fileData"]);o!=null&&y(e,["fileData"],iP(o));const l=m(n,["functionCall"]);l!=null&&y(e,["functionCall"],rP(l));const c=m(n,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const h=m(n,["inlineData"]);h!=null&&y(e,["inlineData"],Np(h));const f=m(n,["text"]);f!=null&&y(e,["text"],f);const p=m(n,["thought"]);p!=null&&y(e,["thought"],p);const b=m(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=m(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function _P(n){const e={},t=m(n,["handle"]);if(t!=null&&y(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bP(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=m(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=m(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=m(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(b=>b)),y(e,["functionDeclarations"],p)}const l=m(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],aP(l));const c=m(n,["googleSearch"]);c!=null&&y(e,["googleSearch"],lP(c));const h=m(n,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const f=m(n,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function wP(n){const e={},t=m(n,["retrieval"]);t!=null&&y(e,["retrieval"],t);const i=m(n,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=m(n,["codeExecution"]);r!=null&&y(e,["codeExecution"],r);const o=m(n,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>sP(S))),y(e,["functionDeclarations"],b)}const c=m(n,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const h=m(n,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const f=m(n,["googleSearchRetrieval"]);f!=null&&y(e,["googleSearchRetrieval"],f);const p=m(n,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function xP(n){const e={},t=m(n,["promptTokenCount"]);t!=null&&y(e,["promptTokenCount"],t);const i=m(n,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(n,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(n,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(n,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(n,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const h=m(n,["promptTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(D=>D)),y(e,["promptTokensDetails"],x)}const f=m(n,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(D=>D)),y(e,["cacheTokensDetails"],x)}const p=m(n,["candidatesTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(D=>D)),y(e,["responseTokensDetails"],x)}const b=m(n,["toolUsePromptTokensDetails"]);if(b!=null){let x=b;Array.isArray(x)&&(x=x.map(D=>D)),y(e,["toolUsePromptTokensDetails"],x)}const S=m(n,["trafficType"]);return S!=null&&y(e,["trafficType"],S),e}function SP(n){const e={},t=m(n,["type"]);return t!=null&&y(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EP(n,e){const t={},i=m(n,["data"]);if(i!=null&&y(t,["data"],i),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(n,["mimeType"]);return r!=null&&y(t,["mimeType"],r),t}function AP(n,e){const t={},i=m(n,["content"]);i!=null&&y(t,["content"],i);const r=m(n,["citationMetadata"]);r!=null&&y(t,["citationMetadata"],TP(r));const o=m(n,["tokenCount"]);o!=null&&y(t,["tokenCount"],o);const l=m(n,["finishReason"]);l!=null&&y(t,["finishReason"],l);const c=m(n,["avgLogprobs"]);c!=null&&y(t,["avgLogprobs"],c);const h=m(n,["groundingMetadata"]);h!=null&&y(t,["groundingMetadata"],h);const f=m(n,["index"]);f!=null&&y(t,["index"],f);const p=m(n,["logprobsResult"]);p!=null&&y(t,["logprobsResult"],p);const b=m(n,["safetyRatings"]);if(b!=null){let x=b;Array.isArray(x)&&(x=x.map(D=>D)),y(t,["safetyRatings"],x)}const S=m(n,["urlContextMetadata"]);return S!=null&&y(t,["urlContextMetadata"],S),t}function TP(n,e){const t={},i=m(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(t,["citations"],r)}return t}function NP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let l=So(o);Array.isArray(l)&&(l=l.map(c=>c)),y(i,["contents"],l)}return i}function CP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(t,["tokensInfo"],o)}return t}function IP(n,e){const t={},i=m(n,["values"]);i!=null&&y(t,["values"],i);const r=m(n,["statistics"]);return r!=null&&y(t,["statistics"],RP(r)),t}function RP(n,e){const t={},i=m(n,["truncated"]);i!=null&&y(t,["truncated"],i);const r=m(n,["token_count"]);return r!=null&&y(t,["tokenCount"],r),t}function nd(n,e){const t={},i=m(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Vk(l))),y(t,["parts"],o)}const r=m(n,["role"]);return r!=null&&y(t,["role"],r),t}function LP(n,e){const t={},i=m(n,["controlType"]);i!=null&&y(t,["controlType"],i);const r=m(n,["enableControlImageComputation"]);return r!=null&&y(t,["computeControl"],r),t}function MP(n,e){const t={};if(m(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function DP(n,e,t){const i={},r=m(n,["systemInstruction"]);e!==void 0&&r!=null&&y(e,["systemInstruction"],jr(r));const o=m(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>cA(h))),y(e,["tools"],c)}const l=m(n,["generationConfig"]);return e!==void 0&&l!=null&&y(e,["generationConfig"],Ek(l)),i}function PP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let c=So(o);Array.isArray(c)&&(c=c.map(h=>nd(h))),y(i,["contents"],c)}const l=m(e,["config"]);return l!=null&&MP(l),i}function kP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let c=So(o);Array.isArray(c)&&(c=c.map(h=>h)),y(i,["contents"],c)}const l=m(e,["config"]);return l!=null&&DP(l,i),i}function UP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["totalTokens"]);r!=null&&y(t,["totalTokens"],r);const o=m(n,["cachedContentTokenCount"]);return o!=null&&y(t,["cachedContentTokenCount"],o),t}function OP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["totalTokens"]);return r!=null&&y(t,["totalTokens"],r),t}function FP(n,e,t){const i={},r=m(e,["model"]);return r!=null&&y(i,["_url","name"],qn(n,r)),i}function VP(n,e,t){const i={},r=m(e,["model"]);return r!=null&&y(i,["_url","name"],qn(n,r)),i}function BP(n,e){const t={},i=m(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function qP(n,e){const t={},i=m(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function HP(n,e,t){const i={},r=m(n,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const c=m(n,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&y(e,["parameters","guidanceScale"],h);const f=m(n,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const p=m(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&y(e,["parameters","personGeneration"],b);const S=m(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&y(e,["parameters","includeSafetyAttributes"],S);const x=m(n,["includeRaiReason"]);e!==void 0&&x!=null&&y(e,["parameters","includeRaiReason"],x);const D=m(n,["language"]);e!==void 0&&D!=null&&y(e,["parameters","language"],D);const O=m(n,["outputMimeType"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","mimeType"],O);const B=m(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&y(e,["parameters","outputOptions","compressionQuality"],B);const q=m(n,["addWatermark"]);e!==void 0&&q!=null&&y(e,["parameters","addWatermark"],q);const X=m(n,["labels"]);e!==void 0&&X!=null&&y(e,["labels"],X);const Z=m(n,["editMode"]);e!==void 0&&Z!=null&&y(e,["parameters","editMode"],Z);const W=m(n,["baseSteps"]);return e!==void 0&&W!=null&&y(e,["parameters","editConfig","baseSteps"],W),i}function zP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["prompt"]);o!=null&&y(i,["instances[0]","prompt"],o);const l=m(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(f=>jk(f))),y(i,["instances[0]","referenceImages"],h)}const c=m(e,["config"]);return c!=null&&HP(c,i),i}function GP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>_m(l))),y(t,["generatedImages"],o)}return t}function jP(n,e,t){const i={},r=m(n,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const o=m(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function $P(n,e,t){const i={};let r=m(t,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const f=m(n,["taskType"]);e!==void 0&&f!=null&&y(e,["instances[]","task_type"],f)}else if(r==="EMBED_CONTENT"){const f=m(n,["taskType"]);e!==void 0&&f!=null&&y(e,["taskType"],f)}let o=m(t,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="PREDICT"){const f=m(n,["title"]);e!==void 0&&f!=null&&y(e,["instances[]","title"],f)}else if(o==="EMBED_CONTENT"){const f=m(n,["title"]);e!==void 0&&f!=null&&y(e,["title"],f)}let l=m(t,["embeddingApiType"]);if(l===void 0&&(l="PREDICT"),l==="PREDICT"){const f=m(n,["outputDimensionality"]);e!==void 0&&f!=null&&y(e,["parameters","outputDimensionality"],f)}else if(l==="EMBED_CONTENT"){const f=m(n,["outputDimensionality"]);e!==void 0&&f!=null&&y(e,["outputDimensionality"],f)}let c=m(t,["embeddingApiType"]);if(c===void 0&&(c="PREDICT"),c==="PREDICT"){const f=m(n,["mimeType"]);e!==void 0&&f!=null&&y(e,["instances[]","mimeType"],f)}let h=m(t,["embeddingApiType"]);if(h===void 0&&(h="PREDICT"),h==="PREDICT"){const f=m(n,["autoTruncate"]);e!==void 0&&f!=null&&y(e,["parameters","autoTruncate"],f)}else if(h==="EMBED_CONTENT"){const f=m(n,["autoTruncate"]);e!==void 0&&f!=null&&y(e,["autoTruncate"],f)}return i}function YP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let f=by(n,o);Array.isArray(f)&&(f=f.map(p=>p)),y(i,["requests[]","content"],f)}const l=m(e,["content"]);l!=null&&nd(jr(l));const c=m(e,["config"]);c!=null&&jP(c,i);const h=m(e,["model"]);return h!==void 0&&y(i,["requests[]","model"],qn(n,h)),i}function KP(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));let o=m(t,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="PREDICT"){const h=m(e,["contents"]);if(h!=null){let f=by(n,h);Array.isArray(f)&&(f=f.map(p=>p)),y(i,["instances[]","content"],f)}}let l=m(t,["embeddingApiType"]);if(l===void 0&&(l="PREDICT"),l==="EMBED_CONTENT"){const h=m(e,["content"]);h!=null&&y(i,["content"],jr(h))}const c=m(e,["config"]);return c!=null&&$P(c,i,t),i}function JP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),y(t,["embeddings"],l)}const o=m(n,["metadata"]);return o!=null&&y(t,["metadata"],o),t}function WP(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>IP(c))),y(t,["embeddings"],l)}const o=m(n,["metadata"]);if(o!=null&&y(t,["metadata"],o),e&&m(e,["embeddingApiType"])==="EMBED_CONTENT"){const l=m(n,["embedding"]),c=m(n,["usageMetadata"]),h=m(n,["truncated"]);if(l){const f={};c&&c.promptTokenCount&&(f.tokenCount=c.promptTokenCount),h&&(f.truncated=h),l.statistics=f,y(t,["embeddings"],[l])}}return t}function XP(n,e){const t={},i=m(n,["endpoint"]);i!=null&&y(t,["name"],i);const r=m(n,["deployedModelId"]);return r!=null&&y(t,["deployedModelId"],r),t}function QP(n,e){const t={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["fileUri"]);i!=null&&y(t,["fileUri"],i);const r=m(n,["mimeType"]);return r!=null&&y(t,["mimeType"],r),t}function ZP(n,e){const t={},i=m(n,["id"]);i!=null&&y(t,["id"],i);const r=m(n,["args"]);r!=null&&y(t,["args"],r);const o=m(n,["name"]);if(o!=null&&y(t,["name"],o),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ek(n,e){const t={},i=m(n,["allowedFunctionNames"]);i!=null&&y(t,["allowedFunctionNames"],i);const r=m(n,["mode"]);if(r!=null&&y(t,["mode"],r),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function tk(n,e){const t={},i=m(n,["description"]);i!=null&&y(t,["description"],i);const r=m(n,["name"]);r!=null&&y(t,["name"],r);const o=m(n,["parameters"]);o!=null&&y(t,["parameters"],o);const l=m(n,["parametersJsonSchema"]);l!=null&&y(t,["parametersJsonSchema"],l);const c=m(n,["response"]);c!=null&&y(t,["response"],c);const h=m(n,["responseJsonSchema"]);if(h!=null&&y(t,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function nk(n,e,t,i){const r={},o=m(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],nd(jr(o)));const l=m(e,["temperature"]);l!=null&&y(r,["temperature"],l);const c=m(e,["topP"]);c!=null&&y(r,["topP"],c);const h=m(e,["topK"]);h!=null&&y(r,["topK"],h);const f=m(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const p=m(e,["maxOutputTokens"]);p!=null&&y(r,["maxOutputTokens"],p);const b=m(e,["stopSequences"]);b!=null&&y(r,["stopSequences"],b);const S=m(e,["responseLogprobs"]);S!=null&&y(r,["responseLogprobs"],S);const x=m(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const D=m(e,["presencePenalty"]);D!=null&&y(r,["presencePenalty"],D);const O=m(e,["frequencyPenalty"]);O!=null&&y(r,["frequencyPenalty"],O);const B=m(e,["seed"]);B!=null&&y(r,["seed"],B);const q=m(e,["responseMimeType"]);q!=null&&y(r,["responseMimeType"],q);const X=m(e,["responseSchema"]);X!=null&&y(r,["responseSchema"],wy(X));const Z=m(e,["responseJsonSchema"]);if(Z!=null&&y(r,["responseJsonSchema"],Z),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=m(e,["safetySettings"]);if(t!==void 0&&W!=null){let ce=W;Array.isArray(ce)&&(ce=ce.map(Te=>$k(Te))),y(t,["safetySettings"],ce)}const ye=m(e,["tools"]);if(t!==void 0&&ye!=null){let ce=Pf(ye);Array.isArray(ce)&&(ce=ce.map(Te=>Zk(Df(Te)))),y(t,["tools"],ce)}const de=m(e,["toolConfig"]);if(t!==void 0&&de!=null&&y(t,["toolConfig"],Qk(de)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);t!==void 0&&G!=null&&y(t,["cachedContent"],Fl(n,G));const V=m(e,["responseModalities"]);V!=null&&y(r,["responseModalities"],V);const L=m(e,["mediaResolution"]);L!=null&&y(r,["mediaResolution"],L);const j=m(e,["speechConfig"]);if(j!=null&&y(r,["speechConfig"],xy(j)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=m(e,["thinkingConfig"]);I!=null&&y(r,["thinkingConfig"],I);const k=m(e,["imageConfig"]);k!=null&&y(r,["imageConfig"],Ik(k));const F=m(e,["enableEnhancedCivicAnswers"]);if(F!=null&&y(r,["enableEnhancedCivicAnswers"],F),m(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function ik(n,e,t,i){const r={},o=m(e,["systemInstruction"]);t!==void 0&&o!=null&&y(t,["systemInstruction"],jr(o));const l=m(e,["temperature"]);l!=null&&y(r,["temperature"],l);const c=m(e,["topP"]);c!=null&&y(r,["topP"],c);const h=m(e,["topK"]);h!=null&&y(r,["topK"],h);const f=m(e,["candidateCount"]);f!=null&&y(r,["candidateCount"],f);const p=m(e,["maxOutputTokens"]);p!=null&&y(r,["maxOutputTokens"],p);const b=m(e,["stopSequences"]);b!=null&&y(r,["stopSequences"],b);const S=m(e,["responseLogprobs"]);S!=null&&y(r,["responseLogprobs"],S);const x=m(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const D=m(e,["presencePenalty"]);D!=null&&y(r,["presencePenalty"],D);const O=m(e,["frequencyPenalty"]);O!=null&&y(r,["frequencyPenalty"],O);const B=m(e,["seed"]);B!=null&&y(r,["seed"],B);const q=m(e,["responseMimeType"]);q!=null&&y(r,["responseMimeType"],q);const X=m(e,["responseSchema"]);X!=null&&y(r,["responseSchema"],wy(X));const Z=m(e,["responseJsonSchema"]);Z!=null&&y(r,["responseJsonSchema"],Z);const W=m(e,["routingConfig"]);W!=null&&y(r,["routingConfig"],W);const ye=m(e,["modelSelectionConfig"]);ye!=null&&y(r,["modelConfig"],ye);const de=m(e,["safetySettings"]);if(t!==void 0&&de!=null){let ve=de;Array.isArray(ve)&&(ve=ve.map(we=>we)),y(t,["safetySettings"],ve)}const G=m(e,["tools"]);if(t!==void 0&&G!=null){let ve=Pf(G);Array.isArray(ve)&&(ve=ve.map(we=>cA(Df(we)))),y(t,["tools"],ve)}const V=m(e,["toolConfig"]);t!==void 0&&V!=null&&y(t,["toolConfig"],V);const L=m(e,["labels"]);t!==void 0&&L!=null&&y(t,["labels"],L);const j=m(e,["cachedContent"]);t!==void 0&&j!=null&&y(t,["cachedContent"],Fl(n,j));const I=m(e,["responseModalities"]);I!=null&&y(r,["responseModalities"],I);const k=m(e,["mediaResolution"]);k!=null&&y(r,["mediaResolution"],k);const F=m(e,["speechConfig"]);F!=null&&y(r,["speechConfig"],xy(F));const ce=m(e,["audioTimestamp"]);ce!=null&&y(r,["audioTimestamp"],ce);const Te=m(e,["thinkingConfig"]);Te!=null&&y(r,["thinkingConfig"],Te);const le=m(e,["imageConfig"]);if(le!=null&&y(r,["imageConfig"],Rk(le)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ue=m(e,["modelArmorConfig"]);return t!==void 0&&ue!=null&&y(t,["modelArmorConfig"],ue),r}function qw(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let c=So(o);Array.isArray(c)&&(c=c.map(h=>nd(h))),y(i,["contents"],c)}const l=m(e,["config"]);return l!=null&&y(i,["generationConfig"],nk(n,l,i)),i}function Hw(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["contents"]);if(o!=null){let c=So(o);Array.isArray(c)&&(c=c.map(h=>h)),y(i,["contents"],c)}const l=m(e,["config"]);return l!=null&&y(i,["generationConfig"],ik(n,l,i)),i}function zw(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>AP(p))),y(t,["candidates"],f)}const o=m(n,["modelVersion"]);o!=null&&y(t,["modelVersion"],o);const l=m(n,["promptFeedback"]);l!=null&&y(t,["promptFeedback"],l);const c=m(n,["responseId"]);c!=null&&y(t,["responseId"],c);const h=m(n,["usageMetadata"]);return h!=null&&y(t,["usageMetadata"],h),t}function Gw(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(b=>b)),y(t,["candidates"],p)}const o=m(n,["createTime"]);o!=null&&y(t,["createTime"],o);const l=m(n,["modelVersion"]);l!=null&&y(t,["modelVersion"],l);const c=m(n,["promptFeedback"]);c!=null&&y(t,["promptFeedback"],c);const h=m(n,["responseId"]);h!=null&&y(t,["responseId"],h);const f=m(n,["usageMetadata"]);return f!=null&&y(t,["usageMetadata"],f),t}function rk(n,e,t){const i={};if(m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=m(n,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const o=m(n,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(n,["guidanceScale"]);if(e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=m(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const h=m(n,["personGeneration"]);e!==void 0&&h!=null&&y(e,["parameters","personGeneration"],h);const f=m(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&y(e,["parameters","includeSafetyAttributes"],f);const p=m(n,["includeRaiReason"]);e!==void 0&&p!=null&&y(e,["parameters","includeRaiReason"],p);const b=m(n,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const S=m(n,["outputMimeType"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","mimeType"],S);const x=m(n,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&y(e,["parameters","outputOptions","compressionQuality"],x),m(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=m(n,["imageSize"]);if(e!==void 0&&D!=null&&y(e,["parameters","sampleImageSize"],D),m(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function sk(n,e,t){const i={},r=m(n,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const c=m(n,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&y(e,["parameters","guidanceScale"],h);const f=m(n,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const p=m(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&y(e,["parameters","personGeneration"],b);const S=m(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&y(e,["parameters","includeSafetyAttributes"],S);const x=m(n,["includeRaiReason"]);e!==void 0&&x!=null&&y(e,["parameters","includeRaiReason"],x);const D=m(n,["language"]);e!==void 0&&D!=null&&y(e,["parameters","language"],D);const O=m(n,["outputMimeType"]);e!==void 0&&O!=null&&y(e,["parameters","outputOptions","mimeType"],O);const B=m(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&y(e,["parameters","outputOptions","compressionQuality"],B);const q=m(n,["addWatermark"]);e!==void 0&&q!=null&&y(e,["parameters","addWatermark"],q);const X=m(n,["labels"]);e!==void 0&&X!=null&&y(e,["labels"],X);const Z=m(n,["imageSize"]);e!==void 0&&Z!=null&&y(e,["parameters","sampleImageSize"],Z);const W=m(n,["enhancePrompt"]);return e!==void 0&&W!=null&&y(e,["parameters","enhancePrompt"],W),i}function ok(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["prompt"]);o!=null&&y(i,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&rk(l,i),i}function ak(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["prompt"]);o!=null&&y(i,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&sk(l,i),i}function lk(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bk(c))),y(t,["generatedImages"],l)}const o=m(n,["positivePromptSafetyAttributes"]);return o!=null&&y(t,["positivePromptSafetyAttributes"],lA(o)),t}function uk(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>_m(c))),y(t,["generatedImages"],l)}const o=m(n,["positivePromptSafetyAttributes"]);return o!=null&&y(t,["positivePromptSafetyAttributes"],uA(o)),t}function ck(n,e,t){const i={},r=m(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r),m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=m(n,["durationSeconds"]);if(e!==void 0&&o!=null&&y(e,["parameters","durationSeconds"],o),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(n,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const h=m(n,["personGeneration"]);if(e!==void 0&&h!=null&&y(e,["parameters","personGeneration"],h),m(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(n,["negativePrompt"]);e!==void 0&&f!=null&&y(e,["parameters","negativePrompt"],f);const p=m(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&y(e,["parameters","enhancePrompt"],p),m(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=m(n,["lastFrame"]);e!==void 0&&b!=null&&y(e,["instances[0]","lastFrame"],bm(b));const S=m(n,["referenceImages"]);if(e!==void 0&&S!=null){let x=S;Array.isArray(x)&&(x=x.map(D=>h7(D))),y(e,["instances[0]","referenceImages"],x)}if(m(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function fk(n,e,t){const i={},r=m(n,["numberOfVideos"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const o=m(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(n,["fps"]);e!==void 0&&l!=null&&y(e,["parameters","fps"],l);const c=m(n,["durationSeconds"]);e!==void 0&&c!=null&&y(e,["parameters","durationSeconds"],c);const h=m(n,["seed"]);e!==void 0&&h!=null&&y(e,["parameters","seed"],h);const f=m(n,["aspectRatio"]);e!==void 0&&f!=null&&y(e,["parameters","aspectRatio"],f);const p=m(n,["resolution"]);e!==void 0&&p!=null&&y(e,["parameters","resolution"],p);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&y(e,["parameters","personGeneration"],b);const S=m(n,["pubsubTopic"]);e!==void 0&&S!=null&&y(e,["parameters","pubsubTopic"],S);const x=m(n,["negativePrompt"]);e!==void 0&&x!=null&&y(e,["parameters","negativePrompt"],x);const D=m(n,["enhancePrompt"]);e!==void 0&&D!=null&&y(e,["parameters","enhancePrompt"],D);const O=m(n,["generateAudio"]);e!==void 0&&O!=null&&y(e,["parameters","generateAudio"],O);const B=m(n,["lastFrame"]);e!==void 0&&B!=null&&y(e,["instances[0]","lastFrame"],Sa(B));const q=m(n,["referenceImages"]);if(e!==void 0&&q!=null){let W=q;Array.isArray(W)&&(W=W.map(ye=>d7(ye))),y(e,["instances[0]","referenceImages"],W)}const X=m(n,["mask"]);e!==void 0&&X!=null&&y(e,["instances[0]","mask"],f7(X));const Z=m(n,["compressionQuality"]);return e!==void 0&&Z!=null&&y(e,["parameters","compressionQuality"],Z),i}function hk(n,e){const t={},i=m(n,["name"]);i!=null&&y(t,["name"],i);const r=m(n,["metadata"]);r!=null&&y(t,["metadata"],r);const o=m(n,["done"]);o!=null&&y(t,["done"],o);const l=m(n,["error"]);l!=null&&y(t,["error"],l);const c=m(n,["response","generateVideoResponse"]);return c!=null&&y(t,["response"],gk(c)),t}function dk(n,e){const t={},i=m(n,["name"]);i!=null&&y(t,["name"],i);const r=m(n,["metadata"]);r!=null&&y(t,["metadata"],r);const o=m(n,["done"]);o!=null&&y(t,["done"],o);const l=m(n,["error"]);l!=null&&y(t,["error"],l);const c=m(n,["response"]);return c!=null&&y(t,["response"],yk(c)),t}function pk(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["prompt"]);o!=null&&y(i,["instances[0]","prompt"],o);const l=m(e,["image"]);l!=null&&y(i,["instances[0]","image"],bm(l));const c=m(e,["video"]);c!=null&&y(i,["instances[0]","video"],fA(c));const h=m(e,["source"]);h!=null&&vk(h,i);const f=m(e,["config"]);return f!=null&&ck(f,i),i}function mk(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["prompt"]);o!=null&&y(i,["instances[0]","prompt"],o);const l=m(e,["image"]);l!=null&&y(i,["instances[0]","image"],Sa(l));const c=m(e,["video"]);c!=null&&y(i,["instances[0]","video"],hA(c));const h=m(e,["source"]);h!=null&&_k(h,i);const f=m(e,["config"]);return f!=null&&fk(f,i),i}function gk(n,e){const t={},i=m(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>xk(c))),y(t,["generatedVideos"],l)}const r=m(n,["raiMediaFilteredCount"]);r!=null&&y(t,["raiMediaFilteredCount"],r);const o=m(n,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function yk(n,e){const t={},i=m(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Sk(c))),y(t,["generatedVideos"],l)}const r=m(n,["raiMediaFilteredCount"]);r!=null&&y(t,["raiMediaFilteredCount"],r);const o=m(n,["raiMediaFilteredReasons"]);return o!=null&&y(t,["raiMediaFilteredReasons"],o),t}function vk(n,e,t){const i={},r=m(n,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const o=m(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],bm(o));const l=m(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],fA(l)),i}function _k(n,e,t){const i={},r=m(n,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const o=m(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],Sa(o));const l=m(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],hA(l)),i}function bk(n,e){const t={},i=m(n,["_self"]);i!=null&&y(t,["image"],Lk(i));const r=m(n,["raiFilteredReason"]);r!=null&&y(t,["raiFilteredReason"],r);const o=m(n,["_self"]);return o!=null&&y(t,["safetyAttributes"],lA(o)),t}function _m(n,e){const t={},i=m(n,["_self"]);i!=null&&y(t,["image"],aA(i));const r=m(n,["raiFilteredReason"]);r!=null&&y(t,["raiFilteredReason"],r);const o=m(n,["_self"]);o!=null&&y(t,["safetyAttributes"],uA(o));const l=m(n,["prompt"]);return l!=null&&y(t,["enhancedPrompt"],l),t}function wk(n,e){const t={},i=m(n,["_self"]);i!=null&&y(t,["mask"],aA(i));const r=m(n,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(t,["labels"],o)}return t}function xk(n,e){const t={},i=m(n,["video"]);return i!=null&&y(t,["video"],u7(i)),t}function Sk(n,e){const t={},i=m(n,["_self"]);return i!=null&&y(t,["video"],c7(i)),t}function Ek(n,e){const t={},i=m(n,["modelSelectionConfig"]);i!=null&&y(t,["modelConfig"],i);const r=m(n,["responseJsonSchema"]);r!=null&&y(t,["responseJsonSchema"],r);const o=m(n,["audioTimestamp"]);o!=null&&y(t,["audioTimestamp"],o);const l=m(n,["candidateCount"]);l!=null&&y(t,["candidateCount"],l);const c=m(n,["enableAffectiveDialog"]);c!=null&&y(t,["enableAffectiveDialog"],c);const h=m(n,["frequencyPenalty"]);h!=null&&y(t,["frequencyPenalty"],h);const f=m(n,["logprobs"]);f!=null&&y(t,["logprobs"],f);const p=m(n,["maxOutputTokens"]);p!=null&&y(t,["maxOutputTokens"],p);const b=m(n,["mediaResolution"]);b!=null&&y(t,["mediaResolution"],b);const S=m(n,["presencePenalty"]);S!=null&&y(t,["presencePenalty"],S);const x=m(n,["responseLogprobs"]);x!=null&&y(t,["responseLogprobs"],x);const D=m(n,["responseMimeType"]);D!=null&&y(t,["responseMimeType"],D);const O=m(n,["responseModalities"]);O!=null&&y(t,["responseModalities"],O);const B=m(n,["responseSchema"]);B!=null&&y(t,["responseSchema"],B);const q=m(n,["routingConfig"]);q!=null&&y(t,["routingConfig"],q);const X=m(n,["seed"]);X!=null&&y(t,["seed"],X);const Z=m(n,["speechConfig"]);Z!=null&&y(t,["speechConfig"],Z);const W=m(n,["stopSequences"]);W!=null&&y(t,["stopSequences"],W);const ye=m(n,["temperature"]);ye!=null&&y(t,["temperature"],ye);const de=m(n,["thinkingConfig"]);de!=null&&y(t,["thinkingConfig"],de);const G=m(n,["topK"]);G!=null&&y(t,["topK"],G);const V=m(n,["topP"]);if(V!=null&&y(t,["topP"],V),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Ak(n,e,t){const i={},r=m(e,["model"]);return r!=null&&y(i,["_url","name"],qn(n,r)),i}function Tk(n,e,t){const i={},r=m(e,["model"]);return r!=null&&y(i,["_url","name"],qn(n,r)),i}function Nk(n,e){const t={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=m(n,["enableWidget"]);return i!=null&&y(t,["enableWidget"],i),t}function Ck(n,e){const t={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=m(n,["timeRangeFilter"]);return i!=null&&y(t,["timeRangeFilter"],i),t}function Ik(n,e){const t={},i=m(n,["aspectRatio"]);i!=null&&y(t,["aspectRatio"],i);const r=m(n,["imageSize"]);if(r!=null&&y(t,["imageSize"],r),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Rk(n,e){const t={},i=m(n,["aspectRatio"]);i!=null&&y(t,["aspectRatio"],i);const r=m(n,["imageSize"]);r!=null&&y(t,["imageSize"],r);const o=m(n,["personGeneration"]);o!=null&&y(t,["personGeneration"],o);const l=m(n,["outputMimeType"]);l!=null&&y(t,["imageOutputOptions","mimeType"],l);const c=m(n,["outputCompressionQuality"]);return c!=null&&y(t,["imageOutputOptions","compressionQuality"],c),t}function Lk(n,e){const t={},i=m(n,["bytesBase64Encoded"]);i!=null&&y(t,["imageBytes"],Ru(i));const r=m(n,["mimeType"]);return r!=null&&y(t,["mimeType"],r),t}function aA(n,e){const t={},i=m(n,["gcsUri"]);i!=null&&y(t,["gcsUri"],i);const r=m(n,["bytesBase64Encoded"]);r!=null&&y(t,["imageBytes"],Ru(r));const o=m(n,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function bm(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=m(n,["imageBytes"]);i!=null&&y(t,["bytesBase64Encoded"],Ru(i));const r=m(n,["mimeType"]);return r!=null&&y(t,["mimeType"],r),t}function Sa(n,e){const t={},i=m(n,["gcsUri"]);i!=null&&y(t,["gcsUri"],i);const r=m(n,["imageBytes"]);r!=null&&y(t,["bytesBase64Encoded"],Ru(r));const o=m(n,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function Mk(n,e,t,i){const r={},o=m(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const c=m(e,["filter"]);t!==void 0&&c!=null&&y(t,["_query","filter"],c);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&y(t,["_url","models_url"],eA(n,h)),r}function Dk(n,e,t,i){const r={},o=m(e,["pageSize"]);t!==void 0&&o!=null&&y(t,["_query","pageSize"],o);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&y(t,["_query","pageToken"],l);const c=m(e,["filter"]);t!==void 0&&c!=null&&y(t,["_query","filter"],c);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&y(t,["_url","models_url"],eA(n,h)),r}function Pk(n,e,t){const i={},r=m(e,["config"]);return r!=null&&Mk(n,r,i),i}function kk(n,e,t){const i={},r=m(e,["config"]);return r!=null&&Dk(n,r,i),i}function Uk(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=m(n,["_self"]);if(o!=null){let l=tA(o);Array.isArray(l)&&(l=l.map(c=>y1(c))),y(t,["models"],l)}return t}function Ok(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=m(n,["_self"]);if(o!=null){let l=tA(o);Array.isArray(l)&&(l=l.map(c=>v1(c))),y(t,["models"],l)}return t}function Fk(n,e){const t={},i=m(n,["maskMode"]);i!=null&&y(t,["maskMode"],i);const r=m(n,["segmentationClasses"]);r!=null&&y(t,["maskClasses"],r);const o=m(n,["maskDilation"]);return o!=null&&y(t,["dilation"],o),t}function y1(n,e){const t={},i=m(n,["name"]);i!=null&&y(t,["name"],i);const r=m(n,["displayName"]);r!=null&&y(t,["displayName"],r);const o=m(n,["description"]);o!=null&&y(t,["description"],o);const l=m(n,["version"]);l!=null&&y(t,["version"],l);const c=m(n,["_self"]);c!=null&&y(t,["tunedModelInfo"],e7(c));const h=m(n,["inputTokenLimit"]);h!=null&&y(t,["inputTokenLimit"],h);const f=m(n,["outputTokenLimit"]);f!=null&&y(t,["outputTokenLimit"],f);const p=m(n,["supportedGenerationMethods"]);p!=null&&y(t,["supportedActions"],p);const b=m(n,["temperature"]);b!=null&&y(t,["temperature"],b);const S=m(n,["maxTemperature"]);S!=null&&y(t,["maxTemperature"],S);const x=m(n,["topP"]);x!=null&&y(t,["topP"],x);const D=m(n,["topK"]);D!=null&&y(t,["topK"],D);const O=m(n,["thinking"]);return O!=null&&y(t,["thinking"],O),t}function v1(n,e){const t={},i=m(n,["name"]);i!=null&&y(t,["name"],i);const r=m(n,["displayName"]);r!=null&&y(t,["displayName"],r);const o=m(n,["description"]);o!=null&&y(t,["description"],o);const l=m(n,["versionId"]);l!=null&&y(t,["version"],l);const c=m(n,["deployedModels"]);if(c!=null){let S=c;Array.isArray(S)&&(S=S.map(x=>XP(x))),y(t,["endpoints"],S)}const h=m(n,["labels"]);h!=null&&y(t,["labels"],h);const f=m(n,["_self"]);f!=null&&y(t,["tunedModelInfo"],t7(f));const p=m(n,["defaultCheckpointId"]);p!=null&&y(t,["defaultCheckpointId"],p);const b=m(n,["checkpoints"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(x=>x)),y(t,["checkpoints"],S)}return t}function Vk(n,e){const t={},i=m(n,["mediaResolution"]);i!=null&&y(t,["mediaResolution"],i);const r=m(n,["codeExecutionResult"]);r!=null&&y(t,["codeExecutionResult"],r);const o=m(n,["executableCode"]);o!=null&&y(t,["executableCode"],o);const l=m(n,["fileData"]);l!=null&&y(t,["fileData"],QP(l));const c=m(n,["functionCall"]);c!=null&&y(t,["functionCall"],ZP(c));const h=m(n,["functionResponse"]);h!=null&&y(t,["functionResponse"],h);const f=m(n,["inlineData"]);f!=null&&y(t,["inlineData"],EP(f));const p=m(n,["text"]);p!=null&&y(t,["text"],p);const b=m(n,["thought"]);b!=null&&y(t,["thought"],b);const S=m(n,["thoughtSignature"]);S!=null&&y(t,["thoughtSignature"],S);const x=m(n,["videoMetadata"]);return x!=null&&y(t,["videoMetadata"],x),t}function Bk(n,e){const t={},i=m(n,["productImage"]);return i!=null&&y(t,["image"],Sa(i)),t}function qk(n,e,t){const i={},r=m(n,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const o=m(n,["baseSteps"]);e!==void 0&&o!=null&&y(e,["parameters","baseSteps"],o);const l=m(n,["outputGcsUri"]);e!==void 0&&l!=null&&y(e,["parameters","storageUri"],l);const c=m(n,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const f=m(n,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const p=m(n,["addWatermark"]);e!==void 0&&p!=null&&y(e,["parameters","addWatermark"],p);const b=m(n,["outputMimeType"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","mimeType"],b);const S=m(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S);const x=m(n,["enhancePrompt"]);e!==void 0&&x!=null&&y(e,["parameters","enhancePrompt"],x);const D=m(n,["labels"]);return e!==void 0&&D!=null&&y(e,["labels"],D),i}function Hk(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["source"]);o!=null&&Gk(o,i);const l=m(e,["config"]);return l!=null&&qk(l,i),i}function zk(n,e){const t={},i=m(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>_m(o))),y(t,["generatedImages"],r)}return t}function Gk(n,e,t){const i={},r=m(n,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const o=m(n,["personImage"]);e!==void 0&&o!=null&&y(e,["instances[0]","personImage","image"],Sa(o));const l=m(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Bk(h))),y(e,["instances[0]","productImages"],c)}return i}function jk(n,e){const t={},i=m(n,["referenceImage"]);i!=null&&y(t,["referenceImage"],Sa(i));const r=m(n,["referenceId"]);r!=null&&y(t,["referenceId"],r);const o=m(n,["referenceType"]);o!=null&&y(t,["referenceType"],o);const l=m(n,["maskImageConfig"]);l!=null&&y(t,["maskImageConfig"],Fk(l));const c=m(n,["controlImageConfig"]);c!=null&&y(t,["controlImageConfig"],LP(c));const h=m(n,["styleImageConfig"]);h!=null&&y(t,["styleImageConfig"],h);const f=m(n,["subjectImageConfig"]);return f!=null&&y(t,["subjectImageConfig"],f),t}function lA(n,e){const t={},i=m(n,["safetyAttributes","categories"]);i!=null&&y(t,["categories"],i);const r=m(n,["safetyAttributes","scores"]);r!=null&&y(t,["scores"],r);const o=m(n,["contentType"]);return o!=null&&y(t,["contentType"],o),t}function uA(n,e){const t={},i=m(n,["safetyAttributes","categories"]);i!=null&&y(t,["categories"],i);const r=m(n,["safetyAttributes","scores"]);r!=null&&y(t,["scores"],r);const o=m(n,["contentType"]);return o!=null&&y(t,["contentType"],o),t}function $k(n,e){const t={},i=m(n,["category"]);if(i!=null&&y(t,["category"],i),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=m(n,["threshold"]);return r!=null&&y(t,["threshold"],r),t}function Yk(n,e){const t={},i=m(n,["image"]);return i!=null&&y(t,["image"],Sa(i)),t}function Kk(n,e,t){const i={},r=m(n,["mode"]);e!==void 0&&r!=null&&y(e,["parameters","mode"],r);const o=m(n,["maxPredictions"]);e!==void 0&&o!=null&&y(e,["parameters","maxPredictions"],o);const l=m(n,["confidenceThreshold"]);e!==void 0&&l!=null&&y(e,["parameters","confidenceThreshold"],l);const c=m(n,["maskDilation"]);e!==void 0&&c!=null&&y(e,["parameters","maskDilation"],c);const h=m(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&y(e,["parameters","binaryColorThreshold"],h);const f=m(n,["labels"]);return e!==void 0&&f!=null&&y(e,["labels"],f),i}function Jk(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["source"]);o!=null&&Xk(o,i);const l=m(e,["config"]);return l!=null&&Kk(l,i),i}function Wk(n,e){const t={},i=m(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>wk(o))),y(t,["generatedMasks"],r)}return t}function Xk(n,e,t){const i={},r=m(n,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const o=m(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],Sa(o));const l=m(n,["scribbleImage"]);return e!==void 0&&l!=null&&y(e,["instances[0]","scribble"],Yk(l)),i}function Qk(n,e){const t={},i=m(n,["retrievalConfig"]);i!=null&&y(t,["retrievalConfig"],i);const r=m(n,["functionCallingConfig"]);return r!=null&&y(t,["functionCallingConfig"],ek(r)),t}function Zk(n,e){const t={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["computerUse"]);i!=null&&y(t,["computerUse"],i);const r=m(n,["fileSearch"]);r!=null&&y(t,["fileSearch"],r);const o=m(n,["codeExecution"]);if(o!=null&&y(t,["codeExecution"],o),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>S)),y(t,["functionDeclarations"],b)}const c=m(n,["googleMaps"]);c!=null&&y(t,["googleMaps"],Nk(c));const h=m(n,["googleSearch"]);h!=null&&y(t,["googleSearch"],Ck(h));const f=m(n,["googleSearchRetrieval"]);f!=null&&y(t,["googleSearchRetrieval"],f);const p=m(n,["urlContext"]);return p!=null&&y(t,["urlContext"],p),t}function cA(n,e){const t={},i=m(n,["retrieval"]);i!=null&&y(t,["retrieval"],i);const r=m(n,["computerUse"]);if(r!=null&&y(t,["computerUse"],r),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=m(n,["codeExecution"]);o!=null&&y(t,["codeExecution"],o);const l=m(n,["enterpriseWebSearch"]);l!=null&&y(t,["enterpriseWebSearch"],l);const c=m(n,["functionDeclarations"]);if(c!=null){let S=c;Array.isArray(S)&&(S=S.map(x=>tk(x))),y(t,["functionDeclarations"],S)}const h=m(n,["googleMaps"]);h!=null&&y(t,["googleMaps"],h);const f=m(n,["googleSearch"]);f!=null&&y(t,["googleSearch"],f);const p=m(n,["googleSearchRetrieval"]);p!=null&&y(t,["googleSearchRetrieval"],p);const b=m(n,["urlContext"]);return b!=null&&y(t,["urlContext"],b),t}function e7(n,e){const t={},i=m(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const r=m(n,["createTime"]);r!=null&&y(t,["createTime"],r);const o=m(n,["updateTime"]);return o!=null&&y(t,["updateTime"],o),t}function t7(n,e){const t={},i=m(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&y(t,["baseModel"],i);const r=m(n,["createTime"]);r!=null&&y(t,["createTime"],r);const o=m(n,["updateTime"]);return o!=null&&y(t,["updateTime"],o),t}function n7(n,e,t){const i={},r=m(n,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),i}function i7(n,e,t){const i={},r=m(n,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),i}function r7(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","name"],qn(n,r));const o=m(e,["config"]);return o!=null&&n7(o,i),i}function s7(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["config"]);return o!=null&&i7(o,i),i}function o7(n,e,t){const i={},r=m(n,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&y(e,["parameters","safetySetting"],o);const l=m(n,["personGeneration"]);e!==void 0&&l!=null&&y(e,["parameters","personGeneration"],l);const c=m(n,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const h=m(n,["outputMimeType"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","mimeType"],h);const f=m(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","compressionQuality"],f);const p=m(n,["enhanceInputImage"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],p);const b=m(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const S=m(n,["labels"]);e!==void 0&&S!=null&&y(e,["labels"],S);const x=m(n,["numberOfImages"]);e!==void 0&&x!=null&&y(e,["parameters","sampleCount"],x);const D=m(n,["mode"]);return e!==void 0&&D!=null&&y(e,["parameters","mode"],D),i}function a7(n,e,t){const i={},r=m(e,["model"]);r!=null&&y(i,["_url","model"],qn(n,r));const o=m(e,["image"]);o!=null&&y(i,["instances[0]","image"],Sa(o));const l=m(e,["upscaleFactor"]);l!=null&&y(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=m(e,["config"]);return c!=null&&o7(c,i),i}function l7(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>_m(l))),y(t,["generatedImages"],o)}return t}function u7(n,e){const t={},i=m(n,["uri"]);i!=null&&y(t,["uri"],i);const r=m(n,["encodedVideo"]);r!=null&&y(t,["videoBytes"],Ru(r));const o=m(n,["encoding"]);return o!=null&&y(t,["mimeType"],o),t}function c7(n,e){const t={},i=m(n,["gcsUri"]);i!=null&&y(t,["uri"],i);const r=m(n,["bytesBase64Encoded"]);r!=null&&y(t,["videoBytes"],Ru(r));const o=m(n,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}function f7(n,e){const t={},i=m(n,["image"]);i!=null&&y(t,["_self"],Sa(i));const r=m(n,["maskMode"]);return r!=null&&y(t,["maskMode"],r),t}function h7(n,e){const t={},i=m(n,["image"]);i!=null&&y(t,["image"],bm(i));const r=m(n,["referenceType"]);return r!=null&&y(t,["referenceType"],r),t}function d7(n,e){const t={},i=m(n,["image"]);i!=null&&y(t,["image"],Sa(i));const r=m(n,["referenceType"]);return r!=null&&y(t,["referenceType"],r),t}function fA(n,e){const t={},i=m(n,["uri"]);i!=null&&y(t,["uri"],i);const r=m(n,["videoBytes"]);r!=null&&y(t,["encodedVideo"],Ru(r));const o=m(n,["mimeType"]);return o!=null&&y(t,["encoding"],o),t}function hA(n,e){const t={},i=m(n,["uri"]);i!=null&&y(t,["gcsUri"],i);const r=m(n,["videoBytes"]);r!=null&&y(t,["bytesBase64Encoded"],Ru(r));const o=m(n,["mimeType"]);return o!=null&&y(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p7(n,e){const t={},i=m(n,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),t}function m7(n){const e={},t=m(n,["config"]);return t!=null&&p7(t,e),e}function g7(n,e){const t={},i=m(n,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),t}function y7(n){const e={},t=m(n,["name"]);t!=null&&y(e,["_url","name"],t);const i=m(n,["config"]);return i!=null&&g7(i,e),e}function v7(n){const e={},t=m(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function _7(n,e){const t={},i=m(n,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(n,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),t}function b7(n){const e={},t=m(n,["name"]);t!=null&&y(e,["name"],t);const i=m(n,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(n,["done"]);r!=null&&y(e,["done"],r);const o=m(n,["error"]);o!=null&&y(e,["error"],o);const l=m(n,["response"]);return l!=null&&y(e,["response"],x7(l)),e}function w7(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&y(e,["_url","file_search_store_name"],t);const i=m(n,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(n,["config"]);return r!=null&&_7(r,e),e}function x7(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&y(e,["parent"],i);const r=m(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function S7(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function E7(n){const e={},t=m(n,["config"]);return t!=null&&S7(t,e),e}function A7(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function dA(n,e){const t={},i=m(n,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(n,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(n,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>h)),y(e,["customMetadata"],c)}const l=m(n,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),t}function T7(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&y(e,["_url","file_search_store_name"],t);const i=m(n,["config"]);return i!=null&&dA(i,e),e}function N7(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&y(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C7="Content-Type",I7="X-Server-Timeout",R7="User-Agent",_1="x-goog-api-client",L7="1.42.0",M7=`google-genai-sdk/${L7}`,D7="v1beta1",P7="v1beta",k7=5,U7=[408,429,500,502,503,504];class O7{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:D7}else{if(!this.clientOptions.apiKey)throw new Jh({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:P7,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===d1.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&F7(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await jw(r),new p1(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await jw(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ya(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield nn(r.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=o.decode(p,{stream:!0});try{const D=JSON.parse(b);if("error"in D){const O=JSON.parse(JSON.stringify(D.error)),B=O.status,q=O.code,X=`got status: ${B}. ${JSON.stringify(D)}`;if(q>=400&&q<600)throw new Jh({message:X,status:q})}}catch(D){if(D.name==="ApiError")throw D}l+=b;let S=-1,x=0;for(;;){S=-1,x=0;for(const B of h){const q=l.indexOf(B);q!==-1&&(S===-1||q<S)&&(S=q,x=B.length)}if(S===-1)break;const D=l.substring(0,S);l=l.substring(S+x);const O=D.trim();if(O.startsWith(c)){const B=O.substring(c.length).trim();try{const q=new Response(B,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nn(new p1(q))}catch(q){throw new Error(`exception parsing stream chunk ${B}. ${q}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const r=this.clientOptions.httpOptions.retryOptions;return TM(async()=>{const l=await fetch(e,t);if(l.ok)return l;throw U7.includes(l.status)?new Error(`Retryable HTTP Error: ${l.statusText}`):new jE.AbortError(`Non-retryable exception ${l.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:k7)-1})}getDefaultHeaders(){const e={},t=M7+" "+this.clientOptions.userAgentExtra;return e[R7]=t,e[_1]=t,e[C7]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(I7,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},f=this.getFileName(e),p=ht("upload/v1beta/files",h._url),b=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,h,t==null?void 0:t.httpOptions);return o.upload(e,b,this)}async uploadFileToFileSearchStore(e,t,i){var r;const o=this.clientOptions.uploader,l=await o.stat(t),c=String(l.size),h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(t),b={};i!=null&&dA(i,b);const S=await this.fetchUploadUrl(f,c,h,p,b,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,o,l){var c;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function jw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Jh({message:r,status:t}):new Error(r)}}function F7(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],p=c[h];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[h]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[h]=f)}return c}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V7="mcp_used/unknown";let B7=!1;function pA(n){for(const e of n)if(q7(e)||typeof e=="object"&&"inputSchema"in e)return!0;return B7}function mA(n){var e;const t=(e=n[_1])!==null&&e!==void 0?e:"";n[_1]=(t+` ${V7}`).trimStart()}function q7(n){return n!==null&&typeof n=="object"&&n instanceof Ey}function H7(n){return ya(this,arguments,function*(t,i=100){let r,o=0;for(;o<i;){const l=yield nn(t.listTools({cursor:r}));for(const c of l.tools)yield yield nn(c),o++;if(!l.nextCursor)break;r=l.nextCursor}})}class Ey{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ey(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,h=(t=void 0,va(H7(p))),f;f=await h.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const b=r;l.push(b);const S=b.name;if(o[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);o[S]=p}}catch(b){t={error:b}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),p8(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function z7(n,e,t){const i=new o8;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class G7{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=Y7(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(Z=>{f=Z}),b=e.callbacks,S=function(){f({})},x=this.apiClient,D={onopen:S,onmessage:Z=>{z7(x,b.onmessage,Z)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(Z){}},O=this.webSocketFactory.create(h,$7(l),D);O.connect(),await p;const X={setup:{model:qn(this.apiClient,e.model)}};return O.send(JSON.stringify(X)),new j7(O,this.apiClient)}}class j7{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=pP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=dP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(lf.PLAY)}pause(){this.sendPlaybackControl(lf.PAUSE)}stop(){this.sendPlaybackControl(lf.STOP)}resetContext(){this.sendPlaybackControl(lf.RESET_CONTEXT)}close(){this.conn.close()}}function $7(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Y7(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function J7(n,e,t){const i=new s8;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const o=JSON.parse(r);if(n.isVertexAI()){const l=yP(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class W7{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new G7(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&pA(e.config.tools)&&mA(b);const S=eU(b);if(this.apiClient.isVertexAI()){const L=this.apiClient.getProject(),j=this.apiClient.getLocation(),I=this.apiClient.getApiKey(),k=!!L&&!!j||!!I;this.apiClient.getCustomBaseUrl()&&!k?p=h:(p=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,p))}else{const L=this.apiClient.getApiKey();let j="BidiGenerateContent",I="key";L!=null&&L.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",I="access_token"),p=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${j}?${I}=${L}`}let x=()=>{};const D=new Promise(L=>{x=L}),O=e.callbacks,B=function(){var L;(L=O==null?void 0:O.onopen)===null||L===void 0||L.call(O),x({})},q=this.apiClient,X={onopen:B,onmessage:L=>{J7(q,O.onmessage,L)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(L){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(L){}},Z=this.webSocketFactory.create(p,Z7(S),X);Z.connect(),await D;let W=qn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&W.startsWith("publishers/")){const L=this.apiClient.getProject(),j=this.apiClient.getLocation();L&&j&&(W=`projects/${L}/locations/${j}/`+W)}let ye={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kh.AUDIO]}:e.config.responseModalities=[Kh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],G=[];for(const L of de)if(this.isCallableTool(L)){const j=L;G.push(await j.tool())}else G.push(L);G.length>0&&(e.config.tools=G);const V={model:W,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ye=hP(this.apiClient,V):ye=fP(this.apiClient,V),delete ye.config,Z.send(JSON.stringify(ye)),new Q7(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const X7={turnComplete:!0};class Q7{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=So(t.turns),e.isVertexAI()||(i=i.map(r=>nd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(K7)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},X7),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:gP(e)}:t={realtimeInput:mP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Z7(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function eU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $w=10;function Yw(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(_f(l)){r=!0;break}if(!r)return!0;const o=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function _f(n){return"callTool"in n&&typeof n.callTool=="function"}function tU(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>_f(r)))!==null&&i!==void 0?i:!1}function Kw(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(_f(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function Jw(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nU extends Ol{constructor(e){super(),this.apiClient=e,this.embedContent=async t=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(t);if(t.model.includes("gemini")&&t.model!=="gemini-embedding-001"||t.model.includes("maas")){const r=So(t.contents);if(r.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const o=Object.assign(Object.assign({},t),{content:r[0],embeddingApiType:Wp.EMBED_CONTENT});return await this.embedContentInternal(o)}else{const r=Object.assign(Object.assign({},t),{embeddingApiType:Wp.PREDICT});return await this.embedContentInternal(r)}},this.generateContent=async t=>{var i,r,o,l,c;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!tU(t)||Yw(t.config))return await this.generateContentInternal(h);const f=Kw(t);if(f.length>0){const O=f.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let p,b;const S=So(h.contents),x=(o=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:$w;let D=0;for(;D<x&&(p=await this.generateContentInternal(h),!(!p.functionCalls||p.functionCalls.length===0));){const O=p.candidates[0].content,B=[];for(const q of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(_f(q)){const Z=await q.callTool(p.functionCalls);B.push(...Z)}D++,b={role:"user",parts:B},h.contents=So(h.contents),h.contents.push(O),h.contents.push(b),Jw(h.config)&&(S.push(O),S.push(b))}return Jw(h.config)&&(p.automaticFunctionCallingHistory=S),p},this.generateContentStream=async t=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(t),Yw(t.config)){const b=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(b)}const h=Kw(t);if(h.length>0){const b=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((r=h==null?void 0:h.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=h==null?void 0:h.safetyAttributes:l.push(h);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new mc(Ul.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,o,l,c,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(o=t.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((h=(c=t.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const l=await Promise.all(o.map(async h=>_f(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&pA(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),mA(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var t,i,r;const o=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(_f(l)){const c=l,h=await c.tool();for(const f of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var t,i,r;const o=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:$w;let l=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(f,p,b){return ya(this,arguments,function*(){for(var S,x,D,O,B,q;c<o;){l&&(c++,l=!1);const ye=yield nn(f.processParamsMaybeAddMcpUsage(b)),de=yield nn(f.generateContentStreamInternal(ye)),G=[],V=[];try{for(var X=!0,Z=(x=void 0,va(de)),W;W=yield nn(Z.next()),S=W.done,!S;X=!0){O=W.value,X=!1;const L=O;if(yield yield nn(L),L.candidates&&(!((B=L.candidates[0])===null||B===void 0)&&B.content)){V.push(L.candidates[0].content);for(const j of(q=L.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(c<o&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(j.functionCall.name)){const I=yield nn(p.get(j.functionCall.name).callTool([j.functionCall]));G.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(L){x={error:L}}finally{try{!X&&!S&&(D=Z.return)&&(yield nn(D.call(Z)))}finally{if(x)throw x.error}}if(G.length>0){l=!0;const L=new Sh;L.candidates=[{content:{role:"user",parts:G}}],yield yield nn(L);const j=[];j.push(...V),j.push({role:"user",parts:G});const I=So(b.contents).concat(j);b.contents=I}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Hw(this.apiClient,e);return c=ht("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=Gw(p),S=new Sh;return Object.assign(S,b),S})}else{const f=qw(this.apiClient,e);return c=ht("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=zw(p),S=new Sh;return Object.assign(S,b),S})}}async generateContentStreamInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Hw(this.apiClient,e);return c=ht("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(b){return ya(this,arguments,function*(){var S,x,D,O;try{for(var B=!0,q=va(b),X;X=yield nn(q.next()),S=X.done,!S;B=!0){O=X.value,B=!1;const Z=O,W=Gw(yield nn(Z.json()),e);W.sdkHttpResponse={headers:Z.headers};const ye=new Sh;Object.assign(ye,W),yield yield nn(ye)}}catch(Z){x={error:Z}}finally{try{!B&&!S&&(D=q.return)&&(yield nn(D.call(q)))}finally{if(x)throw x.error}}})})}else{const f=qw(this.apiClient,e);return c=ht("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(b){return ya(this,arguments,function*(){var S,x,D,O;try{for(var B=!0,q=va(b),X;X=yield nn(q.next()),S=X.done,!S;B=!0){O=X.value,B=!1;const Z=O,W=zw(yield nn(Z.json()),e);W.sdkHttpResponse={headers:Z.headers};const ye=new Sh;Object.assign(ye,W),yield yield nn(ye)}}catch(Z){x={error:Z}}finally{try{!B&&!S&&(D=q.return)&&(yield nn(D.call(q)))}finally{if(x)throw x.error}}})})}}async embedContentInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=KP(this.apiClient,e,e),p=g8(e.model)?"{model}:embedContent":"{model}:predict";return c=ht(p,f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(S=>{const x=S;return x.sdkHttpResponse={headers:b.headers},x})),l.then(b=>{const S=WP(b,e),x=new Ew;return Object.assign(x,S),x})}else{const f=YP(this.apiClient,e);return c=ht("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=JP(p),S=new Ew;return Object.assign(S,b),S})}}async generateImagesInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=ak(this.apiClient,e);return c=ht("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=uk(p),S=new Aw;return Object.assign(S,b),S})}else{const f=ok(this.apiClient,e);return c=ht("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=lk(p),S=new Aw;return Object.assign(S,b),S})}}async editImageInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=zP(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const f=GP(h),p=new YM;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=a7(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const f=l7(h),p=new KM;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Hk(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=zk(h),p=new JM;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Jk(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=Wk(h),p=new WM;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=Tk(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>v1(p))}else{const f=Ak(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>y1(p))}}async listInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=kk(this.apiClient,e);return c=ht("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=Ok(p),S=new Tw;return Object.assign(S,b),S})}else{const f=Pk(this.apiClient,e);return c=ht("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=Uk(p),S=new Tw;return Object.assign(S,b),S})}}async update(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=s7(this.apiClient,e);return c=ht("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>v1(p))}else{const f=r7(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>y1(p))}}async delete(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=VP(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=qP(p),S=new Nw;return Object.assign(S,b),S})}else{const f=FP(this.apiClient,e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=BP(p),S=new Nw;return Object.assign(S,b),S})}}async countTokens(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=kP(this.apiClient,e);return c=ht("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=OP(p),S=new Cw;return Object.assign(S,b),S})}else{const f=PP(this.apiClient,e);return c=ht("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=UP(p),S=new Cw;return Object.assign(S,b),S})}}async computeTokens(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=NP(this.apiClient,e);return o=ht("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const f=CP(h),p=new XM;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=mk(this.apiClient,e);return c=ht("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const b=dk(p),S=new Xp;return Object.assign(S,b),S})}else{const f=pk(this.apiClient,e);return c=ht("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const b=hk(p),S=new Xp;return Object.assign(S,b),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iU extends Ol{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=qM(e);return c=ht("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=BM(e);return c=ht("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=DM(e);return o=ht("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rU(n){const e={},t=m(n,["data"]);if(t!=null&&y(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function sU(n){const e={},t=m(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>pU(o))),y(e,["parts"],r)}const i=m(n,["role"]);return i!=null&&y(e,["role"],i),e}function oU(n,e,t){const i={},r=m(e,["expireTime"]);t!==void 0&&r!=null&&y(t,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&y(t,["newSessionExpireTime"],o);const l=m(e,["uses"]);t!==void 0&&l!=null&&y(t,["uses"],l);const c=m(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&y(t,["bidiGenerateContentSetup"],dU(n,c));const h=m(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&y(t,["fieldMask"],h),i}function aU(n,e){const t={},i=m(e,["config"]);return i!=null&&y(t,["config"],oU(n,i,t)),t}function lU(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&y(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function uU(n){const e={},t=m(n,["id"]);t!=null&&y(e,["id"],t);const i=m(n,["args"]);i!=null&&y(e,["args"],i);const r=m(n,["name"]);if(r!=null&&y(e,["name"],r),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cU(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&y(e,["enableWidget"],t),e}function fU(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&y(e,["timeRangeFilter"],t),e}function hU(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(n,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(n,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const h=m(n,["maxOutputTokens"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(n,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const b=m(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Sy(b));const S=m(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=m(n,["systemInstruction"]);e!==void 0&&D!=null&&y(e,["setup","systemInstruction"],sU(jr(D)));const O=m(n,["tools"]);if(e!==void 0&&O!=null){let de=Pf(O);Array.isArray(de)&&(de=de.map(G=>gU(Df(G)))),y(e,["setup","tools"],de)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&y(e,["setup","sessionResumption"],mU(B));const q=m(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&y(e,["setup","inputAudioTranscription"],q);const X=m(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&y(e,["setup","outputAudioTranscription"],X);const Z=m(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&y(e,["setup","realtimeInputConfig"],Z);const W=m(n,["contextWindowCompression"]);e!==void 0&&W!=null&&y(e,["setup","contextWindowCompression"],W);const ye=m(n,["proactivity"]);if(e!==void 0&&ye!=null&&y(e,["setup","proactivity"],ye),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function dU(n,e){const t={},i=m(e,["model"]);i!=null&&y(t,["setup","model"],qn(n,i));const r=m(e,["config"]);return r!=null&&y(t,["config"],hU(r,t)),t}function pU(n){const e={},t=m(n,["mediaResolution"]);t!=null&&y(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(n,["fileData"]);o!=null&&y(e,["fileData"],lU(o));const l=m(n,["functionCall"]);l!=null&&y(e,["functionCall"],uU(l));const c=m(n,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const h=m(n,["inlineData"]);h!=null&&y(e,["inlineData"],rU(h));const f=m(n,["text"]);f!=null&&y(e,["text"],f);const p=m(n,["thought"]);p!=null&&y(e,["thought"],p);const b=m(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=m(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function mU(n){const e={},t=m(n,["handle"]);if(t!=null&&y(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gU(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&y(e,["computerUse"],t);const i=m(n,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const r=m(n,["codeExecution"]);if(r!=null&&y(e,["codeExecution"],r),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=m(n,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(b=>b)),y(e,["functionDeclarations"],p)}const l=m(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],cU(l));const c=m(n,["googleSearch"]);c!=null&&y(e,["googleSearch"],fU(c));const h=m(n,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const f=m(n,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function vU(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=yU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];o&&h.push(o),c.length>0&&h.push(...c),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class _U extends Ol{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=aU(this.apiClient,e);o=ht("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=vU(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bU(n,e){const t={},i=m(n,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),t}function wU(n){const e={},t=m(n,["name"]);t!=null&&y(e,["_url","name"],t);const i=m(n,["config"]);return i!=null&&bU(i,e),e}function xU(n){const e={},t=m(n,["name"]);return t!=null&&y(e,["_url","name"],t),e}function SU(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),t}function EU(n){const e={},t=m(n,["parent"]);t!=null&&y(e,["_url","parent"],t);const i=m(n,["config"]);return i!=null&&SU(i,e),e}function AU(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&y(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TU extends Ol{constructor(e){super(),this.apiClient=e,this.list=async t=>new mc(Ul.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xU(e);return o=ht("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wU(e);r=ht("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=EU(e);return o=ht("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=AU(h),p=new QM;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NU extends Ol{constructor(e,t=new TU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new mc(Ul.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=m7(e);return o=ht("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=v7(e);return o=ht("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=y7(e);r=ht("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=E7(e);return o=ht("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=A7(h),p=new ZM;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T7(e);return o=ht("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=N7(h),p=new e8;return Object.assign(p,f),p})}}async importFile(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=w7(e);return o=ht("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=b7(h),p=new vy;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return gA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const CU=()=>gA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const w1=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $o extends Error{}class Us extends $o{constructor(e,t,i,r){super(`${Us.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new wm({message:i,cause:w1(t)});const o=t;return e===400?new vA(e,o,i,r):e===401?new _A(e,o,i,r):e===403?new bA(e,o,i,r):e===404?new wA(e,o,i,r):e===409?new xA(e,o,i,r):e===422?new SA(e,o,i,r):e===429?new EA(e,o,i,r):e>=500?new AA(e,o,i,r):new Us(e,o,i,r)}}class x1 extends Us{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class wm extends Us{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class yA extends wm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vA extends Us{}class _A extends Us{}class bA extends Us{}class wA extends Us{}class xA extends Us{}class SA extends Us{}class EA extends Us{}class AA extends Us{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IU=/^[a-z][a-z0-9+.-]*:/i,RU=n=>IU.test(n);let S1=n=>(S1=Array.isArray,S1(n));const LU=S1;let MU=LU;const Ww=MU;function DU(n){if(!n)return!0;for(const e in n)return!1;return!0}function PU(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const kU=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $o(`${n} must be an integer`);if(e<0)throw new $o(`${n} must be a positive integer`);return e},UU=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OU=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const of="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const VU=()=>{var n,e,t,i,r;const o=FU();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":of,"X-Stainless-OS":Qw(Deno.build.os),"X-Stainless-Arch":Xw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":of,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":of,"X-Stainless-OS":Qw((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Xw((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const l=BU();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":of,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":of,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function BU(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:e,version:`${r}.${o}.${l}`}}}return null}const Xw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Qw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let up;const qU=()=>up??(up=VU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function zU(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return TA({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function NA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function GU(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jU=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function E0(n,e,t){return CA(),new File(n,e??"unknown_file",t)}function $U(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const YU=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",KU=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&IA(n),JU=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function WU(n,e,t){if(CA(),n=await n,KU(n))return n instanceof File?n:E0([await n.arrayBuffer()],n.name);if(JU(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),E0(await E1(r),e,t)}const i=await E1(n);if(e||(e=$U(n)),!(t!=null&&t.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return E0(i,e,t)}async function E1(n){var e,t,i,r,o;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(IA(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(YU(n))try{for(var c=!0,h=va(n),f;f=await h.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const p=r;l.push(...await E1(p))}}catch(p){t={error:p}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}else{const p=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${p?`; constructor: ${p}`:""}${XU(n)}`)}return l}function XU(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RA{constructor(e){this._client=e}}RA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Zw=Object.freeze(Object.create(null)),QU=(n=LA)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const o=[],l=t.reduce((p,b,S)=>{var x,D,O;/[?#]/.test(b)&&(r=!0);const B=i[S];let q=(r?encodeURIComponent:n)(""+B);return S!==i.length&&(B==null||typeof B=="object"&&B.toString===((O=Object.getPrototypeOf((D=Object.getPrototypeOf((x=B.hasOwnProperty)!==null&&x!==void 0?x:Zw))!==null&&D!==void 0?D:Zw))===null||O===void 0?void 0:O.toString))&&(q=B+"",o.push({start:p.length+b.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(B).slice(8,-1)} is not a valid path parameter`})),p+b+(S===i.length?"":q)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(c))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((p,b)=>p.start-b.start),o.length>0){let p=0;const b=o.reduce((S,x)=>{const D=" ".repeat(x.start-p),O="^".repeat(x.length);return p=x.start+x.length,S+D+O},"");throw new $o(`Path parameters result in path with invalid segments:
${o.map(S=>S.error).join(`
`)}
${l}
${b}`)}return l}),cp=QU(LA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MA extends RA{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,o=Zp(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new $o("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new $o("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(cp`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(cp`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(cp`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const o=t??{},{api_version:l=this._client.apiVersion}=o,c=Zp(o,["api_version"]);return this._client.get(cp`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}MA._key=Object.freeze(["interactions"]);class DA extends MA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZU(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let fp;function Ay(n){let e;return(fp??(e=new globalThis.TextEncoder,fp=e.encode.bind(e)))(n)}let hp;function ex(n){let e;return(hp??(e=new globalThis.TextDecoder,hp=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xm{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ay(e):e;this.buffer=ZU([this.buffer,t]);const i=[];let r;for(;(r=e9(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(ex(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,l=ex(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}xm.NEWLINE_CHARS=new Set([`
`,"\r"]);xm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function e9(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function t9(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const em={off:0,error:200,warn:300,info:400,debug:500},tx=(n,e,t)=>{if(n){if(PU(em,n))return n;ks(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(em))}`)}};function Ih(){}function dp(n,e,t){return!e||em[n]>em[t]?Ih:e[n].bind(e)}const n9={error:Ih,warn:Ih,info:Ih,debug:Ih};let nx=new WeakMap;function ks(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return n9;const r=nx.get(t);if(r&&r[0]===i)return r[1];const o={error:dp("error",t,i),warn:dp("warn",t,i),info:dp("info",t,i),debug:dp("debug",t,i)};return nx.set(t,[i,o]),o}const Wu=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const o=i?ks(i):console;function l(){return ya(this,arguments,function*(){var h,f,p,b;if(r)throw new $o("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,D=va(i9(e,t)),O;O=yield nn(D.next()),h=O.done,!h;x=!0){b=O.value,x=!1;const B=b;if(!S)if(B.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield nn(JSON.parse(B.data))}catch(q){throw o.error("Could not parse message into JSON:",B.data),o.error("From chunk:",B.raw),q}}}catch(B){f={error:B}}finally{try{!x&&!h&&(p=D.return)&&(yield nn(p.call(D)))}finally{if(f)throw f.error}}S=!0}catch(B){if(b1(B))return yield nn(void 0);throw B}finally{S||t.abort()}})}return new uf(l,t,i)}static fromReadableStream(e,t,i){let r=!1;function o(){return ya(this,arguments,function*(){var h,f,p,b;const S=new xm,x=NA(e);try{for(var D=!0,O=va(x),B;B=yield nn(O.next()),h=B.done,!h;D=!0){b=B.value,D=!1;const q=b;for(const X of S.decode(q))yield yield nn(X)}}catch(q){f={error:q}}finally{try{!D&&!h&&(p=O.return)&&(yield nn(p.call(O)))}finally{if(f)throw f.error}}for(const q of S.flush())yield yield nn(q)})}function l(){return ya(this,arguments,function*(){var h,f,p,b;if(r)throw new $o("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,D=va(o()),O;O=yield nn(D.next()),h=O.done,!h;x=!0){b=O.value,x=!1;const B=b;S||B&&(yield yield nn(JSON.parse(B)))}}catch(B){f={error:B}}finally{try{!x&&!h&&(p=D.return)&&(yield nn(p.call(D)))}finally{if(f)throw f.error}}S=!0}catch(B){if(b1(B))return yield nn(void 0);throw B}finally{S||t.abort()}})}return new uf(l,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const l=i.next();e.push(l),t.push(l)}return o.shift()}});return[new uf(()=>r(e),this.controller,this.client),new uf(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return TA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await t.next();if(o)return i.close();const l=Ay(JSON.stringify(r)+`
`);i.enqueue(l)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function i9(n,e){return ya(this,arguments,function*(){var i,r,o,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $o("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $o("Attempted to iterate over a response with no body");const c=new s9,h=new xm,f=NA(n.body);try{for(var p=!0,b=va(r9(f)),S;S=yield nn(b.next()),i=S.done,!i;p=!0){l=S.value,p=!1;const x=l;for(const D of h.decode(x)){const O=c.decode(D);O&&(yield yield nn(O))}}}catch(x){r={error:x}}finally{try{!p&&!i&&(o=b.return)&&(yield nn(o.call(b)))}finally{if(r)throw r.error}}for(const x of h.flush()){const D=c.decode(x);D&&(yield yield nn(D))}})}function r9(n){return ya(this,arguments,function*(){var t,i,r,o;let l=new Uint8Array;try{for(var c=!0,h=va(n),f;f=yield nn(h.next()),t=f.done,!t;c=!0){o=f.value,c=!1;const p=o;if(p==null)continue;const b=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?Ay(p):p;let S=new Uint8Array(l.length+b.length);S.set(l),S.set(b,l.length),l=S;let x;for(;(x=t9(l))!==-1;)yield yield nn(l.slice(0,x)),l=l.slice(x)}}catch(p){i={error:p}}finally{try{!c&&!t&&(r=h.return)&&(yield nn(r.call(h)))}finally{if(i)throw i.error}}l.length>0&&(yield yield nn(l))})}class s9{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=o9(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function o9(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function a9(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,l=await(async()=>{var c;if(e.options.stream)return ks(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):uf.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),f=(c=h==null?void 0:h.split(";")[0])===null||c===void 0?void 0:c.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return ks(n).debug(`[${i}] response parsed`,Wu({retryOfRequestLogID:r,url:t.url,status:t.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ty extends Promise{constructor(e,t,i=a9){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ty(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PA=Symbol("brand.privateNullableHeaders");function*l9(n){if(!n)return;if(PA in n){const{values:i,nulls:r}=n;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Ww(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Ww(i[1])?i[1]:[i[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const Eh=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[o,l]of l9(i)){const c=o.toLowerCase();r.has(c)||(e.delete(o),r.add(c)),l===null?(e.delete(o),t.add(c)):(e.append(o,l),t.delete(c))}}return{[PA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A0=n=>{var e,t,i,r,o,l;if(typeof globalThis.process<"u")return(i=(t=(e=NM)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kA;class Sm{constructor(e){var t,i,r,o,l,c,h,{baseURL:f=A0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(t=A0("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:b="v1beta"}=e,S=Zp(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:p,apiVersion:b},S),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(i=x.timeout)!==null&&i!==void 0?i:Sm.DEFAULT_TIMEOUT,this.logger=(r=x.logger)!==null&&r!==void 0?r:console;const D="warn";this.logLevel=D,this.logLevel=(l=(o=tx(x.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:tx(A0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:D,this.fetchOptions=x.fetchOptions,this.maxRetries=(c=x.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=x.fetch)!==null&&h!==void 0?h:HU(),this.encoder=jU,this._options=x,this.apiKey=p,this.apiVersion=b,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Eh([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Eh([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Eh([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new $o(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${of}`}defaultIdempotencyKey(){return`stainless-node-retry-${CU()}`}makeStatusError(e,t,i,r){return Us.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=RU(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return DU(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Ty(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,o,l;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=h),await this.prepareOptions(c);const{req:f,url:p,timeout:b}=await this.buildRequest(c,{retryCount:h-t});await this.prepareRequest(f,{url:p,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=i===void 0?"":`, retryOf: ${i}`,D=Date.now();if(ks(this).debug(`[${S}] sending request`,Wu({retryOfRequestLogID:i,method:c.method,url:p,options:c,headers:f.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new x1;const O=new AbortController,B=await this.fetchWithTimeout(p,f,b,O).catch(w1),q=Date.now();if(B instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new x1;const W=b1(B)||/timed? ?out/i.test(String(B)+("cause"in B?String(B.cause):""));if(t)return ks(this).info(`[${S}] connection ${W?"timed out":"failed"} - ${Z}`),ks(this).debug(`[${S}] connection ${W?"timed out":"failed"} (${Z})`,Wu({retryOfRequestLogID:i,url:p,durationMs:q-D,message:B.message})),this.retryRequest(c,t,i??S);throw ks(this).info(`[${S}] connection ${W?"timed out":"failed"} - error; no more retries left`),ks(this).debug(`[${S}] connection ${W?"timed out":"failed"} (error; no more retries left)`,Wu({retryOfRequestLogID:i,url:p,durationMs:q-D,message:B.message})),W?new yA:new wm({cause:B})}const X=`[${S}${x}] ${f.method} ${p} ${B.ok?"succeeded":"failed"} with status ${B.status} in ${q-D}ms`;if(!B.ok){const Z=await this.shouldRetry(B);if(t&&Z){const L=`retrying, ${t} attempts remaining`;return await GU(B.body),ks(this).info(`${X} - ${L}`),ks(this).debug(`[${S}] response error (${L})`,Wu({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,durationMs:q-D})),this.retryRequest(c,t,i??S,B.headers)}const W=Z?"error; no more retries left":"error; not retryable";ks(this).info(`${X} - ${W}`);const ye=await B.text().catch(L=>w1(L).message),de=UU(ye),G=de?void 0:ye;throw ks(this).debug(`[${S}] response error (${W})`,Wu({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,message:G,durationMs:Date.now()-D})),this.makeStatusError(B.status,de,G,B.headers)}return ks(this).info(X),ks(this).debug(`[${S}] response start`,Wu({retryOfRequestLogID:i,url:B.url,status:B.status,headers:B.headers,durationMs:q-D})),{response:B,options:c,controller:O,requestLogID:S,retryOfRequestLogID:i,startTime:D}}async fetchWithTimeout(e,t,i,r){const o=t||{},{signal:l,method:c}=o,h=Zp(o,["signal","method"]),f=this._makeAbort(r);l&&l.addEventListener("abort",f,{once:!0});const p=setTimeout(f,i),b=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},b?{duplex:"half"}:{}),{method:"GET"}),h);c&&(S.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var o;let l;const c=r==null?void 0:r.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const h=r==null?void 0:r.get("retry-after");if(h&&!l){const f=parseFloat(h);Number.isNaN(f)?l=Date.parse(h)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,f)}return await OU(l),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,o;const l=Object.assign({},e),{method:c,path:h,query:f,defaultBaseURL:p}=l,b=this.buildURL(h,f,p);"timeout"in l&&kU("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:x}=this.buildBody({options:l}),D=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:D},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:b,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=Eh([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),qU()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(c),c.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Eh([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:zU(e)}:typeof e=="object"&&i.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:i})}}Sm.DEFAULT_TIMEOUT=6e4;class $r extends Sm{constructor(){super(...arguments),this.interactions=new DA(this)}}kA=$r;$r.GeminiNextGenAPIClient=kA;$r.GeminiNextGenAPIClientError=$o;$r.APIError=Us;$r.APIConnectionError=wm;$r.APIConnectionTimeoutError=yA;$r.APIUserAbortError=x1;$r.NotFoundError=wA;$r.ConflictError=xA;$r.RateLimitError=EA;$r.BadRequestError=vA;$r.AuthenticationError=_A;$r.InternalServerError=AA;$r.PermissionDeniedError=bA;$r.UnprocessableEntityError=SA;$r.toFile=WU;$r.Interactions=DA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u9(n,e){const t={},i=m(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function c9(n,e){const t={},i=m(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function f9(n,e){const t={},i=m(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function h9(n,e){const t={},i=m(n,["sdkHttpResponse"]);return i!=null&&y(t,["sdkHttpResponse"],i),t}function d9(n,e,t){const i={};if(m(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(n,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(n,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(m(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(m(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=m(n,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const h=m(n,["learningRate"]);if(e!==void 0&&h!=null&&y(e,["tuningTask","hyperparameters","learningRate"],h),m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(m(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(m(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(m(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(m(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(m(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function p9(n,e,t){const i={};let r=m(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const de=m(n,["validationDataset"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec"],T0(de))}else if(r==="PREFERENCE_TUNING"){const de=m(n,["validationDataset"]);e!==void 0&&de!=null&&y(e,["preferenceOptimizationSpec"],T0(de))}else if(r==="DISTILLATION"){const de=m(n,["validationDataset"]);e!==void 0&&de!=null&&y(e,["distillationSpec"],T0(de))}const o=m(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(n,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const de=m(n,["epochCount"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],de)}else if(c==="PREFERENCE_TUNING"){const de=m(n,["epochCount"]);e!==void 0&&de!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],de)}else if(c==="DISTILLATION"){const de=m(n,["epochCount"]);e!==void 0&&de!=null&&y(e,["distillationSpec","hyperParameters","epochCount"],de)}let h=m(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const de=m(n,["learningRateMultiplier"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],de)}else if(h==="PREFERENCE_TUNING"){const de=m(n,["learningRateMultiplier"]);e!==void 0&&de!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],de)}else if(h==="DISTILLATION"){const de=m(n,["learningRateMultiplier"]);e!==void 0&&de!=null&&y(e,["distillationSpec","hyperParameters","learningRateMultiplier"],de)}let f=m(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const de=m(n,["exportLastCheckpointOnly"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],de)}else if(f==="PREFERENCE_TUNING"){const de=m(n,["exportLastCheckpointOnly"]);e!==void 0&&de!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],de)}else if(f==="DISTILLATION"){const de=m(n,["exportLastCheckpointOnly"]);e!==void 0&&de!=null&&y(e,["distillationSpec","exportLastCheckpointOnly"],de)}let p=m(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const de=m(n,["adapterSize"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],de)}else if(p==="PREFERENCE_TUNING"){const de=m(n,["adapterSize"]);e!==void 0&&de!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],de)}else if(p==="DISTILLATION"){const de=m(n,["adapterSize"]);e!==void 0&&de!=null&&y(e,["distillationSpec","hyperParameters","adapterSize"],de)}let b=m(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const de=m(n,["tuningMode"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","tuningMode"],de)}const S=m(n,["customBaseModel"]);e!==void 0&&S!=null&&y(e,["customBaseModel"],S);let x=m(t,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const de=m(n,["batchSize"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","hyperParameters","batchSize"],de)}let D=m(t,["config","method"]);if(D===void 0&&(D="SUPERVISED_FINE_TUNING"),D==="SUPERVISED_FINE_TUNING"){const de=m(n,["learningRate"]);e!==void 0&&de!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRate"],de)}const O=m(n,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const B=m(n,["beta"]);e!==void 0&&B!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],B);const q=m(n,["baseTeacherModel"]);e!==void 0&&q!=null&&y(e,["distillationSpec","baseTeacherModel"],q);const X=m(n,["tunedTeacherModelSource"]);e!==void 0&&X!=null&&y(e,["distillationSpec","tunedTeacherModelSource"],X);const Z=m(n,["sftLossWeightMultiplier"]);e!==void 0&&Z!=null&&y(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Z);const W=m(n,["outputUri"]);e!==void 0&&W!=null&&y(e,["outputUri"],W);const ye=m(n,["encryptionSpec"]);return e!==void 0&&ye!=null&&y(e,["encryptionSpec"],ye),i}function m9(n,e){const t={},i=m(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const r=m(n,["preTunedModel"]);r!=null&&y(t,["preTunedModel"],r);const o=m(n,["trainingDataset"]);o!=null&&T9(o);const l=m(n,["config"]);return l!=null&&d9(l,t),t}function g9(n,e){const t={},i=m(n,["baseModel"]);i!=null&&y(t,["baseModel"],i);const r=m(n,["preTunedModel"]);r!=null&&y(t,["preTunedModel"],r);const o=m(n,["trainingDataset"]);o!=null&&N9(o,t,e);const l=m(n,["config"]);return l!=null&&p9(l,t,e),t}function y9(n,e){const t={},i=m(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function v9(n,e){const t={},i=m(n,["name"]);return i!=null&&y(t,["_url","name"],i),t}function _9(n,e,t){const i={},r=m(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function b9(n,e,t){const i={},r=m(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function w9(n,e){const t={},i=m(n,["config"]);return i!=null&&_9(i,t),t}function x9(n,e){const t={},i=m(n,["config"]);return i!=null&&b9(i,t),t}function S9(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=m(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>UA(c))),y(t,["tuningJobs"],l)}return t}function E9(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["nextPageToken"]);r!=null&&y(t,["nextPageToken"],r);const o=m(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>A1(c))),y(t,["tuningJobs"],l)}return t}function A9(n,e){const t={},i=m(n,["name"]);i!=null&&y(t,["model"],i);const r=m(n,["name"]);return r!=null&&y(t,["endpoint"],r),t}function T9(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(t,["examples","examples"],r)}return t}function N9(n,e,t){const i={};let r=m(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(n,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(n,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(r==="DISTILLATION"){const l=m(n,["gcsUri"]);e!==void 0&&l!=null&&y(e,["distillationSpec","promptDatasetUri"],l)}let o=m(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(o==="DISTILLATION"){const l=m(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["distillationSpec","promptDatasetUri"],l)}if(m(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function UA(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["name"]);r!=null&&y(t,["name"],r);const o=m(n,["state"]);o!=null&&y(t,["state"],QE(o));const l=m(n,["createTime"]);l!=null&&y(t,["createTime"],l);const c=m(n,["tuningTask","startTime"]);c!=null&&y(t,["startTime"],c);const h=m(n,["tuningTask","completeTime"]);h!=null&&y(t,["endTime"],h);const f=m(n,["updateTime"]);f!=null&&y(t,["updateTime"],f);const p=m(n,["description"]);p!=null&&y(t,["description"],p);const b=m(n,["baseModel"]);b!=null&&y(t,["baseModel"],b);const S=m(n,["_self"]);return S!=null&&y(t,["tunedModel"],A9(S)),t}function A1(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["name"]);r!=null&&y(t,["name"],r);const o=m(n,["state"]);o!=null&&y(t,["state"],QE(o));const l=m(n,["createTime"]);l!=null&&y(t,["createTime"],l);const c=m(n,["startTime"]);c!=null&&y(t,["startTime"],c);const h=m(n,["endTime"]);h!=null&&y(t,["endTime"],h);const f=m(n,["updateTime"]);f!=null&&y(t,["updateTime"],f);const p=m(n,["error"]);p!=null&&y(t,["error"],p);const b=m(n,["description"]);b!=null&&y(t,["description"],b);const S=m(n,["baseModel"]);S!=null&&y(t,["baseModel"],S);const x=m(n,["tunedModel"]);x!=null&&y(t,["tunedModel"],x);const D=m(n,["preTunedModel"]);D!=null&&y(t,["preTunedModel"],D);const O=m(n,["supervisedTuningSpec"]);O!=null&&y(t,["supervisedTuningSpec"],O);const B=m(n,["preferenceOptimizationSpec"]);B!=null&&y(t,["preferenceOptimizationSpec"],B);const q=m(n,["distillationSpec"]);q!=null&&y(t,["distillationSpec"],q);const X=m(n,["tuningDataStats"]);X!=null&&y(t,["tuningDataStats"],X);const Z=m(n,["encryptionSpec"]);Z!=null&&y(t,["encryptionSpec"],Z);const W=m(n,["partnerModelTuningSpec"]);W!=null&&y(t,["partnerModelTuningSpec"],W);const ye=m(n,["customBaseModel"]);ye!=null&&y(t,["customBaseModel"],ye);const de=m(n,["experiment"]);de!=null&&y(t,["experiment"],de);const G=m(n,["labels"]);G!=null&&y(t,["labels"],G);const V=m(n,["outputUri"]);V!=null&&y(t,["outputUri"],V);const L=m(n,["pipelineJob"]);L!=null&&y(t,["pipelineJob"],L);const j=m(n,["serviceAccount"]);j!=null&&y(t,["serviceAccount"],j);const I=m(n,["tunedModelDisplayName"]);I!=null&&y(t,["tunedModelDisplayName"],I);const k=m(n,["veoTuningSpec"]);return k!=null&&y(t,["veoTuningSpec"],k),t}function C9(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&y(t,["sdkHttpResponse"],i);const r=m(n,["name"]);r!=null&&y(t,["name"],r);const o=m(n,["metadata"]);o!=null&&y(t,["metadata"],o);const l=m(n,["done"]);l!=null&&y(t,["done"],l);const c=m(n,["error"]);return c!=null&&y(t,["error"],c),t}function T0(n,e){const t={},i=m(n,["gcsUri"]);i!=null&&y(t,["validationDatasetUri"],i);const r=m(n,["vertexDatasetResource"]);return r!=null&&y(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I9 extends Ol{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mc(Ul.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:h1.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=v9(e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>A1(p))}else{const f=y9(e);return c=ht("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>UA(p))}}async listInternal(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=x9(e);return c=ht("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=E9(p),S=new Iw;return Object.assign(S,b),S})}else{const f=w9(e);return c=ht("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=S9(p),S=new Iw;return Object.assign(S,b),S})}}async cancel(e){var t,i,r,o;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=c9(e);return c=ht("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=h9(p),S=new Rw;return Object.assign(S,b),S})}else{const f=u9(e);return c=ht("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:p.headers},S})),l.then(p=>{const b=f9(p),S=new Rw;return Object.assign(S,b),S})}}async tuneInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=g9(e,e);return o=ht("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>A1(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=m9(e);return o=ht("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>C9(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R9{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const L9=1024*1024*8,M9=3,D9=1e3,P9=2,tm="x-goog-upload-status";async function k9(n,e,t){var i;const r=await OA(n,e,t),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[tm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function U9(n,e,t){var i;const r=await OA(n,e,t),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[tm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=$E(o),c=new _y;return Object.assign(c,l),c}async function OA(n,e,t){var i,r;let o=0,l=0,c=new p1(new Response),h="upload";for(o=n.size;l<o;){const f=Math.min(L9,o-l),p=n.slice(l,l+f);l+f>=o&&(h+=", finalize");let b=0,S=D9;for(;b<M9&&(c=await t.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[tm]));)b++,await F9(S),S=S*P9;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[tm])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function O9(n){return{size:n.size,type:n.type}}function F9(n){return new Promise(e=>setTimeout(e,n))}class V9{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k9(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await U9(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await O9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B9{create(e,t,i){return new q9(e,t,i)}}class q9{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ix="x-goog-api-key";class H9{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(ix)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ix,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z9="gl-node/";class G9{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new $r({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=LM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new H9(this.apiKey);this.apiClient=new O7({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:z9+"web",uploader:new V9,downloader:new R9}),this.models=new nU(this.apiClient),this.live=new W7(this.apiClient,r,new B9),this.batches=new lD(this.apiClient),this.chats=new zD(this.models,this.apiClient),this.caches=new BD(this.apiClient),this.files=new tP(this.apiClient),this.operations=new iU(this.apiClient),this.authTokens=new _U(this.apiClient),this.tunings=new I9(this.apiClient),this.fileSearchStores=new NU(this.apiClient)}}let T1="",FA="gemini-3-pro-preview";const j9=["gemini-3-pro-preview","gemini-3-flash","gemini-2.5-flash"],$9="gemini-2.5-flash-preview-tts",Y9=n=>new Promise(e=>setTimeout(e,n)),N0=3,K9=2e3,C0=n=>{T1=n},I0=n=>{FA=n},VA=()=>{if(!T1)throw new Error("API Key is missing. Please enter your Gemini API Key in the settings.");return new G9({apiKey:T1})},Em=n=>n.replace(/```json\n?|```/g,"").trim(),Am=async(n,e,t=FA)=>{const i=VA(),r=Array.from(new Set([t,...j9]));let o=null;for(const c of r)try{return console.log(`Attempting with model: ${c}`),await i.models.generateContent({model:c,contents:n,config:e})}catch(h){console.warn(`Model ${c} failed:`,h.message),o=h}console.error("All AI models failed.");const l=(o==null?void 0:o.message)||"Unknown error";throw l.includes("429")?new Error("API quota exceeded. Vui lng i vi giy v th li, hoc kim tra quota API ca bn."):new Error(`AI Service Unavailable: ${l}. Vui lng kim tra API Key trong Settings.`)},id=async(n,e="AI operation")=>{var i,r,o;let t=null;for(let l=0;l<N0;l++)try{return await n()}catch(c){if(t=c,(((i=c.message)==null?void 0:i.includes("429"))||((r=c.message)==null?void 0:r.includes("quota"))||((o=c.message)==null?void 0:o.includes("RESOURCE_EXHAUSTED")))&&l<N0-1){const f=K9*Math.pow(2,l);console.log(`[${e}] Rate limited (attempt ${l+1}/${N0}). Retrying in ${f}ms...`),await Y9(f);continue}throw c}throw t},BA=async n=>{var t,i,r,o,l,c;const e=VA();try{const f=(c=(l=(o=(r=(i=(t=(await id(async()=>await e.models.generateContent({model:$9,contents:{parts:[{text:n}]},config:{responseModalities:[Kh.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}}),"TTS")).candidates)==null?void 0:t[0])==null?void 0:i.content)==null?void 0:r.parts)==null?void 0:o[0])==null?void 0:l.inlineData)==null?void 0:c.data;return f||(console.warn("TTS: No audio data in response"),"")}catch(h){return console.error("TTS Error:",h.message),""}},J9=async(n,e="General")=>{const t=`
    Act as an expert IELTS Writing examiner for ${e}. 
    
    **CRITICAL: ALL YOUR FEEDBACK, EXPLANATIONS, AND SUGGESTIONS MUST BE WRITTEN IN ENGLISH. DO NOT WRITE IN VIETNAMESE.**
    
    Analyze the following text provided by a student.
    
    Student Text: "${n}"

    Your task is to evaluate the student's writing based STRICTLY on the following IELTS Writing rubric (Total 10 points):

    **1. Task Response - Max 2.5 points**
    - 2.5 pts: Fully addresses all parts of the task, presents a well-developed response with relevant, extended and supported ideas.
    - 2.0 pts: Addresses all parts of the task, presents a clear position with relevant main ideas, but some may be inadequately developed.
    - 1.5 pts: Addresses the task only partially, position may be unclear, ideas may be irrelevant or not fully developed.
    - 1.0 pt: Barely addresses the task, position is unclear, ideas are largely undeveloped or irrelevant.
    - 0 pts: Does not address the task at all.

    **2. Coherence and Cohesion - Max 2.5 points**
    - 2.5 pts: Logically organizes information and ideas, uses a range of cohesive devices appropriately, clear paragraphing.
    - 2.0 pts: Arranges information coherently, uses cohesive devices but may be mechanical, clear overall progression.
    - 1.5 pts: Presents information with some organization but lacks overall progression, inadequate or overuse of cohesive devices.
    - 1.0 pt: Does not organize ideas logically, limited use of cohesive devices, difficult to follow.
    - 0 pts: No apparent organization.

    **3. Lexical Resource (Vocabulary) - Max 2.5 points**
    - 2.5 pts: Uses a wide range of vocabulary fluently and flexibly, uses uncommon lexical items with style, rare errors in spelling/word formation.
    - 2.0 pts: Uses a sufficient range of vocabulary, attempts less common vocabulary with some inaccuracy, occasional errors do not impede meaning.
    - 1.5 pts: Uses limited range of vocabulary, errors in word choice and spelling may cause difficulty.
    - 1.0 pt: Uses only basic vocabulary, frequent errors in word choice and spelling.
    - 0 pts: Vocabulary is extremely limited.

    **4. Grammatical Range and Accuracy - Max 2.5 points**
    - 2.5 pts: Uses a wide range of structures, majority of sentences are error-free, rare minor errors.
    - 2.0 pts: Uses a variety of complex structures, errors rarely reduce communication, good control of grammar.
    - 1.5 pts: Uses a mix of simple and complex sentences, frequent grammatical errors may cause some difficulty.
    - 1.0 pt: Uses only a limited range of structures, errors are frequent and may cause strain.
    - 0 pts: Cannot use sentence forms except in memorized phrases.

    Your task:
    1. Score strictly based on the rubric above.
    2. Identify grammatical errors, spelling mistakes, and awkward phrasing.
    3. Suggest better vocabulary appropriate for a high-level context.
    4. Provide a rewritten, improved version of the text.
    5. For each criterion, provide detailed feedback in English explaining the score.
    6. For each criterion, provide 2-3 specific suggestions for improvement in English.

    **IMPORTANT: Write ALL feedback, explanations, and suggestions in English.**

    Return the result strictly in this JSON format:
    {
      "score": number, // Total score out of 10
      "scoreBreakdown": {
        "Task Response": number, // Max 2.5
        "Coherence": number, // Max 2.5
        "Vocabulary": number, // Max 2.5
        "Grammar": number // Max 2.5
      },
      "feedback": "string (General encouraging feedback in English)",
      "rubricFeedback": [
        {
          "criterion": "Task Response",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of how well the task requirements were addressed, ideas developed)",
          "suggestions": ["Improvement suggestion 1 in English", "Improvement suggestion 2 in English"]
        },
        {
          "criterion": "Coherence and Cohesion",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of organization, paragraphing, and use of cohesive devices)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Lexical Resource",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of vocabulary range, accuracy, and appropriateness)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Grammatical Range and Accuracy",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of sentence structures and grammatical accuracy)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        }
      ],
      "detailedErrors": [
        {
          "original": "string (the mistake)",
          "correction": "string (the fix)",
          "explanation": "string (Explanation in English why this is wrong)",
          "type": "grammar" | "vocabulary" | "coherence"
        }
      ],
      "improvedVersion": "string (Improved version of the text)"
    }
  `;try{const i=await id(()=>Am(t,{responseMimeType:"application/json"}),"Writing Analysis"),r=Em(i.text||"{}");return JSON.parse(r)}catch(i){throw console.error("Gemini Writing Error:",i.message),i}},rx=async(n,e,t,i,r=!1)=>{const o=n.map(f=>`${f.role==="ai"?"Examiner":"Student"}: ${f.text}`).join(`
`),l=`
    You are a friendly but professional IELTS Speaking Examiner. 
    The topic is: "${e}".
    
    Your goal is to conduct a short interview.
    
    Current Conversation History:
    ${o}
  `;let c="";const h=[];if(!t)i?c=`Start the interview. Introduce yourself briefly (1 sentence) and ask exactly this question: "${i}". Return JSON: { "transcription": "", "response": "Your intro and question" }`:c=`Start the interview. Introduce yourself briefly and ask the first question about "${e}". Return JSON: { "transcription": "", "response": "Your intro and question" }`,h.push({text:c});else{const f="1. Transcribe the user's audio accurately.";r?c=`
          The user just answered the final question via audio.
          ${f}
          2. Generate a brief polite closing statement (e.g. "Thank you for your answers. The test is now finished.").
          Do NOT ask another question.
          
          Return JSON: { "transcription": "exact words spoken by student", "response": "Closing statement" }
        `:i?c=`
          The user just answered via audio. 
          ${f}
          2. Generate a brief, natural response to acknowledge their answer (e.g., "That's interesting," "I see").
          3. Ask exactly this NEXT question: "${i}".
          4. Keep your response concise (under 30 words) so the student talks more.
          
          Return JSON: { "transcription": "exact words spoken by student", "response": "Your reaction + next question" }
        `:c=`
          The user just answered via audio. 
          ${f}
          2. Generate a brief, natural response to acknowledge their answer (e.g., "That's interesting," "I see").
          3. Ask the NEXT follow-up question related to the topic.
          4. Keep your response concise (under 30 words) so the student talks more.
          
          Return JSON: { "transcription": "exact words spoken by student", "response": "Your reaction + next question" }
        `,h.push({inlineData:{mimeType:"audio/webm; codecs=opus",data:t}}),h.push({text:c})}try{const f=await id(()=>Am({parts:h},{systemInstruction:l,responseMimeType:"application/json"}),"Speaking Interaction"),p=Em(f.text||"{}"),b=JSON.parse(p);let S="";return b.response&&(S=await BA(b.response)),{userTranscription:b.transcription||"",aiResponse:b.response,aiAudioBase64:S}}catch(f){throw console.error("Gemini Interaction Error:",f.message),f}},W9=async(n,e,t)=>{const i=n.map(l=>`${l.role.toUpperCase()}: ${l.text}`).join(`
`),r=`
    Act as a Speaking Examiner following IELTS speaking assessment standards. 
    
    **CRITICAL: ALL YOUR FEEDBACK, EXPLANATIONS, AND SUGGESTIONS MUST BE WRITTEN IN ENGLISH. DO NOT WRITE IN VIETNAMESE.**
    
    Topic: "${e}".
    
    Here is the full transcript of the interview with the student:
    
    ${i}

    Your task is to evaluate the student's performance based STRICTLY on the following IELTS-style rubric (Total 10 points):

    **1. Fluency and Coherence - Max 2.5 points**
    - 2.5 pts: Speaks fluently with steady pace, minimal hesitation, logical organization of ideas, uses cohesive devices naturally.
    - 2.0 pts: Generally fluent but occasional hesitation, ideas mostly organized logically.
    - 1.5 pts: Noticeable hesitation, some repetition, ideas sometimes lack clear connection.
    - 1.0 pt: Frequent pauses, fragmented speech, difficulty maintaining coherent response.
    - 0 pts: Unable to produce connected speech.

    **2. Lexical Resource (Vocabulary) - Max 2.5 points**
    - 2.5 pts: Wide range of vocabulary, uses collocations and idiomatic expressions naturally, precise word choice.
    - 2.0 pts: Good vocabulary range, generally appropriate word choice, some collocations used correctly.
    - 1.5 pts: Adequate vocabulary but limited range, some word choice errors, basic collocations.
    - 1.0 pt: Limited vocabulary, frequent errors affecting meaning, relies on basic words.
    - 0 pts: Extremely limited vocabulary, unable to convey meaning.

    **3. Grammatical Range and Accuracy - Max 2.5 points**
    - 2.5 pts: Uses a variety of complex structures accurately, errors are rare and minor.
    - 2.0 pts: Mix of simple and complex sentences, most structures are accurate.
    - 1.5 pts: Attempts complex structures but with frequent errors, relies mainly on simple sentences.
    - 1.0 pt: Limited range of structures, many grammatical errors affecting communication.
    - 0 pts: Severe grammatical errors, communication greatly impaired.

    **4. Pronunciation - Max 2.5 points**
    - 2.5 pts: Clear pronunciation, natural intonation and stress patterns, easy to understand throughout.
    - 2.0 pts: Generally clear, some minor pronunciation issues, mostly understandable.
    - 1.5 pts: Some pronunciation errors, occasional strain on listener, but still understandable.
    - 1.0 pt: Frequent pronunciation errors, difficult to understand at times.
    - 0 pts: Very poor pronunciation, mostly unintelligible.

    Analyze the transcript (and audio context if available) to determine the score.
    
    **IMPORTANT: Write ALL feedback, explanations, and suggestions in English.** For each criterion, you MUST provide:
    1. A specific score based on the rubric
    2. Detailed feedback explaining WHY the student received that score (in English)
    3. 2-3 specific suggestions for improvement (in English)

    Identify any specific errors in pronunciation, grammar, or vocabulary from the text provided.

    Return the result strictly in this JSON format:
    {
      "transcription": "Full session transcript...",
      "score": number, // Total score out of 10
      "scoreBreakdown": {
         "Fluency": number, // Max 2.5
         "Vocabulary": number, // Max 2.5
         "Grammar": number, // Max 2.5
         "Pronunciation": number // Max 2.5
      },
      "feedback": "string (Overall feedback in English)",
      "rubricFeedback": [
        {
          "criterion": "Fluency and Coherence",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of fluency, pace, hesitation, and logical organization)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Lexical Resource",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of vocabulary range, collocations, and word choice)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Grammatical Range and Accuracy",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of sentence structures and grammatical accuracy)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Pronunciation",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of pronunciation, intonation, and stress)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        }
      ],
      "detailedErrors": [
        {
          "original": "string (error)",
          "correction": "string (correction)",
          "explanation": "string (Explanation in English)",
          "type": "pronunciation" | "grammar" | "vocabulary"
        }
      ]
    }
  `,o={parts:[]};t&&o.parts.push({inlineData:{mimeType:"audio/webm; codecs=opus",data:t}}),o.parts.push({text:r});try{const l=await id(()=>Am(o,{responseMimeType:"application/json"}),"Speaking Grading"),c=Em(l.text||"{}");return JSON.parse(c)}catch(l){throw console.error("Gemini Grading Error:",l.message),l}},X9=async(n,e)=>{const t=`
    Act as a strict pronunciation coach following IELTS speaking assessment standards. 
    
    **CRITICAL: ALL YOUR FEEDBACK, EXPLANATIONS, AND SUGGESTIONS MUST BE WRITTEN IN ENGLISH. DO NOT WRITE IN VIETNAMESE.**
    
    The student is trying to read/shadow this specific sentence: "${e}".
    Analyze the attached audio recording based on the following IELTS-style rubric (Total 10 points).

    **RUBRIC CRITERIA:**

    **1. Fluency and Coherence - Max 2.5 points**
    - 2.5 pts: Speaks fluently with steady pace, smooth flow, good linking sounds, no unnecessary pauses.
    - 2.0 pts: Generally fluent with minor hesitation, mostly smooth delivery.
    - 1.5 pts: Noticeable hesitation, some choppy delivery, word-by-word reading.
    - 1.0 pt: Frequent pauses, fragmented speech, poor rhythm.
    - 0 pts: Unable to produce connected speech.

    **2. Lexical Resource (Vocabulary Pronunciation) - Max 2.5 points**
    - 2.5 pts: All words pronounced correctly, including difficult vocabulary and multi-syllable words.
    - 2.0 pts: Most words correct, minor errors on difficult words.
    - 1.5 pts: Some vocabulary mispronounced, but meaning still clear.
    - 1.0 pt: Many words mispronounced, affecting comprehension.
    - 0 pts: Most words unintelligible.

    **3. Grammatical Accuracy (Sentence Flow) - Max 2.5 points**
    - 2.5 pts: Reads with proper sentence structure awareness, correct pausing at punctuation, maintains sentence meaning.
    - 2.0 pts: Good sentence flow, mostly appropriate pausing.
    - 1.5 pts: Some awkward pauses breaking sentence structure.
    - 1.0 pt: Poor sentence flow, pauses in wrong places.
    - 0 pts: No awareness of sentence structure.

    **4. Pronunciation (Individual Sounds & Intonation) - Max 2.5 points**
    - 2.5 pts: Clear individual sounds, correct ending consonants, natural intonation, proper word stress.
    - 2.0 pts: Generally clear, minor sound errors, mostly natural intonation.
    - 1.5 pts: Some sound errors (th, s, ed endings), flat intonation.
    - 1.0 pt: Many sound errors, monotone delivery.
    - 0 pts: Very poor pronunciation, unintelligible.

    Your task:
    1. Transcribe exactly what the student said.
    2. Score strictly based on the rubric above.
    3. Identify words that were mispronounced, skipped, or added.
    4. For each criterion, provide detailed feedback in English explaining the score.
    5. For each criterion, provide 2-3 specific suggestions for improvement in English.

    **IMPORTANT: Write ALL feedback, explanations, and suggestions in English.**

    Return the result strictly in this JSON format:
    {
      "transcription": "string",
      "score": number (Sum of criteria points, 0-10),
      "scoreBreakdown": {
         "Fluency": number, // Max 2.5
         "Vocabulary": number, // Max 2.5
         "Grammar": number, // Max 2.5
         "Pronunciation": number // Max 2.5
      },
      "feedback": "string (Overall comment in English)",
      "rubricFeedback": [
        {
          "criterion": "Fluency and Coherence",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of fluency, pace, and flow)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Lexical Resource",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of vocabulary pronunciation)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Grammatical Accuracy",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of sentence flow and structure)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        },
        {
          "criterion": "Pronunciation",
          "score": number,
          "maxScore": 2.5,
          "feedback": "string (Detailed assessment of individual sounds, intonation, and stress)",
          "suggestions": ["Suggestion in English", "Suggestion in English"]
        }
      ],
      "detailedErrors": [
        {
          "original": "string (the word they struggled with)",
          "correction": "string (IPA or phonetic spelling)",
          "explanation": "string (Specific advice in English on how to pronounce this word)",
          "type": "pronunciation"
        }
      ]
    }
  `;try{const i=await id(()=>Am({parts:[{inlineData:{mimeType:"audio/webm; codecs=opus",data:n}},{text:t}]},{responseMimeType:"application/json"}),"Pronunciation Analysis"),r=Em(i.text||"{}");return JSON.parse(r)}catch(i){throw console.error("Gemini Pronunciation Error:",i.message),i}},Q9=[{id:1,title:"Generation Gap and Independent Life",description:"Discuss the differences between generations in your family and how to live independently.",icon:"fa-users",color:"from-blue-500 to-cyan-500",shadowingSentences:["Teenagers want freedom, but parents want control.","Living independently helps young people grow up.","Parents worry, but teens want to make their own decisions.","The generation gap causes arguments at home.","Understanding each other can close the generation gap."],freeSpeakingQuestions:[{question:"What problems do teenagers often have with their parents? Why?",hint:"rules, clothes, friends, going out late"},{question:"Why do many teenagers want to live more independently?",hint:"freedom, decisions, responsibility"},{question:"In your opinion, why do parents worry so much about their children?",hint:"safety, future, school performance"},{question:"How can parents and teenagers reduce the generation gap?",hint:"communication, listening, understanding"},{question:"Do you think teenagers today are more independent than in the past? Why or why not?",hint:"Compare with previous generations & express personal opinion"}]},{id:2,title:"Vietnam and ASEAN",description:"Explain the role of Vietnam within the ASEAN community and the benefits of integration.",icon:"fa-flag",color:"from-red-500 to-pink-500",shadowingSentences:["Vietnam is an active member of ASEAN.","ASEAN countries work together for peace and development.","Vietnam attracts many tourists with its rich culture.","Cultural diversity makes ASEAN stronger.","Cooperation helps ASEAN countries grow."],freeSpeakingQuestions:[{question:"What do you like most about Vietnam compared with other ASEAN countries? Why?",hint:"culture, food, landscapes, cost of living"},{question:"If you could visit one ASEAN country, which one would you choose and what would you like to see there?",hint:"Singapore, Thailand, famous landmarks, natural beauty"},{question:"How does being a member of ASEAN benefit Vietnam?",hint:"economy, education, culture, tourism"},{question:"In what ways can students help promote Vietnamese culture to people from other ASEAN countries?",hint:"social media, cultural exchanges, volunteering"},{question:"Do you think cooperation among ASEAN countries is important in the future? Why or why not?",hint:"solidarity, solving common problems, economic strength"}]},{id:3,title:"Global Warming and Ecological Systems",description:"What are the main causes of global warming, and how does it affect our ecosystem?",icon:"fa-globe-asia",color:"from-green-500 to-emerald-600",shadowingSentences:["Global warming is becoming a serious problem that affects many countries around the world.","Human activities such as cutting down trees and using fossil fuels cause climate change.","As the Earth gets warmer, extreme weather events happen more frequently.","Reducing pollution is an important way to protect the environment and human health.","If people do not take action now, global warming will have more serious effects in the future."]},{id:4,title:"World Heritage Site",description:"Describe a World Heritage Site you know and why it is important to preserve it.",icon:"fa-landmark",color:"from-yellow-500 to-orange-500",shadowingSentences:["World heritage sites are important because they show the history and culture of different countries.","Hoi An Ancient Town attracts many visitors thanks to its well-preserved buildings and traditions.","If world heritage sites are not protected carefully, they may be damaged or destroyed.","Many heritage sites face serious threats from tourism and environmental pollution.","Protecting world heritage sites is a shared responsibility of governments and local communities."]},{id:5,title:"Cities and Education in the Future",description:"Predict changes in city life and education systems.",icon:"fa-city",color:"from-indigo-500 to-purple-600",shadowingSentences:["Smart cities will use technology to improve the quality of life.","Online learning allows students to study from anywhere in the world.","In the future, robots might replace human teachers in some subjects.","Traffic jams will be solved by self-driving cars and better public transport.","Education will focus more on critical thinking than memorization."],freeSpeakingQuestions:[{question:"How do you think cities will change in the next 50 years?",hint:"technology, environment, transport, smart buildings"},{question:"What are the advantages and disadvantages of online learning?",hint:"flexibility, cost vs lack of interaction, motivation"},{question:"Do you think robots can replace teachers in the future? Why?",hint:"emotional support, creativity, information delivery"},{question:"What skills will be most important for students in the future?",hint:"IT skills, problem solving, adaptability"},{question:"Would you prefer to live in a smart city or the countryside? Why?",hint:"convenience vs nature, pollution vs peace"}]},{id:6,title:"Social Issues",description:"Discuss common social problems and possible solutions.",icon:"fa-people-arrows",color:"from-gray-500 to-slate-600",shadowingSentences:["Poverty is a major social issue in many developing countries.","Bullying at school can have long-lasting effects on children.","Social media can sometimes cause depression and anxiety among teenagers.","Peer pressure often forces young people to do things they dislike.","We need to work together to solve problems like crime and inequality."],freeSpeakingQuestions:[{question:"What do you think is the biggest social issue in your country today?",hint:"traffic, pollution, poverty, crime"},{question:"How can we reduce bullying in schools?",hint:"strict rules, education, support systems"},{question:"Why do some teenagers fall into social evils?",hint:"family background, bad friends, lack of awareness"},{question:"What role does social media play in modern social issues?",hint:"cyberbullying, fake news, unrealistic standards"},{question:"How can students help the community to solve social problems?",hint:"volunteering, raising awareness, helping friends"}]},{id:7,title:"Healthy Lifestyle",description:"Explore habits for maintaining physical and mental health.",icon:"fa-heart-pulse",color:"from-teal-400 to-green-500",shadowingSentences:["A balanced diet is essential for maintaining good health.","Regular exercise helps to reduce stress and improve mood.","Getting enough sleep is just as important as eating healthy food.","Fast food contains too much fat and sugar, which is bad for the heart.","Mental health should be taken care of alongside physical health."],freeSpeakingQuestions:[{question:"What do you do to stay healthy everyday?",hint:"sports, diet, sleep habits"},{question:"Why is breakfast considered the most important meal of the day?",hint:"energy for the day, focus, metabolism"},{question:"Do you think young people today live a healthy lifestyle? Why?",hint:"technology addiction, fast food, lack of exercise"},{question:"How does stress affect your health?",hint:"sleep problems, mood swings, illness"},{question:"What advice would you give to someone who wants to lose weight?",hint:"exercise regularly, eat less sugar, drink water"}]},{id:8,title:"Health and Life Expectancy",description:"Factors affecting longevity and healthcare challenges.",icon:"fa-user-doctor",color:"from-sky-500 to-blue-700",shadowingSentences:["Advances in medicine have helped people live longer than before.","Regular check-ups can prevent serious diseases later in life.","An aging population brings both challenges and opportunities.","A clean environment contributes significantly to higher life expectancy.","Vaccination has saved millions of lives around the world."],freeSpeakingQuestions:[{question:"Why has life expectancy increased in recent years?",hint:"better medicine, nutrition, hygiene"},{question:"What are the challenges of an aging population?",hint:"healthcare costs, labor shortage, pension"},{question:"Do you think living longer is always better? Why?",hint:"quality of life vs quantity, health issues"},{question:"How does pollution affect people's life expectancy?",hint:"lung diseases, cancer, immune system"},{question:"What can the government do to improve public health?",hint:"build hospitals, health insurance, green spaces"}]}],R0=(n,e=24e3)=>{const t=atob(n),i=t.length,r=new Uint8Array(i);for(let f=0;f<i;f++)r[f]=t.charCodeAt(f);const o=new ArrayBuffer(44),l=new DataView(o),c=(f,p,b)=>{for(let S=0;S<b.length;S++)f.setUint8(p+S,b.charCodeAt(S))};c(l,0,"RIFF"),l.setUint32(4,36+i,!0),c(l,8,"WAVE"),c(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,1,!0),l.setUint32(24,e,!0),l.setUint32(28,e*2,!0),l.setUint16(32,2,!0),l.setUint16(34,16,!0),c(l,36,"data"),l.setUint32(40,i,!0);const h=new Blob([o,r],{type:"audio/wav"});return URL.createObjectURL(h)},Z9=({onComplete:n,studentName:e})=>{const[t,i]=Nt.useState(null),[r,o]=Nt.useState("MENU"),[l,c]=Nt.useState({part1:0,part2:0}),[h,f]=Nt.useState({part1:!1,part2:!1}),[p,b]=Nt.useState(!1),S=Nt.useRef({part1:0,part2:0}),[x,D]=Nt.useState(0),[O,B]=Nt.useState(!1),[q,X]=Nt.useState([]),[Z,W]=Nt.useState(0),ye=5,de=Nt.useRef(null),[G,V]=Nt.useState(!1),[L,j]=Nt.useState(null),[I,k]=Nt.useState([]),[F,ce]=Nt.useState(null),[Te,le]=Nt.useState(!1),[ue,ve]=Nt.useState(null),[we,We]=Nt.useState(null),[ne,U]=Nt.useState(0),J=Nt.useRef(null),[ie,fe]=Nt.useState("");Nt.useEffect(()=>()=>{F&&URL.revokeObjectURL(F),J.current&&window.clearInterval(J.current)},[F]),Nt.useEffect(()=>{var qe;(qe=de.current)==null||qe.scrollIntoView({behavior:"smooth"})},[q]),Nt.useEffect(()=>{S.current=l},[l]),Nt.useEffect(()=>{if(r==="SUMMARY"&&!p){const qe=S.current.part1+S.current.part2;n(qe),b(!0)}},[r,p,n]),Nt.useEffect(()=>{r==="FREE_SPEAKING"&&t&&q.length===0&&Ee()},[r,t]);const me=()=>{ve(null),ce(null),k([]),U(0),fe(""),G&&L&&(L.stop(),V(!1)),J.current&&window.clearInterval(J.current)},Ee=async()=>{le(!0);try{const qe=t!=null&&t.freeSpeakingQuestions?t.freeSpeakingQuestions[0].question:void 0,{aiResponse:He,aiAudioBase64:pe}=await rx([],t.title,void 0,qe);let Ve;pe&&(Ve=R0(pe,24e3)),X([{role:"ai",text:He,audioUrl:Ve}])}catch(qe){console.error(qe),fe("Could not connect to AI examiner.")}finally{le(!1)}},Pe=async()=>{r!=="FREE_SPEAKING"?me():(ce(null),k([]),U(0),J.current&&window.clearInterval(J.current));try{const qe=await navigator.mediaDevices.getUserMedia({audio:!0}),He=new MediaRecorder(qe,{mimeType:"audio/webm"}),pe=[];He.ondataavailable=Ve=>pe.push(Ve.data),He.onstop=()=>{const Ve=new Blob(pe,{type:"audio/webm"}),Ct=URL.createObjectURL(Ve);ce(Ct),k(pe),qe.getTracks().forEach(ft=>ft.stop())},He.start(),j(He),V(!0),J.current=window.setInterval(()=>{U(Ve=>Ve+1)},1e3)}catch(qe){console.error(qe),fe("Cannot access microphone. Please grant permission in browser settings.")}},Me=()=>{L&&L.state!=="inactive"&&(L.stop(),V(!1),J.current&&window.clearInterval(J.current))},$e=async()=>{if(!(O||!t)){B(!0);try{const qe=t.shadowingSentences[x],He=await BA(qe);if(He){const pe=R0(He,24e3),Ve=new Audio(pe);Ve.onended=()=>{B(!1),URL.revokeObjectURL(pe)},Ve.play()}else B(!1)}catch(qe){console.error("Error playing sample:",qe),B(!1)}}},it=qe=>new Promise((He,pe)=>{const Ve=new FileReader;Ve.onloadend=()=>{const ft=Ve.result.split(",")[1];He(ft)},Ve.onerror=pe,Ve.readAsDataURL(qe)}),lt=async()=>{if(!(I.length===0||!t)){le(!0);try{const qe=new Blob(I,{type:"audio/webm"}),He=await it(qe),pe=t.shadowingSentences[x],Ve=await X9(He,pe);ve(Ve)}catch(qe){alert(qe.message)}finally{le(!1)}}},ut=()=>{if(!ue)return;const qe=ue.score/10*5;c(He=>({...He,part1:qe})),f(He=>({...He,part1:!0})),o("MENU"),ve(null)},pt=async()=>{if(I.length===0||!t)return;le(!0);const qe=new Blob(I,{type:"audio/webm"}),He=await it(qe),pe=Z+1,Ve=pe>=ye;let Ct;!Ve&&t.freeSpeakingQuestions&&t.freeSpeakingQuestions[pe]&&(Ct=t.freeSpeakingQuestions[pe].question);try{const{userTranscription:ft,aiResponse:xt,aiAudioBase64:Lt}=await rx(q,t.title,He,Ct,Ve);let mt;Lt&&(mt=R0(Lt,24e3));const $t=[...q,{role:"user",text:ft,audioUrl:F||void 0},{role:"ai",text:xt,audioUrl:mt}];if(X($t),W(bt=>bt+1),ce(null),k([]),U(0),Ve){const bt=await W9($t,t.title,He);We(bt);const ti=bt.score/10*5;c(Wt=>({...Wt,part2:ti})),f(Wt=>({...Wt,part2:!0})),o("SUMMARY")}}catch(ft){alert(ft.message)}finally{le(!1)}},re=()=>{if(!t)return;const qe=l.part1+l.part2,He=document.createElement("canvas");He.width=1e3,He.height=700;const pe=He.getContext("2d");if(!pe)return;pe.fillStyle="#FFFFFF",pe.fillRect(0,0,He.width,He.height),pe.lineWidth=15,pe.strokeStyle="#DAA520",pe.strokeRect(30,30,He.width-60,He.height-60),pe.lineWidth=3,pe.strokeStyle="#000000",pe.strokeRect(50,50,He.width-100,He.height-100),pe.fillStyle="#1a365d",pe.font="bold 50px serif",pe.textAlign="center",pe.fillText("CERTIFICATE",He.width/2,140),pe.font="28px serif",pe.fillStyle="#DAA520",pe.fillText("OF SPEAKING MASTERY",He.width/2,180),pe.font="italic 24px sans-serif",pe.fillStyle="#555555",pe.fillText("This certificate is proudly presented to",He.width/2,250),pe.font="bold italic 60px serif",pe.fillStyle="#2563EB",pe.fillText(e,He.width/2,330),pe.beginPath(),pe.moveTo(250,350),pe.lineTo(750,350),pe.strokeStyle="#DAA520",pe.lineWidth=2,pe.stroke(),pe.font="22px sans-serif",pe.fillStyle="#444444",pe.fillText("For outstanding performance in",He.width/2,400),pe.font="bold 24px sans-serif",pe.fillText(`Unit: ${t.title}`,He.width/2,440),pe.fillStyle="#16a34a",pe.font="bold 40px sans-serif",pe.fillText(`Total Score: ${qe.toFixed(1)}/10`,He.width/2,500);const Ve=new Date().toLocaleDateString("en-GB");pe.font="20px sans-serif",pe.fillStyle="#000000",pe.textAlign="left",pe.fillText(`Date: ${Ve}`,100,600),pe.textAlign="right",pe.fillText("LinguaAI Director",900,600),pe.font="italic 30px serif",pe.fillText("Gemini AI",900,570);const Ct=document.createElement("a");Ct.download=`Speaking-Certificate-${e}-${t.id}.png`,Ct.href=He.toDataURL("image/png"),Ct.click()},ke=()=>{if(!t||!we)return;const qe=l.part1+l.part2,He=new Date().toLocaleString();let pe=`================================================
SPEAKING PRACTICE FEEDBACK - LINGUAAI
================================================

STUDENT: ${e}
DATE: ${He}
UNIT: ${t.id} - ${t.title}

------------------------------------------------
1. OVERALL SCORE: ${qe.toFixed(1)} / 10.0
------------------------------------------------
- Part 1 (Shadowing): ${l.part1.toFixed(1)} / 5.0
- Part 2 (Free Speaking): ${l.part2.toFixed(1)} / 5.0

`;we.scoreBreakdown&&(pe+=`------------------------------------------------
2. SCORE BREAKDOWN
------------------------------------------------
`,Object.entries(we.scoreBreakdown).forEach(([xt,Lt])=>{pe+=`- ${xt}: ${Lt} / 10
`}),pe+=`
`),pe+=`------------------------------------------------
3. GENERAL FEEDBACK
------------------------------------------------
${we.feedback||"No feedback available."}

------------------------------------------------
4. RUBRIC BREAKDOWN
------------------------------------------------
`,we.rubricFeedback&&we.rubricFeedback.forEach(xt=>{pe+=`[${xt.criterion}]: ${xt.score}/${xt.maxScore}
Feedback: ${xt.feedback}
`,xt.suggestions&&xt.suggestions.length>0&&(pe+=`Suggestions:
`,xt.suggestions.forEach((Lt,mt)=>{pe+=`  ${mt+1}. ${Lt}
`})),pe+=`
`}),we.detailedErrors&&we.detailedErrors.length>0&&(pe+=`------------------------------------------------
5. DETAILED ERRORS & CORRECTIONS
------------------------------------------------
`,we.detailedErrors.forEach((xt,Lt)=>{pe+=`${Lt+1}. TYPE: ${xt.type.toUpperCase()}
   Original: "${xt.original}"
   Correction: "${xt.correction}"
   Explanation: ${xt.explanation}

`})),we.transcription&&(pe+=`
------------------------------------------------
6. CONVERSATION TRANSCRIPT
------------------------------------------------
${we.transcription}
`),pe+=`
================================================
DEVELOPED BY TEACHER VO THI THU HA
================================================`;const Ve=new Blob([pe],{type:"text/plain"}),Ct=URL.createObjectURL(Ve),ft=document.createElement("a");ft.download=`Speaking-Feedback-${e}-${t.id.toString().replace(/\s+/g,"_")}.txt`,ft.href=Ct,ft.click(),URL.revokeObjectURL(Ct)},st=()=>{if(!t||!we)return;const qe=l.part1+l.part2,He=new Date().toLocaleString(),pe=new Dt;let Ve=20;pe.setFillColor(30,58,138),pe.rect(0,0,210,40,"F"),pe.setTextColor(255,255,255),pe.setFontSize(22),pe.text("SPEAKING PRACTICE FEEDBACK",105,20,{align:"center"}),pe.setFontSize(16),pe.text("LINGUAAI - SMART LEARNING PLATFORM",105,30,{align:"center"}),Ve=50,pe.setTextColor(0,0,0),pe.setFontSize(12),pe.setFont("helvetica","bold"),pe.text(`STUDENT: ${e}`,20,Ve),pe.text(`DATE: ${He}`,120,Ve),Ve+=10,pe.text(`UNIT: ${t.id} - ${t.title}`,20,Ve),Ve+=15,pe.setDrawColor(200,200,200),pe.line(20,Ve,190,Ve),Ve+=10,pe.setFontSize(14),pe.text("1. OVERALL SCORE",20,Ve),Ve+=10,pe.setFontSize(24),pe.setTextColor(37,99,235),pe.text(`${qe.toFixed(1)} / 10.0`,20,Ve),pe.setTextColor(0,0,0),pe.setFontSize(11),pe.setFont("helvetica","normal"),Ve+=10,pe.text(`- Part 1 (Shadowing): ${l.part1.toFixed(1)} / 5.0`,25,Ve),Ve+=7,pe.text(`- Part 2 (Free Speaking): ${l.part2.toFixed(1)} / 5.0`,25,Ve),Ve+=15,we.scoreBreakdown&&(pe.setFont("helvetica","bold"),pe.setFontSize(14),pe.text("2. SCORE BREAKDOWN",20,Ve),Ve+=10,pe.setFont("helvetica","normal"),pe.setFontSize(11),Object.entries(we.scoreBreakdown).forEach(([ft,xt])=>{pe.text(`- ${ft}: ${xt} / 10`,25,Ve),Ve+=7}),Ve+=5),Ve>250&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.setFontSize(14),pe.text("3. GENERAL FEEDBACK",20,Ve),Ve+=10,pe.setFont("helvetica","normal"),pe.setFontSize(11);const Ct=pe.splitTextToSize(we.feedback||"No feedback available.",170);if(pe.text(Ct,20,Ve),Ve+=Ct.length*5+10,we.rubricFeedback&&(Ve>230&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.setFontSize(14),pe.text("4. RUBRIC BREAKDOWN",20,Ve),Ve+=10,pe.setFontSize(10),we.rubricFeedback.forEach(ft=>{Ve>250&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.text(`[${ft.criterion}]: ${ft.score}/${ft.maxScore}`,20,Ve),Ve+=6,pe.setFont("helvetica","normal");const xt=pe.splitTextToSize(`Feedback: ${ft.feedback}`,160);pe.text(xt,25,Ve),Ve+=xt.length*5+4,ft.suggestions&&ft.suggestions.length>0&&(pe.setFont("helvetica","italic"),pe.text("Suggestions:",25,Ve),Ve+=5,ft.suggestions.forEach((Lt,mt)=>{const $t=pe.splitTextToSize(`${mt+1}. ${Lt}`,150);pe.text($t,30,Ve),Ve+=$t.length*5}),Ve+=5),pe.setFontSize(10)}),Ve+=10),we.detailedErrors&&we.detailedErrors.length>0&&(Ve>230&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.setFontSize(14),pe.text("5. DETAILED ERRORS & CORRECTIONS",20,Ve),Ve+=10,pe.setFontSize(10),we.detailedErrors.forEach((ft,xt)=>{Ve>250&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.text(`${xt+1}. TYPE: ${ft.type.toUpperCase()}`,20,Ve),Ve+=6,pe.setFont("helvetica","normal"),pe.text(`Original: "${ft.original}"`,25,Ve),Ve+=5,pe.setTextColor(22,101,52),pe.text(`Correction: "${ft.correction}"`,25,Ve),pe.setTextColor(0,0,0),Ve+=5;const Lt=pe.splitTextToSize(`Explanation: ${ft.explanation}`,160);pe.text(Lt,25,Ve),Ve+=Lt.length*5+5}),Ve+=10),we.transcription){Ve>230&&(pe.addPage(),Ve=20),pe.setFont("helvetica","bold"),pe.setFontSize(14),pe.text("6. CONVERSATION TRANSCRIPT",20,Ve),Ve+=10,pe.setFont("helvetica","normal"),pe.setFontSize(9);const ft=pe.splitTextToSize(we.transcription,170);pe.text(ft,20,Ve),Ve+=ft.length*5+20}Ve>260?(pe.addPage(),Ve=20):Ve=270,pe.setFont("helvetica","bold"),pe.setFontSize(10),pe.setDrawColor(30,58,138),pe.line(20,Ve,190,Ve),Ve+=10,pe.text("DEVELOPED BY TEACHER VO THI THU HA",105,Ve,{align:"center"}),pe.save(`Speaking-Feedback-${e}-${t.id.toString().replace(/\s+/g,"_")}.pdf`)},he=qe=>{const He=Math.floor(qe/60),pe=qe%60;return`${He}:${pe.toString().padStart(2,"0")}`},_e=()=>{i(null),o("MENU"),me(),X([]),W(0),c({part1:0,part2:0}),f({part1:!1,part2:!1}),b(!1)},at=()=>{o("MENU"),me()};if(!t)return T.jsxs("div",{className:"space-y-8 animate-fade-in",children:[T.jsx("h2",{className:"text-3xl font-extrabold text-white mb-6",children:"Select a Speaking Unit"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Q9.map(qe=>T.jsxs("button",{onClick:()=>i(qe),className:"group bg-white/5 rounded-[2rem] p-8 shadow-2xl border border-white/10 hover:border-blue-500/50 transition-all text-left flex gap-6 items-start relative overflow-hidden transform hover:-translate-y-1 backdrop-blur-xl",children:[T.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${qe.color} flex items-center justify-center text-white shadow-lg shrink-0`,children:T.jsx("i",{className:`fas ${qe.icon} text-3xl`})}),T.jsxs("div",{className:"z-10 flex-1",children:[T.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:["Unit ",qe.id]}),T.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-blue-400 transition-colors mt-1 mb-2",children:qe.title}),T.jsx("p",{className:"text-lg text-slate-400 mt-2 line-clamp-2 leading-relaxed",children:qe.description})]}),T.jsx("div",{className:"absolute right-0 bottom-0 opacity-[0.03] transform translate-x-4 translate-y-4 group-hover:scale-110 transition-transform",children:T.jsx("i",{className:`fas ${qe.icon} text-9xl`})})]},qe.id))})]});if(r==="SUMMARY"){const qe=l.part1+l.part2,He=qe>=6;return T.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in-up",children:[T.jsxs("button",{onClick:at,className:"text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors flex items-center mb-4",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsxs(Yi,{className:"text-center py-12 bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:[T.jsx("div",{className:`w-28 h-28 mx-auto rounded-full flex items-center justify-center text-5xl mb-6 shadow-2xl ${He?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:T.jsx("i",{className:`fas ${He?"fa-trophy":"fa-clipboard-check"}`})}),T.jsx("h2",{className:"text-4xl font-extrabold text-white mb-2",children:"Unit Complete!"}),T.jsx("p",{className:"text-xl text-slate-400 mb-8",children:"Here is your speaking result"}),T.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-2xl mx-auto mb-10",children:[T.jsxs("div",{className:"bg-purple-500/10 p-6 rounded-3xl border border-purple-500/20 shadow-sm",children:[T.jsx("div",{className:"text-sm text-purple-400 font-bold uppercase mb-2 tracking-wide",children:"Part 1 (Shadowing)"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white",children:[l.part1.toFixed(1),T.jsx("span",{className:"text-xl text-slate-500",children:"/5"})]})]}),T.jsxs("div",{className:"bg-blue-500/10 p-6 rounded-3xl border border-blue-500/20 shadow-sm",children:[T.jsx("div",{className:"text-sm text-blue-400 font-bold uppercase mb-2 tracking-wide",children:"Part 2 (Free Speaking)"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white",children:[l.part2.toFixed(1),T.jsx("span",{className:"text-xl text-slate-500",children:"/5"})]})]})]}),T.jsxs("div",{className:"bg-white/5 rounded-3xl p-8 max-w-lg mx-auto mb-8 border border-white/5 shadow-inner",children:[T.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-sm mb-3",children:"Total Score"}),T.jsxs("div",{className:"text-7xl font-black text-white tracking-tight",children:[qe.toFixed(1),T.jsx("span",{className:"text-3xl text-slate-500 font-normal",children:"/10"})]})]}),(we==null?void 0:we.feedback)&&T.jsx("div",{className:"max-w-2xl mx-auto mb-8 bg-blue-500/10 rounded-2xl p-6 border border-blue-500/20",children:T.jsxs("div",{className:"flex items-start gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500 text-white flex items-center justify-center shrink-0",children:T.jsx("i",{className:"fas fa-comment-dots text-xl"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("p",{className:"font-bold text-blue-400 mb-2",children:"General Feedback"}),T.jsx("p",{className:"text-slate-300 leading-relaxed",children:we.feedback})]})]})}),He?T.jsxs("div",{className:"space-y-6",children:[T.jsx("p",{className:"text-green-600 font-bold text-xl",children:" Congratulations! You have completed this speaking task excellently."}),T.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[T.jsxs("button",{onClick:re,className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-lg rounded-2xl shadow-xl shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-certificate text-xl"}),"Download Certificate"]}),T.jsxs("button",{onClick:ke,className:"px-8 py-4 bg-white/10 text-white font-bold text-lg rounded-2xl border border-white/20 hover:bg-white/20 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-file-download text-xl text-blue-400"}),"Download Feedback (.txt)"]}),T.jsxs("button",{onClick:st,className:"px-8 py-4 bg-blue-600/20 text-blue-400 font-bold text-lg rounded-2xl border border-blue-500/30 hover:bg-blue-600/30 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-file-pdf text-xl"}),"Download Feedback (.pdf)"]})]})]}):T.jsxs("div",{className:"space-y-6",children:[T.jsx("p",{className:"text-orange-600 font-bold text-xl",children:"Keep practicing to reach 6.0 to unlock your certificate!"}),T.jsx(Zi,{onClick:_e,children:"Return to Units"})]})]}),(we==null?void 0:we.rubricFeedback)&&we.rubricFeedback.length>0&&T.jsx(Yi,{children:T.jsx(Ip,{rubricFeedback:we.rubricFeedback})}),(we==null?void 0:we.scoreBreakdown)&&T.jsx(Yi,{title:"Score Breakdown",children:T.jsx(Cp,{breakdown:we.scoreBreakdown,max:3})}),(we==null?void 0:we.detailedErrors)&&we.detailedErrors.length>0&&T.jsx(Yi,{children:T.jsx(Rp,{errors:we.detailedErrors})}),(we==null?void 0:we.transcription)&&T.jsx(Yi,{title:"Conversation Transcript",className:"bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsx("div",{className:"bg-black/20 rounded-2xl p-6 border border-white/5",children:T.jsx("pre",{className:"whitespace-pre-wrap text-slate-300 font-mono text-sm leading-relaxed",children:we.transcription})})}),T.jsxs("div",{className:"flex justify-center gap-4 pt-4 pb-8",children:[T.jsxs(Zi,{variant:"secondary",onClick:at,children:[T.jsx("i",{className:"fas fa-redo mr-2"})," Try Again"]}),T.jsxs(Zi,{onClick:_e,children:[T.jsx("i",{className:"fas fa-home mr-2"})," Choose Another Unit"]})]})]})}return r==="MENU"?T.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in",children:[T.jsxs("button",{onClick:_e,className:"text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors flex items-center mb-4",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Units"]}),T.jsxs("div",{className:"text-center mb-10",children:[T.jsx("h2",{className:"text-4xl font-extrabold text-white mb-2",children:t.title}),T.jsx("p",{className:"text-xl text-slate-400",children:"Complete both parts to get your score"})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[T.jsxs("div",{onClick:()=>{o("SHADOWING"),D(0)},className:`cursor-pointer bg-white/5 p-10 rounded-[2rem] shadow-2xl border transition-all group transform hover:-translate-y-1 relative overflow-hidden backdrop-blur-xl ${h.part1?"border-green-500/30 bg-green-500/5":"border-white/10 hover:border-purple-500/50"}`,children:[h.part1&&T.jsxs("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl shadow-sm",children:[T.jsx("i",{className:"fas fa-check mr-1"})," Done"]}),T.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center text-4xl mb-6 group-hover:scale-110 transition-transform ${h.part1?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:T.jsx("i",{className:"fas fa-microphone-lines"})}),T.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Part 1: Shadowing"}),T.jsx("p",{className:"text-slate-400 text-lg mb-6",children:"Listen and mimic sentences. Max 5 points."}),T.jsxs("div",{className:`font-bold text-base uppercase tracking-wider ${h.part1?"text-green-400":"text-purple-400"}`,children:[h.part1?"Redo Part 1":"Start Practice"," ",T.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]}),T.jsxs("div",{onClick:()=>o("FREE_SPEAKING"),className:`cursor-pointer bg-white/5 p-10 rounded-[2rem] shadow-2xl border transition-all group transform hover:-translate-y-1 relative overflow-hidden backdrop-blur-xl ${h.part2?"border-green-500/30 bg-green-500/5":"border-white/10 hover:border-blue-500/50"}`,children:[h.part2&&T.jsxs("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl shadow-sm",children:[T.jsx("i",{className:"fas fa-check mr-1"})," Done"]}),T.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center text-4xl mb-6 group-hover:scale-110 transition-transform ${h.part2?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:T.jsx("i",{className:"fas fa-comments"})}),T.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Part 2: Free Speaking"}),T.jsx("p",{className:"text-slate-400 text-lg mb-6",children:"Conversation with AI (5 turns). Max 5 points."}),T.jsxs("div",{className:`font-bold text-base uppercase tracking-wider ${h.part2?"text-green-400":"text-blue-400"}`,children:[h.part2?"Redo Part 2":"Start Practice"," ",T.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]})]}),T.jsx("div",{className:"flex justify-center mt-8",children:T.jsxs("button",{disabled:!(h.part1&&h.part2),onClick:()=>o("SUMMARY"),className:`px-10 py-5 rounded-2xl font-bold text-xl shadow-xl flex items-center gap-4 transition-all duration-300 transform ${h.part1&&h.part2?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-blue-500/50 hover:-translate-y-1 cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[T.jsx("i",{className:"fas fa-flag-checkered text-2xl"}),"View Final Score & Certificate"]})})]}):r==="SHADOWING"?T.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[T.jsxs("button",{onClick:at,className:"flex items-center text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsx(Yi,{title:`Part 1: Shadowing - Sentence ${x+1}/${t.shadowingSentences.length}`,className:"bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsx("div",{className:"flex flex-col items-center justify-center space-y-10 py-10",children:ue?T.jsxs("div",{className:"w-full space-y-8 animate-fade-in",children:[T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx(ox,{score:ue.score/10*5}),T.jsx("p",{className:"mt-4 text-slate-500 font-bold uppercase",children:"Pronunciation Score (Scaled to 5.0)"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white mt-2",children:[(ue.score/10*5).toFixed(1),T.jsx("span",{className:"text-xl text-slate-500",children:"/5"})]}),T.jsx("div",{className:"mt-6 max-w-2xl bg-blue-500/10 rounded-2xl p-5 border border-blue-500/20",children:T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500 text-white flex items-center justify-center shrink-0",children:T.jsx("i",{className:"fas fa-comment-dots"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("p",{className:"font-bold text-blue-400 mb-1",children:"General Feedback"}),T.jsx("p",{className:"text-slate-300 leading-relaxed",children:ue.feedback})]})]})})]}),ue.rubricFeedback&&ue.rubricFeedback.length>0&&T.jsx("div",{className:"mt-8",children:T.jsx(Ip,{rubricFeedback:ue.rubricFeedback})}),ue.scoreBreakdown&&T.jsxs("div",{className:"mt-6",children:[T.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[T.jsx("i",{className:"fas fa-chart-bar text-blue-400"})," Score Breakdown"]}),T.jsx(Cp,{breakdown:ue.scoreBreakdown,max:3})]}),ue.detailedErrors&&ue.detailedErrors.length>0&&T.jsx("div",{className:"mt-6",children:T.jsx(Rp,{errors:ue.detailedErrors})}),T.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[T.jsxs(Zi,{variant:"secondary",onClick:()=>ve(null),children:[T.jsx("i",{className:"fas fa-rotate-left mr-2"})," Try Again"]}),T.jsxs(Zi,{onClick:ut,children:[T.jsx("i",{className:"fas fa-check mr-2"})," Save & Complete Part 1"]})]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"text-center space-y-6 max-w-3xl px-6",children:[T.jsx("p",{className:"text-slate-500 text-sm uppercase tracking-widest font-bold",children:"Read this aloud"}),T.jsxs("h3",{className:"text-3xl md:text-5xl font-extrabold text-white leading-tight tracking-tight",children:['"',t.shadowingSentences[x],'"']}),T.jsx("button",{onClick:$e,disabled:O,className:"mx-auto flex items-center gap-3 px-6 py-3 bg-blue-500/10 text-blue-400 rounded-full font-bold text-lg hover:bg-blue-500/20 transition-colors disabled:opacity-50",children:O?T.jsxs(T.Fragment,{children:[T.jsx("i",{className:"fas fa-volume-high animate-pulse"})," Playing..."]}):T.jsxs(T.Fragment,{children:[T.jsx("i",{className:"fas fa-volume-up"})," Listen to Sample"]})}),T.jsxs("div",{className:"flex gap-4 justify-center mt-8",children:[T.jsx("button",{disabled:x===0,onClick:()=>{D(qe=>qe-1),me()},className:"w-12 h-12 rounded-full bg-white/5 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center text-slate-400 transition-colors border border-white/5",children:T.jsx("i",{className:"fas fa-chevron-left"})}),T.jsx("button",{disabled:x===t.shadowingSentences.length-1,onClick:()=>{D(qe=>qe+1),me()},className:"w-12 h-12 rounded-full bg-white/5 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center text-slate-400 transition-colors border border-white/5",children:T.jsx("i",{className:"fas fa-chevron-right"})})]})]}),T.jsxs("div",{className:"relative group",children:[G&&T.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75 animate-ping"}),T.jsx("button",{onClick:G?Me:Pe,className:`relative w-28 h-28 rounded-full flex items-center justify-center text-4xl shadow-2xl transition-all duration-300 transform group-hover:scale-105 ${G?"bg-red-500 text-white hover:bg-red-600":`bg-gradient-to-br ${t.color} text-white`}`,children:T.jsx("i",{className:`fas ${G?"fa-stop":"fa-microphone"}`})})]}),T.jsx("div",{className:"text-3xl font-mono text-slate-400 font-bold tracking-widest bg-white/5 px-4 py-1 rounded-lg border border-white/5",children:he(ne)}),F&&!G&&T.jsxs("div",{className:"w-full max-w-lg bg-black/20 p-6 rounded-[2rem] flex flex-col gap-6 shadow-inner border border-white/5",children:[T.jsx("audio",{src:F,controls:!0,className:"w-full h-12 invert opacity-70"}),T.jsxs("div",{className:"flex justify-center gap-4",children:[T.jsxs(Zi,{variant:"secondary",onClick:me,children:[T.jsx("i",{className:"fas fa-trash mr-2"})," Retry"]}),T.jsxs(Zi,{onClick:lt,isLoading:Te,children:[T.jsx("i",{className:"fas fa-magic mr-2"})," Analyze"]})]})]})]})})})]}):T.jsxs("div",{className:"max-w-5xl mx-auto h-[calc(100vh-160px)] flex flex-col",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[T.jsxs("button",{onClick:at,className:"flex items-center text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsxs("div",{className:"bg-blue-500/10 px-4 py-2 rounded-full text-blue-400 text-sm font-bold shadow-sm border border-blue-500/20 backdrop-blur-md",children:["Turn ",Z,"/",ye]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-900/40 rounded-t-[2.5rem] shadow-2xl border border-white/10 p-8 space-y-8 relative custom-scrollbar backdrop-blur-xl",children:[q.length===0&&Te&&T.jsx("div",{className:"flex justify-center items-center h-full",children:T.jsxs("div",{className:"flex flex-col items-center text-slate-500",children:[T.jsx("div",{className:"w-20 h-20 bg-blue-500/10 rounded-full flex items-center justify-center mb-4",children:T.jsx("i",{className:"fas fa-circle-notch fa-spin text-4xl text-blue-500"})}),T.jsx("p",{className:"text-lg font-medium text-slate-400",children:"Examiner is preparing the first question..."})]})}),q.map((qe,He)=>T.jsx("div",{className:`flex ${qe.role==="ai"?"justify-start":"justify-end"}`,children:T.jsxs("div",{className:`max-w-[85%] rounded-[2rem] p-6 shadow-lg transition-all ${qe.role==="ai"?"bg-white/5 border border-white/5 rounded-tl-none text-white":"bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-tr-none"}`,children:[qe.role==="ai"&&T.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2 uppercase tracking-wide",children:[T.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400",children:T.jsx("i",{className:"fas fa-robot"})}),"Examiner"]}),T.jsx("p",{className:"text-lg md:text-xl leading-relaxed font-medium",children:qe.text}),qe.audioUrl&&T.jsx("audio",{src:qe.audioUrl,controls:!0,autoPlay:!0,className:`mt-4 h-10 w-full max-w-[240px] opacity-90 hover:opacity-100 transition-opacity ${qe.role==="ai"?"invert brightness-125":""}`})]})},He)),Te&&q.length>0&&T.jsx("div",{className:"flex justify-start animate-pulse",children:T.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl rounded-tl-none p-5 text-slate-400 text-base flex items-center gap-3",children:[T.jsxs("span",{className:"flex gap-1.5",children:[T.jsx("span",{className:"w-2.5 h-2.5 bg-blue-500/50 rounded-full animate-bounce"}),T.jsx("span",{className:"w-2.5 h-2.5 bg-blue-500/50 rounded-full animate-bounce delay-75"}),T.jsx("span",{className:"w-2.5 h-2.5 bg-blue-500/50 rounded-full animate-bounce delay-150"})]}),"Examiner is thinking..."]})}),T.jsx("div",{ref:de})]}),T.jsxs("div",{className:"bg-slate-900/60 p-6 border-t border-white/10 rounded-b-[2.5rem] shadow-2xl flex flex-col gap-4 flex-shrink-0 z-10 backdrop-blur-xl",children:[t.freeSpeakingQuestions&&Z<ye&&!G&&!F&&T.jsxs("div",{className:"p-4 bg-blue-500/5 border border-blue-500/10 rounded-2xl text-base text-blue-200 flex items-start gap-3 animate-fade-in shadow-sm",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/10 flex items-center justify-center text-blue-400 shrink-0",children:T.jsx("i",{className:"fas fa-lightbulb"})}),T.jsxs("div",{className:"py-1",children:[T.jsx("span",{className:"font-bold text-blue-300",children:"Suggestion:"})," ",t.freeSpeakingQuestions[Z].hint]})]}),T.jsx("div",{className:"flex items-center justify-between px-2",children:Z>=ye?T.jsxs("div",{className:"w-full text-center py-6",children:[T.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mx-auto mb-3 text-2xl",children:T.jsx("i",{className:"fas fa-spinner fa-spin"})}),T.jsx("p",{className:"text-blue-800 font-bold text-2xl mb-1",children:"Session Complete!"}),T.jsx("p",{className:"text-gray-500 text-lg",children:"Calculating final score..."})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"text-base font-medium text-slate-500",children:G?T.jsxs("span",{className:"text-red-400 animate-pulse font-bold flex items-center gap-2",children:[T.jsx("i",{className:"fas fa-circle text-xs"})," Recording ",he(ne)]}):"Tap microphone to answer"}),T.jsx("div",{className:"flex gap-4 items-center",children:F&&!G?T.jsxs("div",{className:"flex gap-3",children:[T.jsx(Zi,{variant:"secondary",onClick:()=>{ce(null),k([])},children:T.jsx("i",{className:"fas fa-rotate-left"})}),T.jsxs(Zi,{onClick:pt,isLoading:Te,children:["Send Answer ",T.jsx("i",{className:"fas fa-paper-plane ml-2"})]})]}):T.jsx("button",{disabled:Te,onClick:G?Me:Pe,className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl shadow-xl transition-all hover:scale-105 active:scale-95 ${G?"bg-red-500 text-white hover:bg-red-600 shadow-red-500/30":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-blue-500/40 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:T.jsx("i",{className:`fas ${G?"fa-stop":"fa-microphone"}`})})})]})})]})]})},eO=[{id:1,title:"Generation Gap and Independent Life",description:"Write about family relationships and independence.",icon:"fa-users",color:"from-blue-500 to-cyan-500",type:"ESSAY",scrambleSentences:["Parents should respect their children's privacy.","Living independently teaches young people responsibility.","The generation gap can lead to conflicts.","Communication is the key to understanding.","Teenagers often want to make their own decisions."],paragraphSentences:["Living in an extended family can be challenging.","Grandparents often hold traditional values regarding life.","Meanwhile, teenagers want to express their own modern style.","This difference in perspective creates the generation gap.","However, mutual respect can help solve these conflicts."],essayPrompt:"Write an essay (150-200 words) discussing the advantages and disadvantages of living in an extended family.",essayHint:"Think about: emotional support, childcare vs. lack of privacy, generation gap conflicts.",structure:{introduction:"Define 'extended family' and state that living together has both pros and cons.",body:"Paragraph 1: Advantages (financial support, childcare, bonding). Paragraph 2: Disadvantages (lack of privacy, generational conflicts).",conclusion:"Summarize main points and give your personal opinion (e.g., mutual respect is key)."}},{id:2,title:"Vietnam and ASEAN",description:"Discuss Vietnam's integration into the ASEAN community.",icon:"fa-flag",color:"from-red-500 to-pink-500",type:"ESSAY",scrambleSentences:["Vietnam joined ASEAN in July 1995.","ASEAN aims to promote economic growth and peace.","Cultural exchanges help people understand each other.","Visa-free travel encourages tourism within the region.","English is the working language of ASEAN."],paragraphSentences:["Vietnam became a member of ASEAN in 1995.","This membership opened many economic opportunities for the country.","It also promoted cultural exchanges with neighboring nations.","Vietnamese youth can now travel easily within the region.","Overall, ASEAN integration has greatly benefited the country."],essayPrompt:"Write an essay (150-200 words) about the benefits for Vietnamese students when Vietnam is a member of ASEAN.",essayHint:"Think about: education opportunities, scholarship, job market, cultural exchange.",structure:{introduction:"Introduce Vietnam's membership in ASEAN and state that it brings many benefits to students.",body:"Paragraph 1: Educational opportunities (scholarships, exchange programs). Paragraph 2: Career opportunities (working in ASEAN countries, improving English).",conclusion:"Reaffirm the importance of ASEAN integration for the future of Vietnamese youth."}},{id:3,title:"Global Warming and Ecological Systems",description:"Address environmental issues and solutions.",icon:"fa-globe-asia",color:"from-green-500 to-emerald-600",type:"EMAIL",scrambleSentences:["Carbon dioxide is a major greenhouse gas.","Deforestation contributes significantly to global warming.","We should use renewable energy sources like solar power.","Planting more trees helps to reduce carbon footprints.","Climate change causes extreme weather events."],paragraphSentences:["Global warming is a major threat to our planet.","It is caused primarily by greenhouse gas emissions.","Rising temperatures lead to melting ice caps.","Consequently, sea levels are rising dangerously.","We must act now to reduce our carbon footprint."],essayPrompt:"Write an email (120-150 words) to your friend, Tom, suggesting ways to reduce global warming in your local community.",essayHint:"Think about: recycling, saving electricity, using public transport, planting trees.",structure:{introduction:"Salutation (Dear Tom,), ask about his health, and state your reason for writing (sharing eco-friendly tips).",body:"Suggestion 1: Save energy at home (turn off lights). Suggestion 2: Travel green (bike/bus). Suggestion 3: Practice 3Rs (Reduce, Reuse, Recycle).",conclusion:"Hope he finds the tips useful. Closing salutation (Best wishes, [Your Name])."}},{id:4,title:"World Heritage Site",description:"Preserving history and promoting tourism.",icon:"fa-landmark",color:"from-yellow-500 to-orange-500",type:"EMAIL",scrambleSentences:["Ha Long Bay was recognized by UNESCO as a heritage site.","Tourism brings revenue to local communities.","We must preserve these sites for future generations.","Many heritage sites are threatened by pollution.","Visitors should respect the local culture and environment."],paragraphSentences:["Hoi An Ancient Town is a famous heritage site.","It reflects a fusion of indigenous and foreign cultures.","Many tourists visit to see the old architecture.","However, tourism can put pressure on the infrastructure.","Preserving the site requires strict management rules."],essayPrompt:"Write an email (120-150 words) to a foreign friend inviting them to visit a World Heritage Site in Vietnam and explaining why it should be preserved.",essayHint:"Think about: Hoi An/Ha Long Bay, beauty, history, tourism responsibility.",structure:{introduction:"Salutation (Dear...), ask about their holiday plans, and introduce a famous site (e.g., Ha Long Bay or Hoi An).",body:"Describe the site's beauty and history. Explain why preservation is crucial (cultural identity, future generations).",conclusion:"Invite them to come and visit together. Sign-off (Love, [Your Name])."}},{id:5,title:"Cities and Education in the Future",description:"Write about future trends in urban life and learning.",icon:"fa-city",color:"from-indigo-500 to-purple-600",type:"ESSAY",scrambleSentences:["Technology will transform how we learn and work.","Smart cities use data to manage resources efficiently.","Future schools might not have traditional classrooms.","Sustainable cities focus on renewable energy sources.","Virtual reality can make learning more interactive."],paragraphSentences:["In the future, cities will be much smarter and greener.","Buildings will generate their own solar energy.","Public transport will be fully automated and electric.","This will reduce pollution and traffic congestion significantly.","Consequently, the quality of life for urban residents will improve."],essayPrompt:"Write an essay (150-200 words) discussing the benefits of online education in the future.",essayHint:"Think about: flexibility, cost savings, access to global resources, personalized learning.",structure:{introduction:"Introduce the trend of online education replacing traditional methods.",body:"Paragraph 1: Flexibility and convenience (learn anywhere, anytime). Paragraph 2: Access to resources (global courses, experts).",conclusion:"Summarize benefits and state that online education is a positive step forward."}},{id:6,title:"Social Issues",description:"Discuss causes and solutions for social problems.",icon:"fa-people-arrows",color:"from-gray-500 to-slate-600",type:"ESSAY",scrambleSentences:["Overpopulation puts pressure on natural resources.","Peer pressure can lead to negative behaviors.","Education is the best way to reduce poverty.","Cyberbullying is a growing problem among teenagers.","The government must take action to reduce crime rates."],paragraphSentences:["Bullying is a serious issue in many schools today.","It can be physical, verbal, or social exclusion.","Victims of bullying often suffer from anxiety and depression.","Therefore, schools need strict policies to protect students.","Teachers and parents must also listen to children's problems."],essayPrompt:"Write an essay (150-200 words) discussing the causes and solutions for bullying in schools.",essayHint:"Think about: family issues, lack of supervision, counseling, strict rules, awareness campaigns.",structure:{introduction:"Define bullying and state that it is a prevalent issue in schools.",body:"Paragraph 1: Causes (family problems, media influence, peer pressure). Paragraph 2: Solutions (education, strict punishment, counseling).",conclusion:"Emphasize that solving bullying requires effort from schools, parents, and students."}},{id:7,title:"Healthy Lifestyle",description:"Write about habits for a healthy body and mind.",icon:"fa-heart-pulse",color:"from-teal-400 to-green-500",type:"ESSAY",scrambleSentences:["You should drink at least two liters of water daily.","Avoiding fast food is key to a healthy diet.","Physical activity strengthens the heart and lungs.","Stress management is important for mental well-being.","A good night's sleep helps the body recover."],paragraphSentences:["Maintaining a healthy lifestyle is not difficult.","First, you need to eat a balanced diet with vegetables.","Second, regular exercise is crucial for physical strength.","Finally, getting enough sleep helps your brain function well.","These simple habits lead to a long and happy life."],essayPrompt:"Write an essay (150-200 words) about the importance of a healthy lifestyle for teenagers.",essayHint:"Think about: physical growth, mental health, study performance, disease prevention.",structure:{introduction:"State that health is wealth and teenagers need to prioritize it.",body:"Paragraph 1: Physical benefits (growth, energy for studying). Paragraph 2: Mental benefits (reducing stress, better focus).",conclusion:"Encourage teenagers to adopt healthy habits early in life."}},{id:8,title:"Health and Life Expectancy",description:"Analyze factors affecting human longevity.",icon:"fa-user-doctor",color:"from-sky-500 to-blue-700",type:"ESSAY",scrambleSentences:["Life expectancy has increased due to better healthcare.","Vaccines protect us from dangerous infectious diseases.","Eating vegetables contributes to a longer life.","Smoking is a major cause of lung cancer.","Regular medical check-ups catch diseases early."],paragraphSentences:["Many factors affect how long a person lives.","Genetics play a role, but lifestyle is more important.","People who exercise and eat well tend to live longer.","Access to modern medicine also extends life expectancy.","Therefore, we have some control over our own longevity."],essayPrompt:"Write an essay (150-200 words) discussing the factors that have led to increased life expectancy.",essayHint:"Think about: medical advances (vaccines), better nutrition, sanitation, education.",structure:{introduction:"State that life expectancy has risen significantly in recent decades.",body:"Paragraph 1: Medical advances (vaccines, antibiotics, surgery). Paragraph 2: Better living conditions (clean water, nutrition, hygiene).",conclusion:"Conclude that humans are living longer and healthier lives than ever before."}}],sx=()=>{try{const n=window.AudioContext||window.webkitAudioContext;if(!n)return;const e=new n,t=(r,o,l)=>{const c=e.createOscillator(),h=e.createGain();c.connect(h),h.connect(e.destination),c.type="triangle",c.frequency.value=r,h.gain.setValueAtTime(.1,o),h.gain.exponentialRampToValueAtTime(.001,o+l),c.start(o),c.stop(o+l)},i=e.currentTime;t(523.25,i,.5),t(659.25,i+.1,.5),t(783.99,i+.2,.8)}catch(n){console.error("Failed to play sound",n)}},tO=({onComplete:n,studentName:e})=>{const[t,i]=Nt.useState(null),[r,o]=Nt.useState("MENU"),[l,c]=Nt.useState({part1:0,part2:0,part3:0}),[h,f]=Nt.useState({part1:!1,part2:!1,part3:!1}),[p,b]=Nt.useState(!1),S=Nt.useRef({part1:0,part2:0,part3:0}),[x,D]=Nt.useState(0),[O,B]=Nt.useState([]),[q,X]=Nt.useState([]),[Z,W]=Nt.useState("idle"),[ye,de]=Nt.useState([]),[G,V]=Nt.useState([]),[L,j]=Nt.useState("idle"),[I,k]=Nt.useState(""),[F,ce]=Nt.useState(!1),[Te,le]=Nt.useState(null),[ue,ve]=Nt.useState(null);Nt.useEffect(()=>{r==="SCRAMBLE_WORDS"&&t&&we(x)},[r,x,t]),Nt.useEffect(()=>{r==="SCRAMBLE_PARAGRAPH"&&t&&J()},[r,t]),Nt.useEffect(()=>{S.current=l},[l]),Nt.useEffect(()=>{if(r==="SUMMARY"&&!p){const ke=S.current.part1+S.current.part2+S.current.part3;n(ke),b(!0)}},[r,p,n]);const we=ke=>{if(!t)return;const _e=[...t.scrambleSentences[ke].split(" ").map((at,qe)=>({id:qe,text:at}))].sort(()=>Math.random()-.5);B(_e),X([]),W("idle")},We=(ke,st)=>{Z!=="correct"&&(st==="pool"?(B(he=>he.filter(_e=>_e.id!==ke.id)),X(he=>[...he,ke])):(X(he=>he.filter(_e=>_e.id!==ke.id)),B(he=>[...he,ke])),W("idle"))},ne=()=>{if(!t)return;const ke=t.scrambleSentences[x];q.map(he=>he.text).join(" ")===ke?(W("correct"),sx()):W("wrong")},U=()=>{t&&(x<t.scrambleSentences.length-1?D(ke=>ke+1):(alert("Part 1 Completed! You earned 2 points."),c(ke=>({...ke,part1:2})),f(ke=>({...ke,part1:!0})),o("MENU"),D(0)))},J=()=>{if(!t)return;const st=[...t.paragraphSentences.map((he,_e)=>({id:_e,text:he}))].sort(()=>Math.random()-.5);de(st),V([]),j("idle")},ie=(ke,st)=>{L!=="correct"&&(st==="pool"?(de(he=>he.filter(_e=>_e.id!==ke.id)),V(he=>[...he,ke])):(V(he=>he.filter(_e=>_e.id!==ke.id)),de(he=>[...he,ke])),j("idle"))},fe=()=>{const ke=G.map(he=>he.id);let st=!0;if(ke.length!==(t==null?void 0:t.paragraphSentences.length))st=!1;else for(let he=0;he<ke.length;he++)if(ke[he]!==he){st=!1;break}st?(j("correct"),sx(),setTimeout(()=>{alert("Part 2 Completed! You earned 2 points."),c(he=>({...he,part2:2})),f(he=>({...he,part2:!0})),o("MENU")},1e3)):j("wrong")},me=async()=>{if(I.trim()){ce(!0),le(null);try{const ke=await J9(I);le(ke),ve(ke);const st=ke.score/10*6;c(he=>({...he,part3:st})),f(he=>({...he,part3:!0}))}catch(ke){alert(ke.message)}finally{ce(!1)}}},Ee=()=>{o("MENU"),k(""),le(null)},Pe=()=>{if(!t)return;const ke=l.part1+l.part2+l.part3,st=document.createElement("canvas");st.width=1e3,st.height=700;const he=st.getContext("2d");if(!he)return;he.fillStyle="#FFFFFF",he.fillRect(0,0,st.width,st.height),he.lineWidth=15,he.strokeStyle="#2563EB",he.strokeRect(30,30,st.width-60,st.height-60),he.lineWidth=3,he.strokeStyle="#DAA520",he.strokeRect(50,50,st.width-100,st.height-100),he.fillStyle="#1e3a8a",he.font="bold 50px serif",he.textAlign="center",he.fillText("CERTIFICATE",st.width/2,140),he.font="28px serif",he.fillStyle="#DAA520",he.fillText("OF WRITING MASTERY",st.width/2,180),he.font="italic 24px sans-serif",he.fillStyle="#555555",he.fillText("This certificate is awarded to",st.width/2,250),he.font="bold italic 60px serif",he.fillStyle="#2563EB",he.fillText(e,st.width/2,330),he.beginPath(),he.moveTo(250,350),he.lineTo(750,350),he.strokeStyle="#DAA520",he.lineWidth=2,he.stroke(),he.font="22px sans-serif",he.fillStyle="#444444",he.fillText("For completing the writing assessment for",st.width/2,400),he.font="bold 24px sans-serif",he.fillText(`Unit: ${t.title}`,st.width/2,440),he.fillStyle="#16a34a",he.font="bold 40px sans-serif",he.fillText(`Total Score: ${ke.toFixed(1)}/10`,st.width/2,500);const _e=new Date().toLocaleDateString("en-GB");he.font="20px sans-serif",he.fillStyle="#000000",he.textAlign="left",he.fillText(`Date: ${_e}`,100,600),he.textAlign="right",he.fillText("LinguaAI Director",900,600),he.font="italic 30px serif",he.fillText("Gemini AI",900,570);const at=document.createElement("a");at.download=`Writing-Certificate-${e}-${t.id}.png`,at.href=st.toDataURL("image/png"),at.click()},Me=()=>{if(!t||!ue)return;const ke=l.part1+l.part2+l.part3,st=new Date().toLocaleString();let he=`================================================
WRITING PRACTICE FEEDBACK - LINGUAAI
================================================

STUDENT: ${e}
DATE: ${st}
UNIT: ${t.id} - ${t.title}
TYPE: ${t.type}

------------------------------------------------
1. OVERALL SCORE: ${ke.toFixed(1)} / 10.0
------------------------------------------------
- Task 1 (Sentence Scramble): ${l.part1} / 2.0
- Task 2 (Paragraph Scramble): ${l.part2} / 2.0
- Task 3 (${t.type==="EMAIL"?"Email Writing":"Essay Writing"}): ${l.part3.toFixed(1)} / 6.0

`;ue.scoreBreakdown&&(he+=`------------------------------------------------
2. SCORE BREAKDOWN
------------------------------------------------
`,Object.entries(ue.scoreBreakdown).forEach(([He,pe])=>{he+=`- ${He}: ${pe} / 10
`}),he+=`
`),he+=`------------------------------------------------
3. ORIGINAL TEXT
------------------------------------------------
${I||"No text available."}

------------------------------------------------
4. GENERAL FEEDBACK
------------------------------------------------
${ue.feedback||"No feedback available."}

------------------------------------------------
5. RUBRIC BREAKDOWN
------------------------------------------------
`,ue.rubricFeedback&&ue.rubricFeedback.forEach(He=>{he+=`[${He.criterion}]: ${He.score}/${He.maxScore}
Feedback: ${He.feedback}
`,He.suggestions&&He.suggestions.length>0&&(he+=`Suggestions:
`,He.suggestions.forEach((pe,Ve)=>{he+=`  ${Ve+1}. ${pe}
`})),he+=`
`}),ue.detailedErrors&&ue.detailedErrors.length>0&&(he+=`------------------------------------------------
6. DETAILED ERRORS & CORRECTIONS
------------------------------------------------
`,ue.detailedErrors.forEach((He,pe)=>{he+=`${pe+1}. TYPE: ${He.type.toUpperCase()}
   Original: "${He.original}"
   Correction: "${He.correction}"
   Explanation: ${He.explanation}

`})),ue.improvedVersion&&(he+=`------------------------------------------------
7. IMPROVED VERSION (SUGGESTION)
------------------------------------------------
${ue.improvedVersion}
`),he+=`
================================================
DEVELOPED BY TEACHER VO THI THU HA
================================================`;const _e=new Blob([he],{type:"text/plain"}),at=URL.createObjectURL(_e),qe=document.createElement("a");qe.download=`Writing-Feedback-${e}-${t.id.toString().replace(/\s+/g,"_")}.txt`,qe.href=at,qe.click(),URL.revokeObjectURL(at)},$e=()=>{if(!t||!ue)return;const ke=l.part1+l.part2+l.part3,st=new Date().toLocaleString(),he=new Dt;let _e=20;he.setFillColor(30,58,138),he.rect(0,0,210,40,"F"),he.setTextColor(255,255,255),he.setFontSize(22),he.text("WRITING PRACTICE FEEDBACK",105,20,{align:"center"}),he.setFontSize(16),he.text("LINGUAAI - SMART LEARNING PLATFORM",105,30,{align:"center"}),_e=50,he.setTextColor(0,0,0),he.setFontSize(12),he.setFont("helvetica","bold"),he.text(`STUDENT: ${e}`,20,_e),he.text(`DATE: ${st}`,120,_e),_e+=10,he.text(`UNIT: ${t.id} - ${t.title}`,20,_e),_e+=10,he.text(`TYPE: ${t.type}`,20,_e),_e+=15,he.setDrawColor(200,200,200),he.line(20,_e,190,_e),_e+=10,he.setFontSize(14),he.text("1. OVERALL SCORE",20,_e),_e+=10,he.setFontSize(24),he.setTextColor(37,99,235),he.text(`${ke.toFixed(1)} / 10.0`,20,_e),he.setTextColor(0,0,0),he.setFontSize(11),he.setFont("helvetica","normal"),_e+=10,he.text(`- Task 1 (Sentence Scramble): ${l.part1} / 2.0`,25,_e),_e+=7,he.text(`- Task 2 (Paragraph Scramble): ${l.part2} / 2.0`,25,_e),_e+=7,he.text(`- Task 3 (${t.type==="EMAIL"?"Email Writing":"Essay Writing"}): ${l.part3.toFixed(1)} / 6.0`,25,_e),_e+=15,ue.scoreBreakdown&&(he.setFont("helvetica","bold"),he.setFontSize(14),he.text("2. SCORE BREAKDOWN",20,_e),_e+=10,he.setFont("helvetica","normal"),he.setFontSize(11),Object.entries(ue.scoreBreakdown).forEach(([He,pe])=>{he.text(`- ${He}: ${pe} / 10`,25,_e),_e+=7}),_e+=5),_e>250&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.setFontSize(14),he.text("3. ORIGINAL TEXT",20,_e),_e+=10,he.setFont("helvetica","normal"),he.setFontSize(10);const at=he.splitTextToSize(I||"No text available.",170);he.text(at,20,_e),_e+=at.length*5+10,_e>250&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.setFontSize(14),he.text("4. GENERAL FEEDBACK",20,_e),_e+=10,he.setFont("helvetica","normal"),he.setFontSize(11);const qe=he.splitTextToSize(ue.feedback||"No feedback available.",170);if(he.text(qe,20,_e),_e+=qe.length*5+10,ue.rubricFeedback&&(_e>230&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.setFontSize(14),he.text("5. RUBRIC BREAKDOWN",20,_e),_e+=10,he.setFontSize(10),ue.rubricFeedback.forEach(He=>{_e>250&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.text(`[${He.criterion}]: ${He.score}/${He.maxScore}`,20,_e),_e+=6,he.setFont("helvetica","normal");const pe=he.splitTextToSize(`Feedback: ${He.feedback}`,160);he.text(pe,25,_e),_e+=pe.length*5+4,He.suggestions&&He.suggestions.length>0&&(he.setFont("helvetica","italic"),he.text("Suggestions:",25,_e),_e+=5,He.suggestions.forEach((Ve,Ct)=>{const ft=he.splitTextToSize(`${Ct+1}. ${Ve}`,150);he.text(ft,30,_e),_e+=ft.length*5}),_e+=5),he.setFontSize(10)}),_e+=10),ue.detailedErrors&&ue.detailedErrors.length>0&&(_e>230&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.setFontSize(14),he.text("6. DETAILED ERRORS & CORRECTIONS",20,_e),_e+=10,he.setFontSize(10),ue.detailedErrors.forEach((He,pe)=>{_e>250&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.text(`${pe+1}. TYPE: ${He.type.toUpperCase()}`,20,_e),_e+=6,he.setFont("helvetica","normal"),he.text(`Original: "${He.original}"`,25,_e),_e+=5,he.setTextColor(22,101,52),he.text(`Correction: "${He.correction}"`,25,_e),he.setTextColor(0,0,0),_e+=5;const Ve=he.splitTextToSize(`Explanation: ${He.explanation}`,160);he.text(Ve,25,_e),_e+=Ve.length*5+5}),_e+=10),ue.improvedVersion){_e>230&&(he.addPage(),_e=20),he.setFont("helvetica","bold"),he.setFontSize(14),he.text("7. IMPROVED VERSION (SUGGESTION)",20,_e),_e+=10,he.setFont("helvetica","normal"),he.setFontSize(10);const He=he.splitTextToSize(ue.improvedVersion,170);he.text(He,20,_e),_e+=He.length*5+20}_e>260?(he.addPage(),_e=20):_e=270,he.setFont("helvetica","bold"),he.setFontSize(10),he.setDrawColor(30,58,138),he.line(20,_e,190,_e),_e+=10,he.text("DEVELOPED BY TEACHER VO THI THU HA",105,_e,{align:"center"}),he.save(`Writing-Feedback-${e}-${t.id.toString().replace(/\s+/g,"_")}.pdf`)},it=()=>{i(null),o("MENU"),ut()},lt=()=>{o("MENU")},ut=()=>{le(null),k(""),D(0),W("idle"),j("idle"),c({part1:0,part2:0,part3:0}),f({part1:!1,part2:!1,part3:!1}),b(!1)};if(!t)return T.jsxs("div",{className:"space-y-8 animate-fade-in",children:[T.jsx("h2",{className:"text-3xl font-extrabold text-white mb-6",children:"Select a Writing Unit"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:eO.map(ke=>T.jsxs("button",{onClick:()=>i(ke),className:"group bg-white/5 rounded-[2rem] p-8 shadow-2xl border border-white/10 hover:border-blue-500/50 transition-all text-left flex gap-6 items-start relative overflow-hidden transform hover:-translate-y-1 backdrop-blur-xl",children:[T.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${ke.color} flex items-center justify-center text-white shadow-lg shrink-0 group-hover:scale-110 transition-transform`,children:T.jsx("i",{className:`fas ${ke.icon} text-3xl`})}),T.jsxs("div",{className:"z-10 flex-1",children:[T.jsxs("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:["Unit ",ke.id]}),T.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-blue-400 transition-colors mt-1 mb-2",children:ke.title}),T.jsx("p",{className:"text-base text-slate-400 line-clamp-2 leading-relaxed",children:ke.description}),T.jsxs("div",{className:`inline-flex items-center gap-2 mt-4 text-xs font-bold px-3 py-1.5 rounded-full border ${ke.type==="EMAIL"?"bg-purple-500/10 text-purple-400 border-purple-500/20":"bg-blue-500/10 text-blue-400 border-blue-500/20"}`,children:[T.jsx("i",{className:`fas ${ke.type==="EMAIL"?"fa-envelope":"fa-pen-nib"}`}),ke.type==="EMAIL"?"Email Writing":"Essay Writing"]})]})]},ke.id))})]});if(r==="SUMMARY"){const ke=l.part1+l.part2+l.part3,st=ke>=6;return T.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in-up",children:[T.jsxs("button",{onClick:lt,className:"text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors flex items-center mb-4",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsxs(Yi,{className:"text-center py-12 bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:[T.jsx("div",{className:`w-28 h-28 mx-auto rounded-full flex items-center justify-center text-5xl mb-6 shadow-2xl ${st?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:T.jsx("i",{className:`fas ${st?"fa-trophy":"fa-clipboard-check"}`})}),T.jsx("h2",{className:"text-4xl font-extrabold text-white mb-2",children:"Writing Complete!"}),T.jsx("p",{className:"text-xl text-slate-400 mb-8",children:"Here is your writing result"}),T.jsxs("div",{className:"grid grid-cols-3 gap-6 max-w-2xl mx-auto mb-10",children:[T.jsxs("div",{className:"bg-orange-500/10 p-6 rounded-3xl border border-orange-500/20 shadow-sm",children:[T.jsx("div",{className:"text-sm text-orange-400 font-bold uppercase mb-2 tracking-wide",children:"Task 1"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white",children:[l.part1,T.jsx("span",{className:"text-xl text-slate-500",children:"/2"})]})]}),T.jsxs("div",{className:"bg-purple-500/10 p-6 rounded-3xl border border-purple-500/20 shadow-sm",children:[T.jsx("div",{className:"text-sm text-purple-400 font-bold uppercase mb-2 tracking-wide",children:"Task 2"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white",children:[l.part2,T.jsx("span",{className:"text-xl text-slate-500",children:"/2"})]})]}),T.jsxs("div",{className:"bg-blue-500/10 p-6 rounded-3xl border border-blue-500/20 shadow-sm",children:[T.jsx("div",{className:"text-sm text-blue-400 font-bold uppercase mb-2 tracking-wide",children:"Task 3"}),T.jsxs("div",{className:"text-4xl font-extrabold text-white",children:[l.part3.toFixed(1),T.jsx("span",{className:"text-xl text-slate-500",children:"/6"})]})]})]}),T.jsxs("div",{className:"bg-white/5 rounded-3xl p-8 max-w-lg mx-auto mb-8 border border-white/5 shadow-inner",children:[T.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-sm mb-3",children:"Total Score"}),T.jsxs("div",{className:"text-7xl font-black text-white tracking-tight",children:[ke.toFixed(1),T.jsx("span",{className:"text-3xl text-slate-500 font-normal",children:"/10"})]})]}),(ue==null?void 0:ue.feedback)&&T.jsx("div",{className:"max-w-2xl mx-auto mb-8 bg-blue-500/10 rounded-2xl p-6 border border-blue-500/20",children:T.jsxs("div",{className:"flex items-start gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500 text-white flex items-center justify-center shrink-0",children:T.jsx("i",{className:"fas fa-comment-dots text-xl"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("p",{className:"font-bold text-blue-400 mb-2",children:"General Feedback"}),T.jsx("p",{className:"text-slate-300 leading-relaxed",children:ue.feedback})]})]})}),st?T.jsxs("div",{className:"space-y-6",children:[T.jsx("p",{className:"text-green-600 font-bold text-xl",children:" Congratulations! You have completed this writing task excellently."}),T.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[T.jsxs("button",{onClick:()=>Pe(),className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-lg rounded-2xl shadow-xl shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-certificate text-xl"}),"Download Certificate"]}),T.jsxs("button",{onClick:Me,className:"px-8 py-4 bg-white/10 text-white font-bold text-lg rounded-2xl border border-white/20 hover:bg-white/20 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-file-download text-xl text-blue-400"}),"Download Feedback (.txt)"]}),T.jsxs("button",{onClick:$e,className:"px-8 py-4 bg-blue-600/20 text-blue-400 font-bold text-lg rounded-2xl border border-blue-500/30 hover:bg-blue-600/30 transform hover:-translate-y-1 transition-all flex items-center gap-3",children:[T.jsx("i",{className:"fas fa-file-pdf text-xl"}),"Download Feedback (.pdf)"]})]})]}):T.jsxs("div",{className:"space-y-6",children:[T.jsx("p",{className:"text-orange-600 font-bold text-xl",children:"Keep practicing to reach 6.0 to unlock your certificate!"}),T.jsx(Zi,{onClick:()=>{it()},children:"Return to Units"})]})]}),(ue==null?void 0:ue.rubricFeedback)&&ue.rubricFeedback.length>0&&T.jsx(Yi,{children:T.jsx(Ip,{rubricFeedback:ue.rubricFeedback})}),(ue==null?void 0:ue.scoreBreakdown)&&T.jsx(Yi,{title:"Score Breakdown",children:T.jsx(Cp,{breakdown:ue.scoreBreakdown})}),(ue==null?void 0:ue.detailedErrors)&&ue.detailedErrors.length>0&&T.jsx(Yi,{children:T.jsx(Rp,{errors:ue.detailedErrors})}),(ue==null?void 0:ue.improvedVersion)&&T.jsx(Yi,{title:"Improved Version",className:"bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsx("div",{className:"bg-green-500/10 rounded-2xl p-6 border border-green-500/20",children:T.jsx("p",{className:"text-slate-300 text-lg leading-loose font-serif",children:ue.improvedVersion})})}),T.jsxs("div",{className:"flex justify-center gap-4 pt-4 pb-8",children:[T.jsxs(Zi,{variant:"secondary",onClick:lt,children:[T.jsx("i",{className:"fas fa-redo mr-2"})," Try Again"]}),T.jsxs(Zi,{onClick:it,children:[T.jsx("i",{className:"fas fa-home mr-2"})," Choose Another Unit"]})]})]})}if(r==="MENU"){const ke=t.type==="EMAIL"?"Email Writing":"Essay Writing",st=h.part1&&h.part2&&h.part3;return T.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-fade-in",children:[T.jsxs("button",{onClick:it,className:"text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors flex items-center mb-4",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Units"]}),T.jsxs("div",{className:"text-center mb-10",children:[T.jsx("h2",{className:"text-4xl font-extrabold text-white tracking-tight mb-2",children:t.title}),T.jsx("p",{className:"text-xl text-slate-400",children:"Complete all parts to get your certificate"})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-10",children:[T.jsxs("div",{onClick:()=>o("SCRAMBLE_WORDS"),className:`cursor-pointer bg-white/5 p-8 rounded-[2rem] shadow-2xl border transition-all duration-300 group relative overflow-hidden backdrop-blur-xl ${h.part1?"border-green-500/30 bg-green-500/5":"border-white/10 hover:border-orange-500/50"}`,children:[h.part1&&T.jsxs("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl shadow-sm",children:[T.jsx("i",{className:"fas fa-check mr-1"})," Done"]}),T.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform ${h.part1?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:T.jsx("i",{className:"fas fa-sort-alpha-down"})}),T.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Part 1: Sentence Scramble"}),T.jsx("p",{className:"text-slate-400 text-base font-medium mb-4",children:"2 Points"}),T.jsxs("div",{className:`font-bold text-sm uppercase tracking-wider ${h.part1?"text-green-400":"text-orange-400"}`,children:[h.part1?"Review":"Start"," ",T.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]}),T.jsxs("div",{onClick:()=>o("SCRAMBLE_PARAGRAPH"),className:`cursor-pointer bg-white/5 p-8 rounded-[2rem] shadow-2xl border transition-all duration-300 group relative overflow-hidden backdrop-blur-xl ${h.part2?"border-green-500/30 bg-green-500/5":"border-white/10 hover:border-purple-500/50"}`,children:[h.part2&&T.jsxs("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl shadow-sm",children:[T.jsx("i",{className:"fas fa-check mr-1"})," Done"]}),T.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform ${h.part2?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:T.jsx("i",{className:"fas fa-layer-group"})}),T.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Part 2: Paragraph Scramble"}),T.jsx("p",{className:"text-slate-400 text-base font-medium mb-4",children:"2 Points"}),T.jsxs("div",{className:`font-bold text-sm uppercase tracking-wider ${h.part2?"text-green-400":"text-purple-400"}`,children:[h.part2?"Review":"Start"," ",T.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]}),T.jsxs("div",{onClick:()=>o("ESSAY"),className:`cursor-pointer bg-white/5 p-8 rounded-[2rem] shadow-2xl border transition-all duration-300 group relative overflow-hidden backdrop-blur-xl ${h.part3?"border-green-500/30 bg-green-500/5":"border-white/10 hover:border-blue-500/50"}`,children:[h.part3&&T.jsxs("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl shadow-sm",children:[T.jsx("i",{className:"fas fa-check mr-1"})," Done"]}),T.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform ${h.part3?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:T.jsx("i",{className:`fas ${t.type==="EMAIL"?"fa-envelope":"fa-pen-nib"}`})}),T.jsxs("h3",{className:"text-xl font-bold text-white mb-3",children:["Part 3: ",ke]}),T.jsx("p",{className:"text-slate-400 text-base font-medium mb-4",children:"6 Points"}),T.jsxs("div",{className:`font-bold text-sm uppercase tracking-wider ${h.part3?"text-green-400":"text-blue-400"}`,children:[h.part3?"Review":"Start"," ",T.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]})]}),T.jsx("div",{className:"flex justify-center",children:T.jsxs("button",{disabled:!st,onClick:()=>o("SUMMARY"),className:`px-10 py-5 rounded-2xl font-bold text-xl shadow-xl flex items-center gap-4 transition-all duration-300 transform ${st?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-blue-500/50 hover:-translate-y-1 cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[T.jsx("i",{className:"fas fa-flag-checkered text-2xl"}),"Finish Unit & Get Certificate"]})})]})}if(r==="SCRAMBLE_WORDS")return T.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[T.jsxs("button",{onClick:lt,className:"flex items-center text-gray-500 hover:text-blue-600 font-bold text-lg transition-colors",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsx(Yi,{title:`Part 1: Sentence Scramble (${x+1}/${t.scrambleSentences.length})`,className:"bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsxs("div",{className:"py-8 space-y-10",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("p",{className:"text-slate-400 mb-4 font-medium text-lg",children:"Arrange the words to make a meaningful sentence"}),T.jsxs("div",{className:`min-h-[120px] bg-black/20 rounded-2xl border-2 border-dashed p-6 flex flex-wrap gap-3 justify-center items-center transition-colors ${Z==="correct"?"border-green-500/50 bg-green-500/10":Z==="wrong"?"border-red-500/50 bg-red-500/10":"border-white/10"}`,children:[q.length===0&&T.jsx("span",{className:"text-slate-500 italic text-lg",children:"Click words below to build sentence"}),q.map(ke=>T.jsx("button",{onClick:()=>We(ke,"selected"),className:"px-5 py-3 bg-white/5 border border-white/10 shadow-sm rounded-xl font-bold text-lg text-white hover:bg-red-500/10 hover:border-red-500/50 transition-colors transform active:scale-95",children:ke.text},ke.id))]}),T.jsxs("div",{className:"h-10 mt-4",children:[Z==="correct"&&T.jsxs("span",{className:"text-green-400 font-bold text-xl flex items-center justify-center gap-2",children:[T.jsx("i",{className:"fas fa-check-circle text-2xl"}),"Correct!"]}),Z==="wrong"&&T.jsxs("span",{className:"text-red-400 font-bold text-xl flex items-center justify-center gap-2",children:[T.jsx("i",{className:"fas fa-times-circle text-2xl"}),"Incorrect, try again."]})]})]}),T.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:O.map(ke=>T.jsx("button",{onClick:()=>We(ke,"pool"),className:"px-5 py-3 bg-blue-500/10 border border-blue-500/20 text-blue-400 rounded-xl font-bold text-lg shadow-sm hover:bg-blue-500/20 hover:-translate-y-1 transition-all",children:ke.text},ke.id))}),T.jsxs("div",{className:"flex justify-center gap-6 pt-6 border-t border-white/10",children:[T.jsxs(Zi,{variant:"secondary",onClick:()=>we(x),children:[T.jsx("i",{className:"fas fa-rotate-right mr-2"})," Reset"]}),Z==="correct"?T.jsxs(Zi,{onClick:U,children:["Next Sentence ",T.jsx("i",{className:"fas fa-arrow-right ml-2"})]}):T.jsx(Zi,{onClick:ne,disabled:q.length===0,children:"Check Answer"})]})]})})]});if(r==="SCRAMBLE_PARAGRAPH")return T.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[T.jsxs("button",{onClick:lt,className:"flex items-center text-gray-500 hover:text-blue-600 font-bold text-lg transition-colors",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsx(Yi,{title:"Part 2: Paragraph Scramble",className:"bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsxs("div",{className:"space-y-8",children:[T.jsx("p",{className:"text-slate-400 text-center text-lg font-medium",children:"Arrange the sentences below to form a logical paragraph."}),T.jsxs("div",{className:`space-y-4 min-h-[200px] p-6 rounded-2xl border-2 border-dashed transition-colors ${L==="correct"?"border-green-500/50 bg-green-500/10":L==="wrong"?"border-red-500/50 bg-red-500/10":"border-white/10 bg-black/20"}`,children:[G.length===0&&T.jsx("div",{className:"text-center text-slate-500 h-full flex items-center justify-center pt-12 text-lg",children:T.jsx("p",{children:"Click sentences from the pool to move them here."})}),G.map((ke,st)=>T.jsxs("div",{onClick:()=>ie(ke,"selected"),className:"p-4 bg-white border border-gray-200 rounded-xl shadow-sm cursor-pointer hover:border-red-300 transition-colors flex gap-4 items-center group",children:[T.jsx("span",{className:"font-bold text-blue-500 w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0 text-lg group-hover:bg-red-50 group-hover:text-red-500 transition-colors",children:st+1}),T.jsx("span",{className:"text-lg text-gray-800",children:ke.text})]},ke.id))]}),T.jsxs("div",{className:"text-center h-8",children:[L==="correct"&&T.jsxs("span",{className:"text-green-400 font-bold text-xl",children:[T.jsx("i",{className:"fas fa-check-circle mr-2"}),"Perfect! Paragraph is correct."]}),L==="wrong"&&T.jsxs("span",{className:"text-red-400 font-bold text-xl",children:[T.jsx("i",{className:"fas fa-times-circle mr-2"}),"Incorrect order. Try again."]})]}),T.jsxs("div",{className:"border-t border-white/10 pt-8",children:[T.jsx("h4",{className:"font-bold text-slate-300 mb-6 text-xl",children:"Sentence Pool"}),T.jsxs("div",{className:"space-y-4",children:[ye.map(ke=>T.jsx("div",{onClick:()=>ie(ke,"pool"),className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl shadow-sm cursor-pointer hover:bg-blue-500/20 hover:shadow-md hover:-translate-y-0.5 transition-all text-blue-200 text-lg font-medium",children:ke.text},ke.id)),ye.length===0&&T.jsx("p",{className:"text-center text-slate-500 italic text-lg",children:"All sentences placed."})]})]}),T.jsxs("div",{className:"flex justify-center gap-6 pt-6",children:[T.jsxs(Zi,{variant:"secondary",onClick:J,children:[T.jsx("i",{className:"fas fa-rotate-right mr-2"})," Reset"]}),T.jsx(Zi,{onClick:fe,disabled:ye.length>0||L==="correct",children:"Check Order"})]})]})})]});const pt=t.type==="EMAIL"?"Email Writing":"Essay Writing",re=t.type==="EMAIL"?"fa-envelope":"fa-feather-alt";return T.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsxs("button",{onClick:lt,className:"flex items-center text-slate-400 hover:text-blue-400 font-bold text-lg transition-colors",children:[T.jsx("i",{className:"fas fa-arrow-left mr-3"})," Back to Menu"]}),T.jsxs("div",{className:"text-sm font-bold text-blue-400 bg-blue-500/10 px-4 py-2 rounded-full border border-blue-500/20 uppercase tracking-wide backdrop-blur-md",children:["Part 3: ",pt]})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[T.jsx("div",{className:"space-y-6",children:T.jsx(Yi,{title:"Writing Task",className:"h-full bg-white/5 border-white/10 shadow-2xl backdrop-blur-2xl",children:T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-6 rounded-2xl text-blue-100",children:[T.jsxs("p",{className:"font-bold mb-2 text-lg flex items-center gap-2 text-blue-400",children:[T.jsx("i",{className:`fas ${re}`})," Prompt:"]}),T.jsxs("p",{className:"italic mb-4 text-lg leading-relaxed font-serif text-slate-200",children:['"',t.essayPrompt,'"']}),T.jsxs("p",{className:"text-sm text-blue-300 bg-blue-500/10 p-3 rounded-lg",children:[T.jsx("span",{className:"font-bold text-blue-400",children:"Hint:"})," ",t.essayHint]})]}),T.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 p-6 rounded-2xl text-purple-100",children:[T.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2 text-lg text-purple-400",children:[T.jsx("i",{className:"fas fa-list-ul"})," Structure Suggestions:"]}),T.jsxs("ul",{className:"space-y-3 list-disc pl-5",children:[T.jsxs("li",{className:"leading-relaxed",children:[T.jsx("span",{className:"font-bold text-purple-400",children:"Introduction:"})," ",t.structure.introduction]}),T.jsxs("li",{className:"leading-relaxed",children:[T.jsx("span",{className:"font-bold text-purple-400",children:"Body:"})," ",t.structure.body]}),T.jsxs("li",{className:"leading-relaxed",children:[T.jsx("span",{className:"font-bold text-purple-400",children:"Conclusion:"})," ",t.structure.conclusion]})]})]}),T.jsx("textarea",{value:I,onChange:ke=>k(ke.target.value),className:"w-full h-80 p-6 rounded-2xl border-2 border-white/10 focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 outline-none resize-none bg-black/20 text-white text-lg leading-loose font-medium shadow-inner transition-all placeholder-slate-600",placeholder:`Type your ${t.type==="EMAIL"?"email":"essay"} here...`}),T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsxs("span",{className:"text-base font-medium text-slate-500",children:[I.split(/\s+/).filter(ke=>ke.length>0).length," words"]}),T.jsxs(Zi,{onClick:me,isLoading:F,disabled:I.length<10,children:[T.jsx("i",{className:"fas fa-paper-plane mr-2"})," AI Grading"]})]})]})})}),T.jsx("div",{className:"space-y-6",children:Te?T.jsxs(Yi,{title:"Assessment Result",className:"h-full bg-white/5 border-blue-500/30 shadow-2xl backdrop-blur-2xl ring-1 ring-blue-500/20",children:[T.jsxs("div",{className:"flex flex-col gap-8 mb-8",children:[T.jsxs("div",{className:"flex items-center gap-8 bg-black/20 p-6 rounded-3xl border border-white/5",children:[T.jsx(ox,{score:Te.score/10*6}),T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("h3",{className:"font-bold text-white text-xl",children:"General Feedback"}),T.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Scaled to 6.0"})]}),T.jsx("p",{className:"text-base text-slate-300 leading-relaxed",children:Te.feedback})]})]}),Te.scoreBreakdown&&T.jsx("div",{className:"w-full",children:T.jsx(Cp,{breakdown:Te.scoreBreakdown})})]}),T.jsxs("div",{className:"space-y-6 max-h-[800px] overflow-y-auto pr-2 custom-scrollbar",children:[Te.rubricFeedback&&Te.rubricFeedback.length>0&&T.jsx(Ip,{rubricFeedback:Te.rubricFeedback}),Te.detailedErrors&&Te.detailedErrors.length>0&&T.jsx(Rp,{errors:Te.detailedErrors}),Te.improvedVersion&&T.jsxs("div",{className:"bg-green-500/10 p-6 rounded-3xl border border-green-500/20 shadow-sm",children:[T.jsxs("h4",{className:"text-green-400 font-bold mb-4 text-base uppercase tracking-wide flex items-center gap-2",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center",children:T.jsx("i",{className:"fas fa-magic"})}),"Improved Version"]}),T.jsx("p",{className:"text-slate-300 text-lg leading-loose font-serif",children:Te.improvedVersion})]})]}),T.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:T.jsxs(Zi,{onClick:Ee,children:["Save Part 3 & Return ",T.jsx("i",{className:"fas fa-save ml-2"})]})})]}):T.jsxs("div",{className:"h-full rounded-[2rem] border-4 border-dashed border-white/10 flex flex-col items-center justify-center text-slate-500 p-12 text-center bg-black/20 backdrop-blur-sm",children:[T.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mb-6 shadow-xl border border-white/5",children:T.jsx("i",{className:"fas fa-robot text-4xl text-blue-400"})}),T.jsxs("p",{className:"text-xl font-medium max-w-md text-slate-400",children:["Write your ",t.type==="EMAIL"?"email":"essay",' on the left and click "AI Grading" to get instant feedback from Gemini.']})]})})]})]})},qA=({selectedModel:n,onSelectModel:e,apiKey:t,onApiKeyChange:i})=>T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-slate-400 mb-3 uppercase tracking-wider",children:"1. Select AI Model"}),T.jsx("div",{className:"grid grid-cols-3 gap-3",children:L0.map(r=>T.jsxs("button",{onClick:()=>e(r.id),className:`relative p-3 rounded-2xl border-2 transition-all duration-300 flex flex-col items-center justify-center text-center gap-2 group hover:shadow-xl ${n===r.id?`${r.borderColor} ${r.bgColor} ring-2 ring-offset-2 ring-blue-500/50`:"border-white/5 bg-white/5 hover:border-white/20 hover:bg-white/10"}`,children:[r.badge&&T.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm whitespace-nowrap z-10",children:r.badge}),T.jsx("div",{className:`text-2xl mb-1 ${n===r.id?r.color:"text-slate-500 group-hover:text-slate-300"}`,children:T.jsx("i",{className:`fas ${r.icon}`})}),T.jsx("div",{className:"font-bold text-white text-sm leading-tight",children:r.name}),T.jsx("div",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:r.desc})]},r.id))}),T.jsxs("p",{className:"text-center text-xs text-slate-500 mt-3 font-medium",children:[T.jsx("i",{className:"fas fa-info-circle mr-1"}),"If a model fails, the system will automatically switch to another model"]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-bold text-slate-400 mb-3 uppercase tracking-wider",children:"2. API Key"}),T.jsxs("div",{className:"relative group",children:[T.jsx("i",{className:"fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors"}),T.jsx("input",{type:"password",placeholder:"Paste your API Key here...",className:"w-full pl-10 pr-4 py-3 bg-black/20 border-2 border-white/10 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 focus:outline-none transition-all font-medium placeholder-slate-600 shadow-sm text-sm text-white",value:t,onChange:r=>i(r.target.value)})]})]})]}),nO=["Hoa Quang An","Pham Quynh Anh","Ha Thi Minh Anh","Cao Nguyen Quynh Anh","Tran Nguyet Anh","Nguyen Thi Thu Ha","Hoa Gia Binh","Hoang Van Cong Chinh","Nguyen Manh Cuong","Tran Thi Dung","Nguyen Thanh Dat","Nguyen Phuc Dien","Nguyen Trung Duc","Nguyen Le Gia Han","Nguyen Phuong Hien","Nguyen Hoang Gia Huynh","Duong Gia Hung","Dinh Van Hung","Le Dinh Khoi","Nguyen Thi Ngoc Lan","Huynh Dang Khanh Linh","Pham Vu Thuy Linh","Nguyen Bui Yen Linh","Dang Hoang Long","Nguyen Khanh Ly","Tran Hoang Minh","Tran Nu Nguyet Nga","Tran Nhu Ngoc","Le Thi Nhu Ngoc","Tran Nu Bao Ngoc","Tran Hoang Nguyen","Nguyen Thao Nguyen","Phan Duy Nguyen","Nguyen Thi Thanh Nhan","Bui Thien Nhan","Nguyen Ngoc Uyen Nhi","Vu Nguyen Tue Nhi","Nguyen Hoang Tam Nhu","Le Kim Phat","Nguyen Ba Phi","Dinh Xuan Hoang Phuc","Ta Pham Minh Phuc","Tran Huu Quang","Nguyen Tien Sang","Tran Minh Thong","Vu Le Phuong Thuy","Vo Bao Thuy","Nguyen Anh Thu","Le Trinh Anh Thu","Pham Anh Thu","Nguyen Thuy Tien","Nguyen Phuong Uyen","Vu Thi Ha Vy"],iO=({onLogin:n})=>{const[e,t]=Nt.useState(""),[i,r]=Nt.useState(""),[o,l]=Nt.useState("gemini-3-pro-preview"),[c,h]=Nt.useState(null);Nt.useEffect(()=>{const b=localStorage.getItem("lingua_api_key");b&&r(b);const S=localStorage.getItem("lingua_model");S&&l(S)},[]);const f=nO.filter(b=>b.toLowerCase().includes(e.toLowerCase())),p=()=>{if(!i.trim()){alert("Please enter a valid Gemini API Key to continue.");return}if(!c){alert("Please select your name from the list.");return}n(c,i,o)};return T.jsxs("div",{className:"min-h-screen bg-[#0F172A] flex flex-col items-center justify-center p-4 font-sans relative overflow-hidden",children:[T.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[T.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-blue-600/10 blur-[120px] rounded-full"}),T.jsx("div",{className:"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-indigo-600/10 blur-[120px] rounded-full"})]}),T.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-start animate-fade-in-up z-10 my-auto",children:[T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"text-left md:text-left text-center",children:[T.jsx("div",{className:"inline-block w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-xl shadow-blue-500/30 mb-4",children:T.jsx("i",{className:"fas fa-shapes text-3xl"})}),T.jsx("h1",{className:"text-3xl font-extrabold text-white tracking-tight mb-2",children:"Welcome Class!"}),T.jsx("p",{className:"text-base text-slate-400 font-medium",children:"Setup your AI connection & identity."}),T.jsx("div",{className:"mt-4",children:T.jsxs("a",{href:"https://aistudio.google.com/api-keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm font-bold text-red-500 bg-red-50 px-3 py-1.5 rounded-lg border border-red-100 hover:bg-red-100 transition-colors",children:[T.jsx("i",{className:"fas fa-key"})," Get free API key here"]})})]}),T.jsx(Yi,{className:"!rounded-3xl border border-white/10 shadow-2xl backdrop-blur-2xl bg-white/5",children:T.jsx(qA,{apiKey:i,onApiKeyChange:r,selectedModel:o,onSelectModel:l})})]}),T.jsxs(Yi,{className:"!p-0 !rounded-3xl border border-white/10 shadow-2xl backdrop-blur-2xl bg-white/5 overflow-visible h-full flex flex-col",children:[T.jsxs("div",{className:"p-6 border-b border-white/5 sticky top-0 z-10 rounded-t-3xl backdrop-blur-md bg-transparent",children:[T.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-3 uppercase tracking-wider",children:"3. Select Your Name"}),T.jsxs("div",{className:"relative group",children:[T.jsx("i",{className:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg group-focus-within:text-blue-400 transition-colors"}),T.jsx("input",{type:"text",placeholder:"Search your name...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border-2 border-white/10 rounded-xl focus:bg-white/10 focus:border-blue-500/50 focus:outline-none transition-all text-base font-medium placeholder-slate-500 text-white",value:e,onChange:b=>t(b.target.value)})]})]}),T.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-transparent p-3 space-y-2 min-h-[300px] max-h-[500px]",children:f.length>0?f.map((b,S)=>T.jsxs("button",{onClick:()=>h(b),className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-200 flex items-center gap-3 border-2 ${c===b?"bg-blue-600/20 border-blue-500/50 shadow-lg":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/10"}`,children:[T.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm transition-colors shrink-0 ${c===b?"bg-blue-500 text-white":"bg-white/10 text-slate-400"}`,children:b.charAt(0)}),T.jsx("span",{className:`font-semibold text-sm ${c===b?"text-blue-400":"text-slate-300"}`,children:b}),c===b&&T.jsx("div",{className:"ml-auto text-blue-500",children:T.jsx("i",{className:"fas fa-check-circle text-lg"})})]},S)):T.jsx("div",{className:"p-8 text-center text-gray-400",children:T.jsx("p",{className:"text-sm font-medium",children:"No student found."})})}),T.jsx("div",{className:"p-6 bg-transparent border-t border-white/5 rounded-b-3xl relative z-20",children:T.jsxs(Zi,{onClick:p,className:"w-full py-4 text-lg shadow-xl shadow-blue-500/20",disabled:!c||!i.trim(),children:["Start Learning ",T.jsx("i",{className:"fas fa-arrow-right ml-2"})]})})]})]}),T.jsx("footer",{className:"mt-8 py-4 text-center text-blue-400 text-[10px] font-bold uppercase tracking-widest opacity-80",children:"DEVELOPED BY TEACHER VO THI THU HA - TRAN HUNG DAO HIGH SCHOOL - LAM DONG"})]})},rO=({isOpen:n,onClose:e,apiKey:t,setApiKey:i,selectedModel:r,setModel:o,onSave:l})=>n?T.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[T.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity",onClick:e}),T.jsxs("div",{className:"bg-[#1E293B] border border-white/10 rounded-[2rem] shadow-2xl w-full max-w-lg relative z-10 animate-fade-in-up overflow-hidden backdrop-blur-2xl",children:[T.jsxs("div",{className:"px-8 py-6 border-b border-white/10 flex items-center justify-between bg-white/5",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-600 text-white flex items-center justify-center text-xl shadow-lg shadow-blue-500/20",children:T.jsx("i",{className:"fas fa-cog fa-spin-slow"})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-extrabold text-white",children:"Model & API Key Settings"}),T.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"Configure AI for your application"})]})]}),T.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white flex items-center justify-center transition-colors",children:T.jsx("i",{className:"fas fa-times"})})]}),T.jsxs("div",{className:"p-8",children:[T.jsx(qA,{apiKey:t,onApiKeyChange:i,selectedModel:r,onSelectModel:o}),T.jsx("div",{className:"mt-8",children:T.jsxs(Zi,{onClick:l,className:"w-full py-4 text-lg shadow-xl shadow-blue-600/20",children:[T.jsx("i",{className:"fas fa-save mr-2"})," Save & Continue"]})})]})]})]}):null;function sO(){var q;const[n,e]=Nt.useState(null),[t,i]=Nt.useState(Il.DASHBOARD),[r,o]=Nt.useState(!1),[l,c]=Nt.useState(""),[h,f]=Nt.useState("gemini-3-pro-preview"),[p,b]=Nt.useState({speakingScore:[],writingScore:[],lessonsCompleted:0,streak:1,lastPractice:new Date().toISOString()});Nt.useEffect(()=>{const X=localStorage.getItem("lingua_current_user"),Z=localStorage.getItem("lingua_api_key"),W=localStorage.getItem("lingua_model");X&&Z&&(C0(Z),c(Z),W&&(I0(W),f(W)),S(X,Z,W||"gemini-3-pro-preview"))},[]);const S=(X,Z,W)=>{e(X),localStorage.setItem("lingua_current_user",X),C0(Z),localStorage.setItem("lingua_api_key",Z),c(Z),I0(W),localStorage.setItem("lingua_model",W),f(W),(async()=>{try{const de=await N6(X);if(de){b(de);return}const G=`lingua_stats_${X.replace(/\s+/g,"_")}`,V=localStorage.getItem(G);if(V){const L=JSON.parse(V);b(L),Qg(X,L)}else{const L={speakingScore:[],writingScore:[],lessonsCompleted:0,streak:1,lastPractice:new Date().toISOString()};b(L),Qg(X,L)}}catch(de){console.error("Error loading stats during login:",de)}})()},x=()=>{e(null),localStorage.removeItem("lingua_current_user"),b({speakingScore:[],writingScore:[],lessonsCompleted:0,streak:1,lastPractice:new Date().toISOString()}),i(Il.DASHBOARD)},D=()=>{C0(l),I0(h),localStorage.setItem("lingua_api_key",l),localStorage.setItem("lingua_model",h),o(!1)},O=(X,Z)=>{if(!n)return;const W={...p};Z==="speaking"?W.speakingScore=[...W.speakingScore,X]:W.writingScore=[...W.writingScore,X],W.lessonsCompleted+=1,W.lastPractice=new Date().toISOString(),b(W),Qg(n,W).catch(de=>console.error("Cloud save failed:",de));const ye=`lingua_stats_${n.replace(/\s+/g,"_")}`;localStorage.setItem(ye,JSON.stringify(W))},B=[{id:Il.DASHBOARD,label:"Overview",icon:"fa-chart-pie"},{id:Il.SPEAKING,label:"Speaking",icon:"fa-microphone"},{id:Il.WRITING,label:"Writing",icon:"fa-pen-nib"}];return n?(L0.find(X=>X.id===h)||L0[0],T.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row font-sans text-slate-100 bg-[#0F172A]",children:[T.jsxs("aside",{className:"w-full md:w-80 bg-slate-900/60 backdrop-blur-2xl border-r border-white/10 flex-shrink-0 sticky top-0 md:h-screen z-20 flex flex-col shadow-2xl",children:[T.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[T.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-lg shadow-blue-500/30 transform hover:scale-110 transition-transform",children:T.jsx("i",{className:"fas fa-shapes text-2xl"})}),T.jsxs("div",{children:[T.jsxs("h1",{className:"font-extrabold text-2xl tracking-tight text-white leading-none",children:["Lingua",T.jsx("span",{className:"text-blue-500",children:"AI"})]}),T.jsx("p",{className:"text-sm text-slate-400 font-semibold tracking-wide mt-1",children:"English Mastery"})]})]}),T.jsx("div",{className:"px-8 py-6",children:T.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10 shadow-sm",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-xl shadow-sm ring-2 ring-white/10",children:n.charAt(0)}),T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"text-xs text-blue-400 uppercase font-bold tracking-wider mb-0.5",children:n==="Nguyen Thi Thu Ha"?"Teacher":"Student"}),T.jsx("p",{className:"font-bold text-lg text-white truncate",children:n})]})]})}),T.jsx("nav",{className:"flex-1 px-6 space-y-3 overflow-y-auto py-2",children:B.map(X=>T.jsxs("button",{onClick:()=>i(X.id),className:`w-full flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 font-bold text-lg group ${t===X.id?"bg-blue-600 text-white shadow-xl shadow-blue-600/20":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[T.jsx("i",{className:`fas ${X.icon} w-8 text-center text-xl transition-transform group-hover:scale-110`}),X.label,t===X.id&&T.jsx("i",{className:"fas fa-chevron-right ml-auto text-sm opacity-50"})]},X.id))}),T.jsx("div",{className:"p-6 border-t border-white/5",children:T.jsxs("button",{onClick:x,className:"w-full flex items-center gap-4 px-6 py-4 text-red-400 hover:bg-red-400/10 rounded-2xl transition-colors font-bold text-lg",children:[T.jsx("i",{className:"fas fa-sign-out-alt w-8 text-center text-xl"}),"Sign Out"]})})]}),T.jsx("main",{className:"flex-1 overflow-y-auto h-screen custom-scrollbar",children:T.jsxs("div",{className:"max-w-7xl mx-auto p-6 md:p-12 flex flex-col min-h-full",children:[T.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-4xl font-extrabold text-white tracking-tight",children:(q=B.find(X=>X.id===t))==null?void 0:q.label}),T.jsxs("p",{className:"text-slate-400 text-lg mt-2",children:["Welcome back, ",T.jsx("span",{className:"font-bold text-blue-400",children:n}),"! Ready to learn?"]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"hidden md:flex px-5 py-2.5 bg-white/5 rounded-full border border-white/10 shadow-sm items-center gap-3",children:[T.jsxs("div",{className:"relative flex h-3 w-3",children:[T.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),T.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),T.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Connected"})]}),T.jsxs("button",{onClick:()=>o(!0),className:"flex flex-col items-end group",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 shadow-sm hover:shadow-md flex items-center justify-center text-slate-400 transition-all group-hover:border-blue-500/50 group-hover:text-blue-400",children:T.jsx("i",{className:"fas fa-cog text-xl"})}),(!l||l.length<10)&&T.jsx("span",{className:"text-[10px] font-bold text-red-500 mt-1 bg-red-50 px-2 py-0.5 rounded-md border border-red-100 whitespace-nowrap animate-pulse",children:"Get API Key to use the app"})]})]})]}),T.jsx(rO,{isOpen:r,onClose:()=>o(!1),apiKey:l,setApiKey:c,selectedModel:h,setModel:f,onSave:D}),T.jsxs("div",{className:"animate-fade-in-up pb-10 flex-1",children:[t===Il.DASHBOARD&&(n==="Nguyen Thi Thu Ha"?T.jsx(I6,{}):T.jsx(hN,{stats:p})),t===Il.SPEAKING&&T.jsx(Z9,{onComplete:X=>O(X,"speaking"),studentName:n}),t===Il.WRITING&&T.jsx(tO,{onComplete:X=>O(X,"writing"),studentName:n})]}),T.jsx("footer",{className:"py-6 text-center text-blue-400 text-xs font-bold uppercase tracking-widest border-t border-white/5 mt-auto",children:"DEVELOPED BY TEACHER VO THI THU HA - TRAN HUNG DAO HIGH SCHOOL - LAM DONG"})]})})]})):T.jsx(iO,{onLogin:S})}const HA=document.getElementById("root");if(!HA)throw new Error("Could not find root element to mount to");const oO=uN.createRoot(HA);oO.render(T.jsx(tN.StrictMode,{children:T.jsx(sO,{})}));export{ei as _,lO as c,N1 as g};
